function Vy(r,s){for(var i=0;i<s.length;i++){const o=s[i];if(typeof o!="string"&&!Array.isArray(o)){for(const c in o)if(c!=="default"&&!(c in r)){const u=Object.getOwnPropertyDescriptor(o,c);u&&Object.defineProperty(r,c,u.get?u:{enumerable:!0,get:()=>o[c]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))o(c);new MutationObserver(c=>{for(const u of c)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&o(h)}).observe(document,{childList:!0,subtree:!0});function i(c){const u={};return c.integrity&&(u.integrity=c.integrity),c.referrerPolicy&&(u.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?u.credentials="include":c.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function o(c){if(c.ep)return;c.ep=!0;const u=i(c);fetch(c.href,u)}})();function Od(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function Gy(r){if(Object.prototype.hasOwnProperty.call(r,"__esModule"))return r;var s=r.default;if(typeof s=="function"){var i=function o(){return this instanceof o?Reflect.construct(s,arguments,this.constructor):s.apply(this,arguments)};i.prototype=s.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(r).forEach(function(o){var c=Object.getOwnPropertyDescriptor(r,o);Object.defineProperty(i,o,c.get?c:{enumerable:!0,get:function(){return r[o]}})}),i}var Yu={exports:{}},oi={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xp;function Yy(){if(Xp)return oi;Xp=1;var r=Symbol.for("react.transitional.element"),s=Symbol.for("react.fragment");function i(o,c,u){var h=null;if(u!==void 0&&(h=""+u),c.key!==void 0&&(h=""+c.key),"key"in c){u={};for(var g in c)g!=="key"&&(u[g]=c[g])}else u=c;return c=u.ref,{$$typeof:r,type:o,key:h,ref:c!==void 0?c:null,props:u}}return oi.Fragment=s,oi.jsx=i,oi.jsxs=i,oi}var Wp;function Ky(){return Wp||(Wp=1,Yu.exports=Yy()),Yu.exports}var a=Ky(),Ku={exports:{}},ve={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zp;function Fy(){if(Zp)return ve;Zp=1;var r=Symbol.for("react.transitional.element"),s=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),h=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),w=Symbol.for("react.activity"),j=Symbol.iterator;function _(T){return T===null||typeof T!="object"?null:(T=j&&T[j]||T["@@iterator"],typeof T=="function"?T:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,y={};function k(T,V,te){this.props=T,this.context=V,this.refs=y,this.updater=te||v}k.prototype.isReactComponent={},k.prototype.setState=function(T,V){if(typeof T!="object"&&typeof T!="function"&&T!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,T,V,"setState")},k.prototype.forceUpdate=function(T){this.updater.enqueueForceUpdate(this,T,"forceUpdate")};function R(){}R.prototype=k.prototype;function A(T,V,te){this.props=T,this.context=V,this.refs=y,this.updater=te||v}var q=A.prototype=new R;q.constructor=A,E(q,k.prototype),q.isPureReactComponent=!0;var L=Array.isArray;function Q(){}var B={H:null,A:null,T:null,S:null},Z=Object.prototype.hasOwnProperty;function M(T,V,te){var ee=te.ref;return{$$typeof:r,type:T,key:V,ref:ee!==void 0?ee:null,props:te}}function ae(T,V){return M(T.type,V,T.props)}function ce(T){return typeof T=="object"&&T!==null&&T.$$typeof===r}function I(T){var V={"=":"=0",":":"=2"};return"$"+T.replace(/[=:]/g,function(te){return V[te]})}var K=/\/+/g;function H(T,V){return typeof T=="object"&&T!==null&&T.key!=null?I(""+T.key):V.toString(36)}function J(T){switch(T.status){case"fulfilled":return T.value;case"rejected":throw T.reason;default:switch(typeof T.status=="string"?T.then(Q,Q):(T.status="pending",T.then(function(V){T.status==="pending"&&(T.status="fulfilled",T.value=V)},function(V){T.status==="pending"&&(T.status="rejected",T.reason=V)})),T.status){case"fulfilled":return T.value;case"rejected":throw T.reason}}throw T}function D(T,V,te,ee,ne){var de=typeof T;(de==="undefined"||de==="boolean")&&(T=null);var oe=!1;if(T===null)oe=!0;else switch(de){case"bigint":case"string":case"number":oe=!0;break;case"object":switch(T.$$typeof){case r:case s:oe=!0;break;case b:return oe=T._init,D(oe(T._payload),V,te,ee,ne)}}if(oe)return ne=ne(T),oe=ee===""?"."+H(T,0):ee,L(ne)?(te="",oe!=null&&(te=oe.replace(K,"$&/")+"/"),D(ne,V,te,"",function(Ve){return Ve})):ne!=null&&(ce(ne)&&(ne=ae(ne,te+(ne.key==null||T&&T.key===ne.key?"":(""+ne.key).replace(K,"$&/")+"/")+oe)),V.push(ne)),1;oe=0;var Ae=ee===""?".":ee+":";if(L(T))for(var De=0;De<T.length;De++)ee=T[De],de=Ae+H(ee,De),oe+=D(ee,V,te,de,ne);else if(De=_(T),typeof De=="function")for(T=De.call(T),De=0;!(ee=T.next()).done;)ee=ee.value,de=Ae+H(ee,De++),oe+=D(ee,V,te,de,ne);else if(de==="object"){if(typeof T.then=="function")return D(J(T),V,te,ee,ne);throw V=String(T),Error("Objects are not valid as a React child (found: "+(V==="[object Object]"?"object with keys {"+Object.keys(T).join(", ")+"}":V)+"). If you meant to render a collection of children, use an array instead.")}return oe}function W(T,V,te){if(T==null)return T;var ee=[],ne=0;return D(T,ee,"","",function(de){return V.call(te,de,ne++)}),ee}function se(T){if(T._status===-1){var V=T._result;V=V(),V.then(function(te){(T._status===0||T._status===-1)&&(T._status=1,T._result=te)},function(te){(T._status===0||T._status===-1)&&(T._status=2,T._result=te)}),T._status===-1&&(T._status=0,T._result=V)}if(T._status===1)return T._result.default;throw T._result}var me=typeof reportError=="function"?reportError:function(T){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var V=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof T=="object"&&T!==null&&typeof T.message=="string"?String(T.message):String(T),error:T});if(!window.dispatchEvent(V))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",T);return}console.error(T)},je={map:W,forEach:function(T,V,te){W(T,function(){V.apply(this,arguments)},te)},count:function(T){var V=0;return W(T,function(){V++}),V},toArray:function(T){return W(T,function(V){return V})||[]},only:function(T){if(!ce(T))throw Error("React.Children.only expected to receive a single React element child.");return T}};return ve.Activity=w,ve.Children=je,ve.Component=k,ve.Fragment=i,ve.Profiler=c,ve.PureComponent=A,ve.StrictMode=o,ve.Suspense=m,ve.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=B,ve.__COMPILER_RUNTIME={__proto__:null,c:function(T){return B.H.useMemoCache(T)}},ve.cache=function(T){return function(){return T.apply(null,arguments)}},ve.cacheSignal=function(){return null},ve.cloneElement=function(T,V,te){if(T==null)throw Error("The argument must be a React element, but you passed "+T+".");var ee=E({},T.props),ne=T.key;if(V!=null)for(de in V.key!==void 0&&(ne=""+V.key),V)!Z.call(V,de)||de==="key"||de==="__self"||de==="__source"||de==="ref"&&V.ref===void 0||(ee[de]=V[de]);var de=arguments.length-2;if(de===1)ee.children=te;else if(1<de){for(var oe=Array(de),Ae=0;Ae<de;Ae++)oe[Ae]=arguments[Ae+2];ee.children=oe}return M(T.type,ne,ee)},ve.createContext=function(T){return T={$$typeof:h,_currentValue:T,_currentValue2:T,_threadCount:0,Provider:null,Consumer:null},T.Provider=T,T.Consumer={$$typeof:u,_context:T},T},ve.createElement=function(T,V,te){var ee,ne={},de=null;if(V!=null)for(ee in V.key!==void 0&&(de=""+V.key),V)Z.call(V,ee)&&ee!=="key"&&ee!=="__self"&&ee!=="__source"&&(ne[ee]=V[ee]);var oe=arguments.length-2;if(oe===1)ne.children=te;else if(1<oe){for(var Ae=Array(oe),De=0;De<oe;De++)Ae[De]=arguments[De+2];ne.children=Ae}if(T&&T.defaultProps)for(ee in oe=T.defaultProps,oe)ne[ee]===void 0&&(ne[ee]=oe[ee]);return M(T,de,ne)},ve.createRef=function(){return{current:null}},ve.forwardRef=function(T){return{$$typeof:g,render:T}},ve.isValidElement=ce,ve.lazy=function(T){return{$$typeof:b,_payload:{_status:-1,_result:T},_init:se}},ve.memo=function(T,V){return{$$typeof:p,type:T,compare:V===void 0?null:V}},ve.startTransition=function(T){var V=B.T,te={};B.T=te;try{var ee=T(),ne=B.S;ne!==null&&ne(te,ee),typeof ee=="object"&&ee!==null&&typeof ee.then=="function"&&ee.then(Q,me)}catch(de){me(de)}finally{V!==null&&te.types!==null&&(V.types=te.types),B.T=V}},ve.unstable_useCacheRefresh=function(){return B.H.useCacheRefresh()},ve.use=function(T){return B.H.use(T)},ve.useActionState=function(T,V,te){return B.H.useActionState(T,V,te)},ve.useCallback=function(T,V){return B.H.useCallback(T,V)},ve.useContext=function(T){return B.H.useContext(T)},ve.useDebugValue=function(){},ve.useDeferredValue=function(T,V){return B.H.useDeferredValue(T,V)},ve.useEffect=function(T,V){return B.H.useEffect(T,V)},ve.useEffectEvent=function(T){return B.H.useEffectEvent(T)},ve.useId=function(){return B.H.useId()},ve.useImperativeHandle=function(T,V,te){return B.H.useImperativeHandle(T,V,te)},ve.useInsertionEffect=function(T,V){return B.H.useInsertionEffect(T,V)},ve.useLayoutEffect=function(T,V){return B.H.useLayoutEffect(T,V)},ve.useMemo=function(T,V){return B.H.useMemo(T,V)},ve.useOptimistic=function(T,V){return B.H.useOptimistic(T,V)},ve.useReducer=function(T,V,te){return B.H.useReducer(T,V,te)},ve.useRef=function(T){return B.H.useRef(T)},ve.useState=function(T){return B.H.useState(T)},ve.useSyncExternalStore=function(T,V,te){return B.H.useSyncExternalStore(T,V,te)},ve.useTransition=function(){return B.H.useTransition()},ve.version="19.2.0",ve}var eg;function Dd(){return eg||(eg=1,Ku.exports=Fy()),Ku.exports}var S=Dd();const gi=Od(S);var Fu={exports:{}},ci={},Qu={exports:{}},Ju={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tg;function Qy(){return tg||(tg=1,(function(r){function s(D,W){var se=D.length;D.push(W);e:for(;0<se;){var me=se-1>>>1,je=D[me];if(0<c(je,W))D[me]=W,D[se]=je,se=me;else break e}}function i(D){return D.length===0?null:D[0]}function o(D){if(D.length===0)return null;var W=D[0],se=D.pop();if(se!==W){D[0]=se;e:for(var me=0,je=D.length,T=je>>>1;me<T;){var V=2*(me+1)-1,te=D[V],ee=V+1,ne=D[ee];if(0>c(te,se))ee<je&&0>c(ne,te)?(D[me]=ne,D[ee]=se,me=ee):(D[me]=te,D[V]=se,me=V);else if(ee<je&&0>c(ne,se))D[me]=ne,D[ee]=se,me=ee;else break e}}return W}function c(D,W){var se=D.sortIndex-W.sortIndex;return se!==0?se:D.id-W.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;r.unstable_now=function(){return u.now()}}else{var h=Date,g=h.now();r.unstable_now=function(){return h.now()-g}}var m=[],p=[],b=1,w=null,j=3,_=!1,v=!1,E=!1,y=!1,k=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;function q(D){for(var W=i(p);W!==null;){if(W.callback===null)o(p);else if(W.startTime<=D)o(p),W.sortIndex=W.expirationTime,s(m,W);else break;W=i(p)}}function L(D){if(E=!1,q(D),!v)if(i(m)!==null)v=!0,Q||(Q=!0,I());else{var W=i(p);W!==null&&J(L,W.startTime-D)}}var Q=!1,B=-1,Z=5,M=-1;function ae(){return y?!0:!(r.unstable_now()-M<Z)}function ce(){if(y=!1,Q){var D=r.unstable_now();M=D;var W=!0;try{e:{v=!1,E&&(E=!1,R(B),B=-1),_=!0;var se=j;try{t:{for(q(D),w=i(m);w!==null&&!(w.expirationTime>D&&ae());){var me=w.callback;if(typeof me=="function"){w.callback=null,j=w.priorityLevel;var je=me(w.expirationTime<=D);if(D=r.unstable_now(),typeof je=="function"){w.callback=je,q(D),W=!0;break t}w===i(m)&&o(m),q(D)}else o(m);w=i(m)}if(w!==null)W=!0;else{var T=i(p);T!==null&&J(L,T.startTime-D),W=!1}}break e}finally{w=null,j=se,_=!1}W=void 0}}finally{W?I():Q=!1}}}var I;if(typeof A=="function")I=function(){A(ce)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,H=K.port2;K.port1.onmessage=ce,I=function(){H.postMessage(null)}}else I=function(){k(ce,0)};function J(D,W){B=k(function(){D(r.unstable_now())},W)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(D){D.callback=null},r.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Z=0<D?Math.floor(1e3/D):5},r.unstable_getCurrentPriorityLevel=function(){return j},r.unstable_next=function(D){switch(j){case 1:case 2:case 3:var W=3;break;default:W=j}var se=j;j=W;try{return D()}finally{j=se}},r.unstable_requestPaint=function(){y=!0},r.unstable_runWithPriority=function(D,W){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var se=j;j=D;try{return W()}finally{j=se}},r.unstable_scheduleCallback=function(D,W,se){var me=r.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?me+se:me):se=me,D){case 1:var je=-1;break;case 2:je=250;break;case 5:je=1073741823;break;case 4:je=1e4;break;default:je=5e3}return je=se+je,D={id:b++,callback:W,priorityLevel:D,startTime:se,expirationTime:je,sortIndex:-1},se>me?(D.sortIndex=se,s(p,D),i(m)===null&&D===i(p)&&(E?(R(B),B=-1):E=!0,J(L,se-me))):(D.sortIndex=je,s(m,D),v||_||(v=!0,Q||(Q=!0,I()))),D},r.unstable_shouldYield=ae,r.unstable_wrapCallback=function(D){var W=j;return function(){var se=j;j=W;try{return D.apply(this,arguments)}finally{j=se}}}})(Ju)),Ju}var ag;function Jy(){return ag||(ag=1,Qu.exports=Qy()),Qu.exports}var Xu={exports:{}},bt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sg;function Xy(){if(sg)return bt;sg=1;var r=Dd();function s(m){var p="https://react.dev/errors/"+m;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)p+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+m+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var o={d:{f:i,r:function(){throw Error(s(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},c=Symbol.for("react.portal");function u(m,p,b){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:w==null?null:""+w,children:m,containerInfo:p,implementation:b}}var h=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(m,p){if(m==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return bt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,bt.createPortal=function(m,p){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(s(299));return u(m,p,null,b)},bt.flushSync=function(m){var p=h.T,b=o.p;try{if(h.T=null,o.p=2,m)return m()}finally{h.T=p,o.p=b,o.d.f()}},bt.preconnect=function(m,p){typeof m=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,o.d.C(m,p))},bt.prefetchDNS=function(m){typeof m=="string"&&o.d.D(m)},bt.preinit=function(m,p){if(typeof m=="string"&&p&&typeof p.as=="string"){var b=p.as,w=g(b,p.crossOrigin),j=typeof p.integrity=="string"?p.integrity:void 0,_=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;b==="style"?o.d.S(m,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:w,integrity:j,fetchPriority:_}):b==="script"&&o.d.X(m,{crossOrigin:w,integrity:j,fetchPriority:_,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},bt.preinitModule=function(m,p){if(typeof m=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var b=g(p.as,p.crossOrigin);o.d.M(m,{crossOrigin:b,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&o.d.M(m)},bt.preload=function(m,p){if(typeof m=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var b=p.as,w=g(b,p.crossOrigin);o.d.L(m,b,{crossOrigin:w,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},bt.preloadModule=function(m,p){if(typeof m=="string")if(p){var b=g(p.as,p.crossOrigin);o.d.m(m,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:b,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else o.d.m(m)},bt.requestFormReset=function(m){o.d.r(m)},bt.unstable_batchedUpdates=function(m,p){return m(p)},bt.useFormState=function(m,p,b){return h.H.useFormState(m,p,b)},bt.useFormStatus=function(){return h.H.useHostTransitionStatus()},bt.version="19.2.0",bt}var ng;function Wy(){if(ng)return Xu.exports;ng=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(s){console.error(s)}}return r(),Xu.exports=Xy(),Xu.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rg;function Zy(){if(rg)return ci;rg=1;var r=Jy(),s=Dd(),i=Wy();function o(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function c(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function u(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function h(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function g(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function m(e){if(u(e)!==e)throw Error(o(188))}function p(e){var t=e.alternate;if(!t){if(t=u(e),t===null)throw Error(o(188));return t!==e?null:e}for(var n=e,l=t;;){var d=n.return;if(d===null)break;var f=d.alternate;if(f===null){if(l=d.return,l!==null){n=l;continue}break}if(d.child===f.child){for(f=d.child;f;){if(f===n)return m(d),e;if(f===l)return m(d),t;f=f.sibling}throw Error(o(188))}if(n.return!==l.return)n=d,l=f;else{for(var x=!1,N=d.child;N;){if(N===n){x=!0,n=d,l=f;break}if(N===l){x=!0,l=d,n=f;break}N=N.sibling}if(!x){for(N=f.child;N;){if(N===n){x=!0,n=f,l=d;break}if(N===l){x=!0,l=f,n=d;break}N=N.sibling}if(!x)throw Error(o(189))}}if(n.alternate!==l)throw Error(o(190))}if(n.tag!==3)throw Error(o(188));return n.stateNode.current===n?e:t}function b(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=b(e),t!==null)return t;e=e.sibling}return null}var w=Object.assign,j=Symbol.for("react.element"),_=Symbol.for("react.transitional.element"),v=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),y=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),R=Symbol.for("react.consumer"),A=Symbol.for("react.context"),q=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),Q=Symbol.for("react.suspense_list"),B=Symbol.for("react.memo"),Z=Symbol.for("react.lazy"),M=Symbol.for("react.activity"),ae=Symbol.for("react.memo_cache_sentinel"),ce=Symbol.iterator;function I(e){return e===null||typeof e!="object"?null:(e=ce&&e[ce]||e["@@iterator"],typeof e=="function"?e:null)}var K=Symbol.for("react.client.reference");function H(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===K?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case E:return"Fragment";case k:return"Profiler";case y:return"StrictMode";case L:return"Suspense";case Q:return"SuspenseList";case M:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case v:return"Portal";case A:return e.displayName||"Context";case R:return(e._context.displayName||"Context")+".Consumer";case q:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case B:return t=e.displayName||null,t!==null?t:H(e.type)||"Memo";case Z:t=e._payload,e=e._init;try{return H(e(t))}catch{}}return null}var J=Array.isArray,D=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,se={pending:!1,data:null,method:null,action:null},me=[],je=-1;function T(e){return{current:e}}function V(e){0>je||(e.current=me[je],me[je]=null,je--)}function te(e,t){je++,me[je]=e.current,e.current=t}var ee=T(null),ne=T(null),de=T(null),oe=T(null);function Ae(e,t){switch(te(de,t),te(ne,e),te(ee,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?yp(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=yp(t),e=wp(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}V(ee),te(ee,e)}function De(){V(ee),V(ne),V(de)}function Ve(e){e.memoizedState!==null&&te(oe,e);var t=ee.current,n=wp(t,e.type);t!==n&&(te(ne,e),te(ee,n))}function pa(e){ne.current===e&&(V(ee),V(ne)),oe.current===e&&(V(oe),ni._currentValue=se)}var Gt,pr;function ga(e){if(Gt===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Gt=t&&t[1]||"",pr=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Gt+e+pr}var rn=!1;function ln(e,t){if(!e||rn)return"";rn=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(t){var X=function(){throw Error()};if(Object.defineProperty(X.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(X,[])}catch(G){var P=G}Reflect.construct(e,[],X)}else{try{X.call()}catch(G){P=G}e.call(X.prototype)}}else{try{throw Error()}catch(G){P=G}(X=e())&&typeof X.catch=="function"&&X.catch(function(){})}}catch(G){if(G&&P&&typeof G.stack=="string")return[G.stack,P.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=l.DetermineComponentFrameRoot(),x=f[0],N=f[1];if(x&&N){var C=x.split(`
`),$=N.split(`
`);for(d=l=0;l<C.length&&!C[l].includes("DetermineComponentFrameRoot");)l++;for(;d<$.length&&!$[d].includes("DetermineComponentFrameRoot");)d++;if(l===C.length||d===$.length)for(l=C.length-1,d=$.length-1;1<=l&&0<=d&&C[l]!==$[d];)d--;for(;1<=l&&0<=d;l--,d--)if(C[l]!==$[d]){if(l!==1||d!==1)do if(l--,d--,0>d||C[l]!==$[d]){var Y=`
`+C[l].replace(" at new "," at ");return e.displayName&&Y.includes("<anonymous>")&&(Y=Y.replace("<anonymous>",e.displayName)),Y}while(1<=l&&0<=d);break}}}finally{rn=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?ga(n):""}function Ne(e,t){switch(e.tag){case 26:case 27:case 5:return ga(e.type);case 16:return ga("Lazy");case 13:return e.child!==t&&t!==null?ga("Suspense Fallback"):ga("Suspense");case 19:return ga("SuspenseList");case 0:case 15:return ln(e.type,!1);case 11:return ln(e.type.render,!1);case 1:return ln(e.type,!0);case 31:return ga("Activity");default:return""}}function Ie(e){try{var t="",n=null;do t+=Ne(e,n),n=e,e=e.return;while(e);return t}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var ot=Object.prototype.hasOwnProperty,jt=r.unstable_scheduleCallback,St=r.unstable_cancelCallback,Xa=r.unstable_shouldYield,Ut=r.unstable_requestPaint,We=r.unstable_now,on=r.unstable_getCurrentPriorityLevel,cn=r.unstable_ImmediatePriority,Et=r.unstable_UserBlockingPriority,un=r.unstable_NormalPriority,gr=r.unstable_LowPriority,Ci=r.unstable_IdlePriority,Oo=r.log,Do=r.unstable_setDisableYieldValue,xa=null,kt=null;function ba(e){if(typeof Oo=="function"&&Do(e),kt&&typeof kt.setStrictMode=="function")try{kt.setStrictMode(xa,e)}catch{}}var xt=Math.clz32?Math.clz32:Ri,Ai=Math.log,Ti=Math.LN2;function Ri(e){return e>>>=0,e===0?32:31-(Ai(e)/Ti|0)|0}var he=256,rt=262144,dt=4194304;function Wa(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Oi(e,t,n){var l=e.pendingLanes;if(l===0)return 0;var d=0,f=e.suspendedLanes,x=e.pingedLanes;e=e.warmLanes;var N=l&134217727;return N!==0?(l=N&~f,l!==0?d=Wa(l):(x&=N,x!==0?d=Wa(x):n||(n=N&~e,n!==0&&(d=Wa(n))))):(N=l&~f,N!==0?d=Wa(N):x!==0?d=Wa(x):n||(n=l&~e,n!==0&&(d=Wa(n)))),d===0?0:t!==0&&t!==d&&(t&f)===0&&(f=d&-d,n=t&-t,f>=n||f===32&&(n&4194048)!==0)?t:d}function xr(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Rb(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function eh(){var e=dt;return dt<<=1,(dt&62914560)===0&&(dt=4194304),e}function Mo(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function br(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Ob(e,t,n,l,d,f){var x=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var N=e.entanglements,C=e.expirationTimes,$=e.hiddenUpdates;for(n=x&~n;0<n;){var Y=31-xt(n),X=1<<Y;N[Y]=0,C[Y]=-1;var P=$[Y];if(P!==null)for($[Y]=null,Y=0;Y<P.length;Y++){var G=P[Y];G!==null&&(G.lane&=-536870913)}n&=~X}l!==0&&th(e,l,0),f!==0&&d===0&&e.tag!==0&&(e.suspendedLanes|=f&~(x&~t))}function th(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var l=31-xt(t);e.entangledLanes|=t,e.entanglements[l]=e.entanglements[l]|1073741824|n&261930}function ah(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var l=31-xt(n),d=1<<l;d&t|e[l]&t&&(e[l]|=t),n&=~d}}function sh(e,t){var n=t&-t;return n=(n&42)!==0?1:Uo(n),(n&(e.suspendedLanes|t))!==0?0:n}function Uo(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Lo(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function nh(){var e=W.p;return e!==0?e:(e=window.event,e===void 0?32:Vp(e.type))}function rh(e,t){var n=W.p;try{return W.p=e,t()}finally{W.p=n}}var Za=Math.random().toString(36).slice(2),ht="__reactFiber$"+Za,Ct="__reactProps$"+Za,dn="__reactContainer$"+Za,Bo="__reactEvents$"+Za,Db="__reactListeners$"+Za,Mb="__reactHandles$"+Za,ih="__reactResources$"+Za,vr="__reactMarker$"+Za;function zo(e){delete e[ht],delete e[Ct],delete e[Bo],delete e[Db],delete e[Mb]}function hn(e){var t=e[ht];if(t)return t;for(var n=e.parentNode;n;){if(t=n[dn]||n[ht]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Cp(e);e!==null;){if(n=e[ht])return n;e=Cp(e)}return t}e=n,n=e.parentNode}return null}function fn(e){if(e=e[ht]||e[dn]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function yr(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(o(33))}function mn(e){var t=e[ih];return t||(t=e[ih]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function ct(e){e[vr]=!0}var lh=new Set,oh={};function Ds(e,t){pn(e,t),pn(e+"Capture",t)}function pn(e,t){for(oh[e]=t,e=0;e<t.length;e++)lh.add(t[e])}var Ub=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ch={},uh={};function Lb(e){return ot.call(uh,e)?!0:ot.call(ch,e)?!1:Ub.test(e)?uh[e]=!0:(ch[e]=!0,!1)}function Di(e,t,n){if(Lb(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var l=t.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function Mi(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function ka(e,t,n,l){if(l===null)e.removeAttribute(n);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+l)}}function Yt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function dh(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Bb(e,t,n){var l=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var d=l.get,f=l.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return d.call(this)},set:function(x){n=""+x,f.call(this,x)}}),Object.defineProperty(e,t,{enumerable:l.enumerable}),{getValue:function(){return n},setValue:function(x){n=""+x},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function qo(e){if(!e._valueTracker){var t=dh(e)?"checked":"value";e._valueTracker=Bb(e,t,""+e[t])}}function hh(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),l="";return e&&(l=dh(e)?e.checked?"true":"false":e.value),e=l,e!==n?(t.setValue(e),!0):!1}function Ui(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var zb=/[\n"\\]/g;function Kt(e){return e.replace(zb,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Io(e,t,n,l,d,f,x,N){e.name="",x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?e.type=x:e.removeAttribute("type"),t!=null?x==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Yt(t)):e.value!==""+Yt(t)&&(e.value=""+Yt(t)):x!=="submit"&&x!=="reset"||e.removeAttribute("value"),t!=null?$o(e,x,Yt(t)):n!=null?$o(e,x,Yt(n)):l!=null&&e.removeAttribute("value"),d==null&&f!=null&&(e.defaultChecked=!!f),d!=null&&(e.checked=d&&typeof d!="function"&&typeof d!="symbol"),N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"?e.name=""+Yt(N):e.removeAttribute("name")}function fh(e,t,n,l,d,f,x,N){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(e.type=f),t!=null||n!=null){if(!(f!=="submit"&&f!=="reset"||t!=null)){qo(e);return}n=n!=null?""+Yt(n):"",t=t!=null?""+Yt(t):n,N||t===e.value||(e.value=t),e.defaultValue=t}l=l??d,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=N?e.checked:!!l,e.defaultChecked=!!l,x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(e.name=x),qo(e)}function $o(e,t,n){t==="number"&&Ui(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function gn(e,t,n,l){if(e=e.options,t){t={};for(var d=0;d<n.length;d++)t["$"+n[d]]=!0;for(n=0;n<e.length;n++)d=t.hasOwnProperty("$"+e[n].value),e[n].selected!==d&&(e[n].selected=d),d&&l&&(e[n].defaultSelected=!0)}else{for(n=""+Yt(n),t=null,d=0;d<e.length;d++){if(e[d].value===n){e[d].selected=!0,l&&(e[d].defaultSelected=!0);return}t!==null||e[d].disabled||(t=e[d])}t!==null&&(t.selected=!0)}}function mh(e,t,n){if(t!=null&&(t=""+Yt(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+Yt(n):""}function ph(e,t,n,l){if(t==null){if(l!=null){if(n!=null)throw Error(o(92));if(J(l)){if(1<l.length)throw Error(o(93));l=l[0]}n=l}n==null&&(n=""),t=n}n=Yt(t),e.defaultValue=n,l=e.textContent,l===n&&l!==""&&l!==null&&(e.value=l),qo(e)}function xn(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var qb=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function gh(e,t,n){var l=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?l?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":l?e.setProperty(t,n):typeof n!="number"||n===0||qb.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function xh(e,t,n){if(t!=null&&typeof t!="object")throw Error(o(62));if(e=e.style,n!=null){for(var l in n)!n.hasOwnProperty(l)||t!=null&&t.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var d in t)l=t[d],t.hasOwnProperty(d)&&n[d]!==l&&gh(e,d,l)}else for(var f in t)t.hasOwnProperty(f)&&gh(e,f,t[f])}function Po(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ib=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),$b=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Li(e){return $b.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Ca(){}var Ho=null;function Vo(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var bn=null,vn=null;function bh(e){var t=fn(e);if(t&&(e=t.stateNode)){var n=e[Ct]||null;e:switch(e=t.stateNode,t.type){case"input":if(Io(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+Kt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var l=n[t];if(l!==e&&l.form===e.form){var d=l[Ct]||null;if(!d)throw Error(o(90));Io(l,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(t=0;t<n.length;t++)l=n[t],l.form===e.form&&hh(l)}break e;case"textarea":mh(e,n.value,n.defaultValue);break e;case"select":t=n.value,t!=null&&gn(e,!!n.multiple,t,!1)}}}var Go=!1;function vh(e,t,n){if(Go)return e(t,n);Go=!0;try{var l=e(t);return l}finally{if(Go=!1,(bn!==null||vn!==null)&&(Nl(),bn&&(t=bn,e=vn,vn=bn=null,bh(t),e)))for(t=0;t<e.length;t++)bh(e[t])}}function wr(e,t){var n=e.stateNode;if(n===null)return null;var l=n[Ct]||null;if(l===null)return null;n=l[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(o(231,t,typeof n));return n}var Aa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Yo=!1;if(Aa)try{var jr={};Object.defineProperty(jr,"passive",{get:function(){Yo=!0}}),window.addEventListener("test",jr,jr),window.removeEventListener("test",jr,jr)}catch{Yo=!1}var es=null,Ko=null,Bi=null;function yh(){if(Bi)return Bi;var e,t=Ko,n=t.length,l,d="value"in es?es.value:es.textContent,f=d.length;for(e=0;e<n&&t[e]===d[e];e++);var x=n-e;for(l=1;l<=x&&t[n-l]===d[f-l];l++);return Bi=d.slice(e,1<l?1-l:void 0)}function zi(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function qi(){return!0}function wh(){return!1}function At(e){function t(n,l,d,f,x){this._reactName=n,this._targetInst=d,this.type=l,this.nativeEvent=f,this.target=x,this.currentTarget=null;for(var N in e)e.hasOwnProperty(N)&&(n=e[N],this[N]=n?n(f):f[N]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?qi:wh,this.isPropagationStopped=wh,this}return w(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=qi)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=qi)},persist:function(){},isPersistent:qi}),t}var Ms={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ii=At(Ms),Nr=w({},Ms,{view:0,detail:0}),Pb=At(Nr),Fo,Qo,_r,$i=w({},Nr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xo,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==_r&&(_r&&e.type==="mousemove"?(Fo=e.screenX-_r.screenX,Qo=e.screenY-_r.screenY):Qo=Fo=0,_r=e),Fo)},movementY:function(e){return"movementY"in e?e.movementY:Qo}}),jh=At($i),Hb=w({},$i,{dataTransfer:0}),Vb=At(Hb),Gb=w({},Nr,{relatedTarget:0}),Jo=At(Gb),Yb=w({},Ms,{animationName:0,elapsedTime:0,pseudoElement:0}),Kb=At(Yb),Fb=w({},Ms,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Qb=At(Fb),Jb=w({},Ms,{data:0}),Nh=At(Jb),Xb={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Wb={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Zb={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ev(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Zb[e])?!!t[e]:!1}function Xo(){return ev}var tv=w({},Nr,{key:function(e){if(e.key){var t=Xb[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=zi(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Wb[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xo,charCode:function(e){return e.type==="keypress"?zi(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?zi(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),av=At(tv),sv=w({},$i,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_h=At(sv),nv=w({},Nr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xo}),rv=At(nv),iv=w({},Ms,{propertyName:0,elapsedTime:0,pseudoElement:0}),lv=At(iv),ov=w({},$i,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),cv=At(ov),uv=w({},Ms,{newState:0,oldState:0}),dv=At(uv),hv=[9,13,27,32],Wo=Aa&&"CompositionEvent"in window,Sr=null;Aa&&"documentMode"in document&&(Sr=document.documentMode);var fv=Aa&&"TextEvent"in window&&!Sr,Sh=Aa&&(!Wo||Sr&&8<Sr&&11>=Sr),Eh=" ",kh=!1;function Ch(e,t){switch(e){case"keyup":return hv.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ah(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var yn=!1;function mv(e,t){switch(e){case"compositionend":return Ah(t);case"keypress":return t.which!==32?null:(kh=!0,Eh);case"textInput":return e=t.data,e===Eh&&kh?null:e;default:return null}}function pv(e,t){if(yn)return e==="compositionend"||!Wo&&Ch(e,t)?(e=yh(),Bi=Ko=es=null,yn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Sh&&t.locale!=="ko"?null:t.data;default:return null}}var gv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Th(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!gv[e.type]:t==="textarea"}function Rh(e,t,n,l){bn?vn?vn.push(l):vn=[l]:bn=l,t=Tl(t,"onChange"),0<t.length&&(n=new Ii("onChange","change",null,n,l),e.push({event:n,listeners:t}))}var Er=null,kr=null;function xv(e){mp(e,0)}function Pi(e){var t=yr(e);if(hh(t))return e}function Oh(e,t){if(e==="change")return t}var Dh=!1;if(Aa){var Zo;if(Aa){var ec="oninput"in document;if(!ec){var Mh=document.createElement("div");Mh.setAttribute("oninput","return;"),ec=typeof Mh.oninput=="function"}Zo=ec}else Zo=!1;Dh=Zo&&(!document.documentMode||9<document.documentMode)}function Uh(){Er&&(Er.detachEvent("onpropertychange",Lh),kr=Er=null)}function Lh(e){if(e.propertyName==="value"&&Pi(kr)){var t=[];Rh(t,kr,e,Vo(e)),vh(xv,t)}}function bv(e,t,n){e==="focusin"?(Uh(),Er=t,kr=n,Er.attachEvent("onpropertychange",Lh)):e==="focusout"&&Uh()}function vv(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Pi(kr)}function yv(e,t){if(e==="click")return Pi(t)}function wv(e,t){if(e==="input"||e==="change")return Pi(t)}function jv(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Lt=typeof Object.is=="function"?Object.is:jv;function Cr(e,t){if(Lt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),l=Object.keys(t);if(n.length!==l.length)return!1;for(l=0;l<n.length;l++){var d=n[l];if(!ot.call(t,d)||!Lt(e[d],t[d]))return!1}return!0}function Bh(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function zh(e,t){var n=Bh(e);e=0;for(var l;n;){if(n.nodeType===3){if(l=e+n.textContent.length,e<=t&&l>=t)return{node:n,offset:t-e};e=l}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Bh(n)}}function qh(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?qh(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Ih(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Ui(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Ui(e.document)}return t}function tc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var Nv=Aa&&"documentMode"in document&&11>=document.documentMode,wn=null,ac=null,Ar=null,sc=!1;function $h(e,t,n){var l=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;sc||wn==null||wn!==Ui(l)||(l=wn,"selectionStart"in l&&tc(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Ar&&Cr(Ar,l)||(Ar=l,l=Tl(ac,"onSelect"),0<l.length&&(t=new Ii("onSelect","select",null,t,n),e.push({event:t,listeners:l}),t.target=wn)))}function Us(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var jn={animationend:Us("Animation","AnimationEnd"),animationiteration:Us("Animation","AnimationIteration"),animationstart:Us("Animation","AnimationStart"),transitionrun:Us("Transition","TransitionRun"),transitionstart:Us("Transition","TransitionStart"),transitioncancel:Us("Transition","TransitionCancel"),transitionend:Us("Transition","TransitionEnd")},nc={},Ph={};Aa&&(Ph=document.createElement("div").style,"AnimationEvent"in window||(delete jn.animationend.animation,delete jn.animationiteration.animation,delete jn.animationstart.animation),"TransitionEvent"in window||delete jn.transitionend.transition);function Ls(e){if(nc[e])return nc[e];if(!jn[e])return e;var t=jn[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Ph)return nc[e]=t[n];return e}var Hh=Ls("animationend"),Vh=Ls("animationiteration"),Gh=Ls("animationstart"),_v=Ls("transitionrun"),Sv=Ls("transitionstart"),Ev=Ls("transitioncancel"),Yh=Ls("transitionend"),Kh=new Map,rc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");rc.push("scrollEnd");function ra(e,t){Kh.set(e,t),Ds(t,[e])}var Hi=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Ft=[],Nn=0,ic=0;function Vi(){for(var e=Nn,t=ic=Nn=0;t<e;){var n=Ft[t];Ft[t++]=null;var l=Ft[t];Ft[t++]=null;var d=Ft[t];Ft[t++]=null;var f=Ft[t];if(Ft[t++]=null,l!==null&&d!==null){var x=l.pending;x===null?d.next=d:(d.next=x.next,x.next=d),l.pending=d}f!==0&&Fh(n,d,f)}}function Gi(e,t,n,l){Ft[Nn++]=e,Ft[Nn++]=t,Ft[Nn++]=n,Ft[Nn++]=l,ic|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function lc(e,t,n,l){return Gi(e,t,n,l),Yi(e)}function Bs(e,t){return Gi(e,null,null,t),Yi(e)}function Fh(e,t,n){e.lanes|=n;var l=e.alternate;l!==null&&(l.lanes|=n);for(var d=!1,f=e.return;f!==null;)f.childLanes|=n,l=f.alternate,l!==null&&(l.childLanes|=n),f.tag===22&&(e=f.stateNode,e===null||e._visibility&1||(d=!0)),e=f,f=f.return;return e.tag===3?(f=e.stateNode,d&&t!==null&&(d=31-xt(n),e=f.hiddenUpdates,l=e[d],l===null?e[d]=[t]:l.push(t),t.lane=n|536870912),f):null}function Yi(e){if(50<Xr)throw Xr=0,gu=null,Error(o(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var _n={};function kv(e,t,n,l){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bt(e,t,n,l){return new kv(e,t,n,l)}function oc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Ta(e,t){var n=e.alternate;return n===null?(n=Bt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Qh(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Ki(e,t,n,l,d,f){var x=0;if(l=e,typeof e=="function")oc(e)&&(x=1);else if(typeof e=="string")x=Oy(e,n,ee.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case M:return e=Bt(31,n,t,d),e.elementType=M,e.lanes=f,e;case E:return zs(n.children,d,f,t);case y:x=8,d|=24;break;case k:return e=Bt(12,n,t,d|2),e.elementType=k,e.lanes=f,e;case L:return e=Bt(13,n,t,d),e.elementType=L,e.lanes=f,e;case Q:return e=Bt(19,n,t,d),e.elementType=Q,e.lanes=f,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case A:x=10;break e;case R:x=9;break e;case q:x=11;break e;case B:x=14;break e;case Z:x=16,l=null;break e}x=29,n=Error(o(130,e===null?"null":typeof e,"")),l=null}return t=Bt(x,n,t,d),t.elementType=e,t.type=l,t.lanes=f,t}function zs(e,t,n,l){return e=Bt(7,e,l,t),e.lanes=n,e}function cc(e,t,n){return e=Bt(6,e,null,t),e.lanes=n,e}function Jh(e){var t=Bt(18,null,null,0);return t.stateNode=e,t}function uc(e,t,n){return t=Bt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Xh=new WeakMap;function Qt(e,t){if(typeof e=="object"&&e!==null){var n=Xh.get(e);return n!==void 0?n:(t={value:e,source:t,stack:Ie(t)},Xh.set(e,t),t)}return{value:e,source:t,stack:Ie(t)}}var Sn=[],En=0,Fi=null,Tr=0,Jt=[],Xt=0,ts=null,va=1,ya="";function Ra(e,t){Sn[En++]=Tr,Sn[En++]=Fi,Fi=e,Tr=t}function Wh(e,t,n){Jt[Xt++]=va,Jt[Xt++]=ya,Jt[Xt++]=ts,ts=e;var l=va;e=ya;var d=32-xt(l)-1;l&=~(1<<d),n+=1;var f=32-xt(t)+d;if(30<f){var x=d-d%5;f=(l&(1<<x)-1).toString(32),l>>=x,d-=x,va=1<<32-xt(t)+d|n<<d|l,ya=f+e}else va=1<<f|n<<d|l,ya=e}function dc(e){e.return!==null&&(Ra(e,1),Wh(e,1,0))}function hc(e){for(;e===Fi;)Fi=Sn[--En],Sn[En]=null,Tr=Sn[--En],Sn[En]=null;for(;e===ts;)ts=Jt[--Xt],Jt[Xt]=null,ya=Jt[--Xt],Jt[Xt]=null,va=Jt[--Xt],Jt[Xt]=null}function Zh(e,t){Jt[Xt++]=va,Jt[Xt++]=ya,Jt[Xt++]=ts,va=t.id,ya=t.overflow,ts=e}var ft=null,Pe=null,Ce=!1,as=null,Wt=!1,fc=Error(o(519));function ss(e){var t=Error(o(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Rr(Qt(t,e)),fc}function ef(e){var t=e.stateNode,n=e.type,l=e.memoizedProps;switch(t[ht]=e,t[Ct]=l,n){case"dialog":Se("cancel",t),Se("close",t);break;case"iframe":case"object":case"embed":Se("load",t);break;case"video":case"audio":for(n=0;n<Zr.length;n++)Se(Zr[n],t);break;case"source":Se("error",t);break;case"img":case"image":case"link":Se("error",t),Se("load",t);break;case"details":Se("toggle",t);break;case"input":Se("invalid",t),fh(t,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":Se("invalid",t);break;case"textarea":Se("invalid",t),ph(t,l.value,l.defaultValue,l.children)}n=l.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||l.suppressHydrationWarning===!0||bp(t.textContent,n)?(l.popover!=null&&(Se("beforetoggle",t),Se("toggle",t)),l.onScroll!=null&&Se("scroll",t),l.onScrollEnd!=null&&Se("scrollend",t),l.onClick!=null&&(t.onclick=Ca),t=!0):t=!1,t||ss(e,!0)}function tf(e){for(ft=e.return;ft;)switch(ft.tag){case 5:case 31:case 13:Wt=!1;return;case 27:case 3:Wt=!0;return;default:ft=ft.return}}function kn(e){if(e!==ft)return!1;if(!Ce)return tf(e),Ce=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||Ru(e.type,e.memoizedProps)),n=!n),n&&Pe&&ss(e),tf(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));Pe=kp(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));Pe=kp(e)}else t===27?(t=Pe,xs(e.type)?(e=Lu,Lu=null,Pe=e):Pe=t):Pe=ft?ea(e.stateNode.nextSibling):null;return!0}function qs(){Pe=ft=null,Ce=!1}function mc(){var e=as;return e!==null&&(Dt===null?Dt=e:Dt.push.apply(Dt,e),as=null),e}function Rr(e){as===null?as=[e]:as.push(e)}var pc=T(null),Is=null,Oa=null;function ns(e,t,n){te(pc,t._currentValue),t._currentValue=n}function Da(e){e._currentValue=pc.current,V(pc)}function gc(e,t,n){for(;e!==null;){var l=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,l!==null&&(l.childLanes|=t)):l!==null&&(l.childLanes&t)!==t&&(l.childLanes|=t),e===n)break;e=e.return}}function xc(e,t,n,l){var d=e.child;for(d!==null&&(d.return=e);d!==null;){var f=d.dependencies;if(f!==null){var x=d.child;f=f.firstContext;e:for(;f!==null;){var N=f;f=d;for(var C=0;C<t.length;C++)if(N.context===t[C]){f.lanes|=n,N=f.alternate,N!==null&&(N.lanes|=n),gc(f.return,n,e),l||(x=null);break e}f=N.next}}else if(d.tag===18){if(x=d.return,x===null)throw Error(o(341));x.lanes|=n,f=x.alternate,f!==null&&(f.lanes|=n),gc(x,n,e),x=null}else x=d.child;if(x!==null)x.return=d;else for(x=d;x!==null;){if(x===e){x=null;break}if(d=x.sibling,d!==null){d.return=x.return,x=d;break}x=x.return}d=x}}function Cn(e,t,n,l){e=null;for(var d=t,f=!1;d!==null;){if(!f){if((d.flags&524288)!==0)f=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var x=d.alternate;if(x===null)throw Error(o(387));if(x=x.memoizedProps,x!==null){var N=d.type;Lt(d.pendingProps.value,x.value)||(e!==null?e.push(N):e=[N])}}else if(d===oe.current){if(x=d.alternate,x===null)throw Error(o(387));x.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(e!==null?e.push(ni):e=[ni])}d=d.return}e!==null&&xc(t,e,n,l),t.flags|=262144}function Qi(e){for(e=e.firstContext;e!==null;){if(!Lt(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function $s(e){Is=e,Oa=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function mt(e){return af(Is,e)}function Ji(e,t){return Is===null&&$s(e),af(e,t)}function af(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},Oa===null){if(e===null)throw Error(o(308));Oa=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Oa=Oa.next=t;return n}var Cv=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,l){e.push(l)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},Av=r.unstable_scheduleCallback,Tv=r.unstable_NormalPriority,Ze={$$typeof:A,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function bc(){return{controller:new Cv,data:new Map,refCount:0}}function Or(e){e.refCount--,e.refCount===0&&Av(Tv,function(){e.controller.abort()})}var Dr=null,vc=0,An=0,Tn=null;function Rv(e,t){if(Dr===null){var n=Dr=[];vc=0,An=ju(),Tn={status:"pending",value:void 0,then:function(l){n.push(l)}}}return vc++,t.then(sf,sf),t}function sf(){if(--vc===0&&Dr!==null){Tn!==null&&(Tn.status="fulfilled");var e=Dr;Dr=null,An=0,Tn=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function Ov(e,t){var n=[],l={status:"pending",value:null,reason:null,then:function(d){n.push(d)}};return e.then(function(){l.status="fulfilled",l.value=t;for(var d=0;d<n.length;d++)(0,n[d])(t)},function(d){for(l.status="rejected",l.reason=d,d=0;d<n.length;d++)(0,n[d])(void 0)}),l}var nf=D.S;D.S=function(e,t){Pm=We(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&Rv(e,t),nf!==null&&nf(e,t)};var Ps=T(null);function yc(){var e=Ps.current;return e!==null?e:qe.pooledCache}function Xi(e,t){t===null?te(Ps,Ps.current):te(Ps,t.pool)}function rf(){var e=yc();return e===null?null:{parent:Ze._currentValue,pool:e}}var Rn=Error(o(460)),wc=Error(o(474)),Wi=Error(o(542)),Zi={then:function(){}};function lf(e){return e=e.status,e==="fulfilled"||e==="rejected"}function of(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(Ca,Ca),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,uf(e),e;default:if(typeof t.status=="string")t.then(Ca,Ca);else{if(e=qe,e!==null&&100<e.shellSuspendCounter)throw Error(o(482));e=t,e.status="pending",e.then(function(l){if(t.status==="pending"){var d=t;d.status="fulfilled",d.value=l}},function(l){if(t.status==="pending"){var d=t;d.status="rejected",d.reason=l}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,uf(e),e}throw Vs=t,Rn}}function Hs(e){try{var t=e._init;return t(e._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?(Vs=n,Rn):n}}var Vs=null;function cf(){if(Vs===null)throw Error(o(459));var e=Vs;return Vs=null,e}function uf(e){if(e===Rn||e===Wi)throw Error(o(483))}var On=null,Mr=0;function el(e){var t=Mr;return Mr+=1,On===null&&(On=[]),of(On,e,t)}function Ur(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function tl(e,t){throw t.$$typeof===j?Error(o(525)):(e=Object.prototype.toString.call(t),Error(o(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function df(e){function t(U,O){if(e){var z=U.deletions;z===null?(U.deletions=[O],U.flags|=16):z.push(O)}}function n(U,O){if(!e)return null;for(;O!==null;)t(U,O),O=O.sibling;return null}function l(U){for(var O=new Map;U!==null;)U.key!==null?O.set(U.key,U):O.set(U.index,U),U=U.sibling;return O}function d(U,O){return U=Ta(U,O),U.index=0,U.sibling=null,U}function f(U,O,z){return U.index=z,e?(z=U.alternate,z!==null?(z=z.index,z<O?(U.flags|=67108866,O):z):(U.flags|=67108866,O)):(U.flags|=1048576,O)}function x(U){return e&&U.alternate===null&&(U.flags|=67108866),U}function N(U,O,z,F){return O===null||O.tag!==6?(O=cc(z,U.mode,F),O.return=U,O):(O=d(O,z),O.return=U,O)}function C(U,O,z,F){var fe=z.type;return fe===E?Y(U,O,z.props.children,F,z.key):O!==null&&(O.elementType===fe||typeof fe=="object"&&fe!==null&&fe.$$typeof===Z&&Hs(fe)===O.type)?(O=d(O,z.props),Ur(O,z),O.return=U,O):(O=Ki(z.type,z.key,z.props,null,U.mode,F),Ur(O,z),O.return=U,O)}function $(U,O,z,F){return O===null||O.tag!==4||O.stateNode.containerInfo!==z.containerInfo||O.stateNode.implementation!==z.implementation?(O=uc(z,U.mode,F),O.return=U,O):(O=d(O,z.children||[]),O.return=U,O)}function Y(U,O,z,F,fe){return O===null||O.tag!==7?(O=zs(z,U.mode,F,fe),O.return=U,O):(O=d(O,z),O.return=U,O)}function X(U,O,z){if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return O=cc(""+O,U.mode,z),O.return=U,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case _:return z=Ki(O.type,O.key,O.props,null,U.mode,z),Ur(z,O),z.return=U,z;case v:return O=uc(O,U.mode,z),O.return=U,O;case Z:return O=Hs(O),X(U,O,z)}if(J(O)||I(O))return O=zs(O,U.mode,z,null),O.return=U,O;if(typeof O.then=="function")return X(U,el(O),z);if(O.$$typeof===A)return X(U,Ji(U,O),z);tl(U,O)}return null}function P(U,O,z,F){var fe=O!==null?O.key:null;if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return fe!==null?null:N(U,O,""+z,F);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case _:return z.key===fe?C(U,O,z,F):null;case v:return z.key===fe?$(U,O,z,F):null;case Z:return z=Hs(z),P(U,O,z,F)}if(J(z)||I(z))return fe!==null?null:Y(U,O,z,F,null);if(typeof z.then=="function")return P(U,O,el(z),F);if(z.$$typeof===A)return P(U,O,Ji(U,z),F);tl(U,z)}return null}function G(U,O,z,F,fe){if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return U=U.get(z)||null,N(O,U,""+F,fe);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case _:return U=U.get(F.key===null?z:F.key)||null,C(O,U,F,fe);case v:return U=U.get(F.key===null?z:F.key)||null,$(O,U,F,fe);case Z:return F=Hs(F),G(U,O,z,F,fe)}if(J(F)||I(F))return U=U.get(z)||null,Y(O,U,F,fe,null);if(typeof F.then=="function")return G(U,O,z,el(F),fe);if(F.$$typeof===A)return G(U,O,z,Ji(O,F),fe);tl(O,F)}return null}function re(U,O,z,F){for(var fe=null,Te=null,ie=O,we=O=0,ke=null;ie!==null&&we<z.length;we++){ie.index>we?(ke=ie,ie=null):ke=ie.sibling;var Re=P(U,ie,z[we],F);if(Re===null){ie===null&&(ie=ke);break}e&&ie&&Re.alternate===null&&t(U,ie),O=f(Re,O,we),Te===null?fe=Re:Te.sibling=Re,Te=Re,ie=ke}if(we===z.length)return n(U,ie),Ce&&Ra(U,we),fe;if(ie===null){for(;we<z.length;we++)ie=X(U,z[we],F),ie!==null&&(O=f(ie,O,we),Te===null?fe=ie:Te.sibling=ie,Te=ie);return Ce&&Ra(U,we),fe}for(ie=l(ie);we<z.length;we++)ke=G(ie,U,we,z[we],F),ke!==null&&(e&&ke.alternate!==null&&ie.delete(ke.key===null?we:ke.key),O=f(ke,O,we),Te===null?fe=ke:Te.sibling=ke,Te=ke);return e&&ie.forEach(function(js){return t(U,js)}),Ce&&Ra(U,we),fe}function pe(U,O,z,F){if(z==null)throw Error(o(151));for(var fe=null,Te=null,ie=O,we=O=0,ke=null,Re=z.next();ie!==null&&!Re.done;we++,Re=z.next()){ie.index>we?(ke=ie,ie=null):ke=ie.sibling;var js=P(U,ie,Re.value,F);if(js===null){ie===null&&(ie=ke);break}e&&ie&&js.alternate===null&&t(U,ie),O=f(js,O,we),Te===null?fe=js:Te.sibling=js,Te=js,ie=ke}if(Re.done)return n(U,ie),Ce&&Ra(U,we),fe;if(ie===null){for(;!Re.done;we++,Re=z.next())Re=X(U,Re.value,F),Re!==null&&(O=f(Re,O,we),Te===null?fe=Re:Te.sibling=Re,Te=Re);return Ce&&Ra(U,we),fe}for(ie=l(ie);!Re.done;we++,Re=z.next())Re=G(ie,U,we,Re.value,F),Re!==null&&(e&&Re.alternate!==null&&ie.delete(Re.key===null?we:Re.key),O=f(Re,O,we),Te===null?fe=Re:Te.sibling=Re,Te=Re);return e&&ie.forEach(function(Hy){return t(U,Hy)}),Ce&&Ra(U,we),fe}function ze(U,O,z,F){if(typeof z=="object"&&z!==null&&z.type===E&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case _:e:{for(var fe=z.key;O!==null;){if(O.key===fe){if(fe=z.type,fe===E){if(O.tag===7){n(U,O.sibling),F=d(O,z.props.children),F.return=U,U=F;break e}}else if(O.elementType===fe||typeof fe=="object"&&fe!==null&&fe.$$typeof===Z&&Hs(fe)===O.type){n(U,O.sibling),F=d(O,z.props),Ur(F,z),F.return=U,U=F;break e}n(U,O);break}else t(U,O);O=O.sibling}z.type===E?(F=zs(z.props.children,U.mode,F,z.key),F.return=U,U=F):(F=Ki(z.type,z.key,z.props,null,U.mode,F),Ur(F,z),F.return=U,U=F)}return x(U);case v:e:{for(fe=z.key;O!==null;){if(O.key===fe)if(O.tag===4&&O.stateNode.containerInfo===z.containerInfo&&O.stateNode.implementation===z.implementation){n(U,O.sibling),F=d(O,z.children||[]),F.return=U,U=F;break e}else{n(U,O);break}else t(U,O);O=O.sibling}F=uc(z,U.mode,F),F.return=U,U=F}return x(U);case Z:return z=Hs(z),ze(U,O,z,F)}if(J(z))return re(U,O,z,F);if(I(z)){if(fe=I(z),typeof fe!="function")throw Error(o(150));return z=fe.call(z),pe(U,O,z,F)}if(typeof z.then=="function")return ze(U,O,el(z),F);if(z.$$typeof===A)return ze(U,O,Ji(U,z),F);tl(U,z)}return typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint"?(z=""+z,O!==null&&O.tag===6?(n(U,O.sibling),F=d(O,z),F.return=U,U=F):(n(U,O),F=cc(z,U.mode,F),F.return=U,U=F),x(U)):n(U,O)}return function(U,O,z,F){try{Mr=0;var fe=ze(U,O,z,F);return On=null,fe}catch(ie){if(ie===Rn||ie===Wi)throw ie;var Te=Bt(29,ie,null,U.mode);return Te.lanes=F,Te.return=U,Te}finally{}}}var Gs=df(!0),hf=df(!1),rs=!1;function jc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Nc(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function is(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ls(e,t,n){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(Oe&2)!==0){var d=l.pending;return d===null?t.next=t:(t.next=d.next,d.next=t),l.pending=t,t=Yi(e),Fh(e,null,n),t}return Gi(e,l,t,n),Yi(e)}function Lr(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194048)!==0)){var l=t.lanes;l&=e.pendingLanes,n|=l,t.lanes=n,ah(e,n)}}function _c(e,t){var n=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,n===l)){var d=null,f=null;if(n=n.firstBaseUpdate,n!==null){do{var x={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};f===null?d=f=x:f=f.next=x,n=n.next}while(n!==null);f===null?d=f=t:f=f.next=t}else d=f=t;n={baseState:l.baseState,firstBaseUpdate:d,lastBaseUpdate:f,shared:l.shared,callbacks:l.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var Sc=!1;function Br(){if(Sc){var e=Tn;if(e!==null)throw e}}function zr(e,t,n,l){Sc=!1;var d=e.updateQueue;rs=!1;var f=d.firstBaseUpdate,x=d.lastBaseUpdate,N=d.shared.pending;if(N!==null){d.shared.pending=null;var C=N,$=C.next;C.next=null,x===null?f=$:x.next=$,x=C;var Y=e.alternate;Y!==null&&(Y=Y.updateQueue,N=Y.lastBaseUpdate,N!==x&&(N===null?Y.firstBaseUpdate=$:N.next=$,Y.lastBaseUpdate=C))}if(f!==null){var X=d.baseState;x=0,Y=$=C=null,N=f;do{var P=N.lane&-536870913,G=P!==N.lane;if(G?(Ee&P)===P:(l&P)===P){P!==0&&P===An&&(Sc=!0),Y!==null&&(Y=Y.next={lane:0,tag:N.tag,payload:N.payload,callback:null,next:null});e:{var re=e,pe=N;P=t;var ze=n;switch(pe.tag){case 1:if(re=pe.payload,typeof re=="function"){X=re.call(ze,X,P);break e}X=re;break e;case 3:re.flags=re.flags&-65537|128;case 0:if(re=pe.payload,P=typeof re=="function"?re.call(ze,X,P):re,P==null)break e;X=w({},X,P);break e;case 2:rs=!0}}P=N.callback,P!==null&&(e.flags|=64,G&&(e.flags|=8192),G=d.callbacks,G===null?d.callbacks=[P]:G.push(P))}else G={lane:P,tag:N.tag,payload:N.payload,callback:N.callback,next:null},Y===null?($=Y=G,C=X):Y=Y.next=G,x|=P;if(N=N.next,N===null){if(N=d.shared.pending,N===null)break;G=N,N=G.next,G.next=null,d.lastBaseUpdate=G,d.shared.pending=null}}while(!0);Y===null&&(C=X),d.baseState=C,d.firstBaseUpdate=$,d.lastBaseUpdate=Y,f===null&&(d.shared.lanes=0),hs|=x,e.lanes=x,e.memoizedState=X}}function ff(e,t){if(typeof e!="function")throw Error(o(191,e));e.call(t)}function mf(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)ff(n[e],t)}var Dn=T(null),al=T(0);function pf(e,t){e=Pa,te(al,e),te(Dn,t),Pa=e|t.baseLanes}function Ec(){te(al,Pa),te(Dn,Dn.current)}function kc(){Pa=al.current,V(Dn),V(al)}var zt=T(null),Zt=null;function os(e){var t=e.alternate;te(Je,Je.current&1),te(zt,e),Zt===null&&(t===null||Dn.current!==null||t.memoizedState!==null)&&(Zt=e)}function Cc(e){te(Je,Je.current),te(zt,e),Zt===null&&(Zt=e)}function gf(e){e.tag===22?(te(Je,Je.current),te(zt,e),Zt===null&&(Zt=e)):cs()}function cs(){te(Je,Je.current),te(zt,zt.current)}function qt(e){V(zt),Zt===e&&(Zt=null),V(Je)}var Je=T(0);function sl(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||Mu(n)||Uu(n)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ma=0,ye=null,Le=null,et=null,nl=!1,Mn=!1,Ys=!1,rl=0,qr=0,Un=null,Dv=0;function Fe(){throw Error(o(321))}function Ac(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Lt(e[n],t[n]))return!1;return!0}function Tc(e,t,n,l,d,f){return Ma=f,ye=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,D.H=e===null||e.memoizedState===null?Zf:Gc,Ys=!1,f=n(l,d),Ys=!1,Mn&&(f=bf(t,n,l,d)),xf(e),f}function xf(e){D.H=Pr;var t=Le!==null&&Le.next!==null;if(Ma=0,et=Le=ye=null,nl=!1,qr=0,Un=null,t)throw Error(o(300));e===null||tt||(e=e.dependencies,e!==null&&Qi(e)&&(tt=!0))}function bf(e,t,n,l){ye=e;var d=0;do{if(Mn&&(Un=null),qr=0,Mn=!1,25<=d)throw Error(o(301));if(d+=1,et=Le=null,e.updateQueue!=null){var f=e.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}D.H=em,f=t(n,l)}while(Mn);return f}function Mv(){var e=D.H,t=e.useState()[0];return t=typeof t.then=="function"?Ir(t):t,e=e.useState()[0],(Le!==null?Le.memoizedState:null)!==e&&(ye.flags|=1024),t}function Rc(){var e=rl!==0;return rl=0,e}function Oc(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Dc(e){if(nl){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}nl=!1}Ma=0,et=Le=ye=null,Mn=!1,qr=rl=0,Un=null}function Nt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return et===null?ye.memoizedState=et=e:et=et.next=e,et}function Xe(){if(Le===null){var e=ye.alternate;e=e!==null?e.memoizedState:null}else e=Le.next;var t=et===null?ye.memoizedState:et.next;if(t!==null)et=t,Le=e;else{if(e===null)throw ye.alternate===null?Error(o(467)):Error(o(310));Le=e,e={memoizedState:Le.memoizedState,baseState:Le.baseState,baseQueue:Le.baseQueue,queue:Le.queue,next:null},et===null?ye.memoizedState=et=e:et=et.next=e}return et}function il(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ir(e){var t=qr;return qr+=1,Un===null&&(Un=[]),e=of(Un,e,t),t=ye,(et===null?t.memoizedState:et.next)===null&&(t=t.alternate,D.H=t===null||t.memoizedState===null?Zf:Gc),e}function ll(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Ir(e);if(e.$$typeof===A)return mt(e)}throw Error(o(438,String(e)))}function Mc(e){var t=null,n=ye.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var l=ye.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(t={data:l.data.map(function(d){return d.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=il(),ye.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),l=0;l<e;l++)n[l]=ae;return t.index++,n}function Ua(e,t){return typeof t=="function"?t(e):t}function ol(e){var t=Xe();return Uc(t,Le,e)}function Uc(e,t,n){var l=e.queue;if(l===null)throw Error(o(311));l.lastRenderedReducer=n;var d=e.baseQueue,f=l.pending;if(f!==null){if(d!==null){var x=d.next;d.next=f.next,f.next=x}t.baseQueue=d=f,l.pending=null}if(f=e.baseState,d===null)e.memoizedState=f;else{t=d.next;var N=x=null,C=null,$=t,Y=!1;do{var X=$.lane&-536870913;if(X!==$.lane?(Ee&X)===X:(Ma&X)===X){var P=$.revertLane;if(P===0)C!==null&&(C=C.next={lane:0,revertLane:0,gesture:null,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),X===An&&(Y=!0);else if((Ma&P)===P){$=$.next,P===An&&(Y=!0);continue}else X={lane:0,revertLane:$.revertLane,gesture:null,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},C===null?(N=C=X,x=f):C=C.next=X,ye.lanes|=P,hs|=P;X=$.action,Ys&&n(f,X),f=$.hasEagerState?$.eagerState:n(f,X)}else P={lane:X,revertLane:$.revertLane,gesture:$.gesture,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},C===null?(N=C=P,x=f):C=C.next=P,ye.lanes|=X,hs|=X;$=$.next}while($!==null&&$!==t);if(C===null?x=f:C.next=N,!Lt(f,e.memoizedState)&&(tt=!0,Y&&(n=Tn,n!==null)))throw n;e.memoizedState=f,e.baseState=x,e.baseQueue=C,l.lastRenderedState=f}return d===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function Lc(e){var t=Xe(),n=t.queue;if(n===null)throw Error(o(311));n.lastRenderedReducer=e;var l=n.dispatch,d=n.pending,f=t.memoizedState;if(d!==null){n.pending=null;var x=d=d.next;do f=e(f,x.action),x=x.next;while(x!==d);Lt(f,t.memoizedState)||(tt=!0),t.memoizedState=f,t.baseQueue===null&&(t.baseState=f),n.lastRenderedState=f}return[f,l]}function vf(e,t,n){var l=ye,d=Xe(),f=Ce;if(f){if(n===void 0)throw Error(o(407));n=n()}else n=t();var x=!Lt((Le||d).memoizedState,n);if(x&&(d.memoizedState=n,tt=!0),d=d.queue,qc(jf.bind(null,l,d,e),[e]),d.getSnapshot!==t||x||et!==null&&et.memoizedState.tag&1){if(l.flags|=2048,Ln(9,{destroy:void 0},wf.bind(null,l,d,n,t),null),qe===null)throw Error(o(349));f||(Ma&127)!==0||yf(l,t,n)}return n}function yf(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=ye.updateQueue,t===null?(t=il(),ye.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function wf(e,t,n,l){t.value=n,t.getSnapshot=l,Nf(t)&&_f(e)}function jf(e,t,n){return n(function(){Nf(t)&&_f(e)})}function Nf(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Lt(e,n)}catch{return!0}}function _f(e){var t=Bs(e,2);t!==null&&Mt(t,e,2)}function Bc(e){var t=Nt();if(typeof e=="function"){var n=e;if(e=n(),Ys){ba(!0);try{n()}finally{ba(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ua,lastRenderedState:e},t}function Sf(e,t,n,l){return e.baseState=n,Uc(e,Le,typeof l=="function"?l:Ua)}function Uv(e,t,n,l,d){if(dl(e))throw Error(o(485));if(e=t.action,e!==null){var f={payload:d,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(x){f.listeners.push(x)}};D.T!==null?n(!0):f.isTransition=!1,l(f),n=t.pending,n===null?(f.next=t.pending=f,Ef(t,f)):(f.next=n.next,t.pending=n.next=f)}}function Ef(e,t){var n=t.action,l=t.payload,d=e.state;if(t.isTransition){var f=D.T,x={};D.T=x;try{var N=n(d,l),C=D.S;C!==null&&C(x,N),kf(e,t,N)}catch($){zc(e,t,$)}finally{f!==null&&x.types!==null&&(f.types=x.types),D.T=f}}else try{f=n(d,l),kf(e,t,f)}catch($){zc(e,t,$)}}function kf(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(l){Cf(e,t,l)},function(l){return zc(e,t,l)}):Cf(e,t,n)}function Cf(e,t,n){t.status="fulfilled",t.value=n,Af(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,Ef(e,n)))}function zc(e,t,n){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do t.status="rejected",t.reason=n,Af(t),t=t.next;while(t!==l)}e.action=null}function Af(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Tf(e,t){return t}function Rf(e,t){if(Ce){var n=qe.formState;if(n!==null){e:{var l=ye;if(Ce){if(Pe){t:{for(var d=Pe,f=Wt;d.nodeType!==8;){if(!f){d=null;break t}if(d=ea(d.nextSibling),d===null){d=null;break t}}f=d.data,d=f==="F!"||f==="F"?d:null}if(d){Pe=ea(d.nextSibling),l=d.data==="F!";break e}}ss(l)}l=!1}l&&(t=n[0])}}return n=Nt(),n.memoizedState=n.baseState=t,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Tf,lastRenderedState:t},n.queue=l,n=Jf.bind(null,ye,l),l.dispatch=n,l=Bc(!1),f=Vc.bind(null,ye,!1,l.queue),l=Nt(),d={state:t,dispatch:null,action:e,pending:null},l.queue=d,n=Uv.bind(null,ye,d,f,n),d.dispatch=n,l.memoizedState=e,[t,n,!1]}function Of(e){var t=Xe();return Df(t,Le,e)}function Df(e,t,n){if(t=Uc(e,t,Tf)[0],e=ol(Ua)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var l=Ir(t)}catch(x){throw x===Rn?Wi:x}else l=t;t=Xe();var d=t.queue,f=d.dispatch;return n!==t.memoizedState&&(ye.flags|=2048,Ln(9,{destroy:void 0},Lv.bind(null,d,n),null)),[l,f,e]}function Lv(e,t){e.action=t}function Mf(e){var t=Xe(),n=Le;if(n!==null)return Df(t,n,e);Xe(),t=t.memoizedState,n=Xe();var l=n.queue.dispatch;return n.memoizedState=e,[t,l,!1]}function Ln(e,t,n,l){return e={tag:e,create:n,deps:l,inst:t,next:null},t=ye.updateQueue,t===null&&(t=il(),ye.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(l=n.next,n.next=e,e.next=l,t.lastEffect=e),e}function Uf(){return Xe().memoizedState}function cl(e,t,n,l){var d=Nt();ye.flags|=e,d.memoizedState=Ln(1|t,{destroy:void 0},n,l===void 0?null:l)}function ul(e,t,n,l){var d=Xe();l=l===void 0?null:l;var f=d.memoizedState.inst;Le!==null&&l!==null&&Ac(l,Le.memoizedState.deps)?d.memoizedState=Ln(t,f,n,l):(ye.flags|=e,d.memoizedState=Ln(1|t,f,n,l))}function Lf(e,t){cl(8390656,8,e,t)}function qc(e,t){ul(2048,8,e,t)}function Bv(e){ye.flags|=4;var t=ye.updateQueue;if(t===null)t=il(),ye.updateQueue=t,t.events=[e];else{var n=t.events;n===null?t.events=[e]:n.push(e)}}function Bf(e){var t=Xe().memoizedState;return Bv({ref:t,nextImpl:e}),function(){if((Oe&2)!==0)throw Error(o(440));return t.impl.apply(void 0,arguments)}}function zf(e,t){return ul(4,2,e,t)}function qf(e,t){return ul(4,4,e,t)}function If(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function $f(e,t,n){n=n!=null?n.concat([e]):null,ul(4,4,If.bind(null,t,e),n)}function Ic(){}function Pf(e,t){var n=Xe();t=t===void 0?null:t;var l=n.memoizedState;return t!==null&&Ac(t,l[1])?l[0]:(n.memoizedState=[e,t],e)}function Hf(e,t){var n=Xe();t=t===void 0?null:t;var l=n.memoizedState;if(t!==null&&Ac(t,l[1]))return l[0];if(l=e(),Ys){ba(!0);try{e()}finally{ba(!1)}}return n.memoizedState=[l,t],l}function $c(e,t,n){return n===void 0||(Ma&1073741824)!==0&&(Ee&261930)===0?e.memoizedState=t:(e.memoizedState=n,e=Vm(),ye.lanes|=e,hs|=e,n)}function Vf(e,t,n,l){return Lt(n,t)?n:Dn.current!==null?(e=$c(e,n,l),Lt(e,t)||(tt=!0),e):(Ma&42)===0||(Ma&1073741824)!==0&&(Ee&261930)===0?(tt=!0,e.memoizedState=n):(e=Vm(),ye.lanes|=e,hs|=e,t)}function Gf(e,t,n,l,d){var f=W.p;W.p=f!==0&&8>f?f:8;var x=D.T,N={};D.T=N,Vc(e,!1,t,n);try{var C=d(),$=D.S;if($!==null&&$(N,C),C!==null&&typeof C=="object"&&typeof C.then=="function"){var Y=Ov(C,l);$r(e,t,Y,Pt(e))}else $r(e,t,l,Pt(e))}catch(X){$r(e,t,{then:function(){},status:"rejected",reason:X},Pt())}finally{W.p=f,x!==null&&N.types!==null&&(x.types=N.types),D.T=x}}function zv(){}function Pc(e,t,n,l){if(e.tag!==5)throw Error(o(476));var d=Yf(e).queue;Gf(e,d,t,se,n===null?zv:function(){return Kf(e),n(l)})}function Yf(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:se,baseState:se,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ua,lastRenderedState:se},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ua,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Kf(e){var t=Yf(e);t.next===null&&(t=e.alternate.memoizedState),$r(e,t.next.queue,{},Pt())}function Hc(){return mt(ni)}function Ff(){return Xe().memoizedState}function Qf(){return Xe().memoizedState}function qv(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=Pt();e=is(n);var l=ls(t,e,n);l!==null&&(Mt(l,t,n),Lr(l,t,n)),t={cache:bc()},e.payload=t;return}t=t.return}}function Iv(e,t,n){var l=Pt();n={lane:l,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},dl(e)?Xf(t,n):(n=lc(e,t,n,l),n!==null&&(Mt(n,e,l),Wf(n,t,l)))}function Jf(e,t,n){var l=Pt();$r(e,t,n,l)}function $r(e,t,n,l){var d={lane:l,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(dl(e))Xf(t,d);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=t.lastRenderedReducer,f!==null))try{var x=t.lastRenderedState,N=f(x,n);if(d.hasEagerState=!0,d.eagerState=N,Lt(N,x))return Gi(e,t,d,0),qe===null&&Vi(),!1}catch{}finally{}if(n=lc(e,t,d,l),n!==null)return Mt(n,e,l),Wf(n,t,l),!0}return!1}function Vc(e,t,n,l){if(l={lane:2,revertLane:ju(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},dl(e)){if(t)throw Error(o(479))}else t=lc(e,n,l,2),t!==null&&Mt(t,e,2)}function dl(e){var t=e.alternate;return e===ye||t!==null&&t===ye}function Xf(e,t){Mn=nl=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Wf(e,t,n){if((n&4194048)!==0){var l=t.lanes;l&=e.pendingLanes,n|=l,t.lanes=n,ah(e,n)}}var Pr={readContext:mt,use:ll,useCallback:Fe,useContext:Fe,useEffect:Fe,useImperativeHandle:Fe,useLayoutEffect:Fe,useInsertionEffect:Fe,useMemo:Fe,useReducer:Fe,useRef:Fe,useState:Fe,useDebugValue:Fe,useDeferredValue:Fe,useTransition:Fe,useSyncExternalStore:Fe,useId:Fe,useHostTransitionStatus:Fe,useFormState:Fe,useActionState:Fe,useOptimistic:Fe,useMemoCache:Fe,useCacheRefresh:Fe};Pr.useEffectEvent=Fe;var Zf={readContext:mt,use:ll,useCallback:function(e,t){return Nt().memoizedState=[e,t===void 0?null:t],e},useContext:mt,useEffect:Lf,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,cl(4194308,4,If.bind(null,t,e),n)},useLayoutEffect:function(e,t){return cl(4194308,4,e,t)},useInsertionEffect:function(e,t){cl(4,2,e,t)},useMemo:function(e,t){var n=Nt();t=t===void 0?null:t;var l=e();if(Ys){ba(!0);try{e()}finally{ba(!1)}}return n.memoizedState=[l,t],l},useReducer:function(e,t,n){var l=Nt();if(n!==void 0){var d=n(t);if(Ys){ba(!0);try{n(t)}finally{ba(!1)}}}else d=t;return l.memoizedState=l.baseState=d,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:d},l.queue=e,e=e.dispatch=Iv.bind(null,ye,e),[l.memoizedState,e]},useRef:function(e){var t=Nt();return e={current:e},t.memoizedState=e},useState:function(e){e=Bc(e);var t=e.queue,n=Jf.bind(null,ye,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Ic,useDeferredValue:function(e,t){var n=Nt();return $c(n,e,t)},useTransition:function(){var e=Bc(!1);return e=Gf.bind(null,ye,e.queue,!0,!1),Nt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var l=ye,d=Nt();if(Ce){if(n===void 0)throw Error(o(407));n=n()}else{if(n=t(),qe===null)throw Error(o(349));(Ee&127)!==0||yf(l,t,n)}d.memoizedState=n;var f={value:n,getSnapshot:t};return d.queue=f,Lf(jf.bind(null,l,f,e),[e]),l.flags|=2048,Ln(9,{destroy:void 0},wf.bind(null,l,f,n,t),null),n},useId:function(){var e=Nt(),t=qe.identifierPrefix;if(Ce){var n=ya,l=va;n=(l&~(1<<32-xt(l)-1)).toString(32)+n,t="_"+t+"R_"+n,n=rl++,0<n&&(t+="H"+n.toString(32)),t+="_"}else n=Dv++,t="_"+t+"r_"+n.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:Hc,useFormState:Rf,useActionState:Rf,useOptimistic:function(e){var t=Nt();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=Vc.bind(null,ye,!0,n),n.dispatch=t,[e,t]},useMemoCache:Mc,useCacheRefresh:function(){return Nt().memoizedState=qv.bind(null,ye)},useEffectEvent:function(e){var t=Nt(),n={impl:e};return t.memoizedState=n,function(){if((Oe&2)!==0)throw Error(o(440));return n.impl.apply(void 0,arguments)}}},Gc={readContext:mt,use:ll,useCallback:Pf,useContext:mt,useEffect:qc,useImperativeHandle:$f,useInsertionEffect:zf,useLayoutEffect:qf,useMemo:Hf,useReducer:ol,useRef:Uf,useState:function(){return ol(Ua)},useDebugValue:Ic,useDeferredValue:function(e,t){var n=Xe();return Vf(n,Le.memoizedState,e,t)},useTransition:function(){var e=ol(Ua)[0],t=Xe().memoizedState;return[typeof e=="boolean"?e:Ir(e),t]},useSyncExternalStore:vf,useId:Ff,useHostTransitionStatus:Hc,useFormState:Of,useActionState:Of,useOptimistic:function(e,t){var n=Xe();return Sf(n,Le,e,t)},useMemoCache:Mc,useCacheRefresh:Qf};Gc.useEffectEvent=Bf;var em={readContext:mt,use:ll,useCallback:Pf,useContext:mt,useEffect:qc,useImperativeHandle:$f,useInsertionEffect:zf,useLayoutEffect:qf,useMemo:Hf,useReducer:Lc,useRef:Uf,useState:function(){return Lc(Ua)},useDebugValue:Ic,useDeferredValue:function(e,t){var n=Xe();return Le===null?$c(n,e,t):Vf(n,Le.memoizedState,e,t)},useTransition:function(){var e=Lc(Ua)[0],t=Xe().memoizedState;return[typeof e=="boolean"?e:Ir(e),t]},useSyncExternalStore:vf,useId:Ff,useHostTransitionStatus:Hc,useFormState:Mf,useActionState:Mf,useOptimistic:function(e,t){var n=Xe();return Le!==null?Sf(n,Le,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:Mc,useCacheRefresh:Qf};em.useEffectEvent=Bf;function Yc(e,t,n,l){t=e.memoizedState,n=n(l,t),n=n==null?t:w({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Kc={enqueueSetState:function(e,t,n){e=e._reactInternals;var l=Pt(),d=is(l);d.payload=t,n!=null&&(d.callback=n),t=ls(e,d,l),t!==null&&(Mt(t,e,l),Lr(t,e,l))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var l=Pt(),d=is(l);d.tag=1,d.payload=t,n!=null&&(d.callback=n),t=ls(e,d,l),t!==null&&(Mt(t,e,l),Lr(t,e,l))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Pt(),l=is(n);l.tag=2,t!=null&&(l.callback=t),t=ls(e,l,n),t!==null&&(Mt(t,e,n),Lr(t,e,n))}};function tm(e,t,n,l,d,f,x){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,f,x):t.prototype&&t.prototype.isPureReactComponent?!Cr(n,l)||!Cr(d,f):!0}function am(e,t,n,l){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,l),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,l),t.state!==e&&Kc.enqueueReplaceState(t,t.state,null)}function Ks(e,t){var n=t;if("ref"in t){n={};for(var l in t)l!=="ref"&&(n[l]=t[l])}if(e=e.defaultProps){n===t&&(n=w({},n));for(var d in e)n[d]===void 0&&(n[d]=e[d])}return n}function sm(e){Hi(e)}function nm(e){console.error(e)}function rm(e){Hi(e)}function hl(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(l){setTimeout(function(){throw l})}}function im(e,t,n){try{var l=e.onCaughtError;l(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function Fc(e,t,n){return n=is(n),n.tag=3,n.payload={element:null},n.callback=function(){hl(e,t)},n}function lm(e){return e=is(e),e.tag=3,e}function om(e,t,n,l){var d=n.type.getDerivedStateFromError;if(typeof d=="function"){var f=l.value;e.payload=function(){return d(f)},e.callback=function(){im(t,n,l)}}var x=n.stateNode;x!==null&&typeof x.componentDidCatch=="function"&&(e.callback=function(){im(t,n,l),typeof d!="function"&&(fs===null?fs=new Set([this]):fs.add(this));var N=l.stack;this.componentDidCatch(l.value,{componentStack:N!==null?N:""})})}function $v(e,t,n,l,d){if(n.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(t=n.alternate,t!==null&&Cn(t,n,d,!0),n=zt.current,n!==null){switch(n.tag){case 31:case 13:return Zt===null?_l():n.alternate===null&&Qe===0&&(Qe=3),n.flags&=-257,n.flags|=65536,n.lanes=d,l===Zi?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([l]):t.add(l),vu(e,l,d)),!1;case 22:return n.flags|=65536,l===Zi?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([l])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([l]):n.add(l)),vu(e,l,d)),!1}throw Error(o(435,n.tag))}return vu(e,l,d),_l(),!1}if(Ce)return t=zt.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=d,l!==fc&&(e=Error(o(422),{cause:l}),Rr(Qt(e,n)))):(l!==fc&&(t=Error(o(423),{cause:l}),Rr(Qt(t,n))),e=e.current.alternate,e.flags|=65536,d&=-d,e.lanes|=d,l=Qt(l,n),d=Fc(e.stateNode,l,d),_c(e,d),Qe!==4&&(Qe=2)),!1;var f=Error(o(520),{cause:l});if(f=Qt(f,n),Jr===null?Jr=[f]:Jr.push(f),Qe!==4&&(Qe=2),t===null)return!0;l=Qt(l,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=d&-d,n.lanes|=e,e=Fc(n.stateNode,l,e),_c(n,e),!1;case 1:if(t=n.type,f=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(fs===null||!fs.has(f))))return n.flags|=65536,d&=-d,n.lanes|=d,d=lm(d),om(d,e,n,l),_c(n,d),!1}n=n.return}while(n!==null);return!1}var Qc=Error(o(461)),tt=!1;function pt(e,t,n,l){t.child=e===null?hf(t,null,n,l):Gs(t,e.child,n,l)}function cm(e,t,n,l,d){n=n.render;var f=t.ref;if("ref"in l){var x={};for(var N in l)N!=="ref"&&(x[N]=l[N])}else x=l;return $s(t),l=Tc(e,t,n,x,f,d),N=Rc(),e!==null&&!tt?(Oc(e,t,d),La(e,t,d)):(Ce&&N&&dc(t),t.flags|=1,pt(e,t,l,d),t.child)}function um(e,t,n,l,d){if(e===null){var f=n.type;return typeof f=="function"&&!oc(f)&&f.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=f,dm(e,t,f,l,d)):(e=Ki(n.type,null,l,t,t.mode,d),e.ref=t.ref,e.return=t,t.child=e)}if(f=e.child,!su(e,d)){var x=f.memoizedProps;if(n=n.compare,n=n!==null?n:Cr,n(x,l)&&e.ref===t.ref)return La(e,t,d)}return t.flags|=1,e=Ta(f,l),e.ref=t.ref,e.return=t,t.child=e}function dm(e,t,n,l,d){if(e!==null){var f=e.memoizedProps;if(Cr(f,l)&&e.ref===t.ref)if(tt=!1,t.pendingProps=l=f,su(e,d))(e.flags&131072)!==0&&(tt=!0);else return t.lanes=e.lanes,La(e,t,d)}return Jc(e,t,n,l,d)}function hm(e,t,n,l){var d=l.children,f=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((t.flags&128)!==0){if(f=f!==null?f.baseLanes|n:n,e!==null){for(l=t.child=e.child,d=0;l!==null;)d=d|l.lanes|l.childLanes,l=l.sibling;l=d&~f}else l=0,t.child=null;return fm(e,t,f,n,l)}if((n&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&Xi(t,f!==null?f.cachePool:null),f!==null?pf(t,f):Ec(),gf(t);else return l=t.lanes=536870912,fm(e,t,f!==null?f.baseLanes|n:n,n,l)}else f!==null?(Xi(t,f.cachePool),pf(t,f),cs(),t.memoizedState=null):(e!==null&&Xi(t,null),Ec(),cs());return pt(e,t,d,n),t.child}function Hr(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function fm(e,t,n,l,d){var f=yc();return f=f===null?null:{parent:Ze._currentValue,pool:f},t.memoizedState={baseLanes:n,cachePool:f},e!==null&&Xi(t,null),Ec(),gf(t),e!==null&&Cn(e,t,l,!0),t.childLanes=d,null}function fl(e,t){return t=pl({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function mm(e,t,n){return Gs(t,e.child,null,n),e=fl(t,t.pendingProps),e.flags|=2,qt(t),t.memoizedState=null,e}function Pv(e,t,n){var l=t.pendingProps,d=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(Ce){if(l.mode==="hidden")return e=fl(t,l),t.lanes=536870912,Hr(null,e);if(Cc(t),(e=Pe)?(e=Ep(e,Wt),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:ts!==null?{id:va,overflow:ya}:null,retryLane:536870912,hydrationErrors:null},n=Jh(e),n.return=t,t.child=n,ft=t,Pe=null)):e=null,e===null)throw ss(t);return t.lanes=536870912,null}return fl(t,l)}var f=e.memoizedState;if(f!==null){var x=f.dehydrated;if(Cc(t),d)if(t.flags&256)t.flags&=-257,t=mm(e,t,n);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(o(558));else if(tt||Cn(e,t,n,!1),d=(n&e.childLanes)!==0,tt||d){if(l=qe,l!==null&&(x=sh(l,n),x!==0&&x!==f.retryLane))throw f.retryLane=x,Bs(e,x),Mt(l,e,x),Qc;_l(),t=mm(e,t,n)}else e=f.treeContext,Pe=ea(x.nextSibling),ft=t,Ce=!0,as=null,Wt=!1,e!==null&&Zh(t,e),t=fl(t,l),t.flags|=4096;return t}return e=Ta(e.child,{mode:l.mode,children:l.children}),e.ref=t.ref,t.child=e,e.return=t,e}function ml(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(o(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function Jc(e,t,n,l,d){return $s(t),n=Tc(e,t,n,l,void 0,d),l=Rc(),e!==null&&!tt?(Oc(e,t,d),La(e,t,d)):(Ce&&l&&dc(t),t.flags|=1,pt(e,t,n,d),t.child)}function pm(e,t,n,l,d,f){return $s(t),t.updateQueue=null,n=bf(t,l,n,d),xf(e),l=Rc(),e!==null&&!tt?(Oc(e,t,f),La(e,t,f)):(Ce&&l&&dc(t),t.flags|=1,pt(e,t,n,f),t.child)}function gm(e,t,n,l,d){if($s(t),t.stateNode===null){var f=_n,x=n.contextType;typeof x=="object"&&x!==null&&(f=mt(x)),f=new n(l,f),t.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=Kc,t.stateNode=f,f._reactInternals=t,f=t.stateNode,f.props=l,f.state=t.memoizedState,f.refs={},jc(t),x=n.contextType,f.context=typeof x=="object"&&x!==null?mt(x):_n,f.state=t.memoizedState,x=n.getDerivedStateFromProps,typeof x=="function"&&(Yc(t,n,x,l),f.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(x=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),x!==f.state&&Kc.enqueueReplaceState(f,f.state,null),zr(t,l,f,d),Br(),f.state=t.memoizedState),typeof f.componentDidMount=="function"&&(t.flags|=4194308),l=!0}else if(e===null){f=t.stateNode;var N=t.memoizedProps,C=Ks(n,N);f.props=C;var $=f.context,Y=n.contextType;x=_n,typeof Y=="object"&&Y!==null&&(x=mt(Y));var X=n.getDerivedStateFromProps;Y=typeof X=="function"||typeof f.getSnapshotBeforeUpdate=="function",N=t.pendingProps!==N,Y||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(N||$!==x)&&am(t,f,l,x),rs=!1;var P=t.memoizedState;f.state=P,zr(t,l,f,d),Br(),$=t.memoizedState,N||P!==$||rs?(typeof X=="function"&&(Yc(t,n,X,l),$=t.memoizedState),(C=rs||tm(t,n,C,l,P,$,x))?(Y||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(t.flags|=4194308)):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=l,t.memoizedState=$),f.props=l,f.state=$,f.context=x,l=C):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),l=!1)}else{f=t.stateNode,Nc(e,t),x=t.memoizedProps,Y=Ks(n,x),f.props=Y,X=t.pendingProps,P=f.context,$=n.contextType,C=_n,typeof $=="object"&&$!==null&&(C=mt($)),N=n.getDerivedStateFromProps,($=typeof N=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(x!==X||P!==C)&&am(t,f,l,C),rs=!1,P=t.memoizedState,f.state=P,zr(t,l,f,d),Br();var G=t.memoizedState;x!==X||P!==G||rs||e!==null&&e.dependencies!==null&&Qi(e.dependencies)?(typeof N=="function"&&(Yc(t,n,N,l),G=t.memoizedState),(Y=rs||tm(t,n,Y,l,P,G,C)||e!==null&&e.dependencies!==null&&Qi(e.dependencies))?($||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(l,G,C),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(l,G,C)),typeof f.componentDidUpdate=="function"&&(t.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof f.componentDidUpdate!="function"||x===e.memoizedProps&&P===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||x===e.memoizedProps&&P===e.memoizedState||(t.flags|=1024),t.memoizedProps=l,t.memoizedState=G),f.props=l,f.state=G,f.context=C,l=Y):(typeof f.componentDidUpdate!="function"||x===e.memoizedProps&&P===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||x===e.memoizedProps&&P===e.memoizedState||(t.flags|=1024),l=!1)}return f=l,ml(e,t),l=(t.flags&128)!==0,f||l?(f=t.stateNode,n=l&&typeof n.getDerivedStateFromError!="function"?null:f.render(),t.flags|=1,e!==null&&l?(t.child=Gs(t,e.child,null,d),t.child=Gs(t,null,n,d)):pt(e,t,n,d),t.memoizedState=f.state,e=t.child):e=La(e,t,d),e}function xm(e,t,n,l){return qs(),t.flags|=256,pt(e,t,n,l),t.child}var Xc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Wc(e){return{baseLanes:e,cachePool:rf()}}function Zc(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=$t),e}function bm(e,t,n){var l=t.pendingProps,d=!1,f=(t.flags&128)!==0,x;if((x=f)||(x=e!==null&&e.memoizedState===null?!1:(Je.current&2)!==0),x&&(d=!0,t.flags&=-129),x=(t.flags&32)!==0,t.flags&=-33,e===null){if(Ce){if(d?os(t):cs(),(e=Pe)?(e=Ep(e,Wt),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:ts!==null?{id:va,overflow:ya}:null,retryLane:536870912,hydrationErrors:null},n=Jh(e),n.return=t,t.child=n,ft=t,Pe=null)):e=null,e===null)throw ss(t);return Uu(e)?t.lanes=32:t.lanes=536870912,null}var N=l.children;return l=l.fallback,d?(cs(),d=t.mode,N=pl({mode:"hidden",children:N},d),l=zs(l,d,n,null),N.return=t,l.return=t,N.sibling=l,t.child=N,l=t.child,l.memoizedState=Wc(n),l.childLanes=Zc(e,x,n),t.memoizedState=Xc,Hr(null,l)):(os(t),eu(t,N))}var C=e.memoizedState;if(C!==null&&(N=C.dehydrated,N!==null)){if(f)t.flags&256?(os(t),t.flags&=-257,t=tu(e,t,n)):t.memoizedState!==null?(cs(),t.child=e.child,t.flags|=128,t=null):(cs(),N=l.fallback,d=t.mode,l=pl({mode:"visible",children:l.children},d),N=zs(N,d,n,null),N.flags|=2,l.return=t,N.return=t,l.sibling=N,t.child=l,Gs(t,e.child,null,n),l=t.child,l.memoizedState=Wc(n),l.childLanes=Zc(e,x,n),t.memoizedState=Xc,t=Hr(null,l));else if(os(t),Uu(N)){if(x=N.nextSibling&&N.nextSibling.dataset,x)var $=x.dgst;x=$,l=Error(o(419)),l.stack="",l.digest=x,Rr({value:l,source:null,stack:null}),t=tu(e,t,n)}else if(tt||Cn(e,t,n,!1),x=(n&e.childLanes)!==0,tt||x){if(x=qe,x!==null&&(l=sh(x,n),l!==0&&l!==C.retryLane))throw C.retryLane=l,Bs(e,l),Mt(x,e,l),Qc;Mu(N)||_l(),t=tu(e,t,n)}else Mu(N)?(t.flags|=192,t.child=e.child,t=null):(e=C.treeContext,Pe=ea(N.nextSibling),ft=t,Ce=!0,as=null,Wt=!1,e!==null&&Zh(t,e),t=eu(t,l.children),t.flags|=4096);return t}return d?(cs(),N=l.fallback,d=t.mode,C=e.child,$=C.sibling,l=Ta(C,{mode:"hidden",children:l.children}),l.subtreeFlags=C.subtreeFlags&65011712,$!==null?N=Ta($,N):(N=zs(N,d,n,null),N.flags|=2),N.return=t,l.return=t,l.sibling=N,t.child=l,Hr(null,l),l=t.child,N=e.child.memoizedState,N===null?N=Wc(n):(d=N.cachePool,d!==null?(C=Ze._currentValue,d=d.parent!==C?{parent:C,pool:C}:d):d=rf(),N={baseLanes:N.baseLanes|n,cachePool:d}),l.memoizedState=N,l.childLanes=Zc(e,x,n),t.memoizedState=Xc,Hr(e.child,l)):(os(t),n=e.child,e=n.sibling,n=Ta(n,{mode:"visible",children:l.children}),n.return=t,n.sibling=null,e!==null&&(x=t.deletions,x===null?(t.deletions=[e],t.flags|=16):x.push(e)),t.child=n,t.memoizedState=null,n)}function eu(e,t){return t=pl({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function pl(e,t){return e=Bt(22,e,null,t),e.lanes=0,e}function tu(e,t,n){return Gs(t,e.child,null,n),e=eu(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function vm(e,t,n){e.lanes|=t;var l=e.alternate;l!==null&&(l.lanes|=t),gc(e.return,t,n)}function au(e,t,n,l,d,f){var x=e.memoizedState;x===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:l,tail:n,tailMode:d,treeForkCount:f}:(x.isBackwards=t,x.rendering=null,x.renderingStartTime=0,x.last=l,x.tail=n,x.tailMode=d,x.treeForkCount=f)}function ym(e,t,n){var l=t.pendingProps,d=l.revealOrder,f=l.tail;l=l.children;var x=Je.current,N=(x&2)!==0;if(N?(x=x&1|2,t.flags|=128):x&=1,te(Je,x),pt(e,t,l,n),l=Ce?Tr:0,!N&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&vm(e,n,t);else if(e.tag===19)vm(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(d){case"forwards":for(n=t.child,d=null;n!==null;)e=n.alternate,e!==null&&sl(e)===null&&(d=n),n=n.sibling;n=d,n===null?(d=t.child,t.child=null):(d=n.sibling,n.sibling=null),au(t,!1,d,n,f,l);break;case"backwards":case"unstable_legacy-backwards":for(n=null,d=t.child,t.child=null;d!==null;){if(e=d.alternate,e!==null&&sl(e)===null){t.child=d;break}e=d.sibling,d.sibling=n,n=d,d=e}au(t,!0,n,null,f,l);break;case"together":au(t,!1,null,null,void 0,l);break;default:t.memoizedState=null}return t.child}function La(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),hs|=t.lanes,(n&t.childLanes)===0)if(e!==null){if(Cn(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(o(153));if(t.child!==null){for(e=t.child,n=Ta(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Ta(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function su(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&Qi(e)))}function Hv(e,t,n){switch(t.tag){case 3:Ae(t,t.stateNode.containerInfo),ns(t,Ze,e.memoizedState.cache),qs();break;case 27:case 5:Ve(t);break;case 4:Ae(t,t.stateNode.containerInfo);break;case 10:ns(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,Cc(t),null;break;case 13:var l=t.memoizedState;if(l!==null)return l.dehydrated!==null?(os(t),t.flags|=128,null):(n&t.child.childLanes)!==0?bm(e,t,n):(os(t),e=La(e,t,n),e!==null?e.sibling:null);os(t);break;case 19:var d=(e.flags&128)!==0;if(l=(n&t.childLanes)!==0,l||(Cn(e,t,n,!1),l=(n&t.childLanes)!==0),d){if(l)return ym(e,t,n);t.flags|=128}if(d=t.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),te(Je,Je.current),l)break;return null;case 22:return t.lanes=0,hm(e,t,n,t.pendingProps);case 24:ns(t,Ze,e.memoizedState.cache)}return La(e,t,n)}function wm(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)tt=!0;else{if(!su(e,n)&&(t.flags&128)===0)return tt=!1,Hv(e,t,n);tt=(e.flags&131072)!==0}else tt=!1,Ce&&(t.flags&1048576)!==0&&Wh(t,Tr,t.index);switch(t.lanes=0,t.tag){case 16:e:{var l=t.pendingProps;if(e=Hs(t.elementType),t.type=e,typeof e=="function")oc(e)?(l=Ks(e,l),t.tag=1,t=gm(null,t,e,l,n)):(t.tag=0,t=Jc(null,t,e,l,n));else{if(e!=null){var d=e.$$typeof;if(d===q){t.tag=11,t=cm(null,t,e,l,n);break e}else if(d===B){t.tag=14,t=um(null,t,e,l,n);break e}}throw t=H(e)||e,Error(o(306,t,""))}}return t;case 0:return Jc(e,t,t.type,t.pendingProps,n);case 1:return l=t.type,d=Ks(l,t.pendingProps),gm(e,t,l,d,n);case 3:e:{if(Ae(t,t.stateNode.containerInfo),e===null)throw Error(o(387));l=t.pendingProps;var f=t.memoizedState;d=f.element,Nc(e,t),zr(t,l,null,n);var x=t.memoizedState;if(l=x.cache,ns(t,Ze,l),l!==f.cache&&xc(t,[Ze],n,!0),Br(),l=x.element,f.isDehydrated)if(f={element:l,isDehydrated:!1,cache:x.cache},t.updateQueue.baseState=f,t.memoizedState=f,t.flags&256){t=xm(e,t,l,n);break e}else if(l!==d){d=Qt(Error(o(424)),t),Rr(d),t=xm(e,t,l,n);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Pe=ea(e.firstChild),ft=t,Ce=!0,as=null,Wt=!0,n=hf(t,null,l,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(qs(),l===d){t=La(e,t,n);break e}pt(e,t,l,n)}t=t.child}return t;case 26:return ml(e,t),e===null?(n=Op(t.type,null,t.pendingProps,null))?t.memoizedState=n:Ce||(n=t.type,e=t.pendingProps,l=Rl(de.current).createElement(n),l[ht]=t,l[Ct]=e,gt(l,n,e),ct(l),t.stateNode=l):t.memoizedState=Op(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Ve(t),e===null&&Ce&&(l=t.stateNode=Ap(t.type,t.pendingProps,de.current),ft=t,Wt=!0,d=Pe,xs(t.type)?(Lu=d,Pe=ea(l.firstChild)):Pe=d),pt(e,t,t.pendingProps.children,n),ml(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Ce&&((d=l=Pe)&&(l=vy(l,t.type,t.pendingProps,Wt),l!==null?(t.stateNode=l,ft=t,Pe=ea(l.firstChild),Wt=!1,d=!0):d=!1),d||ss(t)),Ve(t),d=t.type,f=t.pendingProps,x=e!==null?e.memoizedProps:null,l=f.children,Ru(d,f)?l=null:x!==null&&Ru(d,x)&&(t.flags|=32),t.memoizedState!==null&&(d=Tc(e,t,Mv,null,null,n),ni._currentValue=d),ml(e,t),pt(e,t,l,n),t.child;case 6:return e===null&&Ce&&((e=n=Pe)&&(n=yy(n,t.pendingProps,Wt),n!==null?(t.stateNode=n,ft=t,Pe=null,e=!0):e=!1),e||ss(t)),null;case 13:return bm(e,t,n);case 4:return Ae(t,t.stateNode.containerInfo),l=t.pendingProps,e===null?t.child=Gs(t,null,l,n):pt(e,t,l,n),t.child;case 11:return cm(e,t,t.type,t.pendingProps,n);case 7:return pt(e,t,t.pendingProps,n),t.child;case 8:return pt(e,t,t.pendingProps.children,n),t.child;case 12:return pt(e,t,t.pendingProps.children,n),t.child;case 10:return l=t.pendingProps,ns(t,t.type,l.value),pt(e,t,l.children,n),t.child;case 9:return d=t.type._context,l=t.pendingProps.children,$s(t),d=mt(d),l=l(d),t.flags|=1,pt(e,t,l,n),t.child;case 14:return um(e,t,t.type,t.pendingProps,n);case 15:return dm(e,t,t.type,t.pendingProps,n);case 19:return ym(e,t,n);case 31:return Pv(e,t,n);case 22:return hm(e,t,n,t.pendingProps);case 24:return $s(t),l=mt(Ze),e===null?(d=yc(),d===null&&(d=qe,f=bc(),d.pooledCache=f,f.refCount++,f!==null&&(d.pooledCacheLanes|=n),d=f),t.memoizedState={parent:l,cache:d},jc(t),ns(t,Ze,d)):((e.lanes&n)!==0&&(Nc(e,t),zr(t,null,null,n),Br()),d=e.memoizedState,f=t.memoizedState,d.parent!==l?(d={parent:l,cache:l},t.memoizedState=d,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=d),ns(t,Ze,l)):(l=f.cache,ns(t,Ze,l),l!==d.cache&&xc(t,[Ze],n,!0))),pt(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(o(156,t.tag))}function Ba(e){e.flags|=4}function nu(e,t,n,l,d){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(d&335544128)===d)if(e.stateNode.complete)e.flags|=8192;else if(Fm())e.flags|=8192;else throw Vs=Zi,wc}else e.flags&=-16777217}function jm(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Bp(t))if(Fm())e.flags|=8192;else throw Vs=Zi,wc}function gl(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?eh():536870912,e.lanes|=t,In|=t)}function Vr(e,t){if(!Ce)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var l=null;n!==null;)n.alternate!==null&&(l=n),n=n.sibling;l===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function He(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,l=0;if(t)for(var d=e.child;d!==null;)n|=d.lanes|d.childLanes,l|=d.subtreeFlags&65011712,l|=d.flags&65011712,d.return=e,d=d.sibling;else for(d=e.child;d!==null;)n|=d.lanes|d.childLanes,l|=d.subtreeFlags,l|=d.flags,d.return=e,d=d.sibling;return e.subtreeFlags|=l,e.childLanes=n,t}function Vv(e,t,n){var l=t.pendingProps;switch(hc(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return He(t),null;case 1:return He(t),null;case 3:return n=t.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),t.memoizedState.cache!==l&&(t.flags|=2048),Da(Ze),De(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(kn(t)?Ba(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,mc())),He(t),null;case 26:var d=t.type,f=t.memoizedState;return e===null?(Ba(t),f!==null?(He(t),jm(t,f)):(He(t),nu(t,d,null,l,n))):f?f!==e.memoizedState?(Ba(t),He(t),jm(t,f)):(He(t),t.flags&=-16777217):(e=e.memoizedProps,e!==l&&Ba(t),He(t),nu(t,d,e,l,n)),null;case 27:if(pa(t),n=de.current,d=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==l&&Ba(t);else{if(!l){if(t.stateNode===null)throw Error(o(166));return He(t),null}e=ee.current,kn(t)?ef(t):(e=Ap(d,l,n),t.stateNode=e,Ba(t))}return He(t),null;case 5:if(pa(t),d=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==l&&Ba(t);else{if(!l){if(t.stateNode===null)throw Error(o(166));return He(t),null}if(f=ee.current,kn(t))ef(t);else{var x=Rl(de.current);switch(f){case 1:f=x.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:f=x.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":f=x.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":f=x.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":f=x.createElement("div"),f.innerHTML="<script><\/script>",f=f.removeChild(f.firstChild);break;case"select":f=typeof l.is=="string"?x.createElement("select",{is:l.is}):x.createElement("select"),l.multiple?f.multiple=!0:l.size&&(f.size=l.size);break;default:f=typeof l.is=="string"?x.createElement(d,{is:l.is}):x.createElement(d)}}f[ht]=t,f[Ct]=l;e:for(x=t.child;x!==null;){if(x.tag===5||x.tag===6)f.appendChild(x.stateNode);else if(x.tag!==4&&x.tag!==27&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===t)break e;for(;x.sibling===null;){if(x.return===null||x.return===t)break e;x=x.return}x.sibling.return=x.return,x=x.sibling}t.stateNode=f;e:switch(gt(f,d,l),d){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&Ba(t)}}return He(t),nu(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==l&&Ba(t);else{if(typeof l!="string"&&t.stateNode===null)throw Error(o(166));if(e=de.current,kn(t)){if(e=t.stateNode,n=t.memoizedProps,l=null,d=ft,d!==null)switch(d.tag){case 27:case 5:l=d.memoizedProps}e[ht]=t,e=!!(e.nodeValue===n||l!==null&&l.suppressHydrationWarning===!0||bp(e.nodeValue,n)),e||ss(t,!0)}else e=Rl(e).createTextNode(l),e[ht]=t,t.stateNode=e}return He(t),null;case 31:if(n=t.memoizedState,e===null||e.memoizedState!==null){if(l=kn(t),n!==null){if(e===null){if(!l)throw Error(o(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(557));e[ht]=t}else qs(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;He(t),e=!1}else n=mc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return t.flags&256?(qt(t),t):(qt(t),null);if((t.flags&128)!==0)throw Error(o(558))}return He(t),null;case 13:if(l=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(d=kn(t),l!==null&&l.dehydrated!==null){if(e===null){if(!d)throw Error(o(318));if(d=t.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(o(317));d[ht]=t}else qs(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;He(t),d=!1}else d=mc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=d),d=!0;if(!d)return t.flags&256?(qt(t),t):(qt(t),null)}return qt(t),(t.flags&128)!==0?(t.lanes=n,t):(n=l!==null,e=e!==null&&e.memoizedState!==null,n&&(l=t.child,d=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(d=l.alternate.memoizedState.cachePool.pool),f=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(f=l.memoizedState.cachePool.pool),f!==d&&(l.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),gl(t,t.updateQueue),He(t),null);case 4:return De(),e===null&&Eu(t.stateNode.containerInfo),He(t),null;case 10:return Da(t.type),He(t),null;case 19:if(V(Je),l=t.memoizedState,l===null)return He(t),null;if(d=(t.flags&128)!==0,f=l.rendering,f===null)if(d)Vr(l,!1);else{if(Qe!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(f=sl(e),f!==null){for(t.flags|=128,Vr(l,!1),e=f.updateQueue,t.updateQueue=e,gl(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)Qh(n,e),n=n.sibling;return te(Je,Je.current&1|2),Ce&&Ra(t,l.treeForkCount),t.child}e=e.sibling}l.tail!==null&&We()>wl&&(t.flags|=128,d=!0,Vr(l,!1),t.lanes=4194304)}else{if(!d)if(e=sl(f),e!==null){if(t.flags|=128,d=!0,e=e.updateQueue,t.updateQueue=e,gl(t,e),Vr(l,!0),l.tail===null&&l.tailMode==="hidden"&&!f.alternate&&!Ce)return He(t),null}else 2*We()-l.renderingStartTime>wl&&n!==536870912&&(t.flags|=128,d=!0,Vr(l,!1),t.lanes=4194304);l.isBackwards?(f.sibling=t.child,t.child=f):(e=l.last,e!==null?e.sibling=f:t.child=f,l.last=f)}return l.tail!==null?(e=l.tail,l.rendering=e,l.tail=e.sibling,l.renderingStartTime=We(),e.sibling=null,n=Je.current,te(Je,d?n&1|2:n&1),Ce&&Ra(t,l.treeForkCount),e):(He(t),null);case 22:case 23:return qt(t),kc(),l=t.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(t.flags|=8192):l&&(t.flags|=8192),l?(n&536870912)!==0&&(t.flags&128)===0&&(He(t),t.subtreeFlags&6&&(t.flags|=8192)):He(t),n=t.updateQueue,n!==null&&gl(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),l=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(l=t.memoizedState.cachePool.pool),l!==n&&(t.flags|=2048),e!==null&&V(Ps),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Da(Ze),He(t),null;case 25:return null;case 30:return null}throw Error(o(156,t.tag))}function Gv(e,t){switch(hc(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Da(Ze),De(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return pa(t),null;case 31:if(t.memoizedState!==null){if(qt(t),t.alternate===null)throw Error(o(340));qs()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(qt(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(o(340));qs()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return V(Je),null;case 4:return De(),null;case 10:return Da(t.type),null;case 22:case 23:return qt(t),kc(),e!==null&&V(Ps),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Da(Ze),null;case 25:return null;default:return null}}function Nm(e,t){switch(hc(t),t.tag){case 3:Da(Ze),De();break;case 26:case 27:case 5:pa(t);break;case 4:De();break;case 31:t.memoizedState!==null&&qt(t);break;case 13:qt(t);break;case 19:V(Je);break;case 10:Da(t.type);break;case 22:case 23:qt(t),kc(),e!==null&&V(Ps);break;case 24:Da(Ze)}}function Gr(e,t){try{var n=t.updateQueue,l=n!==null?n.lastEffect:null;if(l!==null){var d=l.next;n=d;do{if((n.tag&e)===e){l=void 0;var f=n.create,x=n.inst;l=f(),x.destroy=l}n=n.next}while(n!==d)}}catch(N){Ue(t,t.return,N)}}function us(e,t,n){try{var l=t.updateQueue,d=l!==null?l.lastEffect:null;if(d!==null){var f=d.next;l=f;do{if((l.tag&e)===e){var x=l.inst,N=x.destroy;if(N!==void 0){x.destroy=void 0,d=t;var C=n,$=N;try{$()}catch(Y){Ue(d,C,Y)}}}l=l.next}while(l!==f)}}catch(Y){Ue(t,t.return,Y)}}function _m(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{mf(t,n)}catch(l){Ue(e,e.return,l)}}}function Sm(e,t,n){n.props=Ks(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(l){Ue(e,t,l)}}function Yr(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof n=="function"?e.refCleanup=n(l):n.current=l}}catch(d){Ue(e,t,d)}}function wa(e,t){var n=e.ref,l=e.refCleanup;if(n!==null)if(typeof l=="function")try{l()}catch(d){Ue(e,t,d)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(d){Ue(e,t,d)}else n.current=null}function Em(e){var t=e.type,n=e.memoizedProps,l=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&l.focus();break e;case"img":n.src?l.src=n.src:n.srcSet&&(l.srcset=n.srcSet)}}catch(d){Ue(e,e.return,d)}}function ru(e,t,n){try{var l=e.stateNode;fy(l,e.type,n,t),l[Ct]=t}catch(d){Ue(e,e.return,d)}}function km(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&xs(e.type)||e.tag===4}function iu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||km(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&xs(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function lu(e,t,n){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Ca));else if(l!==4&&(l===27&&xs(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(lu(e,t,n),e=e.sibling;e!==null;)lu(e,t,n),e=e.sibling}function xl(e,t,n){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(l!==4&&(l===27&&xs(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(xl(e,t,n),e=e.sibling;e!==null;)xl(e,t,n),e=e.sibling}function Cm(e){var t=e.stateNode,n=e.memoizedProps;try{for(var l=e.type,d=t.attributes;d.length;)t.removeAttributeNode(d[0]);gt(t,l,n),t[ht]=e,t[Ct]=n}catch(f){Ue(e,e.return,f)}}var za=!1,at=!1,ou=!1,Am=typeof WeakSet=="function"?WeakSet:Set,ut=null;function Yv(e,t){if(e=e.containerInfo,Au=zl,e=Ih(e),tc(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var l=n.getSelection&&n.getSelection();if(l&&l.rangeCount!==0){n=l.anchorNode;var d=l.anchorOffset,f=l.focusNode;l=l.focusOffset;try{n.nodeType,f.nodeType}catch{n=null;break e}var x=0,N=-1,C=-1,$=0,Y=0,X=e,P=null;t:for(;;){for(var G;X!==n||d!==0&&X.nodeType!==3||(N=x+d),X!==f||l!==0&&X.nodeType!==3||(C=x+l),X.nodeType===3&&(x+=X.nodeValue.length),(G=X.firstChild)!==null;)P=X,X=G;for(;;){if(X===e)break t;if(P===n&&++$===d&&(N=x),P===f&&++Y===l&&(C=x),(G=X.nextSibling)!==null)break;X=P,P=X.parentNode}X=G}n=N===-1||C===-1?null:{start:N,end:C}}else n=null}n=n||{start:0,end:0}}else n=null;for(Tu={focusedElem:e,selectionRange:n},zl=!1,ut=t;ut!==null;)if(t=ut,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ut=e;else for(;ut!==null;){switch(t=ut,f=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(n=0;n<e.length;n++)d=e[n],d.ref.impl=d.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&f!==null){e=void 0,n=t,d=f.memoizedProps,f=f.memoizedState,l=n.stateNode;try{var re=Ks(n.type,d);e=l.getSnapshotBeforeUpdate(re,f),l.__reactInternalSnapshotBeforeUpdate=e}catch(pe){Ue(n,n.return,pe)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)Du(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Du(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(o(163))}if(e=t.sibling,e!==null){e.return=t.return,ut=e;break}ut=t.return}}function Tm(e,t,n){var l=n.flags;switch(n.tag){case 0:case 11:case 15:Ia(e,n),l&4&&Gr(5,n);break;case 1:if(Ia(e,n),l&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(x){Ue(n,n.return,x)}else{var d=Ks(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(d,t,e.__reactInternalSnapshotBeforeUpdate)}catch(x){Ue(n,n.return,x)}}l&64&&_m(n),l&512&&Yr(n,n.return);break;case 3:if(Ia(e,n),l&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{mf(e,t)}catch(x){Ue(n,n.return,x)}}break;case 27:t===null&&l&4&&Cm(n);case 26:case 5:Ia(e,n),t===null&&l&4&&Em(n),l&512&&Yr(n,n.return);break;case 12:Ia(e,n);break;case 31:Ia(e,n),l&4&&Dm(e,n);break;case 13:Ia(e,n),l&4&&Mm(e,n),l&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=ty.bind(null,n),wy(e,n))));break;case 22:if(l=n.memoizedState!==null||za,!l){t=t!==null&&t.memoizedState!==null||at,d=za;var f=at;za=l,(at=t)&&!f?$a(e,n,(n.subtreeFlags&8772)!==0):Ia(e,n),za=d,at=f}break;case 30:break;default:Ia(e,n)}}function Rm(e){var t=e.alternate;t!==null&&(e.alternate=null,Rm(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&zo(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Ge=null,Tt=!1;function qa(e,t,n){for(n=n.child;n!==null;)Om(e,t,n),n=n.sibling}function Om(e,t,n){if(kt&&typeof kt.onCommitFiberUnmount=="function")try{kt.onCommitFiberUnmount(xa,n)}catch{}switch(n.tag){case 26:at||wa(n,t),qa(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:at||wa(n,t);var l=Ge,d=Tt;xs(n.type)&&(Ge=n.stateNode,Tt=!1),qa(e,t,n),ti(n.stateNode),Ge=l,Tt=d;break;case 5:at||wa(n,t);case 6:if(l=Ge,d=Tt,Ge=null,qa(e,t,n),Ge=l,Tt=d,Ge!==null)if(Tt)try{(Ge.nodeType===9?Ge.body:Ge.nodeName==="HTML"?Ge.ownerDocument.body:Ge).removeChild(n.stateNode)}catch(f){Ue(n,t,f)}else try{Ge.removeChild(n.stateNode)}catch(f){Ue(n,t,f)}break;case 18:Ge!==null&&(Tt?(e=Ge,_p(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,n.stateNode),Fn(e)):_p(Ge,n.stateNode));break;case 4:l=Ge,d=Tt,Ge=n.stateNode.containerInfo,Tt=!0,qa(e,t,n),Ge=l,Tt=d;break;case 0:case 11:case 14:case 15:us(2,n,t),at||us(4,n,t),qa(e,t,n);break;case 1:at||(wa(n,t),l=n.stateNode,typeof l.componentWillUnmount=="function"&&Sm(n,t,l)),qa(e,t,n);break;case 21:qa(e,t,n);break;case 22:at=(l=at)||n.memoizedState!==null,qa(e,t,n),at=l;break;default:qa(e,t,n)}}function Dm(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Fn(e)}catch(n){Ue(t,t.return,n)}}}function Mm(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Fn(e)}catch(n){Ue(t,t.return,n)}}function Kv(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Am),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Am),t;default:throw Error(o(435,e.tag))}}function bl(e,t){var n=Kv(e);t.forEach(function(l){if(!n.has(l)){n.add(l);var d=ay.bind(null,e,l);l.then(d,d)}})}function Rt(e,t){var n=t.deletions;if(n!==null)for(var l=0;l<n.length;l++){var d=n[l],f=e,x=t,N=x;e:for(;N!==null;){switch(N.tag){case 27:if(xs(N.type)){Ge=N.stateNode,Tt=!1;break e}break;case 5:Ge=N.stateNode,Tt=!1;break e;case 3:case 4:Ge=N.stateNode.containerInfo,Tt=!0;break e}N=N.return}if(Ge===null)throw Error(o(160));Om(f,x,d),Ge=null,Tt=!1,f=d.alternate,f!==null&&(f.return=null),d.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)Um(t,e),t=t.sibling}var ia=null;function Um(e,t){var n=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Rt(t,e),Ot(e),l&4&&(us(3,e,e.return),Gr(3,e),us(5,e,e.return));break;case 1:Rt(t,e),Ot(e),l&512&&(at||n===null||wa(n,n.return)),l&64&&za&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?l:n.concat(l))));break;case 26:var d=ia;if(Rt(t,e),Ot(e),l&512&&(at||n===null||wa(n,n.return)),l&4){var f=n!==null?n.memoizedState:null;if(l=e.memoizedState,n===null)if(l===null)if(e.stateNode===null){e:{l=e.type,n=e.memoizedProps,d=d.ownerDocument||d;t:switch(l){case"title":f=d.getElementsByTagName("title")[0],(!f||f[vr]||f[ht]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=d.createElement(l),d.head.insertBefore(f,d.querySelector("head > title"))),gt(f,l,n),f[ht]=e,ct(f),l=f;break e;case"link":var x=Up("link","href",d).get(l+(n.href||""));if(x){for(var N=0;N<x.length;N++)if(f=x[N],f.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&f.getAttribute("rel")===(n.rel==null?null:n.rel)&&f.getAttribute("title")===(n.title==null?null:n.title)&&f.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){x.splice(N,1);break t}}f=d.createElement(l),gt(f,l,n),d.head.appendChild(f);break;case"meta":if(x=Up("meta","content",d).get(l+(n.content||""))){for(N=0;N<x.length;N++)if(f=x[N],f.getAttribute("content")===(n.content==null?null:""+n.content)&&f.getAttribute("name")===(n.name==null?null:n.name)&&f.getAttribute("property")===(n.property==null?null:n.property)&&f.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&f.getAttribute("charset")===(n.charSet==null?null:n.charSet)){x.splice(N,1);break t}}f=d.createElement(l),gt(f,l,n),d.head.appendChild(f);break;default:throw Error(o(468,l))}f[ht]=e,ct(f),l=f}e.stateNode=l}else Lp(d,e.type,e.stateNode);else e.stateNode=Mp(d,l,e.memoizedProps);else f!==l?(f===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):f.count--,l===null?Lp(d,e.type,e.stateNode):Mp(d,l,e.memoizedProps)):l===null&&e.stateNode!==null&&ru(e,e.memoizedProps,n.memoizedProps)}break;case 27:Rt(t,e),Ot(e),l&512&&(at||n===null||wa(n,n.return)),n!==null&&l&4&&ru(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Rt(t,e),Ot(e),l&512&&(at||n===null||wa(n,n.return)),e.flags&32){d=e.stateNode;try{xn(d,"")}catch(re){Ue(e,e.return,re)}}l&4&&e.stateNode!=null&&(d=e.memoizedProps,ru(e,d,n!==null?n.memoizedProps:d)),l&1024&&(ou=!0);break;case 6:if(Rt(t,e),Ot(e),l&4){if(e.stateNode===null)throw Error(o(162));l=e.memoizedProps,n=e.stateNode;try{n.nodeValue=l}catch(re){Ue(e,e.return,re)}}break;case 3:if(Ml=null,d=ia,ia=Ol(t.containerInfo),Rt(t,e),ia=d,Ot(e),l&4&&n!==null&&n.memoizedState.isDehydrated)try{Fn(t.containerInfo)}catch(re){Ue(e,e.return,re)}ou&&(ou=!1,Lm(e));break;case 4:l=ia,ia=Ol(e.stateNode.containerInfo),Rt(t,e),Ot(e),ia=l;break;case 12:Rt(t,e),Ot(e);break;case 31:Rt(t,e),Ot(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,bl(e,l)));break;case 13:Rt(t,e),Ot(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(yl=We()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,bl(e,l)));break;case 22:d=e.memoizedState!==null;var C=n!==null&&n.memoizedState!==null,$=za,Y=at;if(za=$||d,at=Y||C,Rt(t,e),at=Y,za=$,Ot(e),l&8192)e:for(t=e.stateNode,t._visibility=d?t._visibility&-2:t._visibility|1,d&&(n===null||C||za||at||Fs(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){C=n=t;try{if(f=C.stateNode,d)x=f.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none";else{N=C.stateNode;var X=C.memoizedProps.style,P=X!=null&&X.hasOwnProperty("display")?X.display:null;N.style.display=P==null||typeof P=="boolean"?"":(""+P).trim()}}catch(re){Ue(C,C.return,re)}}}else if(t.tag===6){if(n===null){C=t;try{C.stateNode.nodeValue=d?"":C.memoizedProps}catch(re){Ue(C,C.return,re)}}}else if(t.tag===18){if(n===null){C=t;try{var G=C.stateNode;d?Sp(G,!0):Sp(C.stateNode,!1)}catch(re){Ue(C,C.return,re)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}l&4&&(l=e.updateQueue,l!==null&&(n=l.retryQueue,n!==null&&(l.retryQueue=null,bl(e,n))));break;case 19:Rt(t,e),Ot(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,bl(e,l)));break;case 30:break;case 21:break;default:Rt(t,e),Ot(e)}}function Ot(e){var t=e.flags;if(t&2){try{for(var n,l=e.return;l!==null;){if(km(l)){n=l;break}l=l.return}if(n==null)throw Error(o(160));switch(n.tag){case 27:var d=n.stateNode,f=iu(e);xl(e,f,d);break;case 5:var x=n.stateNode;n.flags&32&&(xn(x,""),n.flags&=-33);var N=iu(e);xl(e,N,x);break;case 3:case 4:var C=n.stateNode.containerInfo,$=iu(e);lu(e,$,C);break;default:throw Error(o(161))}}catch(Y){Ue(e,e.return,Y)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Lm(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Lm(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Ia(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Tm(e,t.alternate,t),t=t.sibling}function Fs(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:us(4,t,t.return),Fs(t);break;case 1:wa(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&Sm(t,t.return,n),Fs(t);break;case 27:ti(t.stateNode);case 26:case 5:wa(t,t.return),Fs(t);break;case 22:t.memoizedState===null&&Fs(t);break;case 30:Fs(t);break;default:Fs(t)}e=e.sibling}}function $a(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var l=t.alternate,d=e,f=t,x=f.flags;switch(f.tag){case 0:case 11:case 15:$a(d,f,n),Gr(4,f);break;case 1:if($a(d,f,n),l=f,d=l.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch($){Ue(l,l.return,$)}if(l=f,d=l.updateQueue,d!==null){var N=l.stateNode;try{var C=d.shared.hiddenCallbacks;if(C!==null)for(d.shared.hiddenCallbacks=null,d=0;d<C.length;d++)ff(C[d],N)}catch($){Ue(l,l.return,$)}}n&&x&64&&_m(f),Yr(f,f.return);break;case 27:Cm(f);case 26:case 5:$a(d,f,n),n&&l===null&&x&4&&Em(f),Yr(f,f.return);break;case 12:$a(d,f,n);break;case 31:$a(d,f,n),n&&x&4&&Dm(d,f);break;case 13:$a(d,f,n),n&&x&4&&Mm(d,f);break;case 22:f.memoizedState===null&&$a(d,f,n),Yr(f,f.return);break;case 30:break;default:$a(d,f,n)}t=t.sibling}}function cu(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&Or(n))}function uu(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Or(e))}function la(e,t,n,l){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Bm(e,t,n,l),t=t.sibling}function Bm(e,t,n,l){var d=t.flags;switch(t.tag){case 0:case 11:case 15:la(e,t,n,l),d&2048&&Gr(9,t);break;case 1:la(e,t,n,l);break;case 3:la(e,t,n,l),d&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Or(e)));break;case 12:if(d&2048){la(e,t,n,l),e=t.stateNode;try{var f=t.memoizedProps,x=f.id,N=f.onPostCommit;typeof N=="function"&&N(x,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(C){Ue(t,t.return,C)}}else la(e,t,n,l);break;case 31:la(e,t,n,l);break;case 13:la(e,t,n,l);break;case 23:break;case 22:f=t.stateNode,x=t.alternate,t.memoizedState!==null?f._visibility&2?la(e,t,n,l):Kr(e,t):f._visibility&2?la(e,t,n,l):(f._visibility|=2,Bn(e,t,n,l,(t.subtreeFlags&10256)!==0||!1)),d&2048&&cu(x,t);break;case 24:la(e,t,n,l),d&2048&&uu(t.alternate,t);break;default:la(e,t,n,l)}}function Bn(e,t,n,l,d){for(d=d&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var f=e,x=t,N=n,C=l,$=x.flags;switch(x.tag){case 0:case 11:case 15:Bn(f,x,N,C,d),Gr(8,x);break;case 23:break;case 22:var Y=x.stateNode;x.memoizedState!==null?Y._visibility&2?Bn(f,x,N,C,d):Kr(f,x):(Y._visibility|=2,Bn(f,x,N,C,d)),d&&$&2048&&cu(x.alternate,x);break;case 24:Bn(f,x,N,C,d),d&&$&2048&&uu(x.alternate,x);break;default:Bn(f,x,N,C,d)}t=t.sibling}}function Kr(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,l=t,d=l.flags;switch(l.tag){case 22:Kr(n,l),d&2048&&cu(l.alternate,l);break;case 24:Kr(n,l),d&2048&&uu(l.alternate,l);break;default:Kr(n,l)}t=t.sibling}}var Fr=8192;function zn(e,t,n){if(e.subtreeFlags&Fr)for(e=e.child;e!==null;)zm(e,t,n),e=e.sibling}function zm(e,t,n){switch(e.tag){case 26:zn(e,t,n),e.flags&Fr&&e.memoizedState!==null&&Dy(n,ia,e.memoizedState,e.memoizedProps);break;case 5:zn(e,t,n);break;case 3:case 4:var l=ia;ia=Ol(e.stateNode.containerInfo),zn(e,t,n),ia=l;break;case 22:e.memoizedState===null&&(l=e.alternate,l!==null&&l.memoizedState!==null?(l=Fr,Fr=16777216,zn(e,t,n),Fr=l):zn(e,t,n));break;default:zn(e,t,n)}}function qm(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Qr(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var l=t[n];ut=l,$m(l,e)}qm(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Im(e),e=e.sibling}function Im(e){switch(e.tag){case 0:case 11:case 15:Qr(e),e.flags&2048&&us(9,e,e.return);break;case 3:Qr(e);break;case 12:Qr(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,vl(e)):Qr(e);break;default:Qr(e)}}function vl(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var l=t[n];ut=l,$m(l,e)}qm(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:us(8,t,t.return),vl(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,vl(t));break;default:vl(t)}e=e.sibling}}function $m(e,t){for(;ut!==null;){var n=ut;switch(n.tag){case 0:case 11:case 15:us(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var l=n.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Or(n.memoizedState.cache)}if(l=n.child,l!==null)l.return=n,ut=l;else e:for(n=e;ut!==null;){l=ut;var d=l.sibling,f=l.return;if(Rm(l),l===n){ut=null;break e}if(d!==null){d.return=f,ut=d;break e}ut=f}}}var Fv={getCacheForType:function(e){var t=mt(Ze),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return mt(Ze).controller.signal}},Qv=typeof WeakMap=="function"?WeakMap:Map,Oe=0,qe=null,_e=null,Ee=0,Me=0,It=null,ds=!1,qn=!1,du=!1,Pa=0,Qe=0,hs=0,Qs=0,hu=0,$t=0,In=0,Jr=null,Dt=null,fu=!1,yl=0,Pm=0,wl=1/0,jl=null,fs=null,it=0,ms=null,$n=null,Ha=0,mu=0,pu=null,Hm=null,Xr=0,gu=null;function Pt(){return(Oe&2)!==0&&Ee!==0?Ee&-Ee:D.T!==null?ju():nh()}function Vm(){if($t===0)if((Ee&536870912)===0||Ce){var e=rt;rt<<=1,(rt&3932160)===0&&(rt=262144),$t=e}else $t=536870912;return e=zt.current,e!==null&&(e.flags|=32),$t}function Mt(e,t,n){(e===qe&&(Me===2||Me===9)||e.cancelPendingCommit!==null)&&(Pn(e,0),ps(e,Ee,$t,!1)),br(e,n),((Oe&2)===0||e!==qe)&&(e===qe&&((Oe&2)===0&&(Qs|=n),Qe===4&&ps(e,Ee,$t,!1)),ja(e))}function Gm(e,t,n){if((Oe&6)!==0)throw Error(o(327));var l=!n&&(t&127)===0&&(t&e.expiredLanes)===0||xr(e,t),d=l?Wv(e,t):bu(e,t,!0),f=l;do{if(d===0){qn&&!l&&ps(e,t,0,!1);break}else{if(n=e.current.alternate,f&&!Jv(n)){d=bu(e,t,!1),f=!1;continue}if(d===2){if(f=t,e.errorRecoveryDisabledLanes&f)var x=0;else x=e.pendingLanes&-536870913,x=x!==0?x:x&536870912?536870912:0;if(x!==0){t=x;e:{var N=e;d=Jr;var C=N.current.memoizedState.isDehydrated;if(C&&(Pn(N,x).flags|=256),x=bu(N,x,!1),x!==2){if(du&&!C){N.errorRecoveryDisabledLanes|=f,Qs|=f,d=4;break e}f=Dt,Dt=d,f!==null&&(Dt===null?Dt=f:Dt.push.apply(Dt,f))}d=x}if(f=!1,d!==2)continue}}if(d===1){Pn(e,0),ps(e,t,0,!0);break}e:{switch(l=e,f=d,f){case 0:case 1:throw Error(o(345));case 4:if((t&4194048)!==t)break;case 6:ps(l,t,$t,!ds);break e;case 2:Dt=null;break;case 3:case 5:break;default:throw Error(o(329))}if((t&62914560)===t&&(d=yl+300-We(),10<d)){if(ps(l,t,$t,!ds),Oi(l,0,!0)!==0)break e;Ha=t,l.timeoutHandle=jp(Ym.bind(null,l,n,Dt,jl,fu,t,$t,Qs,In,ds,f,"Throttled",-0,0),d);break e}Ym(l,n,Dt,jl,fu,t,$t,Qs,In,ds,f,null,-0,0)}}break}while(!0);ja(e)}function Ym(e,t,n,l,d,f,x,N,C,$,Y,X,P,G){if(e.timeoutHandle=-1,X=t.subtreeFlags,X&8192||(X&16785408)===16785408){X={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ca},zm(t,f,X);var re=(f&62914560)===f?yl-We():(f&4194048)===f?Pm-We():0;if(re=My(X,re),re!==null){Ha=f,e.cancelPendingCommit=re(ep.bind(null,e,t,f,n,l,d,x,N,C,Y,X,null,P,G)),ps(e,f,x,!$);return}}ep(e,t,f,n,l,d,x,N,C)}function Jv(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var l=0;l<n.length;l++){var d=n[l],f=d.getSnapshot;d=d.value;try{if(!Lt(f(),d))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ps(e,t,n,l){t&=~hu,t&=~Qs,e.suspendedLanes|=t,e.pingedLanes&=~t,l&&(e.warmLanes|=t),l=e.expirationTimes;for(var d=t;0<d;){var f=31-xt(d),x=1<<f;l[f]=-1,d&=~x}n!==0&&th(e,n,t)}function Nl(){return(Oe&6)===0?(Wr(0),!1):!0}function xu(){if(_e!==null){if(Me===0)var e=_e.return;else e=_e,Oa=Is=null,Dc(e),On=null,Mr=0,e=_e;for(;e!==null;)Nm(e.alternate,e),e=e.return;_e=null}}function Pn(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,gy(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),Ha=0,xu(),qe=e,_e=n=Ta(e.current,null),Ee=t,Me=0,It=null,ds=!1,qn=xr(e,t),du=!1,In=$t=hu=Qs=hs=Qe=0,Dt=Jr=null,fu=!1,(t&8)!==0&&(t|=t&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=t;0<l;){var d=31-xt(l),f=1<<d;t|=e[d],l&=~f}return Pa=t,Vi(),n}function Km(e,t){ye=null,D.H=Pr,t===Rn||t===Wi?(t=cf(),Me=3):t===wc?(t=cf(),Me=4):Me=t===Qc?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,It=t,_e===null&&(Qe=1,hl(e,Qt(t,e.current)))}function Fm(){var e=zt.current;return e===null?!0:(Ee&4194048)===Ee?Zt===null:(Ee&62914560)===Ee||(Ee&536870912)!==0?e===Zt:!1}function Qm(){var e=D.H;return D.H=Pr,e===null?Pr:e}function Jm(){var e=D.A;return D.A=Fv,e}function _l(){Qe=4,ds||(Ee&4194048)!==Ee&&zt.current!==null||(qn=!0),(hs&134217727)===0&&(Qs&134217727)===0||qe===null||ps(qe,Ee,$t,!1)}function bu(e,t,n){var l=Oe;Oe|=2;var d=Qm(),f=Jm();(qe!==e||Ee!==t)&&(jl=null,Pn(e,t)),t=!1;var x=Qe;e:do try{if(Me!==0&&_e!==null){var N=_e,C=It;switch(Me){case 8:xu(),x=6;break e;case 3:case 2:case 9:case 6:zt.current===null&&(t=!0);var $=Me;if(Me=0,It=null,Hn(e,N,C,$),n&&qn){x=0;break e}break;default:$=Me,Me=0,It=null,Hn(e,N,C,$)}}Xv(),x=Qe;break}catch(Y){Km(e,Y)}while(!0);return t&&e.shellSuspendCounter++,Oa=Is=null,Oe=l,D.H=d,D.A=f,_e===null&&(qe=null,Ee=0,Vi()),x}function Xv(){for(;_e!==null;)Xm(_e)}function Wv(e,t){var n=Oe;Oe|=2;var l=Qm(),d=Jm();qe!==e||Ee!==t?(jl=null,wl=We()+500,Pn(e,t)):qn=xr(e,t);e:do try{if(Me!==0&&_e!==null){t=_e;var f=It;t:switch(Me){case 1:Me=0,It=null,Hn(e,t,f,1);break;case 2:case 9:if(lf(f)){Me=0,It=null,Wm(t);break}t=function(){Me!==2&&Me!==9||qe!==e||(Me=7),ja(e)},f.then(t,t);break e;case 3:Me=7;break e;case 4:Me=5;break e;case 7:lf(f)?(Me=0,It=null,Wm(t)):(Me=0,It=null,Hn(e,t,f,7));break;case 5:var x=null;switch(_e.tag){case 26:x=_e.memoizedState;case 5:case 27:var N=_e;if(x?Bp(x):N.stateNode.complete){Me=0,It=null;var C=N.sibling;if(C!==null)_e=C;else{var $=N.return;$!==null?(_e=$,Sl($)):_e=null}break t}}Me=0,It=null,Hn(e,t,f,5);break;case 6:Me=0,It=null,Hn(e,t,f,6);break;case 8:xu(),Qe=6;break e;default:throw Error(o(462))}}Zv();break}catch(Y){Km(e,Y)}while(!0);return Oa=Is=null,D.H=l,D.A=d,Oe=n,_e!==null?0:(qe=null,Ee=0,Vi(),Qe)}function Zv(){for(;_e!==null&&!Xa();)Xm(_e)}function Xm(e){var t=wm(e.alternate,e,Pa);e.memoizedProps=e.pendingProps,t===null?Sl(e):_e=t}function Wm(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=pm(n,t,t.pendingProps,t.type,void 0,Ee);break;case 11:t=pm(n,t,t.pendingProps,t.type.render,t.ref,Ee);break;case 5:Dc(t);default:Nm(n,t),t=_e=Qh(t,Pa),t=wm(n,t,Pa)}e.memoizedProps=e.pendingProps,t===null?Sl(e):_e=t}function Hn(e,t,n,l){Oa=Is=null,Dc(t),On=null,Mr=0;var d=t.return;try{if($v(e,d,t,n,Ee)){Qe=1,hl(e,Qt(n,e.current)),_e=null;return}}catch(f){if(d!==null)throw _e=d,f;Qe=1,hl(e,Qt(n,e.current)),_e=null;return}t.flags&32768?(Ce||l===1?e=!0:qn||(Ee&536870912)!==0?e=!1:(ds=e=!0,(l===2||l===9||l===3||l===6)&&(l=zt.current,l!==null&&l.tag===13&&(l.flags|=16384))),Zm(t,e)):Sl(t)}function Sl(e){var t=e;do{if((t.flags&32768)!==0){Zm(t,ds);return}e=t.return;var n=Vv(t.alternate,t,Pa);if(n!==null){_e=n;return}if(t=t.sibling,t!==null){_e=t;return}_e=t=e}while(t!==null);Qe===0&&(Qe=5)}function Zm(e,t){do{var n=Gv(e.alternate,e);if(n!==null){n.flags&=32767,_e=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){_e=e;return}_e=e=n}while(e!==null);Qe=6,_e=null}function ep(e,t,n,l,d,f,x,N,C){e.cancelPendingCommit=null;do El();while(it!==0);if((Oe&6)!==0)throw Error(o(327));if(t!==null){if(t===e.current)throw Error(o(177));if(f=t.lanes|t.childLanes,f|=ic,Ob(e,n,f,x,N,C),e===qe&&(_e=qe=null,Ee=0),$n=t,ms=e,Ha=n,mu=f,pu=d,Hm=l,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,sy(un,function(){return rp(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||l){l=D.T,D.T=null,d=W.p,W.p=2,x=Oe,Oe|=4;try{Yv(e,t,n)}finally{Oe=x,W.p=d,D.T=l}}it=1,tp(),ap(),sp()}}function tp(){if(it===1){it=0;var e=ms,t=$n,n=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||n){n=D.T,D.T=null;var l=W.p;W.p=2;var d=Oe;Oe|=4;try{Um(t,e);var f=Tu,x=Ih(e.containerInfo),N=f.focusedElem,C=f.selectionRange;if(x!==N&&N&&N.ownerDocument&&qh(N.ownerDocument.documentElement,N)){if(C!==null&&tc(N)){var $=C.start,Y=C.end;if(Y===void 0&&(Y=$),"selectionStart"in N)N.selectionStart=$,N.selectionEnd=Math.min(Y,N.value.length);else{var X=N.ownerDocument||document,P=X&&X.defaultView||window;if(P.getSelection){var G=P.getSelection(),re=N.textContent.length,pe=Math.min(C.start,re),ze=C.end===void 0?pe:Math.min(C.end,re);!G.extend&&pe>ze&&(x=ze,ze=pe,pe=x);var U=zh(N,pe),O=zh(N,ze);if(U&&O&&(G.rangeCount!==1||G.anchorNode!==U.node||G.anchorOffset!==U.offset||G.focusNode!==O.node||G.focusOffset!==O.offset)){var z=X.createRange();z.setStart(U.node,U.offset),G.removeAllRanges(),pe>ze?(G.addRange(z),G.extend(O.node,O.offset)):(z.setEnd(O.node,O.offset),G.addRange(z))}}}}for(X=[],G=N;G=G.parentNode;)G.nodeType===1&&X.push({element:G,left:G.scrollLeft,top:G.scrollTop});for(typeof N.focus=="function"&&N.focus(),N=0;N<X.length;N++){var F=X[N];F.element.scrollLeft=F.left,F.element.scrollTop=F.top}}zl=!!Au,Tu=Au=null}finally{Oe=d,W.p=l,D.T=n}}e.current=t,it=2}}function ap(){if(it===2){it=0;var e=ms,t=$n,n=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||n){n=D.T,D.T=null;var l=W.p;W.p=2;var d=Oe;Oe|=4;try{Tm(e,t.alternate,t)}finally{Oe=d,W.p=l,D.T=n}}it=3}}function sp(){if(it===4||it===3){it=0,Ut();var e=ms,t=$n,n=Ha,l=Hm;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?it=5:(it=0,$n=ms=null,np(e,e.pendingLanes));var d=e.pendingLanes;if(d===0&&(fs=null),Lo(n),t=t.stateNode,kt&&typeof kt.onCommitFiberRoot=="function")try{kt.onCommitFiberRoot(xa,t,void 0,(t.current.flags&128)===128)}catch{}if(l!==null){t=D.T,d=W.p,W.p=2,D.T=null;try{for(var f=e.onRecoverableError,x=0;x<l.length;x++){var N=l[x];f(N.value,{componentStack:N.stack})}}finally{D.T=t,W.p=d}}(Ha&3)!==0&&El(),ja(e),d=e.pendingLanes,(n&261930)!==0&&(d&42)!==0?e===gu?Xr++:(Xr=0,gu=e):Xr=0,Wr(0)}}function np(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Or(t)))}function El(){return tp(),ap(),sp(),rp()}function rp(){if(it!==5)return!1;var e=ms,t=mu;mu=0;var n=Lo(Ha),l=D.T,d=W.p;try{W.p=32>n?32:n,D.T=null,n=pu,pu=null;var f=ms,x=Ha;if(it=0,$n=ms=null,Ha=0,(Oe&6)!==0)throw Error(o(331));var N=Oe;if(Oe|=4,Im(f.current),Bm(f,f.current,x,n),Oe=N,Wr(0,!1),kt&&typeof kt.onPostCommitFiberRoot=="function")try{kt.onPostCommitFiberRoot(xa,f)}catch{}return!0}finally{W.p=d,D.T=l,np(e,t)}}function ip(e,t,n){t=Qt(n,t),t=Fc(e.stateNode,t,2),e=ls(e,t,2),e!==null&&(br(e,2),ja(e))}function Ue(e,t,n){if(e.tag===3)ip(e,e,n);else for(;t!==null;){if(t.tag===3){ip(t,e,n);break}else if(t.tag===1){var l=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(fs===null||!fs.has(l))){e=Qt(n,e),n=lm(2),l=ls(t,n,2),l!==null&&(om(n,l,t,e),br(l,2),ja(l));break}}t=t.return}}function vu(e,t,n){var l=e.pingCache;if(l===null){l=e.pingCache=new Qv;var d=new Set;l.set(t,d)}else d=l.get(t),d===void 0&&(d=new Set,l.set(t,d));d.has(n)||(du=!0,d.add(n),e=ey.bind(null,e,t,n),t.then(e,e))}function ey(e,t,n){var l=e.pingCache;l!==null&&l.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,qe===e&&(Ee&n)===n&&(Qe===4||Qe===3&&(Ee&62914560)===Ee&&300>We()-yl?(Oe&2)===0&&Pn(e,0):hu|=n,In===Ee&&(In=0)),ja(e)}function lp(e,t){t===0&&(t=eh()),e=Bs(e,t),e!==null&&(br(e,t),ja(e))}function ty(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),lp(e,n)}function ay(e,t){var n=0;switch(e.tag){case 31:case 13:var l=e.stateNode,d=e.memoizedState;d!==null&&(n=d.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(o(314))}l!==null&&l.delete(t),lp(e,n)}function sy(e,t){return jt(e,t)}var kl=null,Vn=null,yu=!1,Cl=!1,wu=!1,gs=0;function ja(e){e!==Vn&&e.next===null&&(Vn===null?kl=Vn=e:Vn=Vn.next=e),Cl=!0,yu||(yu=!0,ry())}function Wr(e,t){if(!wu&&Cl){wu=!0;do for(var n=!1,l=kl;l!==null;){if(e!==0){var d=l.pendingLanes;if(d===0)var f=0;else{var x=l.suspendedLanes,N=l.pingedLanes;f=(1<<31-xt(42|e)+1)-1,f&=d&~(x&~N),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(n=!0,dp(l,f))}else f=Ee,f=Oi(l,l===qe?f:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(f&3)===0||xr(l,f)||(n=!0,dp(l,f));l=l.next}while(n);wu=!1}}function ny(){op()}function op(){Cl=yu=!1;var e=0;gs!==0&&py()&&(e=gs);for(var t=We(),n=null,l=kl;l!==null;){var d=l.next,f=cp(l,t);f===0?(l.next=null,n===null?kl=d:n.next=d,d===null&&(Vn=n)):(n=l,(e!==0||(f&3)!==0)&&(Cl=!0)),l=d}it!==0&&it!==5||Wr(e),gs!==0&&(gs=0)}function cp(e,t){for(var n=e.suspendedLanes,l=e.pingedLanes,d=e.expirationTimes,f=e.pendingLanes&-62914561;0<f;){var x=31-xt(f),N=1<<x,C=d[x];C===-1?((N&n)===0||(N&l)!==0)&&(d[x]=Rb(N,t)):C<=t&&(e.expiredLanes|=N),f&=~N}if(t=qe,n=Ee,n=Oi(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,n===0||e===t&&(Me===2||Me===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&St(l),e.callbackNode=null,e.callbackPriority=0;if((n&3)===0||xr(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(l!==null&&St(l),Lo(n)){case 2:case 8:n=Et;break;case 32:n=un;break;case 268435456:n=Ci;break;default:n=un}return l=up.bind(null,e),n=jt(n,l),e.callbackPriority=t,e.callbackNode=n,t}return l!==null&&l!==null&&St(l),e.callbackPriority=2,e.callbackNode=null,2}function up(e,t){if(it!==0&&it!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(El()&&e.callbackNode!==n)return null;var l=Ee;return l=Oi(e,e===qe?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(Gm(e,l,t),cp(e,We()),e.callbackNode!=null&&e.callbackNode===n?up.bind(null,e):null)}function dp(e,t){if(El())return null;Gm(e,t,!0)}function ry(){xy(function(){(Oe&6)!==0?jt(cn,ny):op()})}function ju(){if(gs===0){var e=An;e===0&&(e=he,he<<=1,(he&261888)===0&&(he=256)),gs=e}return gs}function hp(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Li(""+e)}function fp(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function iy(e,t,n,l,d){if(t==="submit"&&n&&n.stateNode===d){var f=hp((d[Ct]||null).action),x=l.submitter;x&&(t=(t=x[Ct]||null)?hp(t.formAction):x.getAttribute("formAction"),t!==null&&(f=t,x=null));var N=new Ii("action","action",null,l,d);e.push({event:N,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(gs!==0){var C=x?fp(d,x):new FormData(d);Pc(n,{pending:!0,data:C,method:d.method,action:f},null,C)}}else typeof f=="function"&&(N.preventDefault(),C=x?fp(d,x):new FormData(d),Pc(n,{pending:!0,data:C,method:d.method,action:f},f,C))},currentTarget:d}]})}}for(var Nu=0;Nu<rc.length;Nu++){var _u=rc[Nu],ly=_u.toLowerCase(),oy=_u[0].toUpperCase()+_u.slice(1);ra(ly,"on"+oy)}ra(Hh,"onAnimationEnd"),ra(Vh,"onAnimationIteration"),ra(Gh,"onAnimationStart"),ra("dblclick","onDoubleClick"),ra("focusin","onFocus"),ra("focusout","onBlur"),ra(_v,"onTransitionRun"),ra(Sv,"onTransitionStart"),ra(Ev,"onTransitionCancel"),ra(Yh,"onTransitionEnd"),pn("onMouseEnter",["mouseout","mouseover"]),pn("onMouseLeave",["mouseout","mouseover"]),pn("onPointerEnter",["pointerout","pointerover"]),pn("onPointerLeave",["pointerout","pointerover"]),Ds("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ds("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ds("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ds("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ds("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ds("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),cy=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Zr));function mp(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var l=e[n],d=l.event;l=l.listeners;e:{var f=void 0;if(t)for(var x=l.length-1;0<=x;x--){var N=l[x],C=N.instance,$=N.currentTarget;if(N=N.listener,C!==f&&d.isPropagationStopped())break e;f=N,d.currentTarget=$;try{f(d)}catch(Y){Hi(Y)}d.currentTarget=null,f=C}else for(x=0;x<l.length;x++){if(N=l[x],C=N.instance,$=N.currentTarget,N=N.listener,C!==f&&d.isPropagationStopped())break e;f=N,d.currentTarget=$;try{f(d)}catch(Y){Hi(Y)}d.currentTarget=null,f=C}}}}function Se(e,t){var n=t[Bo];n===void 0&&(n=t[Bo]=new Set);var l=e+"__bubble";n.has(l)||(pp(t,e,2,!1),n.add(l))}function Su(e,t,n){var l=0;t&&(l|=4),pp(n,e,l,t)}var Al="_reactListening"+Math.random().toString(36).slice(2);function Eu(e){if(!e[Al]){e[Al]=!0,lh.forEach(function(n){n!=="selectionchange"&&(cy.has(n)||Su(n,!1,e),Su(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Al]||(t[Al]=!0,Su("selectionchange",!1,t))}}function pp(e,t,n,l){switch(Vp(t)){case 2:var d=By;break;case 8:d=zy;break;default:d=$u}n=d.bind(null,t,n,e),d=void 0,!Yo||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(d=!0),l?d!==void 0?e.addEventListener(t,n,{capture:!0,passive:d}):e.addEventListener(t,n,!0):d!==void 0?e.addEventListener(t,n,{passive:d}):e.addEventListener(t,n,!1)}function ku(e,t,n,l,d){var f=l;if((t&1)===0&&(t&2)===0&&l!==null)e:for(;;){if(l===null)return;var x=l.tag;if(x===3||x===4){var N=l.stateNode.containerInfo;if(N===d)break;if(x===4)for(x=l.return;x!==null;){var C=x.tag;if((C===3||C===4)&&x.stateNode.containerInfo===d)return;x=x.return}for(;N!==null;){if(x=hn(N),x===null)return;if(C=x.tag,C===5||C===6||C===26||C===27){l=f=x;continue e}N=N.parentNode}}l=l.return}vh(function(){var $=f,Y=Vo(n),X=[];e:{var P=Kh.get(e);if(P!==void 0){var G=Ii,re=e;switch(e){case"keypress":if(zi(n)===0)break e;case"keydown":case"keyup":G=av;break;case"focusin":re="focus",G=Jo;break;case"focusout":re="blur",G=Jo;break;case"beforeblur":case"afterblur":G=Jo;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":G=jh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":G=Vb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":G=rv;break;case Hh:case Vh:case Gh:G=Kb;break;case Yh:G=lv;break;case"scroll":case"scrollend":G=Pb;break;case"wheel":G=cv;break;case"copy":case"cut":case"paste":G=Qb;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":G=_h;break;case"toggle":case"beforetoggle":G=dv}var pe=(t&4)!==0,ze=!pe&&(e==="scroll"||e==="scrollend"),U=pe?P!==null?P+"Capture":null:P;pe=[];for(var O=$,z;O!==null;){var F=O;if(z=F.stateNode,F=F.tag,F!==5&&F!==26&&F!==27||z===null||U===null||(F=wr(O,U),F!=null&&pe.push(ei(O,F,z))),ze)break;O=O.return}0<pe.length&&(P=new G(P,re,null,n,Y),X.push({event:P,listeners:pe}))}}if((t&7)===0){e:{if(P=e==="mouseover"||e==="pointerover",G=e==="mouseout"||e==="pointerout",P&&n!==Ho&&(re=n.relatedTarget||n.fromElement)&&(hn(re)||re[dn]))break e;if((G||P)&&(P=Y.window===Y?Y:(P=Y.ownerDocument)?P.defaultView||P.parentWindow:window,G?(re=n.relatedTarget||n.toElement,G=$,re=re?hn(re):null,re!==null&&(ze=u(re),pe=re.tag,re!==ze||pe!==5&&pe!==27&&pe!==6)&&(re=null)):(G=null,re=$),G!==re)){if(pe=jh,F="onMouseLeave",U="onMouseEnter",O="mouse",(e==="pointerout"||e==="pointerover")&&(pe=_h,F="onPointerLeave",U="onPointerEnter",O="pointer"),ze=G==null?P:yr(G),z=re==null?P:yr(re),P=new pe(F,O+"leave",G,n,Y),P.target=ze,P.relatedTarget=z,F=null,hn(Y)===$&&(pe=new pe(U,O+"enter",re,n,Y),pe.target=z,pe.relatedTarget=ze,F=pe),ze=F,G&&re)t:{for(pe=uy,U=G,O=re,z=0,F=U;F;F=pe(F))z++;F=0;for(var fe=O;fe;fe=pe(fe))F++;for(;0<z-F;)U=pe(U),z--;for(;0<F-z;)O=pe(O),F--;for(;z--;){if(U===O||O!==null&&U===O.alternate){pe=U;break t}U=pe(U),O=pe(O)}pe=null}else pe=null;G!==null&&gp(X,P,G,pe,!1),re!==null&&ze!==null&&gp(X,ze,re,pe,!0)}}e:{if(P=$?yr($):window,G=P.nodeName&&P.nodeName.toLowerCase(),G==="select"||G==="input"&&P.type==="file")var Te=Oh;else if(Th(P))if(Dh)Te=wv;else{Te=vv;var ie=bv}else G=P.nodeName,!G||G.toLowerCase()!=="input"||P.type!=="checkbox"&&P.type!=="radio"?$&&Po($.elementType)&&(Te=Oh):Te=yv;if(Te&&(Te=Te(e,$))){Rh(X,Te,n,Y);break e}ie&&ie(e,P,$),e==="focusout"&&$&&P.type==="number"&&$.memoizedProps.value!=null&&$o(P,"number",P.value)}switch(ie=$?yr($):window,e){case"focusin":(Th(ie)||ie.contentEditable==="true")&&(wn=ie,ac=$,Ar=null);break;case"focusout":Ar=ac=wn=null;break;case"mousedown":sc=!0;break;case"contextmenu":case"mouseup":case"dragend":sc=!1,$h(X,n,Y);break;case"selectionchange":if(Nv)break;case"keydown":case"keyup":$h(X,n,Y)}var we;if(Wo)e:{switch(e){case"compositionstart":var ke="onCompositionStart";break e;case"compositionend":ke="onCompositionEnd";break e;case"compositionupdate":ke="onCompositionUpdate";break e}ke=void 0}else yn?Ch(e,n)&&(ke="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(ke="onCompositionStart");ke&&(Sh&&n.locale!=="ko"&&(yn||ke!=="onCompositionStart"?ke==="onCompositionEnd"&&yn&&(we=yh()):(es=Y,Ko="value"in es?es.value:es.textContent,yn=!0)),ie=Tl($,ke),0<ie.length&&(ke=new Nh(ke,e,null,n,Y),X.push({event:ke,listeners:ie}),we?ke.data=we:(we=Ah(n),we!==null&&(ke.data=we)))),(we=fv?mv(e,n):pv(e,n))&&(ke=Tl($,"onBeforeInput"),0<ke.length&&(ie=new Nh("onBeforeInput","beforeinput",null,n,Y),X.push({event:ie,listeners:ke}),ie.data=we)),iy(X,e,$,n,Y)}mp(X,t)})}function ei(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Tl(e,t){for(var n=t+"Capture",l=[];e!==null;){var d=e,f=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||f===null||(d=wr(e,n),d!=null&&l.unshift(ei(e,d,f)),d=wr(e,t),d!=null&&l.push(ei(e,d,f))),e.tag===3)return l;e=e.return}return[]}function uy(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function gp(e,t,n,l,d){for(var f=t._reactName,x=[];n!==null&&n!==l;){var N=n,C=N.alternate,$=N.stateNode;if(N=N.tag,C!==null&&C===l)break;N!==5&&N!==26&&N!==27||$===null||(C=$,d?($=wr(n,f),$!=null&&x.unshift(ei(n,$,C))):d||($=wr(n,f),$!=null&&x.push(ei(n,$,C)))),n=n.return}x.length!==0&&e.push({event:t,listeners:x})}var dy=/\r\n?/g,hy=/\u0000|\uFFFD/g;function xp(e){return(typeof e=="string"?e:""+e).replace(dy,`
`).replace(hy,"")}function bp(e,t){return t=xp(t),xp(e)===t}function Be(e,t,n,l,d,f){switch(n){case"children":typeof l=="string"?t==="body"||t==="textarea"&&l===""||xn(e,l):(typeof l=="number"||typeof l=="bigint")&&t!=="body"&&xn(e,""+l);break;case"className":Mi(e,"class",l);break;case"tabIndex":Mi(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Mi(e,n,l);break;case"style":xh(e,l,f);break;case"data":if(t!=="object"){Mi(e,"data",l);break}case"src":case"href":if(l===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(n);break}l=Li(""+l),e.setAttribute(n,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(n==="formAction"?(t!=="input"&&Be(e,t,"name",d.name,d,null),Be(e,t,"formEncType",d.formEncType,d,null),Be(e,t,"formMethod",d.formMethod,d,null),Be(e,t,"formTarget",d.formTarget,d,null)):(Be(e,t,"encType",d.encType,d,null),Be(e,t,"method",d.method,d,null),Be(e,t,"target",d.target,d,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(n);break}l=Li(""+l),e.setAttribute(n,l);break;case"onClick":l!=null&&(e.onclick=Ca);break;case"onScroll":l!=null&&Se("scroll",e);break;case"onScrollEnd":l!=null&&Se("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(o(61));if(n=l.__html,n!=null){if(d.children!=null)throw Error(o(60));e.innerHTML=n}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}n=Li(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(n,""+l):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":l===!0?e.setAttribute(n,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(n,l):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(n,l):e.removeAttribute(n);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(n):e.setAttribute(n,l);break;case"popover":Se("beforetoggle",e),Se("toggle",e),Di(e,"popover",l);break;case"xlinkActuate":ka(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":ka(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":ka(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":ka(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":ka(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":ka(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":ka(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":ka(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":ka(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Di(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=Ib.get(n)||n,Di(e,n,l))}}function Cu(e,t,n,l,d,f){switch(n){case"style":xh(e,l,f);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(o(61));if(n=l.__html,n!=null){if(d.children!=null)throw Error(o(60));e.innerHTML=n}}break;case"children":typeof l=="string"?xn(e,l):(typeof l=="number"||typeof l=="bigint")&&xn(e,""+l);break;case"onScroll":l!=null&&Se("scroll",e);break;case"onScrollEnd":l!=null&&Se("scrollend",e);break;case"onClick":l!=null&&(e.onclick=Ca);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!oh.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(d=n.endsWith("Capture"),t=n.slice(2,d?n.length-7:void 0),f=e[Ct]||null,f=f!=null?f[n]:null,typeof f=="function"&&e.removeEventListener(t,f,d),typeof l=="function")){typeof f!="function"&&f!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,l,d);break e}n in e?e[n]=l:l===!0?e.setAttribute(n,""):Di(e,n,l)}}}function gt(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Se("error",e),Se("load",e);var l=!1,d=!1,f;for(f in n)if(n.hasOwnProperty(f)){var x=n[f];if(x!=null)switch(f){case"src":l=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:Be(e,t,f,x,n,null)}}d&&Be(e,t,"srcSet",n.srcSet,n,null),l&&Be(e,t,"src",n.src,n,null);return;case"input":Se("invalid",e);var N=f=x=d=null,C=null,$=null;for(l in n)if(n.hasOwnProperty(l)){var Y=n[l];if(Y!=null)switch(l){case"name":d=Y;break;case"type":x=Y;break;case"checked":C=Y;break;case"defaultChecked":$=Y;break;case"value":f=Y;break;case"defaultValue":N=Y;break;case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(o(137,t));break;default:Be(e,t,l,Y,n,null)}}fh(e,f,N,C,$,x,d,!1);return;case"select":Se("invalid",e),l=x=f=null;for(d in n)if(n.hasOwnProperty(d)&&(N=n[d],N!=null))switch(d){case"value":f=N;break;case"defaultValue":x=N;break;case"multiple":l=N;default:Be(e,t,d,N,n,null)}t=f,n=x,e.multiple=!!l,t!=null?gn(e,!!l,t,!1):n!=null&&gn(e,!!l,n,!0);return;case"textarea":Se("invalid",e),f=d=l=null;for(x in n)if(n.hasOwnProperty(x)&&(N=n[x],N!=null))switch(x){case"value":l=N;break;case"defaultValue":d=N;break;case"children":f=N;break;case"dangerouslySetInnerHTML":if(N!=null)throw Error(o(91));break;default:Be(e,t,x,N,n,null)}ph(e,l,d,f);return;case"option":for(C in n)if(n.hasOwnProperty(C)&&(l=n[C],l!=null))switch(C){case"selected":e.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Be(e,t,C,l,n,null)}return;case"dialog":Se("beforetoggle",e),Se("toggle",e),Se("cancel",e),Se("close",e);break;case"iframe":case"object":Se("load",e);break;case"video":case"audio":for(l=0;l<Zr.length;l++)Se(Zr[l],e);break;case"image":Se("error",e),Se("load",e);break;case"details":Se("toggle",e);break;case"embed":case"source":case"link":Se("error",e),Se("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for($ in n)if(n.hasOwnProperty($)&&(l=n[$],l!=null))switch($){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:Be(e,t,$,l,n,null)}return;default:if(Po(t)){for(Y in n)n.hasOwnProperty(Y)&&(l=n[Y],l!==void 0&&Cu(e,t,Y,l,n,void 0));return}}for(N in n)n.hasOwnProperty(N)&&(l=n[N],l!=null&&Be(e,t,N,l,n,null))}function fy(e,t,n,l){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,f=null,x=null,N=null,C=null,$=null,Y=null;for(G in n){var X=n[G];if(n.hasOwnProperty(G)&&X!=null)switch(G){case"checked":break;case"value":break;case"defaultValue":C=X;default:l.hasOwnProperty(G)||Be(e,t,G,null,l,X)}}for(var P in l){var G=l[P];if(X=n[P],l.hasOwnProperty(P)&&(G!=null||X!=null))switch(P){case"type":f=G;break;case"name":d=G;break;case"checked":$=G;break;case"defaultChecked":Y=G;break;case"value":x=G;break;case"defaultValue":N=G;break;case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(o(137,t));break;default:G!==X&&Be(e,t,P,G,l,X)}}Io(e,x,N,C,$,Y,f,d);return;case"select":G=x=N=P=null;for(f in n)if(C=n[f],n.hasOwnProperty(f)&&C!=null)switch(f){case"value":break;case"multiple":G=C;default:l.hasOwnProperty(f)||Be(e,t,f,null,l,C)}for(d in l)if(f=l[d],C=n[d],l.hasOwnProperty(d)&&(f!=null||C!=null))switch(d){case"value":P=f;break;case"defaultValue":N=f;break;case"multiple":x=f;default:f!==C&&Be(e,t,d,f,l,C)}t=N,n=x,l=G,P!=null?gn(e,!!n,P,!1):!!l!=!!n&&(t!=null?gn(e,!!n,t,!0):gn(e,!!n,n?[]:"",!1));return;case"textarea":G=P=null;for(N in n)if(d=n[N],n.hasOwnProperty(N)&&d!=null&&!l.hasOwnProperty(N))switch(N){case"value":break;case"children":break;default:Be(e,t,N,null,l,d)}for(x in l)if(d=l[x],f=n[x],l.hasOwnProperty(x)&&(d!=null||f!=null))switch(x){case"value":P=d;break;case"defaultValue":G=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(o(91));break;default:d!==f&&Be(e,t,x,d,l,f)}mh(e,P,G);return;case"option":for(var re in n)if(P=n[re],n.hasOwnProperty(re)&&P!=null&&!l.hasOwnProperty(re))switch(re){case"selected":e.selected=!1;break;default:Be(e,t,re,null,l,P)}for(C in l)if(P=l[C],G=n[C],l.hasOwnProperty(C)&&P!==G&&(P!=null||G!=null))switch(C){case"selected":e.selected=P&&typeof P!="function"&&typeof P!="symbol";break;default:Be(e,t,C,P,l,G)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var pe in n)P=n[pe],n.hasOwnProperty(pe)&&P!=null&&!l.hasOwnProperty(pe)&&Be(e,t,pe,null,l,P);for($ in l)if(P=l[$],G=n[$],l.hasOwnProperty($)&&P!==G&&(P!=null||G!=null))switch($){case"children":case"dangerouslySetInnerHTML":if(P!=null)throw Error(o(137,t));break;default:Be(e,t,$,P,l,G)}return;default:if(Po(t)){for(var ze in n)P=n[ze],n.hasOwnProperty(ze)&&P!==void 0&&!l.hasOwnProperty(ze)&&Cu(e,t,ze,void 0,l,P);for(Y in l)P=l[Y],G=n[Y],!l.hasOwnProperty(Y)||P===G||P===void 0&&G===void 0||Cu(e,t,Y,P,l,G);return}}for(var U in n)P=n[U],n.hasOwnProperty(U)&&P!=null&&!l.hasOwnProperty(U)&&Be(e,t,U,null,l,P);for(X in l)P=l[X],G=n[X],!l.hasOwnProperty(X)||P===G||P==null&&G==null||Be(e,t,X,P,l,G)}function vp(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function my(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,n=performance.getEntriesByType("resource"),l=0;l<n.length;l++){var d=n[l],f=d.transferSize,x=d.initiatorType,N=d.duration;if(f&&N&&vp(x)){for(x=0,N=d.responseEnd,l+=1;l<n.length;l++){var C=n[l],$=C.startTime;if($>N)break;var Y=C.transferSize,X=C.initiatorType;Y&&vp(X)&&(C=C.responseEnd,x+=Y*(C<N?1:(N-$)/(C-$)))}if(--l,t+=8*(f+x)/(d.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Au=null,Tu=null;function Rl(e){return e.nodeType===9?e:e.ownerDocument}function yp(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function wp(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Ru(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Ou=null;function py(){var e=window.event;return e&&e.type==="popstate"?e===Ou?!1:(Ou=e,!0):(Ou=null,!1)}var jp=typeof setTimeout=="function"?setTimeout:void 0,gy=typeof clearTimeout=="function"?clearTimeout:void 0,Np=typeof Promise=="function"?Promise:void 0,xy=typeof queueMicrotask=="function"?queueMicrotask:typeof Np<"u"?function(e){return Np.resolve(null).then(e).catch(by)}:jp;function by(e){setTimeout(function(){throw e})}function xs(e){return e==="head"}function _p(e,t){var n=t,l=0;do{var d=n.nextSibling;if(e.removeChild(n),d&&d.nodeType===8)if(n=d.data,n==="/$"||n==="/&"){if(l===0){e.removeChild(d),Fn(t);return}l--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")l++;else if(n==="html")ti(e.ownerDocument.documentElement);else if(n==="head"){n=e.ownerDocument.head,ti(n);for(var f=n.firstChild;f;){var x=f.nextSibling,N=f.nodeName;f[vr]||N==="SCRIPT"||N==="STYLE"||N==="LINK"&&f.rel.toLowerCase()==="stylesheet"||n.removeChild(f),f=x}}else n==="body"&&ti(e.ownerDocument.body);n=d}while(n);Fn(t)}function Sp(e,t){var n=e;e=0;do{var l=n.nextSibling;if(n.nodeType===1?t?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(t?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),l&&l.nodeType===8)if(n=l.data,n==="/$"){if(e===0)break;e--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||e++;n=l}while(n)}function Du(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Du(n),zo(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function vy(e,t,n,l){for(;e.nodeType===1;){var d=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[vr])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(f=e.getAttribute("rel"),f==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(f!==d.rel||e.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||e.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||e.getAttribute("title")!==(d.title==null?null:d.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(f=e.getAttribute("src"),(f!==(d.src==null?null:d.src)||e.getAttribute("type")!==(d.type==null?null:d.type)||e.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&f&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var f=d.name==null?null:""+d.name;if(d.type==="hidden"&&e.getAttribute("name")===f)return e}else return e;if(e=ea(e.nextSibling),e===null)break}return null}function yy(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=ea(e.nextSibling),e===null))return null;return e}function Ep(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=ea(e.nextSibling),e===null))return null;return e}function Mu(e){return e.data==="$?"||e.data==="$~"}function Uu(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function wy(e,t){var n=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||n.readyState!=="loading")t();else{var l=function(){t(),n.removeEventListener("DOMContentLoaded",l)};n.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function ea(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var Lu=null;function kp(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"||n==="/&"){if(t===0)return ea(e.nextSibling);t--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||t++}e=e.nextSibling}return null}function Cp(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(t===0)return e;t--}else n!=="/$"&&n!=="/&"||t++}e=e.previousSibling}return null}function Ap(e,t,n){switch(t=Rl(n),e){case"html":if(e=t.documentElement,!e)throw Error(o(452));return e;case"head":if(e=t.head,!e)throw Error(o(453));return e;case"body":if(e=t.body,!e)throw Error(o(454));return e;default:throw Error(o(451))}}function ti(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);zo(e)}var ta=new Map,Tp=new Set;function Ol(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Va=W.d;W.d={f:jy,r:Ny,D:_y,C:Sy,L:Ey,m:ky,X:Ay,S:Cy,M:Ty};function jy(){var e=Va.f(),t=Nl();return e||t}function Ny(e){var t=fn(e);t!==null&&t.tag===5&&t.type==="form"?Kf(t):Va.r(e)}var Gn=typeof document>"u"?null:document;function Rp(e,t,n){var l=Gn;if(l&&typeof t=="string"&&t){var d=Kt(t);d='link[rel="'+e+'"][href="'+d+'"]',typeof n=="string"&&(d+='[crossorigin="'+n+'"]'),Tp.has(d)||(Tp.add(d),e={rel:e,crossOrigin:n,href:t},l.querySelector(d)===null&&(t=l.createElement("link"),gt(t,"link",e),ct(t),l.head.appendChild(t)))}}function _y(e){Va.D(e),Rp("dns-prefetch",e,null)}function Sy(e,t){Va.C(e,t),Rp("preconnect",e,t)}function Ey(e,t,n){Va.L(e,t,n);var l=Gn;if(l&&e&&t){var d='link[rel="preload"][as="'+Kt(t)+'"]';t==="image"&&n&&n.imageSrcSet?(d+='[imagesrcset="'+Kt(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(d+='[imagesizes="'+Kt(n.imageSizes)+'"]')):d+='[href="'+Kt(e)+'"]';var f=d;switch(t){case"style":f=Yn(e);break;case"script":f=Kn(e)}ta.has(f)||(e=w({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),ta.set(f,e),l.querySelector(d)!==null||t==="style"&&l.querySelector(ai(f))||t==="script"&&l.querySelector(si(f))||(t=l.createElement("link"),gt(t,"link",e),ct(t),l.head.appendChild(t)))}}function ky(e,t){Va.m(e,t);var n=Gn;if(n&&e){var l=t&&typeof t.as=="string"?t.as:"script",d='link[rel="modulepreload"][as="'+Kt(l)+'"][href="'+Kt(e)+'"]',f=d;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=Kn(e)}if(!ta.has(f)&&(e=w({rel:"modulepreload",href:e},t),ta.set(f,e),n.querySelector(d)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(si(f)))return}l=n.createElement("link"),gt(l,"link",e),ct(l),n.head.appendChild(l)}}}function Cy(e,t,n){Va.S(e,t,n);var l=Gn;if(l&&e){var d=mn(l).hoistableStyles,f=Yn(e);t=t||"default";var x=d.get(f);if(!x){var N={loading:0,preload:null};if(x=l.querySelector(ai(f)))N.loading=5;else{e=w({rel:"stylesheet",href:e,"data-precedence":t},n),(n=ta.get(f))&&Bu(e,n);var C=x=l.createElement("link");ct(C),gt(C,"link",e),C._p=new Promise(function($,Y){C.onload=$,C.onerror=Y}),C.addEventListener("load",function(){N.loading|=1}),C.addEventListener("error",function(){N.loading|=2}),N.loading|=4,Dl(x,t,l)}x={type:"stylesheet",instance:x,count:1,state:N},d.set(f,x)}}}function Ay(e,t){Va.X(e,t);var n=Gn;if(n&&e){var l=mn(n).hoistableScripts,d=Kn(e),f=l.get(d);f||(f=n.querySelector(si(d)),f||(e=w({src:e,async:!0},t),(t=ta.get(d))&&zu(e,t),f=n.createElement("script"),ct(f),gt(f,"link",e),n.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(d,f))}}function Ty(e,t){Va.M(e,t);var n=Gn;if(n&&e){var l=mn(n).hoistableScripts,d=Kn(e),f=l.get(d);f||(f=n.querySelector(si(d)),f||(e=w({src:e,async:!0,type:"module"},t),(t=ta.get(d))&&zu(e,t),f=n.createElement("script"),ct(f),gt(f,"link",e),n.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(d,f))}}function Op(e,t,n,l){var d=(d=de.current)?Ol(d):null;if(!d)throw Error(o(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=Yn(n.href),n=mn(d).hoistableStyles,l=n.get(t),l||(l={type:"style",instance:null,count:0,state:null},n.set(t,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=Yn(n.href);var f=mn(d).hoistableStyles,x=f.get(e);if(x||(d=d.ownerDocument||d,x={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(e,x),(f=d.querySelector(ai(e)))&&!f._p&&(x.instance=f,x.state.loading=5),ta.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},ta.set(e,n),f||Ry(d,e,n,x.state))),t&&l===null)throw Error(o(528,""));return x}if(t&&l!==null)throw Error(o(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Kn(n),n=mn(d).hoistableScripts,l=n.get(t),l||(l={type:"script",instance:null,count:0,state:null},n.set(t,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,e))}}function Yn(e){return'href="'+Kt(e)+'"'}function ai(e){return'link[rel="stylesheet"]['+e+"]"}function Dp(e){return w({},e,{"data-precedence":e.precedence,precedence:null})}function Ry(e,t,n,l){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?l.loading=1:(t=e.createElement("link"),l.preload=t,t.addEventListener("load",function(){return l.loading|=1}),t.addEventListener("error",function(){return l.loading|=2}),gt(t,"link",n),ct(t),e.head.appendChild(t))}function Kn(e){return'[src="'+Kt(e)+'"]'}function si(e){return"script[async]"+e}function Mp(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var l=e.querySelector('style[data-href~="'+Kt(n.href)+'"]');if(l)return t.instance=l,ct(l),l;var d=w({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),ct(l),gt(l,"style",d),Dl(l,n.precedence,e),t.instance=l;case"stylesheet":d=Yn(n.href);var f=e.querySelector(ai(d));if(f)return t.state.loading|=4,t.instance=f,ct(f),f;l=Dp(n),(d=ta.get(d))&&Bu(l,d),f=(e.ownerDocument||e).createElement("link"),ct(f);var x=f;return x._p=new Promise(function(N,C){x.onload=N,x.onerror=C}),gt(f,"link",l),t.state.loading|=4,Dl(f,n.precedence,e),t.instance=f;case"script":return f=Kn(n.src),(d=e.querySelector(si(f)))?(t.instance=d,ct(d),d):(l=n,(d=ta.get(f))&&(l=w({},n),zu(l,d)),e=e.ownerDocument||e,d=e.createElement("script"),ct(d),gt(d,"link",l),e.head.appendChild(d),t.instance=d);case"void":return null;default:throw Error(o(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(l=t.instance,t.state.loading|=4,Dl(l,n.precedence,e));return t.instance}function Dl(e,t,n){for(var l=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=l.length?l[l.length-1]:null,f=d,x=0;x<l.length;x++){var N=l[x];if(N.dataset.precedence===t)f=N;else if(f!==d)break}f?f.parentNode.insertBefore(e,f.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function Bu(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function zu(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Ml=null;function Up(e,t,n){if(Ml===null){var l=new Map,d=Ml=new Map;d.set(n,l)}else d=Ml,l=d.get(n),l||(l=new Map,d.set(n,l));if(l.has(e))return l;for(l.set(e,null),n=n.getElementsByTagName(e),d=0;d<n.length;d++){var f=n[d];if(!(f[vr]||f[ht]||e==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var x=f.getAttribute(t)||"";x=e+x;var N=l.get(x);N?N.push(f):l.set(x,[f])}}return l}function Lp(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function Oy(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Bp(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function Dy(e,t,n,l){if(n.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(n.state.loading&4)===0){if(n.instance===null){var d=Yn(l.href),f=t.querySelector(ai(d));if(f){t=f._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=Ul.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=f,ct(f);return}f=t.ownerDocument||t,l=Dp(l),(d=ta.get(d))&&Bu(l,d),f=f.createElement("link"),ct(f);var x=f;x._p=new Promise(function(N,C){x.onload=N,x.onerror=C}),gt(f,"link",l),n.instance=f}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&(n.state.loading&3)===0&&(e.count++,n=Ul.bind(e),t.addEventListener("load",n),t.addEventListener("error",n))}}var qu=0;function My(e,t){return e.stylesheets&&e.count===0&&Bl(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var l=setTimeout(function(){if(e.stylesheets&&Bl(e,e.stylesheets),e.unsuspend){var f=e.unsuspend;e.unsuspend=null,f()}},6e4+t);0<e.imgBytes&&qu===0&&(qu=62500*my());var d=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Bl(e,e.stylesheets),e.unsuspend)){var f=e.unsuspend;e.unsuspend=null,f()}},(e.imgBytes>qu?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(l),clearTimeout(d)}}:null}function Ul(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Bl(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Ll=null;function Bl(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Ll=new Map,t.forEach(Uy,e),Ll=null,Ul.call(e))}function Uy(e,t){if(!(t.state.loading&4)){var n=Ll.get(e);if(n)var l=n.get(null);else{n=new Map,Ll.set(e,n);for(var d=e.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<d.length;f++){var x=d[f];(x.nodeName==="LINK"||x.getAttribute("media")!=="not all")&&(n.set(x.dataset.precedence,x),l=x)}l&&n.set(null,l)}d=t.instance,x=d.getAttribute("data-precedence"),f=n.get(x)||l,f===l&&n.set(null,d),n.set(x,d),this.count++,l=Ul.bind(this),d.addEventListener("load",l),d.addEventListener("error",l),f?f.parentNode.insertBefore(d,f.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(d,e.firstChild)),t.state.loading|=4}}var ni={$$typeof:A,Provider:null,Consumer:null,_currentValue:se,_currentValue2:se,_threadCount:0};function Ly(e,t,n,l,d,f,x,N,C){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Mo(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Mo(0),this.hiddenUpdates=Mo(null),this.identifierPrefix=l,this.onUncaughtError=d,this.onCaughtError=f,this.onRecoverableError=x,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=C,this.incompleteTransitions=new Map}function zp(e,t,n,l,d,f,x,N,C,$,Y,X){return e=new Ly(e,t,n,x,C,$,Y,X,N),t=1,f===!0&&(t|=24),f=Bt(3,null,null,t),e.current=f,f.stateNode=e,t=bc(),t.refCount++,e.pooledCache=t,t.refCount++,f.memoizedState={element:l,isDehydrated:n,cache:t},jc(f),e}function qp(e){return e?(e=_n,e):_n}function Ip(e,t,n,l,d,f){d=qp(d),l.context===null?l.context=d:l.pendingContext=d,l=is(t),l.payload={element:n},f=f===void 0?null:f,f!==null&&(l.callback=f),n=ls(e,l,t),n!==null&&(Mt(n,e,t),Lr(n,e,t))}function $p(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Iu(e,t){$p(e,t),(e=e.alternate)&&$p(e,t)}function Pp(e){if(e.tag===13||e.tag===31){var t=Bs(e,67108864);t!==null&&Mt(t,e,67108864),Iu(e,67108864)}}function Hp(e){if(e.tag===13||e.tag===31){var t=Pt();t=Uo(t);var n=Bs(e,t);n!==null&&Mt(n,e,t),Iu(e,t)}}var zl=!0;function By(e,t,n,l){var d=D.T;D.T=null;var f=W.p;try{W.p=2,$u(e,t,n,l)}finally{W.p=f,D.T=d}}function zy(e,t,n,l){var d=D.T;D.T=null;var f=W.p;try{W.p=8,$u(e,t,n,l)}finally{W.p=f,D.T=d}}function $u(e,t,n,l){if(zl){var d=Pu(l);if(d===null)ku(e,t,l,ql,n),Gp(e,l);else if(Iy(d,e,t,n,l))l.stopPropagation();else if(Gp(e,l),t&4&&-1<qy.indexOf(e)){for(;d!==null;){var f=fn(d);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var x=Wa(f.pendingLanes);if(x!==0){var N=f;for(N.pendingLanes|=2,N.entangledLanes|=2;x;){var C=1<<31-xt(x);N.entanglements[1]|=C,x&=~C}ja(f),(Oe&6)===0&&(wl=We()+500,Wr(0))}}break;case 31:case 13:N=Bs(f,2),N!==null&&Mt(N,f,2),Nl(),Iu(f,2)}if(f=Pu(l),f===null&&ku(e,t,l,ql,n),f===d)break;d=f}d!==null&&l.stopPropagation()}else ku(e,t,l,null,n)}}function Pu(e){return e=Vo(e),Hu(e)}var ql=null;function Hu(e){if(ql=null,e=hn(e),e!==null){var t=u(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=h(t),e!==null)return e;e=null}else if(n===31){if(e=g(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return ql=e,null}function Vp(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(on()){case cn:return 2;case Et:return 8;case un:case gr:return 32;case Ci:return 268435456;default:return 32}default:return 32}}var Vu=!1,bs=null,vs=null,ys=null,ri=new Map,ii=new Map,ws=[],qy="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Gp(e,t){switch(e){case"focusin":case"focusout":bs=null;break;case"dragenter":case"dragleave":vs=null;break;case"mouseover":case"mouseout":ys=null;break;case"pointerover":case"pointerout":ri.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ii.delete(t.pointerId)}}function li(e,t,n,l,d,f){return e===null||e.nativeEvent!==f?(e={blockedOn:t,domEventName:n,eventSystemFlags:l,nativeEvent:f,targetContainers:[d]},t!==null&&(t=fn(t),t!==null&&Pp(t)),e):(e.eventSystemFlags|=l,t=e.targetContainers,d!==null&&t.indexOf(d)===-1&&t.push(d),e)}function Iy(e,t,n,l,d){switch(t){case"focusin":return bs=li(bs,e,t,n,l,d),!0;case"dragenter":return vs=li(vs,e,t,n,l,d),!0;case"mouseover":return ys=li(ys,e,t,n,l,d),!0;case"pointerover":var f=d.pointerId;return ri.set(f,li(ri.get(f)||null,e,t,n,l,d)),!0;case"gotpointercapture":return f=d.pointerId,ii.set(f,li(ii.get(f)||null,e,t,n,l,d)),!0}return!1}function Yp(e){var t=hn(e.target);if(t!==null){var n=u(t);if(n!==null){if(t=n.tag,t===13){if(t=h(n),t!==null){e.blockedOn=t,rh(e.priority,function(){Hp(n)});return}}else if(t===31){if(t=g(n),t!==null){e.blockedOn=t,rh(e.priority,function(){Hp(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Il(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Pu(e.nativeEvent);if(n===null){n=e.nativeEvent;var l=new n.constructor(n.type,n);Ho=l,n.target.dispatchEvent(l),Ho=null}else return t=fn(n),t!==null&&Pp(t),e.blockedOn=n,!1;t.shift()}return!0}function Kp(e,t,n){Il(e)&&n.delete(t)}function $y(){Vu=!1,bs!==null&&Il(bs)&&(bs=null),vs!==null&&Il(vs)&&(vs=null),ys!==null&&Il(ys)&&(ys=null),ri.forEach(Kp),ii.forEach(Kp)}function $l(e,t){e.blockedOn===t&&(e.blockedOn=null,Vu||(Vu=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,$y)))}var Pl=null;function Fp(e){Pl!==e&&(Pl=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Pl===e&&(Pl=null);for(var t=0;t<e.length;t+=3){var n=e[t],l=e[t+1],d=e[t+2];if(typeof l!="function"){if(Hu(l||n)===null)continue;break}var f=fn(n);f!==null&&(e.splice(t,3),t-=3,Pc(f,{pending:!0,data:d,method:n.method,action:l},l,d))}}))}function Fn(e){function t(C){return $l(C,e)}bs!==null&&$l(bs,e),vs!==null&&$l(vs,e),ys!==null&&$l(ys,e),ri.forEach(t),ii.forEach(t);for(var n=0;n<ws.length;n++){var l=ws[n];l.blockedOn===e&&(l.blockedOn=null)}for(;0<ws.length&&(n=ws[0],n.blockedOn===null);)Yp(n),n.blockedOn===null&&ws.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(l=0;l<n.length;l+=3){var d=n[l],f=n[l+1],x=d[Ct]||null;if(typeof f=="function")x||Fp(n);else if(x){var N=null;if(f&&f.hasAttribute("formAction")){if(d=f,x=f[Ct]||null)N=x.formAction;else if(Hu(d)!==null)continue}else N=x.action;typeof N=="function"?n[l+1]=N:(n.splice(l,3),l-=3),Fp(n)}}}function Qp(){function e(f){f.canIntercept&&f.info==="react-transition"&&f.intercept({handler:function(){return new Promise(function(x){return d=x})},focusReset:"manual",scroll:"manual"})}function t(){d!==null&&(d(),d=null),l||setTimeout(n,20)}function n(){if(!l&&!navigation.transition){var f=navigation.currentEntry;f&&f.url!=null&&navigation.navigate(f.url,{state:f.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,d=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(n,100),function(){l=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),d!==null&&(d(),d=null)}}}function Gu(e){this._internalRoot=e}Hl.prototype.render=Gu.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(o(409));var n=t.current,l=Pt();Ip(n,l,e,t,null,null)},Hl.prototype.unmount=Gu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Ip(e.current,2,null,e,null,null),Nl(),t[dn]=null}};function Hl(e){this._internalRoot=e}Hl.prototype.unstable_scheduleHydration=function(e){if(e){var t=nh();e={blockedOn:null,target:e,priority:t};for(var n=0;n<ws.length&&t!==0&&t<ws[n].priority;n++);ws.splice(n,0,e),n===0&&Yp(e)}};var Jp=s.version;if(Jp!=="19.2.0")throw Error(o(527,Jp,"19.2.0"));W.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(o(188)):(e=Object.keys(e).join(","),Error(o(268,e)));return e=p(t),e=e!==null?b(e):null,e=e===null?null:e.stateNode,e};var Py={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:D,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Vl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Vl.isDisabled&&Vl.supportsFiber)try{xa=Vl.inject(Py),kt=Vl}catch{}}return ci.createRoot=function(e,t){if(!c(e))throw Error(o(299));var n=!1,l="",d=sm,f=nm,x=rm;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(l=t.identifierPrefix),t.onUncaughtError!==void 0&&(d=t.onUncaughtError),t.onCaughtError!==void 0&&(f=t.onCaughtError),t.onRecoverableError!==void 0&&(x=t.onRecoverableError)),t=zp(e,1,!1,null,null,n,l,null,d,f,x,Qp),e[dn]=t.current,Eu(e),new Gu(t)},ci.hydrateRoot=function(e,t,n){if(!c(e))throw Error(o(299));var l=!1,d="",f=sm,x=nm,N=rm,C=null;return n!=null&&(n.unstable_strictMode===!0&&(l=!0),n.identifierPrefix!==void 0&&(d=n.identifierPrefix),n.onUncaughtError!==void 0&&(f=n.onUncaughtError),n.onCaughtError!==void 0&&(x=n.onCaughtError),n.onRecoverableError!==void 0&&(N=n.onRecoverableError),n.formState!==void 0&&(C=n.formState)),t=zp(e,1,!0,t,n??null,l,d,C,f,x,N,Qp),t.context=qp(null),n=t.current,l=Pt(),l=Uo(l),d=is(l),d.callback=null,ls(n,d,l),n=l,t.current.lanes=n,br(t,n),ja(t),e[dn]=t.current,Eu(e),new Hl(t)},ci.version="19.2.0",ci}var ig;function e0(){if(ig)return Fu.exports;ig=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(s){console.error(s)}}return r(),Fu.exports=Zy(),Fu.exports}var t0=e0();const a0=Od(t0);/**
 * react-router v7.9.5
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var lg="popstate";function s0(r={}){function s(o,c){let{pathname:u,search:h,hash:g}=o.location;return dd("",{pathname:u,search:h,hash:g},c.state&&c.state.usr||null,c.state&&c.state.key||"default")}function i(o,c){return typeof c=="string"?c:xi(c)}return r0(s,i,null,r)}function Ye(r,s){if(r===!1||r===null||typeof r>"u")throw new Error(s)}function ha(r,s){if(!r){typeof console<"u"&&console.warn(s);try{throw new Error(s)}catch{}}}function n0(){return Math.random().toString(36).substring(2,10)}function og(r,s){return{usr:r.state,key:r.key,idx:s}}function dd(r,s,i=null,o){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof s=="string"?cr(s):s,state:i,key:s&&s.key||o||n0()}}function xi({pathname:r="/",search:s="",hash:i=""}){return s&&s!=="?"&&(r+=s.charAt(0)==="?"?s:"?"+s),i&&i!=="#"&&(r+=i.charAt(0)==="#"?i:"#"+i),r}function cr(r){let s={};if(r){let i=r.indexOf("#");i>=0&&(s.hash=r.substring(i),r=r.substring(0,i));let o=r.indexOf("?");o>=0&&(s.search=r.substring(o),r=r.substring(0,o)),r&&(s.pathname=r)}return s}function r0(r,s,i,o={}){let{window:c=document.defaultView,v5Compat:u=!1}=o,h=c.history,g="POP",m=null,p=b();p==null&&(p=0,h.replaceState({...h.state,idx:p},""));function b(){return(h.state||{idx:null}).idx}function w(){g="POP";let y=b(),k=y==null?null:y-p;p=y,m&&m({action:g,location:E.location,delta:k})}function j(y,k){g="PUSH";let R=dd(E.location,y,k);p=b()+1;let A=og(R,p),q=E.createHref(R);try{h.pushState(A,"",q)}catch(L){if(L instanceof DOMException&&L.name==="DataCloneError")throw L;c.location.assign(q)}u&&m&&m({action:g,location:E.location,delta:1})}function _(y,k){g="REPLACE";let R=dd(E.location,y,k);p=b();let A=og(R,p),q=E.createHref(R);h.replaceState(A,"",q),u&&m&&m({action:g,location:E.location,delta:0})}function v(y){return i0(y)}let E={get action(){return g},get location(){return r(c,h)},listen(y){if(m)throw new Error("A history only accepts one active listener");return c.addEventListener(lg,w),m=y,()=>{c.removeEventListener(lg,w),m=null}},createHref(y){return s(c,y)},createURL:v,encodeLocation(y){let k=v(y);return{pathname:k.pathname,search:k.search,hash:k.hash}},push:j,replace:_,go(y){return h.go(y)}};return E}function i0(r,s=!1){let i="http://localhost";typeof window<"u"&&(i=window.location.origin!=="null"?window.location.origin:window.location.href),Ye(i,"No window.location.(origin|href) available to create URL");let o=typeof r=="string"?r:xi(r);return o=o.replace(/ $/,"%20"),!s&&o.startsWith("//")&&(o=i+o),new URL(o,i)}function ux(r,s,i="/"){return l0(r,s,i,!1)}function l0(r,s,i,o){let c=typeof s=="string"?cr(s):s,u=Fa(c.pathname||"/",i);if(u==null)return null;let h=dx(r);o0(h);let g=null;for(let m=0;g==null&&m<h.length;++m){let p=v0(u);g=x0(h[m],p,o)}return g}function dx(r,s=[],i=[],o="",c=!1){let u=(h,g,m=c,p)=>{let b={relativePath:p===void 0?h.path||"":p,caseSensitive:h.caseSensitive===!0,childrenIndex:g,route:h};if(b.relativePath.startsWith("/")){if(!b.relativePath.startsWith(o)&&m)return;Ye(b.relativePath.startsWith(o),`Absolute route path "${b.relativePath}" nested under path "${o}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),b.relativePath=b.relativePath.slice(o.length)}let w=Ka([o,b.relativePath]),j=i.concat(b);h.children&&h.children.length>0&&(Ye(h.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${w}".`),dx(h.children,s,j,w,m)),!(h.path==null&&!h.index)&&s.push({path:w,score:p0(w,h.index),routesMeta:j})};return r.forEach((h,g)=>{var m;if(h.path===""||!((m=h.path)!=null&&m.includes("?")))u(h,g);else for(let p of hx(h.path))u(h,g,!0,p)}),s}function hx(r){let s=r.split("/");if(s.length===0)return[];let[i,...o]=s,c=i.endsWith("?"),u=i.replace(/\?$/,"");if(o.length===0)return c?[u,""]:[u];let h=hx(o.join("/")),g=[];return g.push(...h.map(m=>m===""?u:[u,m].join("/"))),c&&g.push(...h),g.map(m=>r.startsWith("/")&&m===""?"/":m)}function o0(r){r.sort((s,i)=>s.score!==i.score?i.score-s.score:g0(s.routesMeta.map(o=>o.childrenIndex),i.routesMeta.map(o=>o.childrenIndex)))}var c0=/^:[\w-]+$/,u0=3,d0=2,h0=1,f0=10,m0=-2,cg=r=>r==="*";function p0(r,s){let i=r.split("/"),o=i.length;return i.some(cg)&&(o+=m0),s&&(o+=d0),i.filter(c=>!cg(c)).reduce((c,u)=>c+(c0.test(u)?u0:u===""?h0:f0),o)}function g0(r,s){return r.length===s.length&&r.slice(0,-1).every((o,c)=>o===s[c])?r[r.length-1]-s[s.length-1]:0}function x0(r,s,i=!1){let{routesMeta:o}=r,c={},u="/",h=[];for(let g=0;g<o.length;++g){let m=o[g],p=g===o.length-1,b=u==="/"?s:s.slice(u.length)||"/",w=uo({path:m.relativePath,caseSensitive:m.caseSensitive,end:p},b),j=m.route;if(!w&&p&&i&&!o[o.length-1].route.index&&(w=uo({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},b)),!w)return null;Object.assign(c,w.params),h.push({params:c,pathname:Ka([u,w.pathname]),pathnameBase:N0(Ka([u,w.pathnameBase])),route:j}),w.pathnameBase!=="/"&&(u=Ka([u,w.pathnameBase]))}return h}function uo(r,s){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[i,o]=b0(r.path,r.caseSensitive,r.end),c=s.match(i);if(!c)return null;let u=c[0],h=u.replace(/(.)\/+$/,"$1"),g=c.slice(1);return{params:o.reduce((p,{paramName:b,isOptional:w},j)=>{if(b==="*"){let v=g[j]||"";h=u.slice(0,u.length-v.length).replace(/(.)\/+$/,"$1")}const _=g[j];return w&&!_?p[b]=void 0:p[b]=(_||"").replace(/%2F/g,"/"),p},{}),pathname:u,pathnameBase:h,pattern:r}}function b0(r,s=!1,i=!0){ha(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let o=[],c="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,g,m)=>(o.push({paramName:g,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return r.endsWith("*")?(o.push({paramName:"*"}),c+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):i?c+="\\/*$":r!==""&&r!=="/"&&(c+="(?:(?=\\/|$))"),[new RegExp(c,s?void 0:"i"),o]}function v0(r){try{return r.split("/").map(s=>decodeURIComponent(s).replace(/\//g,"%2F")).join("/")}catch(s){return ha(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${s}).`),r}}function Fa(r,s){if(s==="/")return r;if(!r.toLowerCase().startsWith(s.toLowerCase()))return null;let i=s.endsWith("/")?s.length-1:s.length,o=r.charAt(i);return o&&o!=="/"?null:r.slice(i)||"/"}function y0(r,s="/"){let{pathname:i,search:o="",hash:c=""}=typeof r=="string"?cr(r):r;return{pathname:i?i.startsWith("/")?i:w0(i,s):s,search:_0(o),hash:S0(c)}}function w0(r,s){let i=s.replace(/\/+$/,"").split("/");return r.split("/").forEach(c=>{c===".."?i.length>1&&i.pop():c!=="."&&i.push(c)}),i.length>1?i.join("/"):"/"}function Wu(r,s,i,o){return`Cannot include a '${r}' character in a manually specified \`to.${s}\` field [${JSON.stringify(o)}].  Please separate it out to the \`to.${i}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function j0(r){return r.filter((s,i)=>i===0||s.route.path&&s.route.path.length>0)}function Md(r){let s=j0(r);return s.map((i,o)=>o===s.length-1?i.pathname:i.pathnameBase)}function Ud(r,s,i,o=!1){let c;typeof r=="string"?c=cr(r):(c={...r},Ye(!c.pathname||!c.pathname.includes("?"),Wu("?","pathname","search",c)),Ye(!c.pathname||!c.pathname.includes("#"),Wu("#","pathname","hash",c)),Ye(!c.search||!c.search.includes("#"),Wu("#","search","hash",c)));let u=r===""||c.pathname==="",h=u?"/":c.pathname,g;if(h==null)g=i;else{let w=s.length-1;if(!o&&h.startsWith("..")){let j=h.split("/");for(;j[0]==="..";)j.shift(),w-=1;c.pathname=j.join("/")}g=w>=0?s[w]:"/"}let m=y0(c,g),p=h&&h!=="/"&&h.endsWith("/"),b=(u||h===".")&&i.endsWith("/");return!m.pathname.endsWith("/")&&(p||b)&&(m.pathname+="/"),m}var Ka=r=>r.join("/").replace(/\/\/+/g,"/"),N0=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),_0=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,S0=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function E0(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var fx=["POST","PUT","PATCH","DELETE"];new Set(fx);var k0=["GET",...fx];new Set(k0);var ur=S.createContext(null);ur.displayName="DataRouter";var No=S.createContext(null);No.displayName="DataRouterState";S.createContext(!1);var mx=S.createContext({isTransitioning:!1});mx.displayName="ViewTransition";var C0=S.createContext(new Map);C0.displayName="Fetchers";var A0=S.createContext(null);A0.displayName="Await";var fa=S.createContext(null);fa.displayName="Navigation";var Ni=S.createContext(null);Ni.displayName="Location";var ma=S.createContext({outlet:null,matches:[],isDataRoute:!1});ma.displayName="Route";var Ld=S.createContext(null);Ld.displayName="RouteError";function T0(r,{relative:s}={}){Ye(dr(),"useHref() may be used only in the context of a <Router> component.");let{basename:i,navigator:o}=S.useContext(fa),{hash:c,pathname:u,search:h}=_i(r,{relative:s}),g=u;return i!=="/"&&(g=u==="/"?i:Ka([i,u])),o.createHref({pathname:g,search:h,hash:c})}function dr(){return S.useContext(Ni)!=null}function Ja(){return Ye(dr(),"useLocation() may be used only in the context of a <Router> component."),S.useContext(Ni).location}var px="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function gx(r){S.useContext(fa).static||S.useLayoutEffect(r)}function Rs(){let{isDataRoute:r}=S.useContext(ma);return r?V0():R0()}function R0(){Ye(dr(),"useNavigate() may be used only in the context of a <Router> component.");let r=S.useContext(ur),{basename:s,navigator:i}=S.useContext(fa),{matches:o}=S.useContext(ma),{pathname:c}=Ja(),u=JSON.stringify(Md(o)),h=S.useRef(!1);return gx(()=>{h.current=!0}),S.useCallback((m,p={})=>{if(ha(h.current,px),!h.current)return;if(typeof m=="number"){i.go(m);return}let b=Ud(m,JSON.parse(u),c,p.relative==="path");r==null&&s!=="/"&&(b.pathname=b.pathname==="/"?s:Ka([s,b.pathname])),(p.replace?i.replace:i.push)(b,p.state,p)},[s,i,u,c,r])}S.createContext(null);function O0(){let{matches:r}=S.useContext(ma),s=r[r.length-1];return s?s.params:{}}function _i(r,{relative:s}={}){let{matches:i}=S.useContext(ma),{pathname:o}=Ja(),c=JSON.stringify(Md(i));return S.useMemo(()=>Ud(r,JSON.parse(c),o,s==="path"),[r,c,o,s])}function D0(r,s){return xx(r,s)}function xx(r,s,i,o,c){var R;Ye(dr(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:u}=S.useContext(fa),{matches:h}=S.useContext(ma),g=h[h.length-1],m=g?g.params:{},p=g?g.pathname:"/",b=g?g.pathnameBase:"/",w=g&&g.route;{let A=w&&w.path||"";bx(p,!w||A.endsWith("*")||A.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${A}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${A}"> to <Route path="${A==="/"?"*":`${A}/*`}">.`)}let j=Ja(),_;if(s){let A=typeof s=="string"?cr(s):s;Ye(b==="/"||((R=A.pathname)==null?void 0:R.startsWith(b)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${b}" but pathname "${A.pathname}" was given in the \`location\` prop.`),_=A}else _=j;let v=_.pathname||"/",E=v;if(b!=="/"){let A=b.replace(/^\//,"").split("/");E="/"+v.replace(/^\//,"").split("/").slice(A.length).join("/")}let y=ux(r,{pathname:E});ha(w||y!=null,`No routes matched location "${_.pathname}${_.search}${_.hash}" `),ha(y==null||y[y.length-1].route.element!==void 0||y[y.length-1].route.Component!==void 0||y[y.length-1].route.lazy!==void 0,`Matched leaf route at location "${_.pathname}${_.search}${_.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let k=z0(y&&y.map(A=>Object.assign({},A,{params:Object.assign({},m,A.params),pathname:Ka([b,u.encodeLocation?u.encodeLocation(A.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:A.pathname]),pathnameBase:A.pathnameBase==="/"?b:Ka([b,u.encodeLocation?u.encodeLocation(A.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:A.pathnameBase])})),h,i,o,c);return s&&k?S.createElement(Ni.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",..._},navigationType:"POP"}},k):k}function M0(){let r=H0(),s=E0(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),i=r instanceof Error?r.stack:null,o="rgba(200,200,200, 0.5)",c={padding:"0.5rem",backgroundColor:o},u={padding:"2px 4px",backgroundColor:o},h=null;return console.error("Error handled by React Router default ErrorBoundary:",r),h=S.createElement(S.Fragment,null,S.createElement("p",null," Hey developer "),S.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",S.createElement("code",{style:u},"ErrorBoundary")," or"," ",S.createElement("code",{style:u},"errorElement")," prop on your route.")),S.createElement(S.Fragment,null,S.createElement("h2",null,"Unexpected Application Error!"),S.createElement("h3",{style:{fontStyle:"italic"}},s),i?S.createElement("pre",{style:c},i):null,h)}var U0=S.createElement(M0,null),L0=class extends S.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,s){return s.location!==r.location||s.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:s.error,location:s.location,revalidation:r.revalidation||s.revalidation}}componentDidCatch(r,s){this.props.unstable_onError?this.props.unstable_onError(r,s):console.error("React Router caught the following error during render",r)}render(){return this.state.error!==void 0?S.createElement(ma.Provider,{value:this.props.routeContext},S.createElement(Ld.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function B0({routeContext:r,match:s,children:i}){let o=S.useContext(ur);return o&&o.static&&o.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=s.route.id),S.createElement(ma.Provider,{value:r},i)}function z0(r,s=[],i=null,o=null,c=null){if(r==null){if(!i)return null;if(i.errors)r=i.matches;else if(s.length===0&&!i.initialized&&i.matches.length>0)r=i.matches;else return null}let u=r,h=i==null?void 0:i.errors;if(h!=null){let p=u.findIndex(b=>b.route.id&&(h==null?void 0:h[b.route.id])!==void 0);Ye(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(h).join(",")}`),u=u.slice(0,Math.min(u.length,p+1))}let g=!1,m=-1;if(i)for(let p=0;p<u.length;p++){let b=u[p];if((b.route.HydrateFallback||b.route.hydrateFallbackElement)&&(m=p),b.route.id){let{loaderData:w,errors:j}=i,_=b.route.loader&&!w.hasOwnProperty(b.route.id)&&(!j||j[b.route.id]===void 0);if(b.route.lazy||_){g=!0,m>=0?u=u.slice(0,m+1):u=[u[0]];break}}}return u.reduceRight((p,b,w)=>{let j,_=!1,v=null,E=null;i&&(j=h&&b.route.id?h[b.route.id]:void 0,v=b.route.errorElement||U0,g&&(m<0&&w===0?(bx("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),_=!0,E=null):m===w&&(_=!0,E=b.route.hydrateFallbackElement||null)));let y=s.concat(u.slice(0,w+1)),k=()=>{let R;return j?R=v:_?R=E:b.route.Component?R=S.createElement(b.route.Component,null):b.route.element?R=b.route.element:R=p,S.createElement(B0,{match:b,routeContext:{outlet:p,matches:y,isDataRoute:i!=null},children:R})};return i&&(b.route.ErrorBoundary||b.route.errorElement||w===0)?S.createElement(L0,{location:i.location,revalidation:i.revalidation,component:v,error:j,children:k(),routeContext:{outlet:null,matches:y,isDataRoute:!0},unstable_onError:o}):k()},null)}function Bd(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function q0(r){let s=S.useContext(ur);return Ye(s,Bd(r)),s}function I0(r){let s=S.useContext(No);return Ye(s,Bd(r)),s}function $0(r){let s=S.useContext(ma);return Ye(s,Bd(r)),s}function zd(r){let s=$0(r),i=s.matches[s.matches.length-1];return Ye(i.route.id,`${r} can only be used on routes that contain a unique "id"`),i.route.id}function P0(){return zd("useRouteId")}function H0(){var o;let r=S.useContext(Ld),s=I0("useRouteError"),i=zd("useRouteError");return r!==void 0?r:(o=s.errors)==null?void 0:o[i]}function V0(){let{router:r}=q0("useNavigate"),s=zd("useNavigate"),i=S.useRef(!1);return gx(()=>{i.current=!0}),S.useCallback(async(c,u={})=>{ha(i.current,px),i.current&&(typeof c=="number"?r.navigate(c):await r.navigate(c,{fromRouteId:s,...u}))},[r,s])}var ug={};function bx(r,s,i){!s&&!ug[r]&&(ug[r]=!0,ha(!1,i))}S.memo(G0);function G0({routes:r,future:s,state:i,unstable_onError:o}){return xx(r,void 0,i,o,s)}function rr({to:r,replace:s,state:i,relative:o}){Ye(dr(),"<Navigate> may be used only in the context of a <Router> component.");let{static:c}=S.useContext(fa);ha(!c,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:u}=S.useContext(ma),{pathname:h}=Ja(),g=Rs(),m=Ud(r,Md(u),h,o==="path"),p=JSON.stringify(m);return S.useEffect(()=>{g(JSON.parse(p),{replace:s,state:i,relative:o})},[g,p,o,s,i]),null}function oa(r){Ye(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Y0({basename:r="/",children:s=null,location:i,navigationType:o="POP",navigator:c,static:u=!1}){Ye(!dr(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let h=r.replace(/^\/*/,"/"),g=S.useMemo(()=>({basename:h,navigator:c,static:u,future:{}}),[h,c,u]);typeof i=="string"&&(i=cr(i));let{pathname:m="/",search:p="",hash:b="",state:w=null,key:j="default"}=i,_=S.useMemo(()=>{let v=Fa(m,h);return v==null?null:{location:{pathname:v,search:p,hash:b,state:w,key:j},navigationType:o}},[h,m,p,b,w,j,o]);return ha(_!=null,`<Router basename="${h}"> is not able to match the URL "${m}${p}${b}" because it does not start with the basename, so the <Router> won't render anything.`),_==null?null:S.createElement(fa.Provider,{value:g},S.createElement(Ni.Provider,{children:s,value:_}))}function K0({children:r,location:s}){return D0(hd(r),s)}function hd(r,s=[]){let i=[];return S.Children.forEach(r,(o,c)=>{if(!S.isValidElement(o))return;let u=[...s,c];if(o.type===S.Fragment){i.push.apply(i,hd(o.props.children,u));return}Ye(o.type===oa,`[${typeof o.type=="string"?o.type:o.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ye(!o.props.index||!o.props.children,"An index route cannot have child routes.");let h={id:o.props.id||u.join("-"),caseSensitive:o.props.caseSensitive,element:o.props.element,Component:o.props.Component,index:o.props.index,path:o.props.path,middleware:o.props.middleware,loader:o.props.loader,action:o.props.action,hydrateFallbackElement:o.props.hydrateFallbackElement,HydrateFallback:o.props.HydrateFallback,errorElement:o.props.errorElement,ErrorBoundary:o.props.ErrorBoundary,hasErrorBoundary:o.props.hasErrorBoundary===!0||o.props.ErrorBoundary!=null||o.props.errorElement!=null,shouldRevalidate:o.props.shouldRevalidate,handle:o.props.handle,lazy:o.props.lazy};o.props.children&&(h.children=hd(o.props.children,u)),i.push(h)}),i}var io="get",lo="application/x-www-form-urlencoded";function _o(r){return r!=null&&typeof r.tagName=="string"}function F0(r){return _o(r)&&r.tagName.toLowerCase()==="button"}function Q0(r){return _o(r)&&r.tagName.toLowerCase()==="form"}function J0(r){return _o(r)&&r.tagName.toLowerCase()==="input"}function X0(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function W0(r,s){return r.button===0&&(!s||s==="_self")&&!X0(r)}var Gl=null;function Z0(){if(Gl===null)try{new FormData(document.createElement("form"),0),Gl=!1}catch{Gl=!0}return Gl}var ew=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Zu(r){return r!=null&&!ew.has(r)?(ha(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${lo}"`),null):r}function tw(r,s){let i,o,c,u,h;if(Q0(r)){let g=r.getAttribute("action");o=g?Fa(g,s):null,i=r.getAttribute("method")||io,c=Zu(r.getAttribute("enctype"))||lo,u=new FormData(r)}else if(F0(r)||J0(r)&&(r.type==="submit"||r.type==="image")){let g=r.form;if(g==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=r.getAttribute("formaction")||g.getAttribute("action");if(o=m?Fa(m,s):null,i=r.getAttribute("formmethod")||g.getAttribute("method")||io,c=Zu(r.getAttribute("formenctype"))||Zu(g.getAttribute("enctype"))||lo,u=new FormData(g,r),!Z0()){let{name:p,type:b,value:w}=r;if(b==="image"){let j=p?`${p}.`:"";u.append(`${j}x`,"0"),u.append(`${j}y`,"0")}else p&&u.append(p,w)}}else{if(_o(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');i=io,o=null,c=lo,h=r}return u&&c==="text/plain"&&(h=u,u=void 0),{action:o,method:i.toLowerCase(),encType:c,formData:u,body:h}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function qd(r,s){if(r===!1||r===null||typeof r>"u")throw new Error(s)}function aw(r,s,i){let o=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return o.pathname==="/"?o.pathname=`_root.${i}`:s&&Fa(o.pathname,s)==="/"?o.pathname=`${s.replace(/\/$/,"")}/_root.${i}`:o.pathname=`${o.pathname.replace(/\/$/,"")}.${i}`,o}async function sw(r,s){if(r.id in s)return s[r.id];try{let i=await import(r.module);return s[r.id]=i,i}catch(i){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(i),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function nw(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function rw(r,s,i){let o=await Promise.all(r.map(async c=>{let u=s.routes[c.route.id];if(u){let h=await sw(u,i);return h.links?h.links():[]}return[]}));return cw(o.flat(1).filter(nw).filter(c=>c.rel==="stylesheet"||c.rel==="preload").map(c=>c.rel==="stylesheet"?{...c,rel:"prefetch",as:"style"}:{...c,rel:"prefetch"}))}function dg(r,s,i,o,c,u){let h=(m,p)=>i[p]?m.route.id!==i[p].route.id:!0,g=(m,p)=>{var b;return i[p].pathname!==m.pathname||((b=i[p].route.path)==null?void 0:b.endsWith("*"))&&i[p].params["*"]!==m.params["*"]};return u==="assets"?s.filter((m,p)=>h(m,p)||g(m,p)):u==="data"?s.filter((m,p)=>{var w;let b=o.routes[m.route.id];if(!b||!b.hasLoader)return!1;if(h(m,p)||g(m,p))return!0;if(m.route.shouldRevalidate){let j=m.route.shouldRevalidate({currentUrl:new URL(c.pathname+c.search+c.hash,window.origin),currentParams:((w=i[0])==null?void 0:w.params)||{},nextUrl:new URL(r,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof j=="boolean")return j}return!0}):[]}function iw(r,s,{includeHydrateFallback:i}={}){return lw(r.map(o=>{let c=s.routes[o.route.id];if(!c)return[];let u=[c.module];return c.clientActionModule&&(u=u.concat(c.clientActionModule)),c.clientLoaderModule&&(u=u.concat(c.clientLoaderModule)),i&&c.hydrateFallbackModule&&(u=u.concat(c.hydrateFallbackModule)),c.imports&&(u=u.concat(c.imports)),u}).flat(1))}function lw(r){return[...new Set(r)]}function ow(r){let s={},i=Object.keys(r).sort();for(let o of i)s[o]=r[o];return s}function cw(r,s){let i=new Set;return new Set(s),r.reduce((o,c)=>{let u=JSON.stringify(ow(c));return i.has(u)||(i.add(u),o.push({key:u,link:c})),o},[])}function vx(){let r=S.useContext(ur);return qd(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function uw(){let r=S.useContext(No);return qd(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var Id=S.createContext(void 0);Id.displayName="FrameworkContext";function yx(){let r=S.useContext(Id);return qd(r,"You must render this element inside a <HydratedRouter> element"),r}function dw(r,s){let i=S.useContext(Id),[o,c]=S.useState(!1),[u,h]=S.useState(!1),{onFocus:g,onBlur:m,onMouseEnter:p,onMouseLeave:b,onTouchStart:w}=s,j=S.useRef(null);S.useEffect(()=>{if(r==="render"&&h(!0),r==="viewport"){let E=k=>{k.forEach(R=>{h(R.isIntersecting)})},y=new IntersectionObserver(E,{threshold:.5});return j.current&&y.observe(j.current),()=>{y.disconnect()}}},[r]),S.useEffect(()=>{if(o){let E=setTimeout(()=>{h(!0)},100);return()=>{clearTimeout(E)}}},[o]);let _=()=>{c(!0)},v=()=>{c(!1),h(!1)};return i?r!=="intent"?[u,j,{}]:[u,j,{onFocus:ui(g,_),onBlur:ui(m,v),onMouseEnter:ui(p,_),onMouseLeave:ui(b,v),onTouchStart:ui(w,_)}]:[!1,j,{}]}function ui(r,s){return i=>{r&&r(i),i.defaultPrevented||s(i)}}function hw({page:r,...s}){let{router:i}=vx(),o=S.useMemo(()=>ux(i.routes,r,i.basename),[i.routes,r,i.basename]);return o?S.createElement(mw,{page:r,matches:o,...s}):null}function fw(r){let{manifest:s,routeModules:i}=yx(),[o,c]=S.useState([]);return S.useEffect(()=>{let u=!1;return rw(r,s,i).then(h=>{u||c(h)}),()=>{u=!0}},[r,s,i]),o}function mw({page:r,matches:s,...i}){let o=Ja(),{manifest:c,routeModules:u}=yx(),{basename:h}=vx(),{loaderData:g,matches:m}=uw(),p=S.useMemo(()=>dg(r,s,m,c,o,"data"),[r,s,m,c,o]),b=S.useMemo(()=>dg(r,s,m,c,o,"assets"),[r,s,m,c,o]),w=S.useMemo(()=>{if(r===o.pathname+o.search+o.hash)return[];let v=new Set,E=!1;if(s.forEach(k=>{var A;let R=c.routes[k.route.id];!R||!R.hasLoader||(!p.some(q=>q.route.id===k.route.id)&&k.route.id in g&&((A=u[k.route.id])!=null&&A.shouldRevalidate)||R.hasClientLoader?E=!0:v.add(k.route.id))}),v.size===0)return[];let y=aw(r,h,"data");return E&&v.size>0&&y.searchParams.set("_routes",s.filter(k=>v.has(k.route.id)).map(k=>k.route.id).join(",")),[y.pathname+y.search]},[h,g,o,c,p,s,r,u]),j=S.useMemo(()=>iw(b,c),[b,c]),_=fw(b);return S.createElement(S.Fragment,null,w.map(v=>S.createElement("link",{key:v,rel:"prefetch",as:"fetch",href:v,...i})),j.map(v=>S.createElement("link",{key:v,rel:"modulepreload",href:v,...i})),_.map(({key:v,link:E})=>S.createElement("link",{key:v,nonce:i.nonce,...E})))}function pw(...r){return s=>{r.forEach(i=>{typeof i=="function"?i(s):i!=null&&(i.current=s)})}}var wx=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{wx&&(window.__reactRouterVersion="7.9.5")}catch{}function gw({basename:r,children:s,window:i}){let o=S.useRef();o.current==null&&(o.current=s0({window:i,v5Compat:!0}));let c=o.current,[u,h]=S.useState({action:c.action,location:c.location}),g=S.useCallback(m=>{S.startTransition(()=>h(m))},[h]);return S.useLayoutEffect(()=>c.listen(g),[c,g]),S.createElement(Y0,{basename:r,children:s,location:u.location,navigationType:u.action,navigator:c})}var jx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Nx=S.forwardRef(function({onClick:s,discover:i="render",prefetch:o="none",relative:c,reloadDocument:u,replace:h,state:g,target:m,to:p,preventScrollReset:b,viewTransition:w,...j},_){let{basename:v}=S.useContext(fa),E=typeof p=="string"&&jx.test(p),y,k=!1;if(typeof p=="string"&&E&&(y=p,wx))try{let M=new URL(window.location.href),ae=p.startsWith("//")?new URL(M.protocol+p):new URL(p),ce=Fa(ae.pathname,v);ae.origin===M.origin&&ce!=null?p=ce+ae.search+ae.hash:k=!0}catch{ha(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let R=T0(p,{relative:c}),[A,q,L]=dw(o,j),Q=yw(p,{replace:h,state:g,target:m,preventScrollReset:b,relative:c,viewTransition:w});function B(M){s&&s(M),M.defaultPrevented||Q(M)}let Z=S.createElement("a",{...j,...L,href:y||R,onClick:k||u?s:B,ref:pw(_,q),target:m,"data-discover":!E&&i==="render"?"true":void 0});return A&&!E?S.createElement(S.Fragment,null,Z,S.createElement(hw,{page:R})):Z});Nx.displayName="Link";var xw=S.forwardRef(function({"aria-current":s="page",caseSensitive:i=!1,className:o="",end:c=!1,style:u,to:h,viewTransition:g,children:m,...p},b){let w=_i(h,{relative:p.relative}),j=Ja(),_=S.useContext(No),{navigator:v,basename:E}=S.useContext(fa),y=_!=null&&Sw(w)&&g===!0,k=v.encodeLocation?v.encodeLocation(w).pathname:w.pathname,R=j.pathname,A=_&&_.navigation&&_.navigation.location?_.navigation.location.pathname:null;i||(R=R.toLowerCase(),A=A?A.toLowerCase():null,k=k.toLowerCase()),A&&E&&(A=Fa(A,E)||A);const q=k!=="/"&&k.endsWith("/")?k.length-1:k.length;let L=R===k||!c&&R.startsWith(k)&&R.charAt(q)==="/",Q=A!=null&&(A===k||!c&&A.startsWith(k)&&A.charAt(k.length)==="/"),B={isActive:L,isPending:Q,isTransitioning:y},Z=L?s:void 0,M;typeof o=="function"?M=o(B):M=[o,L?"active":null,Q?"pending":null,y?"transitioning":null].filter(Boolean).join(" ");let ae=typeof u=="function"?u(B):u;return S.createElement(Nx,{...p,"aria-current":Z,className:M,ref:b,style:ae,to:h,viewTransition:g},typeof m=="function"?m(B):m)});xw.displayName="NavLink";var bw=S.forwardRef(({discover:r="render",fetcherKey:s,navigate:i,reloadDocument:o,replace:c,state:u,method:h=io,action:g,onSubmit:m,relative:p,preventScrollReset:b,viewTransition:w,...j},_)=>{let v=Nw(),E=_w(g,{relative:p}),y=h.toLowerCase()==="get"?"get":"post",k=typeof g=="string"&&jx.test(g),R=A=>{if(m&&m(A),A.defaultPrevented)return;A.preventDefault();let q=A.nativeEvent.submitter,L=(q==null?void 0:q.getAttribute("formmethod"))||h;v(q||A.currentTarget,{fetcherKey:s,method:L,navigate:i,replace:c,state:u,relative:p,preventScrollReset:b,viewTransition:w})};return S.createElement("form",{ref:_,method:y,action:E,onSubmit:o?m:R,...j,"data-discover":!k&&r==="render"?"true":void 0})});bw.displayName="Form";function vw(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function _x(r){let s=S.useContext(ur);return Ye(s,vw(r)),s}function yw(r,{target:s,replace:i,state:o,preventScrollReset:c,relative:u,viewTransition:h}={}){let g=Rs(),m=Ja(),p=_i(r,{relative:u});return S.useCallback(b=>{if(W0(b,s)){b.preventDefault();let w=i!==void 0?i:xi(m)===xi(p);g(r,{replace:w,state:o,preventScrollReset:c,relative:u,viewTransition:h})}},[m,g,p,i,o,s,r,c,u,h])}var ww=0,jw=()=>`__${String(++ww)}__`;function Nw(){let{router:r}=_x("useSubmit"),{basename:s}=S.useContext(fa),i=P0();return S.useCallback(async(o,c={})=>{let{action:u,method:h,encType:g,formData:m,body:p}=tw(o,s);if(c.navigate===!1){let b=c.fetcherKey||jw();await r.fetch(b,i,c.action||u,{preventScrollReset:c.preventScrollReset,formData:m,body:p,formMethod:c.method||h,formEncType:c.encType||g,flushSync:c.flushSync})}else await r.navigate(c.action||u,{preventScrollReset:c.preventScrollReset,formData:m,body:p,formMethod:c.method||h,formEncType:c.encType||g,replace:c.replace,state:c.state,fromRouteId:i,flushSync:c.flushSync,viewTransition:c.viewTransition})},[r,s,i])}function _w(r,{relative:s}={}){let{basename:i}=S.useContext(fa),o=S.useContext(ma);Ye(o,"useFormAction must be used inside a RouteContext");let[c]=o.matches.slice(-1),u={..._i(r||".",{relative:s})},h=Ja();if(r==null){u.search=h.search;let g=new URLSearchParams(u.search),m=g.getAll("index");if(m.some(b=>b==="")){g.delete("index"),m.filter(w=>w).forEach(w=>g.append("index",w));let b=g.toString();u.search=b?`?${b}`:""}}return(!r||r===".")&&c.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),i!=="/"&&(u.pathname=u.pathname==="/"?i:Ka([i,u.pathname])),xi(u)}function Sw(r,{relative:s}={}){let i=S.useContext(mx);Ye(i!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:o}=_x("useViewTransitionState"),c=_i(r,{relative:s});if(!i.isTransitioning)return!1;let u=Fa(i.currentLocation.pathname,o)||i.currentLocation.pathname,h=Fa(i.nextLocation.pathname,o)||i.nextLocation.pathname;return uo(c.pathname,h)!=null||uo(c.pathname,u)!=null}const Ew=({className:r})=>a.jsxs("svg",{viewBox:"0 0 52 52",className:`animated-checkmark ${r}`,children:[a.jsx("circle",{className:"checkmark__circle",cx:"26",cy:"26",r:"25",fill:"none"}),a.jsx("path",{className:"checkmark__check",fill:"none",d:"M14.1 27.2l7.1 7.2 16.7-16.8"})]}),na=({className:r})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:r,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),Sx=({className:r})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:r,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),bi=({className:r})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:r,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})}),wt=({className:r})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:r,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})}),Ex=({className:r})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:r,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h7.5"})}),kw=({className:r})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:r,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"})}),So=({className:r})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:r,children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 18.75h-9a9 9 0 00-9 9v-9a9 9 0 009-9h9a9 9 0 009 9v9a9 9 0 00-9-9z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.375 21.75h-6.75a.375.375 0 01-.375-.375v-3.75c0-.207.168-.375.375-.375h6.75c.207 0 .375.168.375.375v3.75a.375.375 0 01-.375.375z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 4.5V2.25a2.25 2.25 0 00-2.25-2.25h-4.5A2.25 2.25 0 007.5 2.25V4.5m10.5 0a3.75 3.75 0 01-3.75 3.75h-3a3.75 3.75 0 01-3.75-3.75m10.5 0h-10.5"})]}),vi=({className:r})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:r,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.982 18.725A7.488 7.488 0 0012 15.75a7.488 7.488 0 00-5.982 2.975m11.963 0a9 9 0 10-11.963 0m11.963 0A8.966 8.966 0 0112 21a8.966 8.966 0 01-5.982-2.275M15 9.75a3 3 0 11-6 0 3 3 0 016 0z"})}),ir=({className:r})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:r,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 8.25h19.5M2.25 9h19.5m-16.5 5.25h6m-6 2.25h3.75m-3.75 2.25h6.75m3-12.75V17.25a2.25 2.25 0 01-2.25 2.25H4.5A2.25 2.25 0 012.25 17.25V8.25A2.25 2.25 0 014.5 6h12.75a2.25 2.25 0 012.25 2.25z"})}),kx=({className:r})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:r,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15m3 0l3-3m0 0l-3-3m3 3H9"})}),lr=({className:r})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:r,children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.432 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),Cw=({className:r})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:r,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 18L9 11.25l4.306 4.307a11.95 11.95 0 015.814-5.519l2.74-1.22m0 0l-3.75-.625m3.75.625V11.25"})}),an=({className:r})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:r,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5"})}),hg=({className:r})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:r,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3v2.25m6.364.386l-1.591 1.591M21 12h-2.25m-.386 6.364l-1.591-1.591M12 18.75V21m-4.773-4.227l-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z"})}),fg=({className:r})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:r,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.752 15.002A9.718 9.718 0 0118 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 003 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 009.002-5.998z"})}),_t=({className:r})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:r,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75m-3-7.036A11.959 11.959 0 013.598 6 11.99 11.99 0 003 9.749c0 5.592 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.286zm0 13.036h.008v.008h-.008v-.008z"})}),Cs=({className:r})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:r,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19.128a9.38 9.38 0 002.625.372 9.337 9.337 0 004.121-.952 4.125 4.125 0 00-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 018.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0111.964-4.663M5.625 13.5a6 6 0 100-3.375m-3.375 0a3 3 0 106 0 3 3 0 00-6 0"})}),$d=({className:r})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:r,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.125 2.25h-4.5c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125v-9M10.125 2.25h.375a9 9 0 019 9v.375M10.125 2.25A3.375 3.375 0 0113.5 5.625v1.5c0 .621.504 1.125 1.125 1.125h1.5a3.375 3.375 0 013.375 3.375M9 15l2.25 2.25L15 12"})}),Cx=({className:r})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:r,children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-1.003 1.11-1.226.55-.223 1.19-.223 1.74 0 .55.223 1.02.684 1.11 1.226M13.5 21v-2.182c.54.223 1.09.333 1.62.333.53 0 1.08-.11 1.62-.333V21m-6 0v-2.182c-.54.223-1.09.333-1.62.333-.53 0-1.08-.11-1.62-.333V21m12-9.75l1.623 1.623a2.25 2.25 0 010 3.182l-1.623 1.623m0-6.806l-1.623-1.623a2.25 2.25 0 00-3.182 0l-1.623 1.623m6.806 0l-1.623 1.623m-4.5-1.623l-1.623 1.623a2.25 2.25 0 01-3.182 0l-1.623-1.623m6.806 0l-1.623 1.623"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 18.75a6.75 6.75 0 100-13.5 6.75 6.75 0 000 13.5z"})]}),Ax=({className:r})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:r,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v12m-3-2.818l.879.659c1.171.879 3.07.879 4.242 0 1.172-.879 1.172-2.303 0-3.182C13.536 12.219 12.768 12 12 12c-.725 0-1.45-.22-2.003-.659-1.106-.879-1.106-2.303 0-3.182.95-.715 2.16-1.11 3.396-1.11 1.236 0 2.445.396 3.396 1.11"})}),Eo=({className:r})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:r,children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.25 14.15v4.075c0 1.313-.964 2.42-2.25 2.585-1.4.18-2.5.345-3.5.345-1 0-2.1-.165-3.5-.345-1.286-.165-2.25-1.272-2.25-2.585v-4.075a3.375 3.375 0 016 0z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 3h15A2.25 2.25 0 0121.75 5.25v9.319c0 .622-.266 1.205-.728 1.628a2.999 2.999 0 01-2.022.872 3.75 3.75 0 01-3-1.5 3.75 3.75 0 01-3 1.5 2.999 2.999 0 01-2.022-.872c-.463-.423-.728-1.006-.728-1.628V5.25A2.25 2.25 0 014.5 3z"})]}),hr=({className:r})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:r,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"})}),Sa=({className:r})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:r,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"})}),Si=({className:r})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:r,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z"})}),_a=({className:r})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:r,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"})}),Aw=({className:r})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:r,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})}),Tx=({className:r})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:r,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 5.25a3 3 0 013 3m3 0a6 6 0 01-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1121.75 8.25z"})}),Rx=({className:r})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:r,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 6.75h12M8.25 12h12m-12 5.25h12M3.75 6.75h.007v.008H3.75V6.75zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zM3.75 12h.007v.008H3.75V12zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zM3.75 17.25h.007v.008H3.75v-1.75zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z"})}),Tw=({className:r})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:r,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 012.25-2.25h13.5A2.25 2.25 0 0121 7.5v11.25m-18 0A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75m-18 0h18"})}),Qa=({className:r})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:r,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3"})}),ko=({className:r})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:r,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 7.5h1.5m-1.5 3h1.5m-7.5 3h7.5m-7.5 3h7.5m3-9h3.375c.621 0 1.125.504 1.125 1.125V18a2.25 2.25 0 01-2.25 2.25M16.5 7.5V18a2.25 2.25 0 002.25 2.25M16.5 7.5V4.875c0-.621-.504-1.125-1.125-1.125H4.125C3.504 3.75 3 4.254 3 4.875V18a2.25 2.25 0 002.25 2.25h13.5"})}),Co=({className:r})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:r,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.48 3.499a.562.562 0 011.04 0l2.125 5.111a.563.563 0 00.475.31h5.418a.562.562 0 01.321.988l-4.204 3.602a.563.563 0 00-.182.557l1.528 5.348a.562.562 0 01-.82.63l-4.803-3.22a.563.563 0 00-.64 0l-4.803 3.22a.562.562 0 01-.82-.63l1.528-5.347a.563.563 0 00-.182-.557l-4.204-3.602a.562.562 0 01.321-.988h5.418a.563.563 0 00.475-.31l2.125-5.11z"})}),Ea=({className:r})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:r,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.666 3.888A2.25 2.25 0 0013.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a2.25 2.25 0 01-2.25 2.25h-1.5a2.25 2.25 0 01-2.25-2.25v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 01-2.25 2.25H6.75A2.25 2.25 0 014.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 011.927-.184"})}),Ao=({className:r})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:r,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 18v-5.25m0 0a6.01 6.01 0 001.5-.189m-1.5.189a6.01 6.01 0 01-1.5-.189m3.75 7.478a12.06 12.06 0 01-4.5 0m3.75 2.311a15.045 15.045 0 01-3.75 0M10.5 18.75v-3.375c0-1.423.895-2.684 2.182-3.223a9.041 9.041 0 011.135-.447M17.25 10.5a8.965 8.965 0 01-3.642 7.24M12 18.75a9.041 9.041 0 01-1.135-.447c-1.287-.54-2.182-1.8-2.182-3.223V15.375M12 18.75a9.043 9.043 0 01-3.642-7.24m6.5 1.649v-3.375c0-1.423-.895-2.684-2.182-3.223a9.041 9.041 0 00-1.135-.447M12 18.75a9.043 9.043 0 003.642-7.24"})}),Rw=({className:r})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:r,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 002.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 01-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 00-1.091-.852H4.5A2.25 2.25 0 002.25 4.5v2.25z"})}),nn=({className:r})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:r,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"})}),Ei=({className:r})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:r,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.625 12a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0H8.25m4.125 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0H12m4.125 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0h-.375M21 12c0 4.556-4.03 8.25-9 8.25a9.76 9.76 0 01-2.53-.388m-5.383-.948a.863.863 0 01.037.146l.695 1.453c.09.19.231.355.4.472l.45.27a.863.863 0 01.21.327c.074.16.096.335.053.502a.863.863 0 01-.33.472l-.45.27a.863.863 0 01-.4.122l-.695 1.453c-.09.19-.231.355-.4.472l-.45.27a.863.863 0 01-.21.327c-.074.16-.096.335-.053.502a.863.863 0 01.33.472l.45.27a.863.863 0 01.4.122l.695 1.453c.09.19.231.355.4.472l.45.27a.863.863 0 01.21.327c.074.16.096.335-.053.502a.863.863 0 01-.33.472l-.45.27a.863.863 0 01-.4.122l-1.39.278a.863.863 0 01-.818-.582A9.76 9.76 0 013 12c0-4.556 4.03-8.25 9-8.25s9 3.694 9 8.25z"})});var fd=function(r,s){return fd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(i[c]=o[c])},fd(r,s)};function Ox(r,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");fd(r,s);function i(){this.constructor=r}r.prototype=s===null?Object.create(s):(i.prototype=s.prototype,new i)}var ho=function(){return ho=Object.assign||function(s){for(var i,o=1,c=arguments.length;o<c;o++){i=arguments[o];for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(s[u]=i[u])}return s},ho.apply(this,arguments)};function fr(r,s){var i={};for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&s.indexOf(o)<0&&(i[o]=r[o]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(r);c<o.length;c++)s.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(r,o[c])&&(i[o[c]]=r[o[c]]);return i}function Dx(r,s,i,o){var c=arguments.length,u=c<3?s:o===null?o=Object.getOwnPropertyDescriptor(s,i):o,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(r,s,i,o);else for(var g=r.length-1;g>=0;g--)(h=r[g])&&(u=(c<3?h(u):c>3?h(s,i,u):h(s,i))||u);return c>3&&u&&Object.defineProperty(s,i,u),u}function Mx(r,s){return function(i,o){s(i,o,r)}}function Ux(r,s,i,o,c,u){function h(k){if(k!==void 0&&typeof k!="function")throw new TypeError("Function expected");return k}for(var g=o.kind,m=g==="getter"?"get":g==="setter"?"set":"value",p=!s&&r?o.static?r:r.prototype:null,b=s||(p?Object.getOwnPropertyDescriptor(p,o.name):{}),w,j=!1,_=i.length-1;_>=0;_--){var v={};for(var E in o)v[E]=E==="access"?{}:o[E];for(var E in o.access)v.access[E]=o.access[E];v.addInitializer=function(k){if(j)throw new TypeError("Cannot add initializers after decoration has completed");u.push(h(k||null))};var y=(0,i[_])(g==="accessor"?{get:b.get,set:b.set}:b[m],v);if(g==="accessor"){if(y===void 0)continue;if(y===null||typeof y!="object")throw new TypeError("Object expected");(w=h(y.get))&&(b.get=w),(w=h(y.set))&&(b.set=w),(w=h(y.init))&&c.unshift(w)}else(w=h(y))&&(g==="field"?c.unshift(w):b[m]=w)}p&&Object.defineProperty(p,o.name,b),j=!0}function Lx(r,s,i){for(var o=arguments.length>2,c=0;c<s.length;c++)i=o?s[c].call(r,i):s[c].call(r);return o?i:void 0}function Bx(r){return typeof r=="symbol"?r:"".concat(r)}function zx(r,s,i){return typeof s=="symbol"&&(s=s.description?"[".concat(s.description,"]"):""),Object.defineProperty(r,"name",{configurable:!0,value:i?"".concat(i," ",s):s})}function qx(r,s){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,s)}function le(r,s,i,o){function c(u){return u instanceof i?u:new i(function(h){h(u)})}return new(i||(i=Promise))(function(u,h){function g(b){try{p(o.next(b))}catch(w){h(w)}}function m(b){try{p(o.throw(b))}catch(w){h(w)}}function p(b){b.done?u(b.value):c(b.value).then(g,m)}p((o=o.apply(r,s||[])).next())})}function Ix(r,s){var i={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},o,c,u,h=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return h.next=g(0),h.throw=g(1),h.return=g(2),typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function g(p){return function(b){return m([p,b])}}function m(p){if(o)throw new TypeError("Generator is already executing.");for(;h&&(h=0,p[0]&&(i=0)),i;)try{if(o=1,c&&(u=p[0]&2?c.return:p[0]?c.throw||((u=c.return)&&u.call(c),0):c.next)&&!(u=u.call(c,p[1])).done)return u;switch(c=0,u&&(p=[p[0]&2,u.value]),p[0]){case 0:case 1:u=p;break;case 4:return i.label++,{value:p[1],done:!1};case 5:i.label++,c=p[1],p=[0];continue;case 7:p=i.ops.pop(),i.trys.pop();continue;default:if(u=i.trys,!(u=u.length>0&&u[u.length-1])&&(p[0]===6||p[0]===2)){i=0;continue}if(p[0]===3&&(!u||p[1]>u[0]&&p[1]<u[3])){i.label=p[1];break}if(p[0]===6&&i.label<u[1]){i.label=u[1],u=p;break}if(u&&i.label<u[2]){i.label=u[2],i.ops.push(p);break}u[2]&&i.ops.pop(),i.trys.pop();continue}p=s.call(r,i)}catch(b){p=[6,b],c=0}finally{o=u=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}}var To=Object.create?(function(r,s,i,o){o===void 0&&(o=i);var c=Object.getOwnPropertyDescriptor(s,i);(!c||("get"in c?!s.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return s[i]}}),Object.defineProperty(r,o,c)}):(function(r,s,i,o){o===void 0&&(o=i),r[o]=s[i]});function $x(r,s){for(var i in r)i!=="default"&&!Object.prototype.hasOwnProperty.call(s,i)&&To(s,r,i)}function fo(r){var s=typeof Symbol=="function"&&Symbol.iterator,i=s&&r[s],o=0;if(i)return i.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&o>=r.length&&(r=void 0),{value:r&&r[o++],done:!r}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")}function Pd(r,s){var i=typeof Symbol=="function"&&r[Symbol.iterator];if(!i)return r;var o=i.call(r),c,u=[],h;try{for(;(s===void 0||s-- >0)&&!(c=o.next()).done;)u.push(c.value)}catch(g){h={error:g}}finally{try{c&&!c.done&&(i=o.return)&&i.call(o)}finally{if(h)throw h.error}}return u}function Px(){for(var r=[],s=0;s<arguments.length;s++)r=r.concat(Pd(arguments[s]));return r}function Hx(){for(var r=0,s=0,i=arguments.length;s<i;s++)r+=arguments[s].length;for(var o=Array(r),c=0,s=0;s<i;s++)for(var u=arguments[s],h=0,g=u.length;h<g;h++,c++)o[c]=u[h];return o}function Vx(r,s,i){if(i||arguments.length===2)for(var o=0,c=s.length,u;o<c;o++)(u||!(o in s))&&(u||(u=Array.prototype.slice.call(s,0,o)),u[o]=s[o]);return r.concat(u||Array.prototype.slice.call(s))}function or(r){return this instanceof or?(this.v=r,this):new or(r)}function Gx(r,s,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=i.apply(r,s||[]),c,u=[];return c=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),g("next"),g("throw"),g("return",h),c[Symbol.asyncIterator]=function(){return this},c;function h(_){return function(v){return Promise.resolve(v).then(_,w)}}function g(_,v){o[_]&&(c[_]=function(E){return new Promise(function(y,k){u.push([_,E,y,k])>1||m(_,E)})},v&&(c[_]=v(c[_])))}function m(_,v){try{p(o[_](v))}catch(E){j(u[0][3],E)}}function p(_){_.value instanceof or?Promise.resolve(_.value.v).then(b,w):j(u[0][2],_)}function b(_){m("next",_)}function w(_){m("throw",_)}function j(_,v){_(v),u.shift(),u.length&&m(u[0][0],u[0][1])}}function Yx(r){var s,i;return s={},o("next"),o("throw",function(c){throw c}),o("return"),s[Symbol.iterator]=function(){return this},s;function o(c,u){s[c]=r[c]?function(h){return(i=!i)?{value:or(r[c](h)),done:!1}:u?u(h):h}:u}}function Kx(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=r[Symbol.asyncIterator],i;return s?s.call(r):(r=typeof fo=="function"?fo(r):r[Symbol.iterator](),i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i);function o(u){i[u]=r[u]&&function(h){return new Promise(function(g,m){h=r[u](h),c(g,m,h.done,h.value)})}}function c(u,h,g,m){Promise.resolve(m).then(function(p){u({value:p,done:g})},h)}}function Fx(r,s){return Object.defineProperty?Object.defineProperty(r,"raw",{value:s}):r.raw=s,r}var Ow=Object.create?(function(r,s){Object.defineProperty(r,"default",{enumerable:!0,value:s})}):function(r,s){r.default=s},md=function(r){return md=Object.getOwnPropertyNames||function(s){var i=[];for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(i[i.length]=o);return i},md(r)};function Qx(r){if(r&&r.__esModule)return r;var s={};if(r!=null)for(var i=md(r),o=0;o<i.length;o++)i[o]!=="default"&&To(s,r,i[o]);return Ow(s,r),s}function Jx(r){return r&&r.__esModule?r:{default:r}}function Xx(r,s,i,o){if(i==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof s=="function"?r!==s||!o:!s.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?o:i==="a"?o.call(r):o?o.value:s.get(r)}function Wx(r,s,i,o,c){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!c)throw new TypeError("Private accessor was defined without a setter");if(typeof s=="function"?r!==s||!c:!s.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?c.call(r,i):c?c.value=i:s.set(r,i),i}function Zx(r,s){if(s===null||typeof s!="object"&&typeof s!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof r=="function"?s===r:r.has(s)}function eb(r,s,i){if(s!=null){if(typeof s!="object"&&typeof s!="function")throw new TypeError("Object expected.");var o,c;if(i){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");o=s[Symbol.asyncDispose]}if(o===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");o=s[Symbol.dispose],i&&(c=o)}if(typeof o!="function")throw new TypeError("Object not disposable.");c&&(o=function(){try{c.call(this)}catch(u){return Promise.reject(u)}}),r.stack.push({value:s,dispose:o,async:i})}else i&&r.stack.push({async:!0});return s}var Dw=typeof SuppressedError=="function"?SuppressedError:function(r,s,i){var o=new Error(i);return o.name="SuppressedError",o.error=r,o.suppressed=s,o};function tb(r){function s(u){r.error=r.hasError?new Dw(u,r.error,"An error was suppressed during disposal."):u,r.hasError=!0}var i,o=0;function c(){for(;i=r.stack.pop();)try{if(!i.async&&o===1)return o=0,r.stack.push(i),Promise.resolve().then(c);if(i.dispose){var u=i.dispose.call(i.value);if(i.async)return o|=2,Promise.resolve(u).then(c,function(h){return s(h),c()})}else o|=1}catch(h){s(h)}if(o===1)return r.hasError?Promise.reject(r.error):Promise.resolve();if(r.hasError)throw r.error}return c()}function ab(r,s){return typeof r=="string"&&/^\.\.?\//.test(r)?r.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(i,o,c,u,h){return o?s?".jsx":".js":c&&(!u||!h)?i:c+u+"."+h.toLowerCase()+"js"}):r}const Mw={__extends:Ox,__assign:ho,__rest:fr,__decorate:Dx,__param:Mx,__esDecorate:Ux,__runInitializers:Lx,__propKey:Bx,__setFunctionName:zx,__metadata:qx,__awaiter:le,__generator:Ix,__createBinding:To,__exportStar:$x,__values:fo,__read:Pd,__spread:Px,__spreadArrays:Hx,__spreadArray:Vx,__await:or,__asyncGenerator:Gx,__asyncDelegator:Yx,__asyncValues:Kx,__makeTemplateObject:Fx,__importStar:Qx,__importDefault:Jx,__classPrivateFieldGet:Xx,__classPrivateFieldSet:Wx,__classPrivateFieldIn:Zx,__addDisposableResource:eb,__disposeResources:tb,__rewriteRelativeImportExtension:ab},Uw=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:eb,get __assign(){return ho},__asyncDelegator:Yx,__asyncGenerator:Gx,__asyncValues:Kx,__await:or,__awaiter:le,__classPrivateFieldGet:Xx,__classPrivateFieldIn:Zx,__classPrivateFieldSet:Wx,__createBinding:To,__decorate:Dx,__disposeResources:tb,__esDecorate:Ux,__exportStar:$x,__extends:Ox,__generator:Ix,__importDefault:Jx,__importStar:Qx,__makeTemplateObject:Fx,__metadata:qx,__param:Mx,__propKey:Bx,__read:Pd,__rest:fr,__rewriteRelativeImportExtension:ab,__runInitializers:Lx,__setFunctionName:zx,__spread:Px,__spreadArray:Vx,__spreadArrays:Hx,__values:fo,default:Mw},Symbol.toStringTag,{value:"Module"})),Lw=r=>r?(...s)=>r(...s):(...s)=>fetch(...s);class Hd extends Error{constructor(s,i="FunctionsError",o){super(s),this.name=i,this.context=o}}class Bw extends Hd{constructor(s){super("Failed to send a request to the Edge Function","FunctionsFetchError",s)}}class mg extends Hd{constructor(s){super("Relay Error invoking the Edge Function","FunctionsRelayError",s)}}class pg extends Hd{constructor(s){super("Edge Function returned a non-2xx status code","FunctionsHttpError",s)}}var pd;(function(r){r.Any="any",r.ApNortheast1="ap-northeast-1",r.ApNortheast2="ap-northeast-2",r.ApSouth1="ap-south-1",r.ApSoutheast1="ap-southeast-1",r.ApSoutheast2="ap-southeast-2",r.CaCentral1="ca-central-1",r.EuCentral1="eu-central-1",r.EuWest1="eu-west-1",r.EuWest2="eu-west-2",r.EuWest3="eu-west-3",r.SaEast1="sa-east-1",r.UsEast1="us-east-1",r.UsWest1="us-west-1",r.UsWest2="us-west-2"})(pd||(pd={}));class zw{constructor(s,{headers:i={},customFetch:o,region:c=pd.Any}={}){this.url=s,this.headers=i,this.region=c,this.fetch=Lw(o)}setAuth(s){this.headers.Authorization=`Bearer ${s}`}invoke(s){return le(this,arguments,void 0,function*(i,o={}){var c;let u,h;try{const{headers:g,method:m,body:p,signal:b,timeout:w}=o;let j={},{region:_}=o;_||(_=this.region);const v=new URL(`${this.url}/${i}`);_&&_!=="any"&&(j["x-region"]=_,v.searchParams.set("forceFunctionRegion",_));let E;p&&(g&&!Object.prototype.hasOwnProperty.call(g,"Content-Type")||!g)?typeof Blob<"u"&&p instanceof Blob||p instanceof ArrayBuffer?(j["Content-Type"]="application/octet-stream",E=p):typeof p=="string"?(j["Content-Type"]="text/plain",E=p):typeof FormData<"u"&&p instanceof FormData?E=p:(j["Content-Type"]="application/json",E=JSON.stringify(p)):E=p;let y=b;w&&(h=new AbortController,u=setTimeout(()=>h.abort(),w),b?(y=h.signal,b.addEventListener("abort",()=>h.abort())):y=h.signal);const k=yield this.fetch(v.toString(),{method:m||"POST",headers:Object.assign(Object.assign(Object.assign({},j),this.headers),g),body:E,signal:y}).catch(L=>{throw new Bw(L)}),R=k.headers.get("x-relay-error");if(R&&R==="true")throw new mg(k);if(!k.ok)throw new pg(k);let A=((c=k.headers.get("Content-Type"))!==null&&c!==void 0?c:"text/plain").split(";")[0].trim(),q;return A==="application/json"?q=yield k.json():A==="application/octet-stream"||A==="application/pdf"?q=yield k.blob():A==="text/event-stream"?q=k:A==="multipart/form-data"?q=yield k.formData():q=yield k.text(),{data:q,error:null,response:k}}catch(g){return{data:null,error:g,response:g instanceof pg||g instanceof mg?g.context:void 0}}finally{u&&clearTimeout(u)}})}}var vt={};const mr=Gy(Uw);var Yl={},Kl={},Fl={},Ql={},Jl={},Xl={},gg;function sb(){if(gg)return Xl;gg=1,Object.defineProperty(Xl,"__esModule",{value:!0});class r extends Error{constructor(i){super(i.message),this.name="PostgrestError",this.details=i.details,this.hint=i.hint,this.code=i.code}}return Xl.default=r,Xl}var xg;function nb(){if(xg)return Jl;xg=1,Object.defineProperty(Jl,"__esModule",{value:!0});const s=mr.__importDefault(sb());class i{constructor(c){var u,h;this.shouldThrowOnError=!1,this.method=c.method,this.url=c.url,this.headers=new Headers(c.headers),this.schema=c.schema,this.body=c.body,this.shouldThrowOnError=(u=c.shouldThrowOnError)!==null&&u!==void 0?u:!1,this.signal=c.signal,this.isMaybeSingle=(h=c.isMaybeSingle)!==null&&h!==void 0?h:!1,c.fetch?this.fetch=c.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(c,u){return this.headers=new Headers(this.headers),this.headers.set(c,u),this}then(c,u){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const h=this.fetch;let g=h(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async m=>{var p,b,w,j;let _=null,v=null,E=null,y=m.status,k=m.statusText;if(m.ok){if(this.method!=="HEAD"){const L=await m.text();L===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((p=this.headers.get("Accept"))===null||p===void 0)&&p.includes("application/vnd.pgrst.plan+text"))?v=L:v=JSON.parse(L))}const A=(b=this.headers.get("Prefer"))===null||b===void 0?void 0:b.match(/count=(exact|planned|estimated)/),q=(w=m.headers.get("content-range"))===null||w===void 0?void 0:w.split("/");A&&q&&q.length>1&&(E=parseInt(q[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(v)&&(v.length>1?(_={code:"PGRST116",details:`Results contain ${v.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},v=null,E=null,y=406,k="Not Acceptable"):v.length===1?v=v[0]:v=null)}else{const A=await m.text();try{_=JSON.parse(A),Array.isArray(_)&&m.status===404&&(v=[],_=null,y=200,k="OK")}catch{m.status===404&&A===""?(y=204,k="No Content"):_={message:A}}if(_&&this.isMaybeSingle&&(!((j=_==null?void 0:_.details)===null||j===void 0)&&j.includes("0 rows"))&&(_=null,y=200,k="OK"),_&&this.shouldThrowOnError)throw new s.default(_)}return{error:_,data:v,count:E,status:y,statusText:k}});return this.shouldThrowOnError||(g=g.catch(m=>{var p,b,w;return{error:{message:`${(p=m==null?void 0:m.name)!==null&&p!==void 0?p:"FetchError"}: ${m==null?void 0:m.message}`,details:`${(b=m==null?void 0:m.stack)!==null&&b!==void 0?b:""}`,hint:"",code:`${(w=m==null?void 0:m.code)!==null&&w!==void 0?w:""}`},data:null,count:null,status:0,statusText:""}})),g.then(c,u)}returns(){return this}overrideTypes(){return this}}return Jl.default=i,Jl}var bg;function rb(){if(bg)return Ql;bg=1,Object.defineProperty(Ql,"__esModule",{value:!0});const s=mr.__importDefault(nb());class i extends s.default{select(c){let u=!1;const h=(c??"*").split("").map(g=>/\s/.test(g)&&!u?"":(g==='"'&&(u=!u),g)).join("");return this.url.searchParams.set("select",h),this.headers.append("Prefer","return=representation"),this}order(c,{ascending:u=!0,nullsFirst:h,foreignTable:g,referencedTable:m=g}={}){const p=m?`${m}.order`:"order",b=this.url.searchParams.get(p);return this.url.searchParams.set(p,`${b?`${b},`:""}${c}.${u?"asc":"desc"}${h===void 0?"":h?".nullsfirst":".nullslast"}`),this}limit(c,{foreignTable:u,referencedTable:h=u}={}){const g=typeof h>"u"?"limit":`${h}.limit`;return this.url.searchParams.set(g,`${c}`),this}range(c,u,{foreignTable:h,referencedTable:g=h}={}){const m=typeof g>"u"?"offset":`${g}.offset`,p=typeof g>"u"?"limit":`${g}.limit`;return this.url.searchParams.set(m,`${c}`),this.url.searchParams.set(p,`${u-c+1}`),this}abortSignal(c){return this.signal=c,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:c=!1,verbose:u=!1,settings:h=!1,buffers:g=!1,wal:m=!1,format:p="text"}={}){var b;const w=[c?"analyze":null,u?"verbose":null,h?"settings":null,g?"buffers":null,m?"wal":null].filter(Boolean).join("|"),j=(b=this.headers.get("Accept"))!==null&&b!==void 0?b:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${p}; for="${j}"; options=${w};`),p==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(c){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${c}`),this}}return Ql.default=i,Ql}var vg;function Vd(){if(vg)return Fl;vg=1,Object.defineProperty(Fl,"__esModule",{value:!0});const s=mr.__importDefault(rb()),i=new RegExp("[,()]");class o extends s.default{eq(u,h){return this.url.searchParams.append(u,`eq.${h}`),this}neq(u,h){return this.url.searchParams.append(u,`neq.${h}`),this}gt(u,h){return this.url.searchParams.append(u,`gt.${h}`),this}gte(u,h){return this.url.searchParams.append(u,`gte.${h}`),this}lt(u,h){return this.url.searchParams.append(u,`lt.${h}`),this}lte(u,h){return this.url.searchParams.append(u,`lte.${h}`),this}like(u,h){return this.url.searchParams.append(u,`like.${h}`),this}likeAllOf(u,h){return this.url.searchParams.append(u,`like(all).{${h.join(",")}}`),this}likeAnyOf(u,h){return this.url.searchParams.append(u,`like(any).{${h.join(",")}}`),this}ilike(u,h){return this.url.searchParams.append(u,`ilike.${h}`),this}ilikeAllOf(u,h){return this.url.searchParams.append(u,`ilike(all).{${h.join(",")}}`),this}ilikeAnyOf(u,h){return this.url.searchParams.append(u,`ilike(any).{${h.join(",")}}`),this}is(u,h){return this.url.searchParams.append(u,`is.${h}`),this}in(u,h){const g=Array.from(new Set(h)).map(m=>typeof m=="string"&&i.test(m)?`"${m}"`:`${m}`).join(",");return this.url.searchParams.append(u,`in.(${g})`),this}contains(u,h){return typeof h=="string"?this.url.searchParams.append(u,`cs.${h}`):Array.isArray(h)?this.url.searchParams.append(u,`cs.{${h.join(",")}}`):this.url.searchParams.append(u,`cs.${JSON.stringify(h)}`),this}containedBy(u,h){return typeof h=="string"?this.url.searchParams.append(u,`cd.${h}`):Array.isArray(h)?this.url.searchParams.append(u,`cd.{${h.join(",")}}`):this.url.searchParams.append(u,`cd.${JSON.stringify(h)}`),this}rangeGt(u,h){return this.url.searchParams.append(u,`sr.${h}`),this}rangeGte(u,h){return this.url.searchParams.append(u,`nxl.${h}`),this}rangeLt(u,h){return this.url.searchParams.append(u,`sl.${h}`),this}rangeLte(u,h){return this.url.searchParams.append(u,`nxr.${h}`),this}rangeAdjacent(u,h){return this.url.searchParams.append(u,`adj.${h}`),this}overlaps(u,h){return typeof h=="string"?this.url.searchParams.append(u,`ov.${h}`):this.url.searchParams.append(u,`ov.{${h.join(",")}}`),this}textSearch(u,h,{config:g,type:m}={}){let p="";m==="plain"?p="pl":m==="phrase"?p="ph":m==="websearch"&&(p="w");const b=g===void 0?"":`(${g})`;return this.url.searchParams.append(u,`${p}fts${b}.${h}`),this}match(u){return Object.entries(u).forEach(([h,g])=>{this.url.searchParams.append(h,`eq.${g}`)}),this}not(u,h,g){return this.url.searchParams.append(u,`not.${h}.${g}`),this}or(u,{foreignTable:h,referencedTable:g=h}={}){const m=g?`${g}.or`:"or";return this.url.searchParams.append(m,`(${u})`),this}filter(u,h,g){return this.url.searchParams.append(u,`${h}.${g}`),this}}return Fl.default=o,Fl}var yg;function ib(){if(yg)return Kl;yg=1,Object.defineProperty(Kl,"__esModule",{value:!0});const s=mr.__importDefault(Vd());class i{constructor(c,{headers:u={},schema:h,fetch:g}){this.url=c,this.headers=new Headers(u),this.schema=h,this.fetch=g}select(c,u){const{head:h=!1,count:g}=u??{},m=h?"HEAD":"GET";let p=!1;const b=(c??"*").split("").map(w=>/\s/.test(w)&&!p?"":(w==='"'&&(p=!p),w)).join("");return this.url.searchParams.set("select",b),g&&this.headers.append("Prefer",`count=${g}`),new s.default({method:m,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(c,{count:u,defaultToNull:h=!0}={}){var g;const m="POST";if(u&&this.headers.append("Prefer",`count=${u}`),h||this.headers.append("Prefer","missing=default"),Array.isArray(c)){const p=c.reduce((b,w)=>b.concat(Object.keys(w)),[]);if(p.length>0){const b=[...new Set(p)].map(w=>`"${w}"`);this.url.searchParams.set("columns",b.join(","))}}return new s.default({method:m,url:this.url,headers:this.headers,schema:this.schema,body:c,fetch:(g=this.fetch)!==null&&g!==void 0?g:fetch})}upsert(c,{onConflict:u,ignoreDuplicates:h=!1,count:g,defaultToNull:m=!0}={}){var p;const b="POST";if(this.headers.append("Prefer",`resolution=${h?"ignore":"merge"}-duplicates`),u!==void 0&&this.url.searchParams.set("on_conflict",u),g&&this.headers.append("Prefer",`count=${g}`),m||this.headers.append("Prefer","missing=default"),Array.isArray(c)){const w=c.reduce((j,_)=>j.concat(Object.keys(_)),[]);if(w.length>0){const j=[...new Set(w)].map(_=>`"${_}"`);this.url.searchParams.set("columns",j.join(","))}}return new s.default({method:b,url:this.url,headers:this.headers,schema:this.schema,body:c,fetch:(p=this.fetch)!==null&&p!==void 0?p:fetch})}update(c,{count:u}={}){var h;const g="PATCH";return u&&this.headers.append("Prefer",`count=${u}`),new s.default({method:g,url:this.url,headers:this.headers,schema:this.schema,body:c,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}delete({count:c}={}){var u;const h="DELETE";return c&&this.headers.append("Prefer",`count=${c}`),new s.default({method:h,url:this.url,headers:this.headers,schema:this.schema,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}}return Kl.default=i,Kl}var wg;function qw(){if(wg)return Yl;wg=1,Object.defineProperty(Yl,"__esModule",{value:!0});const r=mr,s=r.__importDefault(ib()),i=r.__importDefault(Vd());class o{constructor(u,{headers:h={},schema:g,fetch:m}={}){this.url=u,this.headers=new Headers(h),this.schemaName=g,this.fetch=m}from(u){const h=new URL(`${this.url}/${u}`);return new s.default(h,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(u){return new o(this.url,{headers:this.headers,schema:u,fetch:this.fetch})}rpc(u,h={},{head:g=!1,get:m=!1,count:p}={}){var b;let w;const j=new URL(`${this.url}/rpc/${u}`);let _;g||m?(w=g?"HEAD":"GET",Object.entries(h).filter(([E,y])=>y!==void 0).map(([E,y])=>[E,Array.isArray(y)?`{${y.join(",")}}`:`${y}`]).forEach(([E,y])=>{j.searchParams.append(E,y)})):(w="POST",_=h);const v=new Headers(this.headers);return p&&v.set("Prefer",`count=${p}`),new i.default({method:w,url:j,headers:v,schema:this.schemaName,body:_,fetch:(b=this.fetch)!==null&&b!==void 0?b:fetch})}}return Yl.default=o,Yl}var jg;function Iw(){if(jg)return vt;jg=1,Object.defineProperty(vt,"__esModule",{value:!0}),vt.PostgrestError=vt.PostgrestBuilder=vt.PostgrestTransformBuilder=vt.PostgrestFilterBuilder=vt.PostgrestQueryBuilder=vt.PostgrestClient=void 0;const r=mr,s=r.__importDefault(qw());vt.PostgrestClient=s.default;const i=r.__importDefault(ib());vt.PostgrestQueryBuilder=i.default;const o=r.__importDefault(Vd());vt.PostgrestFilterBuilder=o.default;const c=r.__importDefault(rb());vt.PostgrestTransformBuilder=c.default;const u=r.__importDefault(nb());vt.PostgrestBuilder=u.default;const h=r.__importDefault(sb());return vt.PostgrestError=h.default,vt.default={PostgrestClient:s.default,PostgrestQueryBuilder:i.default,PostgrestFilterBuilder:o.default,PostgrestTransformBuilder:c.default,PostgrestBuilder:u.default,PostgrestError:h.default},vt}var lb=Iw();const ob=Od(lb),$w=Vy({__proto__:null,default:ob},[lb]),{PostgrestClient:Pw,PostgrestQueryBuilder:V1,PostgrestFilterBuilder:G1,PostgrestTransformBuilder:Y1,PostgrestBuilder:K1,PostgrestError:F1}=ob||$w;class Hw{static detectEnvironment(){var s;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((s=navigator.userAgent)===null||s===void 0)&&s.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const i=process.versions;if(i&&i.node){const o=i.node,c=parseInt(o.replace(/^v/,"").split(".")[0]);return c>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${c} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${c} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const s=this.detectEnvironment();if(s.constructor)return s.constructor;let i=s.error||"WebSocket not supported in this environment.";throw s.workaround&&(i+=`

Suggested solution: ${s.workaround}`),new Error(i)}static createWebSocket(s,i){const o=this.getWebSocketConstructor();return new o(s,i)}static isWebSocketSupported(){try{const s=this.detectEnvironment();return s.type==="native"||s.type==="ws"}catch{return!1}}}const Vw="2.81.0",Gw=`realtime-js/${Vw}`,cb="1.0.0",Yw="2.0.0",Ng=cb,gd=1e4,Kw=1e3,Fw=100;var Zs;(function(r){r[r.connecting=0]="connecting",r[r.open=1]="open",r[r.closing=2]="closing",r[r.closed=3]="closed"})(Zs||(Zs={}));var lt;(function(r){r.closed="closed",r.errored="errored",r.joined="joined",r.joining="joining",r.leaving="leaving"})(lt||(lt={}));var sa;(function(r){r.close="phx_close",r.error="phx_error",r.join="phx_join",r.reply="phx_reply",r.leave="phx_leave",r.access_token="access_token"})(sa||(sa={}));var xd;(function(r){r.websocket="websocket"})(xd||(xd={}));var en;(function(r){r.Connecting="connecting",r.Open="open",r.Closing="closing",r.Closed="closed"})(en||(en={}));class Qw{constructor(){this.HEADER_LENGTH=1,this.META_LENGTH=4,this.USER_BROADCAST_PUSH_META_LENGTH=5,this.KINDS={push:0,reply:1,broadcast:2,userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST="broadcast"}encode(s,i){if(this._isArrayBuffer(s.payload))return i(this._binaryEncodePush(s));if(s.event===this.BROADCAST&&!(s.payload instanceof ArrayBuffer)&&typeof s.payload.event=="string")return i(this._binaryEncodeUserBroadcastPush(s));let o=[s.join_ref,s.ref,s.topic,s.event,s.payload];return i(JSON.stringify(o))}_binaryEncodePush(s){const{join_ref:i,ref:o,event:c,topic:u,payload:h}=s,g=this.META_LENGTH+i.length+o.length+u.length+c.length,m=new ArrayBuffer(this.HEADER_LENGTH+g);let p=new DataView(m),b=0;p.setUint8(b++,this.KINDS.push),p.setUint8(b++,i.length),p.setUint8(b++,o.length),p.setUint8(b++,u.length),p.setUint8(b++,c.length),Array.from(i,j=>p.setUint8(b++,j.charCodeAt(0))),Array.from(o,j=>p.setUint8(b++,j.charCodeAt(0))),Array.from(u,j=>p.setUint8(b++,j.charCodeAt(0))),Array.from(c,j=>p.setUint8(b++,j.charCodeAt(0)));var w=new Uint8Array(m.byteLength+h.byteLength);return w.set(new Uint8Array(m),0),w.set(new Uint8Array(h),m.byteLength),w.buffer}_binaryEncodeUserBroadcastPush(s){var i;return this._isArrayBuffer((i=s.payload)===null||i===void 0?void 0:i.payload)?this._encodeBinaryUserBroadcastPush(s):this._encodeJsonUserBroadcastPush(s)}_encodeBinaryUserBroadcastPush(s){var i,o;const{join_ref:c,ref:u,topic:h}=s,g=s.payload.event,m=(o=(i=s.payload)===null||i===void 0?void 0:i.payload)!==null&&o!==void 0?o:new ArrayBuffer(0),p=this.USER_BROADCAST_PUSH_META_LENGTH+c.length+u.length+h.length+g.length,b=new ArrayBuffer(this.HEADER_LENGTH+p);let w=new DataView(b),j=0;w.setUint8(j++,this.KINDS.userBroadcastPush),w.setUint8(j++,c.length),w.setUint8(j++,u.length),w.setUint8(j++,h.length),w.setUint8(j++,g.length),w.setUint8(j++,this.BINARY_ENCODING),Array.from(c,v=>w.setUint8(j++,v.charCodeAt(0))),Array.from(u,v=>w.setUint8(j++,v.charCodeAt(0))),Array.from(h,v=>w.setUint8(j++,v.charCodeAt(0))),Array.from(g,v=>w.setUint8(j++,v.charCodeAt(0)));var _=new Uint8Array(b.byteLength+m.byteLength);return _.set(new Uint8Array(b),0),_.set(new Uint8Array(m),b.byteLength),_.buffer}_encodeJsonUserBroadcastPush(s){var i,o;const{join_ref:c,ref:u,topic:h}=s,g=s.payload.event,m=(o=(i=s.payload)===null||i===void 0?void 0:i.payload)!==null&&o!==void 0?o:{},b=new TextEncoder().encode(JSON.stringify(m)).buffer,w=this.USER_BROADCAST_PUSH_META_LENGTH+c.length+u.length+h.length+g.length,j=new ArrayBuffer(this.HEADER_LENGTH+w);let _=new DataView(j),v=0;_.setUint8(v++,this.KINDS.userBroadcastPush),_.setUint8(v++,c.length),_.setUint8(v++,u.length),_.setUint8(v++,h.length),_.setUint8(v++,g.length),_.setUint8(v++,this.JSON_ENCODING),Array.from(c,y=>_.setUint8(v++,y.charCodeAt(0))),Array.from(u,y=>_.setUint8(v++,y.charCodeAt(0))),Array.from(h,y=>_.setUint8(v++,y.charCodeAt(0))),Array.from(g,y=>_.setUint8(v++,y.charCodeAt(0)));var E=new Uint8Array(j.byteLength+b.byteLength);return E.set(new Uint8Array(j),0),E.set(new Uint8Array(b),j.byteLength),E.buffer}decode(s,i){if(this._isArrayBuffer(s)){let o=this._binaryDecode(s);return i(o)}if(typeof s=="string"){const o=JSON.parse(s),[c,u,h,g,m]=o;return i({join_ref:c,ref:u,topic:h,event:g,payload:m})}return i({})}_binaryDecode(s){const i=new DataView(s),o=i.getUint8(0),c=new TextDecoder;switch(o){case this.KINDS.push:return this._decodePush(s,i,c);case this.KINDS.reply:return this._decodeReply(s,i,c);case this.KINDS.broadcast:return this._decodeBroadcast(s,i,c);case this.KINDS.userBroadcast:return this._decodeUserBroadcast(s,i,c)}}_decodePush(s,i,o){const c=i.getUint8(1),u=i.getUint8(2),h=i.getUint8(3);let g=this.HEADER_LENGTH+this.META_LENGTH-1;const m=o.decode(s.slice(g,g+c));g=g+c;const p=o.decode(s.slice(g,g+u));g=g+u;const b=o.decode(s.slice(g,g+h));g=g+h;const w=JSON.parse(o.decode(s.slice(g,s.byteLength)));return{join_ref:m,ref:null,topic:p,event:b,payload:w}}_decodeReply(s,i,o){const c=i.getUint8(1),u=i.getUint8(2),h=i.getUint8(3),g=i.getUint8(4);let m=this.HEADER_LENGTH+this.META_LENGTH;const p=o.decode(s.slice(m,m+c));m=m+c;const b=o.decode(s.slice(m,m+u));m=m+u;const w=o.decode(s.slice(m,m+h));m=m+h;const j=o.decode(s.slice(m,m+g));m=m+g;const _=JSON.parse(o.decode(s.slice(m,s.byteLength))),v={status:j,response:_};return{join_ref:p,ref:b,topic:w,event:sa.reply,payload:v}}_decodeBroadcast(s,i,o){const c=i.getUint8(1),u=i.getUint8(2);let h=this.HEADER_LENGTH+2;const g=o.decode(s.slice(h,h+c));h=h+c;const m=o.decode(s.slice(h,h+u));h=h+u;const p=JSON.parse(o.decode(s.slice(h,s.byteLength)));return{join_ref:null,ref:null,topic:g,event:m,payload:p}}_decodeUserBroadcast(s,i,o){const c=i.getUint8(1),u=i.getUint8(2),h=i.getUint8(3),g=i.getUint8(4);let m=this.HEADER_LENGTH+4;const p=o.decode(s.slice(m,m+c));m=m+c;const b=o.decode(s.slice(m,m+u));m=m+u;const w=o.decode(s.slice(m,m+h));m=m+h;const j=s.slice(m,s.byteLength),_=g===this.JSON_ENCODING?JSON.parse(o.decode(j)):j,v={type:this.BROADCAST,event:b,payload:_};return h>0&&(v.meta=JSON.parse(w)),{join_ref:null,ref:null,topic:p,event:this.BROADCAST,payload:v}}_isArrayBuffer(s){var i;return s instanceof ArrayBuffer||((i=s==null?void 0:s.constructor)===null||i===void 0?void 0:i.name)==="ArrayBuffer"}}class ub{constructor(s,i){this.callback=s,this.timerCalc=i,this.timer=void 0,this.tries=0,this.callback=s,this.timerCalc=i}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var $e;(function(r){r.abstime="abstime",r.bool="bool",r.date="date",r.daterange="daterange",r.float4="float4",r.float8="float8",r.int2="int2",r.int4="int4",r.int4range="int4range",r.int8="int8",r.int8range="int8range",r.json="json",r.jsonb="jsonb",r.money="money",r.numeric="numeric",r.oid="oid",r.reltime="reltime",r.text="text",r.time="time",r.timestamp="timestamp",r.timestamptz="timestamptz",r.timetz="timetz",r.tsrange="tsrange",r.tstzrange="tstzrange"})($e||($e={}));const _g=(r,s,i={})=>{var o;const c=(o=i.skipTypes)!==null&&o!==void 0?o:[];return s?Object.keys(s).reduce((u,h)=>(u[h]=Jw(h,r,s,c),u),{}):{}},Jw=(r,s,i,o)=>{const c=s.find(g=>g.name===r),u=c==null?void 0:c.type,h=i[r];return u&&!o.includes(u)?db(u,h):bd(h)},db=(r,s)=>{if(r.charAt(0)==="_"){const i=r.slice(1,r.length);return ej(s,i)}switch(r){case $e.bool:return Xw(s);case $e.float4:case $e.float8:case $e.int2:case $e.int4:case $e.int8:case $e.numeric:case $e.oid:return Ww(s);case $e.json:case $e.jsonb:return Zw(s);case $e.timestamp:return tj(s);case $e.abstime:case $e.date:case $e.daterange:case $e.int4range:case $e.int8range:case $e.money:case $e.reltime:case $e.text:case $e.time:case $e.timestamptz:case $e.timetz:case $e.tsrange:case $e.tstzrange:return bd(s);default:return bd(s)}},bd=r=>r,Xw=r=>{switch(r){case"t":return!0;case"f":return!1;default:return r}},Ww=r=>{if(typeof r=="string"){const s=parseFloat(r);if(!Number.isNaN(s))return s}return r},Zw=r=>{if(typeof r=="string")try{return JSON.parse(r)}catch(s){return console.log(`JSON parse error: ${s}`),r}return r},ej=(r,s)=>{if(typeof r!="string")return r;const i=r.length-1,o=r[i];if(r[0]==="{"&&o==="}"){let u;const h=r.slice(1,i);try{u=JSON.parse("["+h+"]")}catch{u=h?h.split(","):[]}return u.map(g=>db(s,g))}return r},tj=r=>typeof r=="string"?r.replace(" ","T"):r,hb=r=>{const s=new URL(r);return s.protocol=s.protocol.replace(/^ws/i,"http"),s.pathname=s.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),s.pathname===""||s.pathname==="/"?s.pathname="/api/broadcast":s.pathname=s.pathname+"/api/broadcast",s.href};class ed{constructor(s,i,o={},c=gd){this.channel=s,this.event=i,this.payload=o,this.timeout=c,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(s){this.timeout=s,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(s){this.payload=Object.assign(Object.assign({},this.payload),s)}receive(s,i){var o;return this._hasReceived(s)&&i((o=this.receivedResp)===null||o===void 0?void 0:o.response),this.recHooks.push({status:s,callback:i}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const s=i=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=i,this._matchReceive(i)};this.channel._on(this.refEvent,{},s),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(s,i){this.refEvent&&this.channel._trigger(this.refEvent,{status:s,response:i})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:s,response:i}){this.recHooks.filter(o=>o.status===s).forEach(o=>o.callback(i))}_hasReceived(s){return this.receivedResp&&this.receivedResp.status===s}}var Sg;(function(r){r.SYNC="sync",r.JOIN="join",r.LEAVE="leave"})(Sg||(Sg={}));class mi{constructor(s,i){this.channel=s,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const o=(i==null?void 0:i.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(o.state,{},c=>{const{onJoin:u,onLeave:h,onSync:g}=this.caller;this.joinRef=this.channel._joinRef(),this.state=mi.syncState(this.state,c,u,h),this.pendingDiffs.forEach(m=>{this.state=mi.syncDiff(this.state,m,u,h)}),this.pendingDiffs=[],g()}),this.channel._on(o.diff,{},c=>{const{onJoin:u,onLeave:h,onSync:g}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(c):(this.state=mi.syncDiff(this.state,c,u,h),g())}),this.onJoin((c,u,h)=>{this.channel._trigger("presence",{event:"join",key:c,currentPresences:u,newPresences:h})}),this.onLeave((c,u,h)=>{this.channel._trigger("presence",{event:"leave",key:c,currentPresences:u,leftPresences:h})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(s,i,o,c){const u=this.cloneDeep(s),h=this.transformState(i),g={},m={};return this.map(u,(p,b)=>{h[p]||(m[p]=b)}),this.map(h,(p,b)=>{const w=u[p];if(w){const j=b.map(y=>y.presence_ref),_=w.map(y=>y.presence_ref),v=b.filter(y=>_.indexOf(y.presence_ref)<0),E=w.filter(y=>j.indexOf(y.presence_ref)<0);v.length>0&&(g[p]=v),E.length>0&&(m[p]=E)}else g[p]=b}),this.syncDiff(u,{joins:g,leaves:m},o,c)}static syncDiff(s,i,o,c){const{joins:u,leaves:h}={joins:this.transformState(i.joins),leaves:this.transformState(i.leaves)};return o||(o=()=>{}),c||(c=()=>{}),this.map(u,(g,m)=>{var p;const b=(p=s[g])!==null&&p!==void 0?p:[];if(s[g]=this.cloneDeep(m),b.length>0){const w=s[g].map(_=>_.presence_ref),j=b.filter(_=>w.indexOf(_.presence_ref)<0);s[g].unshift(...j)}o(g,b,m)}),this.map(h,(g,m)=>{let p=s[g];if(!p)return;const b=m.map(w=>w.presence_ref);p=p.filter(w=>b.indexOf(w.presence_ref)<0),s[g]=p,c(g,p,m),p.length===0&&delete s[g]}),s}static map(s,i){return Object.getOwnPropertyNames(s).map(o=>i(o,s[o]))}static transformState(s){return s=this.cloneDeep(s),Object.getOwnPropertyNames(s).reduce((i,o)=>{const c=s[o];return"metas"in c?i[o]=c.metas.map(u=>(u.presence_ref=u.phx_ref,delete u.phx_ref,delete u.phx_ref_prev,u)):i[o]=c,i},{})}static cloneDeep(s){return JSON.parse(JSON.stringify(s))}onJoin(s){this.caller.onJoin=s}onLeave(s){this.caller.onLeave=s}onSync(s){this.caller.onSync=s}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Eg;(function(r){r.ALL="*",r.INSERT="INSERT",r.UPDATE="UPDATE",r.DELETE="DELETE"})(Eg||(Eg={}));var pi;(function(r){r.BROADCAST="broadcast",r.PRESENCE="presence",r.POSTGRES_CHANGES="postgres_changes",r.SYSTEM="system"})(pi||(pi={}));var Ga;(function(r){r.SUBSCRIBED="SUBSCRIBED",r.TIMED_OUT="TIMED_OUT",r.CLOSED="CLOSED",r.CHANNEL_ERROR="CHANNEL_ERROR"})(Ga||(Ga={}));class Gd{constructor(s,i={config:{}},o){var c,u;if(this.topic=s,this.params=i,this.socket=o,this.bindings={},this.state=lt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=s.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},i.config),this.timeout=this.socket.timeout,this.joinPush=new ed(this,sa.join,this.params,this.timeout),this.rejoinTimer=new ub(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=lt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(h=>h.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=lt.closed,this.socket._remove(this)}),this._onError(h=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,h),this.state=lt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=lt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",h=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,h),this.state=lt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(sa.reply,{},(h,g)=>{this._trigger(this._replyEventName(g),h)}),this.presence=new mi(this),this.broadcastEndpointURL=hb(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((u=(c=this.params.config)===null||c===void 0?void 0:c.broadcast)===null||u===void 0)&&u.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(s,i=this.timeout){var o,c,u;if(this.socket.isConnected()||this.socket.connect(),this.state==lt.closed){const{config:{broadcast:h,presence:g,private:m}}=this.params,p=(c=(o=this.bindings.postgres_changes)===null||o===void 0?void 0:o.map(_=>_.filter))!==null&&c!==void 0?c:[],b=!!this.bindings[pi.PRESENCE]&&this.bindings[pi.PRESENCE].length>0||((u=this.params.config.presence)===null||u===void 0?void 0:u.enabled)===!0,w={},j={broadcast:h,presence:Object.assign(Object.assign({},g),{enabled:b}),postgres_changes:p,private:m};this.socket.accessTokenValue&&(w.access_token=this.socket.accessTokenValue),this._onError(_=>s==null?void 0:s(Ga.CHANNEL_ERROR,_)),this._onClose(()=>s==null?void 0:s(Ga.CLOSED)),this.updateJoinPayload(Object.assign({config:j},w)),this.joinedOnce=!0,this._rejoin(i),this.joinPush.receive("ok",async({postgres_changes:_})=>{var v;if(this.socket.setAuth(),_===void 0){s==null||s(Ga.SUBSCRIBED);return}else{const E=this.bindings.postgres_changes,y=(v=E==null?void 0:E.length)!==null&&v!==void 0?v:0,k=[];for(let R=0;R<y;R++){const A=E[R],{filter:{event:q,schema:L,table:Q,filter:B}}=A,Z=_&&_[R];if(Z&&Z.event===q&&Z.schema===L&&Z.table===Q&&Z.filter===B)k.push(Object.assign(Object.assign({},A),{id:Z.id}));else{this.unsubscribe(),this.state=lt.errored,s==null||s(Ga.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=k,s&&s(Ga.SUBSCRIBED);return}}).receive("error",_=>{this.state=lt.errored,s==null||s(Ga.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(_).join(", ")||"error")))}).receive("timeout",()=>{s==null||s(Ga.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(s,i={}){return await this.send({type:"presence",event:"track",payload:s},i.timeout||this.timeout)}async untrack(s={}){return await this.send({type:"presence",event:"untrack"},s)}on(s,i,o){return this.state===lt.joined&&s===pi.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(s,i,o)}async httpSend(s,i,o={}){var c;const u=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(i==null)return Promise.reject("Payload is required for httpSend()");const h={method:"POST",headers:{Authorization:u,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:i,private:this.private}]})},g=await this._fetchWithTimeout(this.broadcastEndpointURL,h,(c=o.timeout)!==null&&c!==void 0?c:this.timeout);if(g.status===202)return{success:!0};let m=g.statusText;try{const p=await g.json();m=p.error||p.message||m}catch{}return Promise.reject(new Error(m))}async send(s,i={}){var o,c;if(!this._canPush()&&s.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:u,payload:h}=s,m={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:u,payload:h,private:this.private}]})};try{const p=await this._fetchWithTimeout(this.broadcastEndpointURL,m,(o=i.timeout)!==null&&o!==void 0?o:this.timeout);return await((c=p.body)===null||c===void 0?void 0:c.cancel()),p.ok?"ok":"error"}catch(p){return p.name==="AbortError"?"timed out":"error"}}else return new Promise(u=>{var h,g,m;const p=this._push(s.type,s,i.timeout||this.timeout);s.type==="broadcast"&&!(!((m=(g=(h=this.params)===null||h===void 0?void 0:h.config)===null||g===void 0?void 0:g.broadcast)===null||m===void 0)&&m.ack)&&u("ok"),p.receive("ok",()=>u("ok")),p.receive("error",()=>u("error")),p.receive("timeout",()=>u("timed out"))})}updateJoinPayload(s){this.joinPush.updatePayload(s)}unsubscribe(s=this.timeout){this.state=lt.leaving;const i=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(sa.close,"leave",this._joinRef())};this.joinPush.destroy();let o=null;return new Promise(c=>{o=new ed(this,sa.leave,{},s),o.receive("ok",()=>{i(),c("ok")}).receive("timeout",()=>{i(),c("timed out")}).receive("error",()=>{c("error")}),o.send(),this._canPush()||o.trigger("ok",{})}).finally(()=>{o==null||o.destroy()})}teardown(){this.pushBuffer.forEach(s=>s.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=lt.closed,this.bindings={}}async _fetchWithTimeout(s,i,o){const c=new AbortController,u=setTimeout(()=>c.abort(),o),h=await this.socket.fetch(s,Object.assign(Object.assign({},i),{signal:c.signal}));return clearTimeout(u),h}_push(s,i,o=this.timeout){if(!this.joinedOnce)throw`tried to push '${s}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let c=new ed(this,s,i,o);return this._canPush()?c.send():this._addToPushBuffer(c),c}_addToPushBuffer(s){if(s.startTimeout(),this.pushBuffer.push(s),this.pushBuffer.length>Fw){const i=this.pushBuffer.shift();i&&(i.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${i.event}`,i.payload))}}_onMessage(s,i,o){return i}_isMember(s){return this.topic===s}_joinRef(){return this.joinPush.ref}_trigger(s,i,o){var c,u;const h=s.toLocaleLowerCase(),{close:g,error:m,leave:p,join:b}=sa;if(o&&[g,m,p,b].indexOf(h)>=0&&o!==this._joinRef())return;let j=this._onMessage(h,i,o);if(i&&!j)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(h)?(c=this.bindings.postgres_changes)===null||c===void 0||c.filter(_=>{var v,E,y;return((v=_.filter)===null||v===void 0?void 0:v.event)==="*"||((y=(E=_.filter)===null||E===void 0?void 0:E.event)===null||y===void 0?void 0:y.toLocaleLowerCase())===h}).map(_=>_.callback(j,o)):(u=this.bindings[h])===null||u===void 0||u.filter(_=>{var v,E,y,k,R,A;if(["broadcast","presence","postgres_changes"].includes(h))if("id"in _){const q=_.id,L=(v=_.filter)===null||v===void 0?void 0:v.event;return q&&((E=i.ids)===null||E===void 0?void 0:E.includes(q))&&(L==="*"||(L==null?void 0:L.toLocaleLowerCase())===((y=i.data)===null||y===void 0?void 0:y.type.toLocaleLowerCase()))}else{const q=(R=(k=_==null?void 0:_.filter)===null||k===void 0?void 0:k.event)===null||R===void 0?void 0:R.toLocaleLowerCase();return q==="*"||q===((A=i==null?void 0:i.event)===null||A===void 0?void 0:A.toLocaleLowerCase())}else return _.type.toLocaleLowerCase()===h}).map(_=>{if(typeof j=="object"&&"ids"in j){const v=j.data,{schema:E,table:y,commit_timestamp:k,type:R,errors:A}=v;j=Object.assign(Object.assign({},{schema:E,table:y,commit_timestamp:k,eventType:R,new:{},old:{},errors:A}),this._getPayloadRecords(v))}_.callback(j,o)})}_isClosed(){return this.state===lt.closed}_isJoined(){return this.state===lt.joined}_isJoining(){return this.state===lt.joining}_isLeaving(){return this.state===lt.leaving}_replyEventName(s){return`chan_reply_${s}`}_on(s,i,o){const c=s.toLocaleLowerCase(),u={type:c,filter:i,callback:o};return this.bindings[c]?this.bindings[c].push(u):this.bindings[c]=[u],this}_off(s,i){const o=s.toLocaleLowerCase();return this.bindings[o]&&(this.bindings[o]=this.bindings[o].filter(c=>{var u;return!(((u=c.type)===null||u===void 0?void 0:u.toLocaleLowerCase())===o&&Gd.isEqual(c.filter,i))})),this}static isEqual(s,i){if(Object.keys(s).length!==Object.keys(i).length)return!1;for(const o in s)if(s[o]!==i[o])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(s){this._on(sa.close,{},s)}_onError(s){this._on(sa.error,{},i=>s(i))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(s=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=lt.joining,this.joinPush.resend(s))}_getPayloadRecords(s){const i={new:{},old:{}};return(s.type==="INSERT"||s.type==="UPDATE")&&(i.new=_g(s.columns,s.record)),(s.type==="UPDATE"||s.type==="DELETE")&&(i.old=_g(s.columns,s.old_record)),i}}const td=()=>{},Wl={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},aj=[1e3,2e3,5e3,1e4],sj=1e4,nj=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class rj{constructor(s,i){var o;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=gd,this.transport=null,this.heartbeatIntervalMs=Wl.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=td,this.ref=0,this.reconnectTimer=null,this.vsn=Ng,this.logger=td,this.conn=null,this.sendBuffer=[],this.serializer=new Qw,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=c=>c?(...u)=>c(...u):(...u)=>fetch(...u),!(!((o=i==null?void 0:i.params)===null||o===void 0)&&o.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=i.params.apikey,this.endPoint=`${s}/${xd.websocket}`,this.httpEndpoint=hb(s),this._initializeOptions(i),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(i==null?void 0:i.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Hw.createWebSocket(this.endpointURL())}catch(s){this._setConnectionState("disconnected");const i=s.message;throw i.includes("Node.js")?new Error(`${i}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${i}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(s,i){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const o=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(o),this._setConnectionState("disconnected")},s?this.conn.close(s,i??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(s){const i=await s.unsubscribe();return this.channels.length===0&&this.disconnect(),i}async removeAllChannels(){const s=await Promise.all(this.channels.map(i=>i.unsubscribe()));return this.channels=[],this.disconnect(),s}log(s,i,o){this.logger(s,i,o)}connectionState(){switch(this.conn&&this.conn.readyState){case Zs.connecting:return en.Connecting;case Zs.open:return en.Open;case Zs.closing:return en.Closing;default:return en.Closed}}isConnected(){return this.connectionState()===en.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(s,i={config:{}}){const o=`realtime:${s}`,c=this.getChannels().find(u=>u.topic===o);if(c)return c;{const u=new Gd(`realtime:${s}`,i,this);return this.channels.push(u),u}}push(s){const{topic:i,event:o,payload:c,ref:u}=s,h=()=>{this.encode(s,g=>{var m;(m=this.conn)===null||m===void 0||m.send(g)})};this.log("push",`${i} ${o} (${u})`,c),this.isConnected()?h():this.sendBuffer.push(h)}async setAuth(s=null){this._authPromise=this._performAuth(s);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var s;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(i){this.log("error","error in heartbeat callback",i)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(i){this.log("error","error in heartbeat callback",i)}this._wasManualDisconnect=!1,(s=this.conn)===null||s===void 0||s.close(Kw,"heartbeat timeout"),setTimeout(()=>{var i;this.isConnected()||(i=this.reconnectTimer)===null||i===void 0||i.scheduleTimeout()},Wl.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(i){this.log("error","error in heartbeat callback",i)}this._setAuthSafely("heartbeat")}onHeartbeat(s){this.heartbeatCallback=s}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(s=>s()),this.sendBuffer=[])}_makeRef(){let s=this.ref+1;return s===this.ref?this.ref=0:this.ref=s,this.ref.toString()}_leaveOpenTopic(s){let i=this.channels.find(o=>o.topic===s&&(o._isJoined()||o._isJoining()));i&&(this.log("transport",`leaving duplicate topic "${s}"`),i.unsubscribe())}_remove(s){this.channels=this.channels.filter(i=>i.topic!==s.topic)}_onConnMessage(s){this.decode(s.data,i=>{if(i.topic==="phoenix"&&i.event==="phx_reply")try{this.heartbeatCallback(i.payload.status==="ok"?"ok":"error")}catch(p){this.log("error","error in heartbeat callback",p)}i.ref&&i.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:o,event:c,payload:u,ref:h}=i,g=h?`(${h})`:"",m=u.status||"";this.log("receive",`${m} ${o} ${c} ${g}`.trim(),u),this.channels.filter(p=>p._isMember(o)).forEach(p=>p._trigger(c,u,h)),this._triggerStateCallbacks("message",i)})}_clearTimer(s){var i;s==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):s==="reconnect"&&((i=this.reconnectTimer)===null||i===void 0||i.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=s=>this._onConnError(s),this.conn.onmessage=s=>this._onConnMessage(s),this.conn.onclose=s=>this._onConnClose(s))}_teardownConnection(){if(this.conn){if(this.conn.readyState===Zs.open||this.conn.readyState===Zs.connecting)try{this.conn.close()}catch(s){this.log("error","Error closing connection",s)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(s=>s.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const s=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(s),this.workerRef.onerror=i=>{this.log("worker","worker error",i.message),this.workerRef.terminate()},this.workerRef.onmessage=i=>{i.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(s){var i;this._setConnectionState("disconnected"),this.log("transport","close",s),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(i=this.reconnectTimer)===null||i===void 0||i.scheduleTimeout(),this._triggerStateCallbacks("close",s)}_onConnError(s){this._setConnectionState("disconnected"),this.log("transport",`${s}`),this._triggerChanError(),this._triggerStateCallbacks("error",s)}_triggerChanError(){this.channels.forEach(s=>s._trigger(sa.error))}_appendParams(s,i){if(Object.keys(i).length===0)return s;const o=s.match(/\?/)?"&":"?",c=new URLSearchParams(i);return`${s}${o}${c}`}_workerObjectUrl(s){let i;if(s)i=s;else{const o=new Blob([nj],{type:"application/javascript"});i=URL.createObjectURL(o)}return i}_setConnectionState(s,i=!1){this._connectionState=s,s==="connecting"?this._wasManualDisconnect=!1:s==="disconnecting"&&(this._wasManualDisconnect=i)}async _performAuth(s=null){let i;s?i=s:this.accessToken?i=await this.accessToken():i=this.accessTokenValue,this.accessTokenValue!=i&&(this.accessTokenValue=i,this.channels.forEach(o=>{const c={access_token:i,version:Gw};i&&o.updateJoinPayload(c),o.joinedOnce&&o._isJoined()&&o._push(sa.access_token,{access_token:i})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(s="general"){this.setAuth().catch(i=>{this.log("error",`error setting auth in ${s}`,i)})}_triggerStateCallbacks(s,i){try{this.stateChangeCallbacks[s].forEach(o=>{try{o(i)}catch(c){this.log("error",`error in ${s} callback`,c)}})}catch(o){this.log("error",`error triggering ${s} callbacks`,o)}}_setupReconnectionTimer(){this.reconnectTimer=new ub(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Wl.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(s){var i,o,c,u,h,g,m,p,b,w,j,_;switch(this.transport=(i=s==null?void 0:s.transport)!==null&&i!==void 0?i:null,this.timeout=(o=s==null?void 0:s.timeout)!==null&&o!==void 0?o:gd,this.heartbeatIntervalMs=(c=s==null?void 0:s.heartbeatIntervalMs)!==null&&c!==void 0?c:Wl.HEARTBEAT_INTERVAL,this.worker=(u=s==null?void 0:s.worker)!==null&&u!==void 0?u:!1,this.accessToken=(h=s==null?void 0:s.accessToken)!==null&&h!==void 0?h:null,this.heartbeatCallback=(g=s==null?void 0:s.heartbeatCallback)!==null&&g!==void 0?g:td,this.vsn=(m=s==null?void 0:s.vsn)!==null&&m!==void 0?m:Ng,s!=null&&s.params&&(this.params=s.params),s!=null&&s.logger&&(this.logger=s.logger),(s!=null&&s.logLevel||s!=null&&s.log_level)&&(this.logLevel=s.logLevel||s.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(p=s==null?void 0:s.reconnectAfterMs)!==null&&p!==void 0?p:(v=>aj[v-1]||sj),this.vsn){case cb:this.encode=(b=s==null?void 0:s.encode)!==null&&b!==void 0?b:((v,E)=>E(JSON.stringify(v))),this.decode=(w=s==null?void 0:s.decode)!==null&&w!==void 0?w:((v,E)=>E(JSON.parse(v)));break;case Yw:this.encode=(j=s==null?void 0:s.encode)!==null&&j!==void 0?j:this.serializer.encode.bind(this.serializer),this.decode=(_=s==null?void 0:s.decode)!==null&&_!==void 0?_:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=s==null?void 0:s.workerUrl}}}class Yd extends Error{constructor(s){super(s),this.__isStorageError=!0,this.name="StorageError"}}function Ke(r){return typeof r=="object"&&r!==null&&"__isStorageError"in r}class ij extends Yd{constructor(s,i,o){super(s),this.name="StorageApiError",this.status=i,this.statusCode=o}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class vd extends Yd{constructor(s,i){super(s),this.name="StorageUnknownError",this.originalError=i}}const Kd=r=>r?(...s)=>r(...s):(...s)=>fetch(...s),lj=()=>Response,yd=r=>{if(Array.isArray(r))return r.map(i=>yd(i));if(typeof r=="function"||r!==Object(r))return r;const s={};return Object.entries(r).forEach(([i,o])=>{const c=i.replace(/([-_][a-z])/gi,u=>u.toUpperCase().replace(/[-_]/g,""));s[c]=yd(o)}),s},oj=r=>{if(typeof r!="object"||r===null)return!1;const s=Object.getPrototypeOf(r);return(s===null||s===Object.prototype||Object.getPrototypeOf(s)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)},ad=r=>{var s;return r.msg||r.message||r.error_description||(typeof r.error=="string"?r.error:(s=r.error)===null||s===void 0?void 0:s.message)||JSON.stringify(r)},cj=(r,s,i)=>le(void 0,void 0,void 0,function*(){const o=yield lj();r instanceof o&&!(i!=null&&i.noResolveJson)?r.json().then(c=>{const u=r.status||500,h=(c==null?void 0:c.statusCode)||u+"";s(new ij(ad(c),u,h))}).catch(c=>{s(new vd(ad(c),c))}):s(new vd(ad(r),r))}),uj=(r,s,i,o)=>{const c={method:r,headers:(s==null?void 0:s.headers)||{}};return r==="GET"||!o?c:(oj(o)?(c.headers=Object.assign({"Content-Type":"application/json"},s==null?void 0:s.headers),c.body=JSON.stringify(o)):c.body=o,s!=null&&s.duplex&&(c.duplex=s.duplex),Object.assign(Object.assign({},c),i))};function ki(r,s,i,o,c,u){return le(this,void 0,void 0,function*(){return new Promise((h,g)=>{r(i,uj(s,o,c,u)).then(m=>{if(!m.ok)throw m;return o!=null&&o.noResolveJson?m:m.json()}).then(m=>h(m)).catch(m=>cj(m,g,o))})})}function yi(r,s,i,o){return le(this,void 0,void 0,function*(){return ki(r,"GET",s,i,o)})}function da(r,s,i,o,c){return le(this,void 0,void 0,function*(){return ki(r,"POST",s,o,c,i)})}function wd(r,s,i,o,c){return le(this,void 0,void 0,function*(){return ki(r,"PUT",s,o,c,i)})}function dj(r,s,i,o){return le(this,void 0,void 0,function*(){return ki(r,"HEAD",s,Object.assign(Object.assign({},i),{noResolveJson:!0}),o)})}function Fd(r,s,i,o,c){return le(this,void 0,void 0,function*(){return ki(r,"DELETE",s,o,c,i)})}class hj{constructor(s,i){this.downloadFn=s,this.shouldThrowOnError=i}then(s,i){return this.execute().then(s,i)}execute(){return le(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ke(s))return{data:null,error:s};throw s}})}}var fb;class fj{constructor(s,i){this.downloadFn=s,this.shouldThrowOnError=i,this[fb]="BlobDownloadBuilder",this.promise=null}asStream(){return new hj(this.downloadFn,this.shouldThrowOnError)}then(s,i){return this.getPromise().then(s,i)}catch(s){return this.getPromise().catch(s)}finally(s){return this.getPromise().finally(s)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return le(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ke(s))return{data:null,error:s};throw s}})}}fb=Symbol.toStringTag;const mj={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},kg={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class pj{constructor(s,i={},o,c){this.shouldThrowOnError=!1,this.url=s,this.headers=i,this.bucketId=o,this.fetch=Kd(c)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(s,i,o,c){return le(this,void 0,void 0,function*(){try{let u;const h=Object.assign(Object.assign({},kg),c);let g=Object.assign(Object.assign({},this.headers),s==="POST"&&{"x-upsert":String(h.upsert)});const m=h.metadata;typeof Blob<"u"&&o instanceof Blob?(u=new FormData,u.append("cacheControl",h.cacheControl),m&&u.append("metadata",this.encodeMetadata(m)),u.append("",o)):typeof FormData<"u"&&o instanceof FormData?(u=o,u.has("cacheControl")||u.append("cacheControl",h.cacheControl),m&&!u.has("metadata")&&u.append("metadata",this.encodeMetadata(m))):(u=o,g["cache-control"]=`max-age=${h.cacheControl}`,g["content-type"]=h.contentType,m&&(g["x-metadata"]=this.toBase64(this.encodeMetadata(m))),(typeof ReadableStream<"u"&&u instanceof ReadableStream||u&&typeof u=="object"&&"pipe"in u&&typeof u.pipe=="function")&&!h.duplex&&(h.duplex="half")),c!=null&&c.headers&&(g=Object.assign(Object.assign({},g),c.headers));const p=this._removeEmptyFolders(i),b=this._getFinalPath(p),w=yield(s=="PUT"?wd:da)(this.fetch,`${this.url}/object/${b}`,u,Object.assign({headers:g},h!=null&&h.duplex?{duplex:h.duplex}:{}));return{data:{path:p,id:w.Id,fullPath:w.Key},error:null}}catch(u){if(this.shouldThrowOnError)throw u;if(Ke(u))return{data:null,error:u};throw u}})}upload(s,i,o){return le(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",s,i,o)})}uploadToSignedUrl(s,i,o,c){return le(this,void 0,void 0,function*(){const u=this._removeEmptyFolders(s),h=this._getFinalPath(u),g=new URL(this.url+`/object/upload/sign/${h}`);g.searchParams.set("token",i);try{let m;const p=Object.assign({upsert:kg.upsert},c),b=Object.assign(Object.assign({},this.headers),{"x-upsert":String(p.upsert)});typeof Blob<"u"&&o instanceof Blob?(m=new FormData,m.append("cacheControl",p.cacheControl),m.append("",o)):typeof FormData<"u"&&o instanceof FormData?(m=o,m.append("cacheControl",p.cacheControl)):(m=o,b["cache-control"]=`max-age=${p.cacheControl}`,b["content-type"]=p.contentType);const w=yield wd(this.fetch,g.toString(),m,{headers:b});return{data:{path:u,fullPath:w.Key},error:null}}catch(m){if(this.shouldThrowOnError)throw m;if(Ke(m))return{data:null,error:m};throw m}})}createSignedUploadUrl(s,i){return le(this,void 0,void 0,function*(){try{let o=this._getFinalPath(s);const c=Object.assign({},this.headers);i!=null&&i.upsert&&(c["x-upsert"]="true");const u=yield da(this.fetch,`${this.url}/object/upload/sign/${o}`,{},{headers:c}),h=new URL(this.url+u.url),g=h.searchParams.get("token");if(!g)throw new Yd("No token returned by API");return{data:{signedUrl:h.toString(),path:s,token:g},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ke(o))return{data:null,error:o};throw o}})}update(s,i,o){return le(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",s,i,o)})}move(s,i,o){return le(this,void 0,void 0,function*(){try{return{data:yield da(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:s,destinationKey:i,destinationBucket:o==null?void 0:o.destinationBucket},{headers:this.headers}),error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Ke(c))return{data:null,error:c};throw c}})}copy(s,i,o){return le(this,void 0,void 0,function*(){try{return{data:{path:(yield da(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:s,destinationKey:i,destinationBucket:o==null?void 0:o.destinationBucket},{headers:this.headers})).Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Ke(c))return{data:null,error:c};throw c}})}createSignedUrl(s,i,o){return le(this,void 0,void 0,function*(){try{let c=this._getFinalPath(s),u=yield da(this.fetch,`${this.url}/object/sign/${c}`,Object.assign({expiresIn:i},o!=null&&o.transform?{transform:o.transform}:{}),{headers:this.headers});const h=o!=null&&o.download?`&download=${o.download===!0?"":o.download}`:"";return u={signedUrl:encodeURI(`${this.url}${u.signedURL}${h}`)},{data:u,error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Ke(c))return{data:null,error:c};throw c}})}createSignedUrls(s,i,o){return le(this,void 0,void 0,function*(){try{const c=yield da(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:i,paths:s},{headers:this.headers}),u=o!=null&&o.download?`&download=${o.download===!0?"":o.download}`:"";return{data:c.map(h=>Object.assign(Object.assign({},h),{signedUrl:h.signedURL?encodeURI(`${this.url}${h.signedURL}${u}`):null})),error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Ke(c))return{data:null,error:c};throw c}})}download(s,i){const c=typeof(i==null?void 0:i.transform)<"u"?"render/image/authenticated":"object",u=this.transformOptsToQueryString((i==null?void 0:i.transform)||{}),h=u?`?${u}`:"",g=this._getFinalPath(s),m=()=>yi(this.fetch,`${this.url}/${c}/${g}${h}`,{headers:this.headers,noResolveJson:!0});return new fj(m,this.shouldThrowOnError)}info(s){return le(this,void 0,void 0,function*(){const i=this._getFinalPath(s);try{const o=yield yi(this.fetch,`${this.url}/object/info/${i}`,{headers:this.headers});return{data:yd(o),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ke(o))return{data:null,error:o};throw o}})}exists(s){return le(this,void 0,void 0,function*(){const i=this._getFinalPath(s);try{return yield dj(this.fetch,`${this.url}/object/${i}`,{headers:this.headers}),{data:!0,error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ke(o)&&o instanceof vd){const c=o.originalError;if([400,404].includes(c==null?void 0:c.status))return{data:!1,error:o}}throw o}})}getPublicUrl(s,i){const o=this._getFinalPath(s),c=[],u=i!=null&&i.download?`download=${i.download===!0?"":i.download}`:"";u!==""&&c.push(u);const g=typeof(i==null?void 0:i.transform)<"u"?"render/image":"object",m=this.transformOptsToQueryString((i==null?void 0:i.transform)||{});m!==""&&c.push(m);let p=c.join("&");return p!==""&&(p=`?${p}`),{data:{publicUrl:encodeURI(`${this.url}/${g}/public/${o}${p}`)}}}remove(s){return le(this,void 0,void 0,function*(){try{return{data:yield Fd(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:s},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ke(i))return{data:null,error:i};throw i}})}list(s,i,o){return le(this,void 0,void 0,function*(){try{const c=Object.assign(Object.assign(Object.assign({},mj),i),{prefix:s||""});return{data:yield da(this.fetch,`${this.url}/object/list/${this.bucketId}`,c,{headers:this.headers},o),error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Ke(c))return{data:null,error:c};throw c}})}listV2(s,i){return le(this,void 0,void 0,function*(){try{const o=Object.assign({},s);return{data:yield da(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,o,{headers:this.headers},i),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ke(o))return{data:null,error:o};throw o}})}encodeMetadata(s){return JSON.stringify(s)}toBase64(s){return typeof Buffer<"u"?Buffer.from(s).toString("base64"):btoa(s)}_getFinalPath(s){return`${this.bucketId}/${s.replace(/^\/+/,"")}`}_removeEmptyFolders(s){return s.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(s){const i=[];return s.width&&i.push(`width=${s.width}`),s.height&&i.push(`height=${s.height}`),s.resize&&i.push(`resize=${s.resize}`),s.format&&i.push(`format=${s.format}`),s.quality&&i.push(`quality=${s.quality}`),i.join("&")}}const mb="2.81.0",pb={"X-Client-Info":`storage-js/${mb}`};class gj{constructor(s,i={},o,c){this.shouldThrowOnError=!1;const u=new URL(s);c!=null&&c.useNewHostname&&/supabase\.(co|in|red)$/.test(u.hostname)&&!u.hostname.includes("storage.supabase.")&&(u.hostname=u.hostname.replace("supabase.","storage.supabase.")),this.url=u.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},pb),i),this.fetch=Kd(o)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(s){return le(this,void 0,void 0,function*(){try{const i=this.listBucketOptionsToQueryString(s);return{data:yield yi(this.fetch,`${this.url}/bucket${i}`,{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ke(i))return{data:null,error:i};throw i}})}getBucket(s){return le(this,void 0,void 0,function*(){try{return{data:yield yi(this.fetch,`${this.url}/bucket/${s}`,{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ke(i))return{data:null,error:i};throw i}})}createBucket(s){return le(this,arguments,void 0,function*(i,o={public:!1}){try{return{data:yield da(this.fetch,`${this.url}/bucket`,{id:i,name:i,type:o.type,public:o.public,file_size_limit:o.fileSizeLimit,allowed_mime_types:o.allowedMimeTypes},{headers:this.headers}),error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Ke(c))return{data:null,error:c};throw c}})}updateBucket(s,i){return le(this,void 0,void 0,function*(){try{return{data:yield wd(this.fetch,`${this.url}/bucket/${s}`,{id:s,name:s,public:i.public,file_size_limit:i.fileSizeLimit,allowed_mime_types:i.allowedMimeTypes},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ke(o))return{data:null,error:o};throw o}})}emptyBucket(s){return le(this,void 0,void 0,function*(){try{return{data:yield da(this.fetch,`${this.url}/bucket/${s}/empty`,{},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ke(i))return{data:null,error:i};throw i}})}deleteBucket(s){return le(this,void 0,void 0,function*(){try{return{data:yield Fd(this.fetch,`${this.url}/bucket/${s}`,{},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ke(i))return{data:null,error:i};throw i}})}listBucketOptionsToQueryString(s){const i={};return s&&("limit"in s&&(i.limit=String(s.limit)),"offset"in s&&(i.offset=String(s.offset)),s.search&&(i.search=s.search),s.sortColumn&&(i.sortColumn=s.sortColumn),s.sortOrder&&(i.sortOrder=s.sortOrder)),Object.keys(i).length>0?"?"+new URLSearchParams(i).toString():""}}class xj{constructor(s,i={},o){this.shouldThrowOnError=!1,this.url=s.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},pb),i),this.fetch=Kd(o)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(s){return le(this,void 0,void 0,function*(){try{return{data:yield da(this.fetch,`${this.url}/bucket`,{name:s},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ke(i))return{data:null,error:i};throw i}})}listBuckets(s){return le(this,void 0,void 0,function*(){try{const i=new URLSearchParams;(s==null?void 0:s.limit)!==void 0&&i.set("limit",s.limit.toString()),(s==null?void 0:s.offset)!==void 0&&i.set("offset",s.offset.toString()),s!=null&&s.sortColumn&&i.set("sortColumn",s.sortColumn),s!=null&&s.sortOrder&&i.set("sortOrder",s.sortOrder),s!=null&&s.search&&i.set("search",s.search);const o=i.toString(),c=o?`${this.url}/bucket?${o}`:`${this.url}/bucket`;return{data:yield yi(this.fetch,c,{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ke(i))return{data:null,error:i};throw i}})}deleteBucket(s){return le(this,void 0,void 0,function*(){try{return{data:yield Fd(this.fetch,`${this.url}/bucket/${s}`,{},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ke(i))return{data:null,error:i};throw i}})}}const Qd={"X-Client-Info":`storage-js/${mb}`,"Content-Type":"application/json"};class gb extends Error{constructor(s){super(s),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function Ht(r){return typeof r=="object"&&r!==null&&"__isStorageVectorsError"in r}class sd extends gb{constructor(s,i,o){super(s),this.name="StorageVectorsApiError",this.status=i,this.statusCode=o}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class bj extends gb{constructor(s,i){super(s),this.name="StorageVectorsUnknownError",this.originalError=i}}var Cg;(function(r){r.InternalError="InternalError",r.S3VectorConflictException="S3VectorConflictException",r.S3VectorNotFoundException="S3VectorNotFoundException",r.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",r.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",r.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(Cg||(Cg={}));const Jd=r=>r?(...s)=>r(...s):(...s)=>fetch(...s),vj=r=>{if(typeof r!="object"||r===null)return!1;const s=Object.getPrototypeOf(r);return(s===null||s===Object.prototype||Object.getPrototypeOf(s)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)},Ag=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),yj=(r,s,i)=>le(void 0,void 0,void 0,function*(){if(r&&typeof r=="object"&&"status"in r&&"ok"in r&&typeof r.status=="number"&&!(i!=null&&i.noResolveJson)){const c=r.status||500,u=r;if(typeof u.json=="function")u.json().then(h=>{const g=(h==null?void 0:h.statusCode)||(h==null?void 0:h.code)||c+"";s(new sd(Ag(h),c,g))}).catch(()=>{const h=c+"",g=u.statusText||`HTTP ${c} error`;s(new sd(g,c,h))});else{const h=c+"",g=u.statusText||`HTTP ${c} error`;s(new sd(g,c,h))}}else s(new bj(Ag(r),r))}),wj=(r,s,i,o)=>{const c={method:r,headers:(s==null?void 0:s.headers)||{}};return o?(vj(o)?(c.headers=Object.assign({"Content-Type":"application/json"},s==null?void 0:s.headers),c.body=JSON.stringify(o)):c.body=o,Object.assign(Object.assign({},c),i)):c};function jj(r,s,i,o,c,u){return le(this,void 0,void 0,function*(){return new Promise((h,g)=>{r(i,wj(s,o,c,u)).then(m=>{if(!m.ok)throw m;if(o!=null&&o.noResolveJson)return m;const p=m.headers.get("content-type");return!p||!p.includes("application/json")?{}:m.json()}).then(m=>h(m)).catch(m=>yj(m,g,o))})})}function Vt(r,s,i,o,c){return le(this,void 0,void 0,function*(){return jj(r,"POST",s,o,c,i)})}class Nj{constructor(s,i={},o){this.shouldThrowOnError=!1,this.url=s.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Qd),i),this.fetch=Jd(o)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(s){return le(this,void 0,void 0,function*(){try{return{data:(yield Vt(this.fetch,`${this.url}/CreateIndex`,s,{headers:this.headers}))||{},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ht(i))return{data:null,error:i};throw i}})}getIndex(s,i){return le(this,void 0,void 0,function*(){try{return{data:yield Vt(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:s,indexName:i},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ht(o))return{data:null,error:o};throw o}})}listIndexes(s){return le(this,void 0,void 0,function*(){try{return{data:yield Vt(this.fetch,`${this.url}/ListIndexes`,s,{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ht(i))return{data:null,error:i};throw i}})}deleteIndex(s,i){return le(this,void 0,void 0,function*(){try{return{data:(yield Vt(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:s,indexName:i},{headers:this.headers}))||{},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ht(o))return{data:null,error:o};throw o}})}}class _j{constructor(s,i={},o){this.shouldThrowOnError=!1,this.url=s.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Qd),i),this.fetch=Jd(o)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(s){return le(this,void 0,void 0,function*(){try{if(s.vectors.length<1||s.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Vt(this.fetch,`${this.url}/PutVectors`,s,{headers:this.headers}))||{},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ht(i))return{data:null,error:i};throw i}})}getVectors(s){return le(this,void 0,void 0,function*(){try{return{data:yield Vt(this.fetch,`${this.url}/GetVectors`,s,{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ht(i))return{data:null,error:i};throw i}})}listVectors(s){return le(this,void 0,void 0,function*(){try{if(s.segmentCount!==void 0){if(s.segmentCount<1||s.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(s.segmentIndex!==void 0&&(s.segmentIndex<0||s.segmentIndex>=s.segmentCount))throw new Error(`segmentIndex must be between 0 and ${s.segmentCount-1}`)}return{data:yield Vt(this.fetch,`${this.url}/ListVectors`,s,{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ht(i))return{data:null,error:i};throw i}})}queryVectors(s){return le(this,void 0,void 0,function*(){try{return{data:yield Vt(this.fetch,`${this.url}/QueryVectors`,s,{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ht(i))return{data:null,error:i};throw i}})}deleteVectors(s){return le(this,void 0,void 0,function*(){try{if(s.keys.length<1||s.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Vt(this.fetch,`${this.url}/DeleteVectors`,s,{headers:this.headers}))||{},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ht(i))return{data:null,error:i};throw i}})}}class Sj{constructor(s,i={},o){this.shouldThrowOnError=!1,this.url=s.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Qd),i),this.fetch=Jd(o)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(s){return le(this,void 0,void 0,function*(){try{return{data:(yield Vt(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:s},{headers:this.headers}))||{},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ht(i))return{data:null,error:i};throw i}})}getBucket(s){return le(this,void 0,void 0,function*(){try{return{data:yield Vt(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:s},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ht(i))return{data:null,error:i};throw i}})}listBuckets(){return le(this,arguments,void 0,function*(s={}){try{return{data:yield Vt(this.fetch,`${this.url}/ListVectorBuckets`,s,{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ht(i))return{data:null,error:i};throw i}})}deleteBucket(s){return le(this,void 0,void 0,function*(){try{return{data:(yield Vt(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:s},{headers:this.headers}))||{},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ht(i))return{data:null,error:i};throw i}})}}class Ej extends Sj{constructor(s,i={}){super(s,i.headers||{},i.fetch)}from(s){return new kj(this.url,this.headers,s,this.fetch)}}class kj extends Nj{constructor(s,i,o,c){super(s,i,c),this.vectorBucketName=o}createIndex(s){const i=Object.create(null,{createIndex:{get:()=>super.createIndex}});return le(this,void 0,void 0,function*(){return i.createIndex.call(this,Object.assign(Object.assign({},s),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const s=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return le(this,arguments,void 0,function*(i={}){return s.listIndexes.call(this,Object.assign(Object.assign({},i),{vectorBucketName:this.vectorBucketName}))})}getIndex(s){const i=Object.create(null,{getIndex:{get:()=>super.getIndex}});return le(this,void 0,void 0,function*(){return i.getIndex.call(this,this.vectorBucketName,s)})}deleteIndex(s){const i=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return le(this,void 0,void 0,function*(){return i.deleteIndex.call(this,this.vectorBucketName,s)})}index(s){return new Cj(this.url,this.headers,this.vectorBucketName,s,this.fetch)}}class Cj extends _j{constructor(s,i,o,c,u){super(s,i,u),this.vectorBucketName=o,this.indexName=c}putVectors(s){const i=Object.create(null,{putVectors:{get:()=>super.putVectors}});return le(this,void 0,void 0,function*(){return i.putVectors.call(this,Object.assign(Object.assign({},s),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(s){const i=Object.create(null,{getVectors:{get:()=>super.getVectors}});return le(this,void 0,void 0,function*(){return i.getVectors.call(this,Object.assign(Object.assign({},s),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const s=Object.create(null,{listVectors:{get:()=>super.listVectors}});return le(this,arguments,void 0,function*(i={}){return s.listVectors.call(this,Object.assign(Object.assign({},i),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(s){const i=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return le(this,void 0,void 0,function*(){return i.queryVectors.call(this,Object.assign(Object.assign({},s),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(s){const i=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return le(this,void 0,void 0,function*(){return i.deleteVectors.call(this,Object.assign(Object.assign({},s),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class Aj extends gj{constructor(s,i={},o,c){super(s,i,o,c)}from(s){return new pj(this.url,this.headers,s,this.fetch)}get vectors(){return new Ej(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new xj(this.url+"/iceberg",this.headers,this.fetch)}}const Tj="2.81.0";let fi="";typeof Deno<"u"?fi="deno":typeof document<"u"?fi="web":typeof navigator<"u"&&navigator.product==="ReactNative"?fi="react-native":fi="node";const Rj={"X-Client-Info":`supabase-js-${fi}/${Tj}`},Oj={headers:Rj},Dj={schema:"public"},Mj={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Uj={},Lj=r=>r?(...s)=>r(...s):(...s)=>fetch(...s),Bj=()=>Headers,zj=(r,s,i)=>{const o=Lj(i),c=Bj();return async(u,h)=>{var g;const m=(g=await s())!==null&&g!==void 0?g:r;let p=new c(h==null?void 0:h.headers);return p.has("apikey")||p.set("apikey",r),p.has("Authorization")||p.set("Authorization",`Bearer ${m}`),o(u,Object.assign(Object.assign({},h),{headers:p}))}};function qj(r){return r.endsWith("/")?r:r+"/"}function Ij(r,s){var i,o;const{db:c,auth:u,realtime:h,global:g}=r,{db:m,auth:p,realtime:b,global:w}=s,j={db:Object.assign(Object.assign({},m),c),auth:Object.assign(Object.assign({},p),u),realtime:Object.assign(Object.assign({},b),h),storage:{},global:Object.assign(Object.assign(Object.assign({},w),g),{headers:Object.assign(Object.assign({},(i=w==null?void 0:w.headers)!==null&&i!==void 0?i:{}),(o=g==null?void 0:g.headers)!==null&&o!==void 0?o:{})}),accessToken:async()=>""};return r.accessToken?j.accessToken=r.accessToken:delete j.accessToken,j}function $j(r){const s=r==null?void 0:r.trim();if(!s)throw new Error("supabaseUrl is required.");if(!s.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(qj(s))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const xb="2.81.0",tr=30*1e3,jd=3,nd=jd*tr,Pj="http://localhost:9999",Hj="supabase.auth.token",Vj={"X-Client-Info":`gotrue-js/${xb}`},Nd="X-Supabase-Api-Version",bb={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Gj=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Yj=600*1e3;class wi extends Error{constructor(s,i,o){super(s),this.__isAuthError=!0,this.name="AuthError",this.status=i,this.code=o}}function ue(r){return typeof r=="object"&&r!==null&&"__isAuthError"in r}class Kj extends wi{constructor(s,i,o){super(s,i,o),this.name="AuthApiError",this.status=i,this.code=o}}function Fj(r){return ue(r)&&r.name==="AuthApiError"}class tn extends wi{constructor(s,i){super(s),this.name="AuthUnknownError",this.originalError=i}}class Os extends wi{constructor(s,i,o,c){super(s,o,c),this.name=i,this.status=o}}class ca extends Os{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Qj(r){return ue(r)&&r.name==="AuthSessionMissingError"}class Qn extends Os{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Zl extends Os{constructor(s){super(s,"AuthInvalidCredentialsError",400,void 0)}}class eo extends Os{constructor(s,i=null){super(s,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=i}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Jj(r){return ue(r)&&r.name==="AuthImplicitGrantRedirectError"}class Tg extends Os{constructor(s,i=null){super(s,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=i}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class _d extends Os{constructor(s,i){super(s,"AuthRetryableFetchError",i,void 0)}}function rd(r){return ue(r)&&r.name==="AuthRetryableFetchError"}class Rg extends Os{constructor(s,i,o){super(s,"AuthWeakPasswordError",i,"weak_password"),this.reasons=o}}class Sd extends Os{constructor(s){super(s,"AuthInvalidJwtError",400,"invalid_jwt")}}const mo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Og=` 	
\r=`.split(""),Xj=(()=>{const r=new Array(128);for(let s=0;s<r.length;s+=1)r[s]=-1;for(let s=0;s<Og.length;s+=1)r[Og[s].charCodeAt(0)]=-2;for(let s=0;s<mo.length;s+=1)r[mo[s].charCodeAt(0)]=s;return r})();function Dg(r,s,i){if(r!==null)for(s.queue=s.queue<<8|r,s.queuedBits+=8;s.queuedBits>=6;){const o=s.queue>>s.queuedBits-6&63;i(mo[o]),s.queuedBits-=6}else if(s.queuedBits>0)for(s.queue=s.queue<<6-s.queuedBits,s.queuedBits=6;s.queuedBits>=6;){const o=s.queue>>s.queuedBits-6&63;i(mo[o]),s.queuedBits-=6}}function vb(r,s,i){const o=Xj[r];if(o>-1)for(s.queue=s.queue<<6|o,s.queuedBits+=6;s.queuedBits>=8;)i(s.queue>>s.queuedBits-8&255),s.queuedBits-=8;else{if(o===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(r)}"`)}}function Mg(r){const s=[],i=h=>{s.push(String.fromCodePoint(h))},o={utf8seq:0,codepoint:0},c={queue:0,queuedBits:0},u=h=>{e2(h,o,i)};for(let h=0;h<r.length;h+=1)vb(r.charCodeAt(h),c,u);return s.join("")}function Wj(r,s){if(r<=127){s(r);return}else if(r<=2047){s(192|r>>6),s(128|r&63);return}else if(r<=65535){s(224|r>>12),s(128|r>>6&63),s(128|r&63);return}else if(r<=1114111){s(240|r>>18),s(128|r>>12&63),s(128|r>>6&63),s(128|r&63);return}throw new Error(`Unrecognized Unicode codepoint: ${r.toString(16)}`)}function Zj(r,s){for(let i=0;i<r.length;i+=1){let o=r.charCodeAt(i);if(o>55295&&o<=56319){const c=(o-55296)*1024&65535;o=(r.charCodeAt(i+1)-56320&65535|c)+65536,i+=1}Wj(o,s)}}function e2(r,s,i){if(s.utf8seq===0){if(r<=127){i(r);return}for(let o=1;o<6;o+=1)if((r>>7-o&1)===0){s.utf8seq=o;break}if(s.utf8seq===2)s.codepoint=r&31;else if(s.utf8seq===3)s.codepoint=r&15;else if(s.utf8seq===4)s.codepoint=r&7;else throw new Error("Invalid UTF-8 sequence");s.utf8seq-=1}else if(s.utf8seq>0){if(r<=127)throw new Error("Invalid UTF-8 sequence");s.codepoint=s.codepoint<<6|r&63,s.utf8seq-=1,s.utf8seq===0&&i(s.codepoint)}}function nr(r){const s=[],i={queue:0,queuedBits:0},o=c=>{s.push(c)};for(let c=0;c<r.length;c+=1)vb(r.charCodeAt(c),i,o);return new Uint8Array(s)}function t2(r){const s=[];return Zj(r,i=>s.push(i)),new Uint8Array(s)}function sn(r){const s=[],i={queue:0,queuedBits:0},o=c=>{s.push(c)};return r.forEach(c=>Dg(c,i,o)),Dg(null,i,o),s.join("")}function a2(r){return Math.round(Date.now()/1e3)+r}function s2(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){const s=Math.random()*16|0;return(r=="x"?s:s&3|8).toString(16)})}const yt=()=>typeof window<"u"&&typeof document<"u",Js={tested:!1,writable:!1},yb=()=>{if(!yt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Js.tested)return Js.writable;const r=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(r,r),globalThis.localStorage.removeItem(r),Js.tested=!0,Js.writable=!0}catch{Js.tested=!0,Js.writable=!1}return Js.writable};function n2(r){const s={},i=new URL(r);if(i.hash&&i.hash[0]==="#")try{new URLSearchParams(i.hash.substring(1)).forEach((c,u)=>{s[u]=c})}catch{}return i.searchParams.forEach((o,c)=>{s[c]=o}),s}const wb=r=>r?(...s)=>r(...s):(...s)=>fetch(...s),r2=r=>typeof r=="object"&&r!==null&&"status"in r&&"ok"in r&&"json"in r&&typeof r.json=="function",ar=async(r,s,i)=>{await r.setItem(s,JSON.stringify(i))},Xs=async(r,s)=>{const i=await r.getItem(s);if(!i)return null;try{return JSON.parse(i)}catch{return i}},Ns=async(r,s)=>{await r.removeItem(s)};class Ro{constructor(){this.promise=new Ro.promiseConstructor((s,i)=>{this.resolve=s,this.reject=i})}}Ro.promiseConstructor=Promise;function id(r){const s=r.split(".");if(s.length!==3)throw new Sd("Invalid JWT structure");for(let o=0;o<s.length;o++)if(!Gj.test(s[o]))throw new Sd("JWT not in base64url format");return{header:JSON.parse(Mg(s[0])),payload:JSON.parse(Mg(s[1])),signature:nr(s[2]),raw:{header:s[0],payload:s[1]}}}async function i2(r){return await new Promise(s=>{setTimeout(()=>s(null),r)})}function l2(r,s){return new Promise((o,c)=>{(async()=>{for(let u=0;u<1/0;u++)try{const h=await r(u);if(!s(u,null,h)){o(h);return}}catch(h){if(!s(u,h)){c(h);return}}})()})}function o2(r){return("0"+r.toString(16)).substr(-2)}function c2(){const s=new Uint32Array(56);if(typeof crypto>"u"){const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",o=i.length;let c="";for(let u=0;u<56;u++)c+=i.charAt(Math.floor(Math.random()*o));return c}return crypto.getRandomValues(s),Array.from(s,o2).join("")}async function u2(r){const i=new TextEncoder().encode(r),o=await crypto.subtle.digest("SHA-256",i),c=new Uint8Array(o);return Array.from(c).map(u=>String.fromCharCode(u)).join("")}async function d2(r){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),r;const i=await u2(r);return btoa(i).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Jn(r,s,i=!1){const o=c2();let c=o;i&&(c+="/PASSWORD_RECOVERY"),await ar(r,`${s}-code-verifier`,c);const u=await d2(o);return[u,o===u?"plain":"s256"]}const h2=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function f2(r){const s=r.headers.get(Nd);if(!s||!s.match(h2))return null;try{return new Date(`${s}T00:00:00.0Z`)}catch{return null}}function m2(r){if(!r)throw new Error("Missing exp claim");const s=Math.floor(Date.now()/1e3);if(r<=s)throw new Error("JWT has expired")}function p2(r){switch(r){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const g2=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Xn(r){if(!g2.test(r))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function ld(){const r={};return new Proxy(r,{get:(s,i)=>{if(i==="__isUserNotAvailableProxy")return!0;if(typeof i=="symbol"){const o=i.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${i}" property of the session object is not supported. Please use getUser() instead.`)},set:(s,i)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${i}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(s,i)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${i}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function x2(r,s){return new Proxy(r,{get:(i,o,c)=>{if(o==="__isInsecureUserWarningProxy")return!0;if(typeof o=="symbol"){const u=o.toString();if(u==="Symbol(Symbol.toPrimitive)"||u==="Symbol(Symbol.toStringTag)"||u==="Symbol(util.inspect.custom)"||u==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(i,o,c)}return!s.value&&typeof o=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),s.value=!0),Reflect.get(i,o,c)}})}function Ug(r){return JSON.parse(JSON.stringify(r))}const Ws=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),b2=[502,503,504];async function Lg(r){var s;if(!r2(r))throw new _d(Ws(r),0);if(b2.includes(r.status))throw new _d(Ws(r),r.status);let i;try{i=await r.json()}catch(u){throw new tn(Ws(u),u)}let o;const c=f2(r);if(c&&c.getTime()>=bb["2024-01-01"].timestamp&&typeof i=="object"&&i&&typeof i.code=="string"?o=i.code:typeof i=="object"&&i&&typeof i.error_code=="string"&&(o=i.error_code),o){if(o==="weak_password")throw new Rg(Ws(i),r.status,((s=i.weak_password)===null||s===void 0?void 0:s.reasons)||[]);if(o==="session_not_found")throw new ca}else if(typeof i=="object"&&i&&typeof i.weak_password=="object"&&i.weak_password&&Array.isArray(i.weak_password.reasons)&&i.weak_password.reasons.length&&i.weak_password.reasons.reduce((u,h)=>u&&typeof h=="string",!0))throw new Rg(Ws(i),r.status,i.weak_password.reasons);throw new Kj(Ws(i),r.status||500,o)}const v2=(r,s,i,o)=>{const c={method:r,headers:(s==null?void 0:s.headers)||{}};return r==="GET"?c:(c.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},s==null?void 0:s.headers),c.body=JSON.stringify(o),Object.assign(Object.assign({},c),i))};async function ge(r,s,i,o){var c;const u=Object.assign({},o==null?void 0:o.headers);u[Nd]||(u[Nd]=bb["2024-01-01"].name),o!=null&&o.jwt&&(u.Authorization=`Bearer ${o.jwt}`);const h=(c=o==null?void 0:o.query)!==null&&c!==void 0?c:{};o!=null&&o.redirectTo&&(h.redirect_to=o.redirectTo);const g=Object.keys(h).length?"?"+new URLSearchParams(h).toString():"",m=await y2(r,s,i+g,{headers:u,noResolveJson:o==null?void 0:o.noResolveJson},{},o==null?void 0:o.body);return o!=null&&o.xform?o==null?void 0:o.xform(m):{data:Object.assign({},m),error:null}}async function y2(r,s,i,o,c,u){const h=v2(s,o,c,u);let g;try{g=await r(i,Object.assign({},h))}catch(m){throw console.error(m),new _d(Ws(m),0)}if(g.ok||await Lg(g),o!=null&&o.noResolveJson)return g;try{return await g.json()}catch(m){await Lg(m)}}function ua(r){var s;let i=null;N2(r)&&(i=Object.assign({},r),r.expires_at||(i.expires_at=a2(r.expires_in)));const o=(s=r.user)!==null&&s!==void 0?s:r;return{data:{session:i,user:o},error:null}}function Bg(r){const s=ua(r);return!s.error&&r.weak_password&&typeof r.weak_password=="object"&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.message&&typeof r.weak_password.message=="string"&&r.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0)&&(s.data.weak_password=r.weak_password),s}function ks(r){var s;return{data:{user:(s=r.user)!==null&&s!==void 0?s:r},error:null}}function w2(r){return{data:r,error:null}}function j2(r){const{action_link:s,email_otp:i,hashed_token:o,redirect_to:c,verification_type:u}=r,h=fr(r,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),g={action_link:s,email_otp:i,hashed_token:o,redirect_to:c,verification_type:u},m=Object.assign({},h);return{data:{properties:g,user:m},error:null}}function zg(r){return r}function N2(r){return r.access_token&&r.refresh_token&&r.expires_in}const od=["global","local","others"];class _2{constructor({url:s="",headers:i={},fetch:o}){this.url=s,this.headers=i,this.fetch=wb(o),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(s,i=od[0]){if(od.indexOf(i)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${od.join(", ")}`);try{return await ge(this.fetch,"POST",`${this.url}/logout?scope=${i}`,{headers:this.headers,jwt:s,noResolveJson:!0}),{data:null,error:null}}catch(o){if(ue(o))return{data:null,error:o};throw o}}async inviteUserByEmail(s,i={}){try{return await ge(this.fetch,"POST",`${this.url}/invite`,{body:{email:s,data:i.data},headers:this.headers,redirectTo:i.redirectTo,xform:ks})}catch(o){if(ue(o))return{data:{user:null},error:o};throw o}}async generateLink(s){try{const{options:i}=s,o=fr(s,["options"]),c=Object.assign(Object.assign({},o),i);return"newEmail"in o&&(c.new_email=o==null?void 0:o.newEmail,delete c.newEmail),await ge(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:c,headers:this.headers,xform:j2,redirectTo:i==null?void 0:i.redirectTo})}catch(i){if(ue(i))return{data:{properties:null,user:null},error:i};throw i}}async createUser(s){try{return await ge(this.fetch,"POST",`${this.url}/admin/users`,{body:s,headers:this.headers,xform:ks})}catch(i){if(ue(i))return{data:{user:null},error:i};throw i}}async listUsers(s){var i,o,c,u,h,g,m;try{const p={nextPage:null,lastPage:0,total:0},b=await ge(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(o=(i=s==null?void 0:s.page)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:"",per_page:(u=(c=s==null?void 0:s.perPage)===null||c===void 0?void 0:c.toString())!==null&&u!==void 0?u:""},xform:zg});if(b.error)throw b.error;const w=await b.json(),j=(h=b.headers.get("x-total-count"))!==null&&h!==void 0?h:0,_=(m=(g=b.headers.get("link"))===null||g===void 0?void 0:g.split(","))!==null&&m!==void 0?m:[];return _.length>0&&(_.forEach(v=>{const E=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(v.split(";")[1].split("=")[1]);p[`${y}Page`]=E}),p.total=parseInt(j)),{data:Object.assign(Object.assign({},w),p),error:null}}catch(p){if(ue(p))return{data:{users:[]},error:p};throw p}}async getUserById(s){Xn(s);try{return await ge(this.fetch,"GET",`${this.url}/admin/users/${s}`,{headers:this.headers,xform:ks})}catch(i){if(ue(i))return{data:{user:null},error:i};throw i}}async updateUserById(s,i){Xn(s);try{return await ge(this.fetch,"PUT",`${this.url}/admin/users/${s}`,{body:i,headers:this.headers,xform:ks})}catch(o){if(ue(o))return{data:{user:null},error:o};throw o}}async deleteUser(s,i=!1){Xn(s);try{return await ge(this.fetch,"DELETE",`${this.url}/admin/users/${s}`,{headers:this.headers,body:{should_soft_delete:i},xform:ks})}catch(o){if(ue(o))return{data:{user:null},error:o};throw o}}async _listFactors(s){Xn(s.userId);try{const{data:i,error:o}=await ge(this.fetch,"GET",`${this.url}/admin/users/${s.userId}/factors`,{headers:this.headers,xform:c=>({data:{factors:c},error:null})});return{data:i,error:o}}catch(i){if(ue(i))return{data:null,error:i};throw i}}async _deleteFactor(s){Xn(s.userId),Xn(s.id);try{return{data:await ge(this.fetch,"DELETE",`${this.url}/admin/users/${s.userId}/factors/${s.id}`,{headers:this.headers}),error:null}}catch(i){if(ue(i))return{data:null,error:i};throw i}}async _listOAuthClients(s){var i,o,c,u,h,g,m;try{const p={nextPage:null,lastPage:0,total:0},b=await ge(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(o=(i=s==null?void 0:s.page)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:"",per_page:(u=(c=s==null?void 0:s.perPage)===null||c===void 0?void 0:c.toString())!==null&&u!==void 0?u:""},xform:zg});if(b.error)throw b.error;const w=await b.json(),j=(h=b.headers.get("x-total-count"))!==null&&h!==void 0?h:0,_=(m=(g=b.headers.get("link"))===null||g===void 0?void 0:g.split(","))!==null&&m!==void 0?m:[];return _.length>0&&(_.forEach(v=>{const E=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(v.split(";")[1].split("=")[1]);p[`${y}Page`]=E}),p.total=parseInt(j)),{data:Object.assign(Object.assign({},w),p),error:null}}catch(p){if(ue(p))return{data:{clients:[]},error:p};throw p}}async _createOAuthClient(s){try{return await ge(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:s,headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(ue(i))return{data:null,error:i};throw i}}async _getOAuthClient(s){try{return await ge(this.fetch,"GET",`${this.url}/admin/oauth/clients/${s}`,{headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(ue(i))return{data:null,error:i};throw i}}async _updateOAuthClient(s,i){try{return await ge(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${s}`,{body:i,headers:this.headers,xform:o=>({data:o,error:null})})}catch(o){if(ue(o))return{data:null,error:o};throw o}}async _deleteOAuthClient(s){try{return await ge(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${s}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(i){if(ue(i))return{data:null,error:i};throw i}}async _regenerateOAuthClientSecret(s){try{return await ge(this.fetch,"POST",`${this.url}/admin/oauth/clients/${s}/regenerate_secret`,{headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(ue(i))return{data:null,error:i};throw i}}}function qg(r={}){return{getItem:s=>r[s]||null,setItem:(s,i)=>{r[s]=i},removeItem:s=>{delete r[s]}}}const Wn={debug:!!(globalThis&&yb()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class jb extends Error{constructor(s){super(s),this.isAcquireTimeout=!0}}class S2 extends jb{}async function E2(r,s,i){Wn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",r,s);const o=new globalThis.AbortController;return s>0&&setTimeout(()=>{o.abort(),Wn.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",r)},s),await Promise.resolve().then(()=>globalThis.navigator.locks.request(r,s===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:o.signal},async c=>{if(c){Wn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",r,c.name);try{return await i()}finally{Wn.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",r,c.name)}}else{if(s===0)throw Wn.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",r),new S2(`Acquiring an exclusive Navigator LockManager lock "${r}" immediately failed`);if(Wn.debug)try{const u=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(u,null,"  "))}catch(u){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",u)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await i()}}))}function k2(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Nb(r){if(!/^0x[a-fA-F0-9]{40}$/.test(r))throw new Error(`@supabase/auth-js: Address "${r}" is invalid.`);return r.toLowerCase()}function C2(r){return parseInt(r,16)}function A2(r){const s=new TextEncoder().encode(r);return"0x"+Array.from(s,o=>o.toString(16).padStart(2,"0")).join("")}function T2(r){var s;const{chainId:i,domain:o,expirationTime:c,issuedAt:u=new Date,nonce:h,notBefore:g,requestId:m,resources:p,scheme:b,uri:w,version:j}=r;{if(!Number.isInteger(i))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${i}`);if(!o)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(h&&h.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${h}`);if(!w)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(j!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${j}`);if(!((s=r.statement)===null||s===void 0)&&s.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${r.statement}`)}const _=Nb(r.address),v=b?`${b}://${o}`:o,E=r.statement?`${r.statement}
`:"",y=`${v} wants you to sign in with your Ethereum account:
${_}

${E}`;let k=`URI: ${w}
Version: ${j}
Chain ID: ${i}${h?`
Nonce: ${h}`:""}
Issued At: ${u.toISOString()}`;if(c&&(k+=`
Expiration Time: ${c.toISOString()}`),g&&(k+=`
Not Before: ${g.toISOString()}`),m&&(k+=`
Request ID: ${m}`),p){let R=`
Resources:`;for(const A of p){if(!A||typeof A!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${A}`);R+=`
- ${A}`}k+=R}return`${y}
${k}`}class st extends Error{constructor({message:s,code:i,cause:o,name:c}){var u;super(s,{cause:o}),this.__isWebAuthnError=!0,this.name=(u=c??(o instanceof Error?o.name:void 0))!==null&&u!==void 0?u:"Unknown Error",this.code=i}}class po extends st{constructor(s,i){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i,message:s}),this.name="WebAuthnUnknownError",this.originalError=i}}function R2({error:r,options:s}){var i,o,c;const{publicKey:u}=s;if(!u)throw Error("options was missing required publicKey property");if(r.name==="AbortError"){if(s.signal instanceof AbortSignal)return new st({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:r})}else if(r.name==="ConstraintError"){if(((i=u.authenticatorSelection)===null||i===void 0?void 0:i.requireResidentKey)===!0)return new st({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:r});if(s.mediation==="conditional"&&((o=u.authenticatorSelection)===null||o===void 0?void 0:o.userVerification)==="required")return new st({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:r});if(((c=u.authenticatorSelection)===null||c===void 0?void 0:c.userVerification)==="required")return new st({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:r})}else{if(r.name==="InvalidStateError")return new st({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:r});if(r.name==="NotAllowedError")return new st({message:r.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r});if(r.name==="NotSupportedError")return u.pubKeyCredParams.filter(g=>g.type==="public-key").length===0?new st({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:r}):new st({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:r});if(r.name==="SecurityError"){const h=window.location.hostname;if(_b(h)){if(u.rp.id!==h)return new st({message:`The RP ID "${u.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:r})}else return new st({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:r})}else if(r.name==="TypeError"){if(u.user.id.byteLength<1||u.user.id.byteLength>64)return new st({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:r})}else if(r.name==="UnknownError")return new st({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:r})}return new st({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r})}function O2({error:r,options:s}){const{publicKey:i}=s;if(!i)throw Error("options was missing required publicKey property");if(r.name==="AbortError"){if(s.signal instanceof AbortSignal)return new st({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:r})}else{if(r.name==="NotAllowedError")return new st({message:r.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r});if(r.name==="SecurityError"){const o=window.location.hostname;if(_b(o)){if(i.rpId!==o)return new st({message:`The RP ID "${i.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:r})}else return new st({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:r})}else if(r.name==="UnknownError")return new st({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:r})}return new st({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r})}class D2{createNewAbortSignal(){if(this.controller){const i=new Error("Cancelling existing WebAuthn API call for new one");i.name="AbortError",this.controller.abort(i)}const s=new AbortController;return this.controller=s,s.signal}cancelCeremony(){if(this.controller){const s=new Error("Manually cancelling existing WebAuthn API call");s.name="AbortError",this.controller.abort(s),this.controller=void 0}}}const M2=new D2;function U2(r){if(!r)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(r);const{challenge:s,user:i,excludeCredentials:o}=r,c=fr(r,["challenge","user","excludeCredentials"]),u=nr(s).buffer,h=Object.assign(Object.assign({},i),{id:nr(i.id).buffer}),g=Object.assign(Object.assign({},c),{challenge:u,user:h});if(o&&o.length>0){g.excludeCredentials=new Array(o.length);for(let m=0;m<o.length;m++){const p=o[m];g.excludeCredentials[m]=Object.assign(Object.assign({},p),{id:nr(p.id).buffer,type:p.type||"public-key",transports:p.transports})}}return g}function L2(r){if(!r)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(r);const{challenge:s,allowCredentials:i}=r,o=fr(r,["challenge","allowCredentials"]),c=nr(s).buffer,u=Object.assign(Object.assign({},o),{challenge:c});if(i&&i.length>0){u.allowCredentials=new Array(i.length);for(let h=0;h<i.length;h++){const g=i[h];u.allowCredentials[h]=Object.assign(Object.assign({},g),{id:nr(g.id).buffer,type:g.type||"public-key",transports:g.transports})}}return u}function B2(r){var s;if("toJSON"in r&&typeof r.toJSON=="function")return r.toJSON();const i=r;return{id:r.id,rawId:r.id,response:{attestationObject:sn(new Uint8Array(r.response.attestationObject)),clientDataJSON:sn(new Uint8Array(r.response.clientDataJSON))},type:"public-key",clientExtensionResults:r.getClientExtensionResults(),authenticatorAttachment:(s=i.authenticatorAttachment)!==null&&s!==void 0?s:void 0}}function z2(r){var s;if("toJSON"in r&&typeof r.toJSON=="function")return r.toJSON();const i=r,o=r.getClientExtensionResults(),c=r.response;return{id:r.id,rawId:r.id,response:{authenticatorData:sn(new Uint8Array(c.authenticatorData)),clientDataJSON:sn(new Uint8Array(c.clientDataJSON)),signature:sn(new Uint8Array(c.signature)),userHandle:c.userHandle?sn(new Uint8Array(c.userHandle)):void 0},type:"public-key",clientExtensionResults:o,authenticatorAttachment:(s=i.authenticatorAttachment)!==null&&s!==void 0?s:void 0}}function _b(r){return r==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(r)}function Ig(){var r,s;return!!(yt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((r=navigator==null?void 0:navigator.credentials)===null||r===void 0?void 0:r.create)=="function"&&typeof((s=navigator==null?void 0:navigator.credentials)===null||s===void 0?void 0:s.get)=="function")}async function q2(r){try{const s=await navigator.credentials.create(r);return s?s instanceof PublicKeyCredential?{data:s,error:null}:{data:null,error:new po("Browser returned unexpected credential type",s)}:{data:null,error:new po("Empty credential response",s)}}catch(s){return{data:null,error:R2({error:s,options:r})}}}async function I2(r){try{const s=await navigator.credentials.get(r);return s?s instanceof PublicKeyCredential?{data:s,error:null}:{data:null,error:new po("Browser returned unexpected credential type",s)}:{data:null,error:new po("Empty credential response",s)}}catch(s){return{data:null,error:O2({error:s,options:r})}}}const $2={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},P2={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function go(...r){const s=c=>c!==null&&typeof c=="object"&&!Array.isArray(c),i=c=>c instanceof ArrayBuffer||ArrayBuffer.isView(c),o={};for(const c of r)if(c)for(const u in c){const h=c[u];if(h!==void 0)if(Array.isArray(h))o[u]=h;else if(i(h))o[u]=h;else if(s(h)){const g=o[u];s(g)?o[u]=go(g,h):o[u]=go(h)}else o[u]=h}return o}function H2(r,s){return go($2,r,s||{})}function V2(r,s){return go(P2,r,s||{})}class G2{constructor(s){this.client=s,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(s){return this.client.mfa.enroll(Object.assign(Object.assign({},s),{factorType:"webauthn"}))}async _challenge({factorId:s,webauthn:i,friendlyName:o,signal:c},u){try{const{data:h,error:g}=await this.client.mfa.challenge({factorId:s,webauthn:i});if(!h)return{data:null,error:g};const m=c??M2.createNewAbortSignal();if(h.webauthn.type==="create"){const{user:p}=h.webauthn.credential_options.publicKey;p.name||(p.name=`${p.id}:${o}`),p.displayName||(p.displayName=p.name)}switch(h.webauthn.type){case"create":{const p=H2(h.webauthn.credential_options.publicKey,u==null?void 0:u.create),{data:b,error:w}=await q2({publicKey:p,signal:m});return b?{data:{factorId:s,challengeId:h.id,webauthn:{type:h.webauthn.type,credential_response:b}},error:null}:{data:null,error:w}}case"request":{const p=V2(h.webauthn.credential_options.publicKey,u==null?void 0:u.request),{data:b,error:w}=await I2(Object.assign(Object.assign({},h.webauthn.credential_options),{publicKey:p,signal:m}));return b?{data:{factorId:s,challengeId:h.id,webauthn:{type:h.webauthn.type,credential_response:b}},error:null}:{data:null,error:w}}}}catch(h){return ue(h)?{data:null,error:h}:{data:null,error:new tn("Unexpected error in challenge",h)}}}async _verify({challengeId:s,factorId:i,webauthn:o}){return this.client.mfa.verify({factorId:i,challengeId:s,webauthn:o})}async _authenticate({factorId:s,webauthn:{rpId:i=typeof window<"u"?window.location.hostname:void 0,rpOrigins:o=typeof window<"u"?[window.location.origin]:void 0,signal:c}={}},u){if(!i)return{data:null,error:new wi("rpId is required for WebAuthn authentication")};try{if(!Ig())return{data:null,error:new tn("Browser does not support WebAuthn",null)};const{data:h,error:g}=await this.challenge({factorId:s,webauthn:{rpId:i,rpOrigins:o},signal:c},{request:u});if(!h)return{data:null,error:g};const{webauthn:m}=h;return this._verify({factorId:s,challengeId:h.challengeId,webauthn:{type:m.type,rpId:i,rpOrigins:o,credential_response:m.credential_response}})}catch(h){return ue(h)?{data:null,error:h}:{data:null,error:new tn("Unexpected error in authenticate",h)}}}async _register({friendlyName:s,webauthn:{rpId:i=typeof window<"u"?window.location.hostname:void 0,rpOrigins:o=typeof window<"u"?[window.location.origin]:void 0,signal:c}={}},u){if(!i)return{data:null,error:new wi("rpId is required for WebAuthn registration")};try{if(!Ig())return{data:null,error:new tn("Browser does not support WebAuthn",null)};const{data:h,error:g}=await this._enroll({friendlyName:s});if(!h)return await this.client.mfa.listFactors().then(b=>{var w;return(w=b.data)===null||w===void 0?void 0:w.all.find(j=>j.factor_type==="webauthn"&&j.friendly_name===s&&j.status!=="unverified")}).then(b=>b?this.client.mfa.unenroll({factorId:b==null?void 0:b.id}):void 0),{data:null,error:g};const{data:m,error:p}=await this._challenge({factorId:h.id,friendlyName:h.friendly_name,webauthn:{rpId:i,rpOrigins:o},signal:c},{create:u});return m?this._verify({factorId:h.id,challengeId:m.challengeId,webauthn:{rpId:i,rpOrigins:o,type:m.webauthn.type,credential_response:m.webauthn.credential_response}}):{data:null,error:p}}catch(h){return ue(h)?{data:null,error:h}:{data:null,error:new tn("Unexpected error in register",h)}}}}k2();const Y2={url:Pj,storageKey:Hj,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Vj,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function $g(r,s,i){return await i()}const Zn={};class ji{get jwks(){var s,i;return(i=(s=Zn[this.storageKey])===null||s===void 0?void 0:s.jwks)!==null&&i!==void 0?i:{keys:[]}}set jwks(s){Zn[this.storageKey]=Object.assign(Object.assign({},Zn[this.storageKey]),{jwks:s})}get jwks_cached_at(){var s,i;return(i=(s=Zn[this.storageKey])===null||s===void 0?void 0:s.cachedAt)!==null&&i!==void 0?i:Number.MIN_SAFE_INTEGER}set jwks_cached_at(s){Zn[this.storageKey]=Object.assign(Object.assign({},Zn[this.storageKey]),{cachedAt:s})}constructor(s){var i,o,c;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const u=Object.assign(Object.assign({},Y2),s);if(this.storageKey=u.storageKey,this.instanceID=(i=ji.nextInstanceID[this.storageKey])!==null&&i!==void 0?i:0,ji.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!u.debug,typeof u.debug=="function"&&(this.logger=u.debug),this.instanceID>0&&yt()){const h=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(h),this.logDebugMessages&&console.trace(h)}if(this.persistSession=u.persistSession,this.autoRefreshToken=u.autoRefreshToken,this.admin=new _2({url:u.url,headers:u.headers,fetch:u.fetch}),this.url=u.url,this.headers=u.headers,this.fetch=wb(u.fetch),this.lock=u.lock||$g,this.detectSessionInUrl=u.detectSessionInUrl,this.flowType=u.flowType,this.hasCustomAuthorizationHeader=u.hasCustomAuthorizationHeader,this.throwOnError=u.throwOnError,u.lock?this.lock=u.lock:yt()&&(!((o=globalThis==null?void 0:globalThis.navigator)===null||o===void 0)&&o.locks)?this.lock=E2:this.lock=$g,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new G2(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this)},this.persistSession?(u.storage?this.storage=u.storage:yb()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=qg(this.memoryStorage)),u.userStorage&&(this.userStorage=u.userStorage)):(this.memoryStorage={},this.storage=qg(this.memoryStorage)),yt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(h){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",h)}(c=this.broadcastChannel)===null||c===void 0||c.addEventListener("message",async h=>{this._debug("received broadcast notification from other tab or client",h),await this._notifyAllSubscribers(h.data.event,h.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(s){if(this.throwOnError&&s&&s.error)throw s.error;return s}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${xb}) ${new Date().toISOString()}`}_debug(...s){return this.logDebugMessages&&this.logger(this._logPrefix(),...s),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var s;try{let i={},o="none";if(yt()&&(i=n2(window.location.href),this._isImplicitGrantCallback(i)?o="implicit":await this._isPKCECallback(i)&&(o="pkce")),yt()&&this.detectSessionInUrl&&o!=="none"){const{data:c,error:u}=await this._getSessionFromURL(i,o);if(u){if(this._debug("#_initialize()","error detecting session from URL",u),Jj(u)){const m=(s=u.details)===null||s===void 0?void 0:s.code;if(m==="identity_already_exists"||m==="identity_not_found"||m==="single_identity_not_deletable")return{error:u}}return await this._removeSession(),{error:u}}const{session:h,redirectType:g}=c;return this._debug("#_initialize()","detected session in URL",h,"redirect type",g),await this._saveSession(h),setTimeout(async()=>{g==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",h):await this._notifyAllSubscribers("SIGNED_IN",h)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(i){return ue(i)?this._returnResult({error:i}):this._returnResult({error:new tn("Unexpected error during initialization",i)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(s){var i,o,c;try{const u=await ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(o=(i=s==null?void 0:s.options)===null||i===void 0?void 0:i.data)!==null&&o!==void 0?o:{},gotrue_meta_security:{captcha_token:(c=s==null?void 0:s.options)===null||c===void 0?void 0:c.captchaToken}},xform:ua}),{data:h,error:g}=u;if(g||!h)return this._returnResult({data:{user:null,session:null},error:g});const m=h.session,p=h.user;return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",m)),this._returnResult({data:{user:p,session:m},error:null})}catch(u){if(ue(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}}async signUp(s){var i,o,c;try{let u;if("email"in s){const{email:b,password:w,options:j}=s;let _=null,v=null;this.flowType==="pkce"&&([_,v]=await Jn(this.storage,this.storageKey)),u=await ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:j==null?void 0:j.emailRedirectTo,body:{email:b,password:w,data:(i=j==null?void 0:j.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:j==null?void 0:j.captchaToken},code_challenge:_,code_challenge_method:v},xform:ua})}else if("phone"in s){const{phone:b,password:w,options:j}=s;u=await ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:b,password:w,data:(o=j==null?void 0:j.data)!==null&&o!==void 0?o:{},channel:(c=j==null?void 0:j.channel)!==null&&c!==void 0?c:"sms",gotrue_meta_security:{captcha_token:j==null?void 0:j.captchaToken}},xform:ua})}else throw new Zl("You must provide either an email or phone number and a password");const{data:h,error:g}=u;if(g||!h)return this._returnResult({data:{user:null,session:null},error:g});const m=h.session,p=h.user;return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",m)),this._returnResult({data:{user:p,session:m},error:null})}catch(u){if(ue(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}}async signInWithPassword(s){try{let i;if("email"in s){const{email:u,password:h,options:g}=s;i=await ge(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:u,password:h,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken}},xform:Bg})}else if("phone"in s){const{phone:u,password:h,options:g}=s;i=await ge(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:u,password:h,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken}},xform:Bg})}else throw new Zl("You must provide either an email or phone number and a password");const{data:o,error:c}=i;if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!o||!o.session||!o.user){const u=new Qn;return this._returnResult({data:{user:null,session:null},error:u})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:Object.assign({user:o.user,session:o.session},o.weak_password?{weakPassword:o.weak_password}:null),error:c})}catch(i){if(ue(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithOAuth(s){var i,o,c,u;return await this._handleProviderSignIn(s.provider,{redirectTo:(i=s.options)===null||i===void 0?void 0:i.redirectTo,scopes:(o=s.options)===null||o===void 0?void 0:o.scopes,queryParams:(c=s.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:(u=s.options)===null||u===void 0?void 0:u.skipBrowserRedirect})}async exchangeCodeForSession(s){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(s))}async signInWithWeb3(s){const{chain:i}=s;switch(i){case"ethereum":return await this.signInWithEthereum(s);case"solana":return await this.signInWithSolana(s);default:throw new Error(`@supabase/auth-js: Unsupported chain "${i}"`)}}async signInWithEthereum(s){var i,o,c,u,h,g,m,p,b,w,j;let _,v;if("message"in s)_=s.message,v=s.signature;else{const{chain:E,wallet:y,statement:k,options:R}=s;let A;if(yt())if(typeof y=="object")A=y;else{const M=window;if("ethereum"in M&&typeof M.ethereum=="object"&&"request"in M.ethereum&&typeof M.ethereum.request=="function")A=M.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!(R!=null&&R.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");A=y}const q=new URL((i=R==null?void 0:R.url)!==null&&i!==void 0?i:window.location.href),L=await A.request({method:"eth_requestAccounts"}).then(M=>M).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!L||L.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const Q=Nb(L[0]);let B=(o=R==null?void 0:R.signInWithEthereum)===null||o===void 0?void 0:o.chainId;if(!B){const M=await A.request({method:"eth_chainId"});B=C2(M)}const Z={domain:q.host,address:Q,statement:k,uri:q.href,version:"1",chainId:B,nonce:(c=R==null?void 0:R.signInWithEthereum)===null||c===void 0?void 0:c.nonce,issuedAt:(h=(u=R==null?void 0:R.signInWithEthereum)===null||u===void 0?void 0:u.issuedAt)!==null&&h!==void 0?h:new Date,expirationTime:(g=R==null?void 0:R.signInWithEthereum)===null||g===void 0?void 0:g.expirationTime,notBefore:(m=R==null?void 0:R.signInWithEthereum)===null||m===void 0?void 0:m.notBefore,requestId:(p=R==null?void 0:R.signInWithEthereum)===null||p===void 0?void 0:p.requestId,resources:(b=R==null?void 0:R.signInWithEthereum)===null||b===void 0?void 0:b.resources};_=T2(Z),v=await A.request({method:"personal_sign",params:[A2(_),Q]})}try{const{data:E,error:y}=await ge(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:_,signature:v},!((w=s.options)===null||w===void 0)&&w.captchaToken?{gotrue_meta_security:{captcha_token:(j=s.options)===null||j===void 0?void 0:j.captchaToken}}:null),xform:ua});if(y)throw y;if(!E||!E.session||!E.user){const k=new Qn;return this._returnResult({data:{user:null,session:null},error:k})}return E.session&&(await this._saveSession(E.session),await this._notifyAllSubscribers("SIGNED_IN",E.session)),this._returnResult({data:Object.assign({},E),error:y})}catch(E){if(ue(E))return this._returnResult({data:{user:null,session:null},error:E});throw E}}async signInWithSolana(s){var i,o,c,u,h,g,m,p,b,w,j,_;let v,E;if("message"in s)v=s.message,E=s.signature;else{const{chain:y,wallet:k,statement:R,options:A}=s;let q;if(yt())if(typeof k=="object")q=k;else{const Q=window;if("solana"in Q&&typeof Q.solana=="object"&&("signIn"in Q.solana&&typeof Q.solana.signIn=="function"||"signMessage"in Q.solana&&typeof Q.solana.signMessage=="function"))q=Q.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof k!="object"||!(A!=null&&A.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");q=k}const L=new URL((i=A==null?void 0:A.url)!==null&&i!==void 0?i:window.location.href);if("signIn"in q&&q.signIn){const Q=await q.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},A==null?void 0:A.signInWithSolana),{version:"1",domain:L.host,uri:L.href}),R?{statement:R}:null));let B;if(Array.isArray(Q)&&Q[0]&&typeof Q[0]=="object")B=Q[0];else if(Q&&typeof Q=="object"&&"signedMessage"in Q&&"signature"in Q)B=Q;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in B&&"signature"in B&&(typeof B.signedMessage=="string"||B.signedMessage instanceof Uint8Array)&&B.signature instanceof Uint8Array)v=typeof B.signedMessage=="string"?B.signedMessage:new TextDecoder().decode(B.signedMessage),E=B.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in q)||typeof q.signMessage!="function"||!("publicKey"in q)||typeof q!="object"||!q.publicKey||!("toBase58"in q.publicKey)||typeof q.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");v=[`${L.host} wants you to sign in with your Solana account:`,q.publicKey.toBase58(),...R?["",R,""]:[""],"Version: 1",`URI: ${L.href}`,`Issued At: ${(c=(o=A==null?void 0:A.signInWithSolana)===null||o===void 0?void 0:o.issuedAt)!==null&&c!==void 0?c:new Date().toISOString()}`,...!((u=A==null?void 0:A.signInWithSolana)===null||u===void 0)&&u.notBefore?[`Not Before: ${A.signInWithSolana.notBefore}`]:[],...!((h=A==null?void 0:A.signInWithSolana)===null||h===void 0)&&h.expirationTime?[`Expiration Time: ${A.signInWithSolana.expirationTime}`]:[],...!((g=A==null?void 0:A.signInWithSolana)===null||g===void 0)&&g.chainId?[`Chain ID: ${A.signInWithSolana.chainId}`]:[],...!((m=A==null?void 0:A.signInWithSolana)===null||m===void 0)&&m.nonce?[`Nonce: ${A.signInWithSolana.nonce}`]:[],...!((p=A==null?void 0:A.signInWithSolana)===null||p===void 0)&&p.requestId?[`Request ID: ${A.signInWithSolana.requestId}`]:[],...!((w=(b=A==null?void 0:A.signInWithSolana)===null||b===void 0?void 0:b.resources)===null||w===void 0)&&w.length?["Resources",...A.signInWithSolana.resources.map(B=>`- ${B}`)]:[]].join(`
`);const Q=await q.signMessage(new TextEncoder().encode(v),"utf8");if(!Q||!(Q instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");E=Q}}try{const{data:y,error:k}=await ge(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:v,signature:sn(E)},!((j=s.options)===null||j===void 0)&&j.captchaToken?{gotrue_meta_security:{captcha_token:(_=s.options)===null||_===void 0?void 0:_.captchaToken}}:null),xform:ua});if(k)throw k;if(!y||!y.session||!y.user){const R=new Qn;return this._returnResult({data:{user:null,session:null},error:R})}return y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),this._returnResult({data:Object.assign({},y),error:k})}catch(y){if(ue(y))return this._returnResult({data:{user:null,session:null},error:y});throw y}}async _exchangeCodeForSession(s){const i=await Xs(this.storage,`${this.storageKey}-code-verifier`),[o,c]=(i??"").split("/");try{const{data:u,error:h}=await ge(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:s,code_verifier:o},xform:ua});if(await Ns(this.storage,`${this.storageKey}-code-verifier`),h)throw h;if(!u||!u.session||!u.user){const g=new Qn;return this._returnResult({data:{user:null,session:null,redirectType:null},error:g})}return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),this._returnResult({data:Object.assign(Object.assign({},u),{redirectType:c??null}),error:h})}catch(u){if(ue(u))return this._returnResult({data:{user:null,session:null,redirectType:null},error:u});throw u}}async signInWithIdToken(s){try{const{options:i,provider:o,token:c,access_token:u,nonce:h}=s,g=await ge(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:o,id_token:c,access_token:u,nonce:h,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},xform:ua}),{data:m,error:p}=g;if(p)return this._returnResult({data:{user:null,session:null},error:p});if(!m||!m.session||!m.user){const b=new Qn;return this._returnResult({data:{user:null,session:null},error:b})}return m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",m.session)),this._returnResult({data:m,error:p})}catch(i){if(ue(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithOtp(s){var i,o,c,u,h;try{if("email"in s){const{email:g,options:m}=s;let p=null,b=null;this.flowType==="pkce"&&([p,b]=await Jn(this.storage,this.storageKey));const{error:w}=await ge(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:g,data:(i=m==null?void 0:m.data)!==null&&i!==void 0?i:{},create_user:(o=m==null?void 0:m.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:p,code_challenge_method:b},redirectTo:m==null?void 0:m.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:w})}if("phone"in s){const{phone:g,options:m}=s,{data:p,error:b}=await ge(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:g,data:(c=m==null?void 0:m.data)!==null&&c!==void 0?c:{},create_user:(u=m==null?void 0:m.shouldCreateUser)!==null&&u!==void 0?u:!0,gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},channel:(h=m==null?void 0:m.channel)!==null&&h!==void 0?h:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:p==null?void 0:p.message_id},error:b})}throw new Zl("You must provide either an email or phone number.")}catch(g){if(ue(g))return this._returnResult({data:{user:null,session:null},error:g});throw g}}async verifyOtp(s){var i,o;try{let c,u;"options"in s&&(c=(i=s.options)===null||i===void 0?void 0:i.redirectTo,u=(o=s.options)===null||o===void 0?void 0:o.captchaToken);const{data:h,error:g}=await ge(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},s),{gotrue_meta_security:{captcha_token:u}}),redirectTo:c,xform:ua});if(g)throw g;if(!h)throw new Error("An error occurred on token verification.");const m=h.session,p=h.user;return m!=null&&m.access_token&&(await this._saveSession(m),await this._notifyAllSubscribers(s.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",m)),this._returnResult({data:{user:p,session:m},error:null})}catch(c){if(ue(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async signInWithSSO(s){var i,o,c;try{let u=null,h=null;this.flowType==="pkce"&&([u,h]=await Jn(this.storage,this.storageKey));const g=await ge(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in s?{provider_id:s.providerId}:null),"domain"in s?{domain:s.domain}:null),{redirect_to:(o=(i=s.options)===null||i===void 0?void 0:i.redirectTo)!==null&&o!==void 0?o:void 0}),!((c=s==null?void 0:s.options)===null||c===void 0)&&c.captchaToken?{gotrue_meta_security:{captcha_token:s.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:u,code_challenge_method:h}),headers:this.headers,xform:w2});return this._returnResult(g)}catch(u){if(ue(u))return this._returnResult({data:null,error:u});throw u}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async s=>{const{data:{session:i},error:o}=s;if(o)throw o;if(!i)throw new ca;const{error:c}=await ge(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:i.access_token});return this._returnResult({data:{user:null,session:null},error:c})})}catch(s){if(ue(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async resend(s){try{const i=`${this.url}/resend`;if("email"in s){const{email:o,type:c,options:u}=s,{error:h}=await ge(this.fetch,"POST",i,{headers:this.headers,body:{email:o,type:c,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},redirectTo:u==null?void 0:u.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}else if("phone"in s){const{phone:o,type:c,options:u}=s,{data:h,error:g}=await ge(this.fetch,"POST",i,{headers:this.headers,body:{phone:o,type:c,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:h==null?void 0:h.message_id},error:g})}throw new Zl("You must provide either an email or phone number and a type")}catch(i){if(ue(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async i=>i))}async _acquireLock(s,i){this._debug("#_acquireLock","begin",s);try{if(this.lockAcquired){const o=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),c=(async()=>(await o,await i()))();return this.pendingInLock.push((async()=>{try{await c}catch{}})()),c}return await this.lock(`lock:${this.storageKey}`,s,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const o=i();for(this.pendingInLock.push((async()=>{try{await o}catch{}})()),await o;this.pendingInLock.length;){const c=[...this.pendingInLock];await Promise.all(c),this.pendingInLock.splice(0,c.length)}return await o}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(s){this._debug("#_useSession","begin");try{const i=await this.__loadSession();return await s(i)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let s=null;const i=await Xs(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",i),i!==null&&(this._isValidSession(i)?s=i:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!s)return{data:{session:null},error:null};const o=s.expires_at?s.expires_at*1e3-Date.now()<nd:!1;if(this._debug("#__loadSession()",`session has${o?"":" not"} expired`,"expires_at",s.expires_at),!o){if(this.userStorage){const h=await Xs(this.userStorage,this.storageKey+"-user");h!=null&&h.user?s.user=h.user:s.user=ld()}if(this.storage.isServer&&s.user&&!s.user.__isUserNotAvailableProxy){const h={value:this.suppressGetSessionWarning};s.user=x2(s.user,h),h.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:s},error:null}}const{data:c,error:u}=await this._callRefreshToken(s.refresh_token);return u?this._returnResult({data:{session:null},error:u}):this._returnResult({data:{session:c},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(s){return s?await this._getUser(s):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(s){try{return s?await ge(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:s,xform:ks}):await this._useSession(async i=>{var o,c,u;const{data:h,error:g}=i;if(g)throw g;return!(!((o=h.session)===null||o===void 0)&&o.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ca}:await ge(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(u=(c=h.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0,xform:ks})})}catch(i){if(ue(i))return Qj(i)&&(await this._removeSession(),await Ns(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:i});throw i}}async updateUser(s,i={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(s,i))}async _updateUser(s,i={}){try{return await this._useSession(async o=>{const{data:c,error:u}=o;if(u)throw u;if(!c.session)throw new ca;const h=c.session;let g=null,m=null;this.flowType==="pkce"&&s.email!=null&&([g,m]=await Jn(this.storage,this.storageKey));const{data:p,error:b}=await ge(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:i==null?void 0:i.emailRedirectTo,body:Object.assign(Object.assign({},s),{code_challenge:g,code_challenge_method:m}),jwt:h.access_token,xform:ks});if(b)throw b;return h.user=p.user,await this._saveSession(h),await this._notifyAllSubscribers("USER_UPDATED",h),this._returnResult({data:{user:h.user},error:null})})}catch(o){if(ue(o))return this._returnResult({data:{user:null},error:o});throw o}}async setSession(s){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(s))}async _setSession(s){try{if(!s.access_token||!s.refresh_token)throw new ca;const i=Date.now()/1e3;let o=i,c=!0,u=null;const{payload:h}=id(s.access_token);if(h.exp&&(o=h.exp,c=o<=i),c){const{data:g,error:m}=await this._callRefreshToken(s.refresh_token);if(m)return this._returnResult({data:{user:null,session:null},error:m});if(!g)return{data:{user:null,session:null},error:null};u=g}else{const{data:g,error:m}=await this._getUser(s.access_token);if(m)throw m;u={access_token:s.access_token,refresh_token:s.refresh_token,user:g.user,token_type:"bearer",expires_in:o-i,expires_at:o},await this._saveSession(u),await this._notifyAllSubscribers("SIGNED_IN",u)}return this._returnResult({data:{user:u.user,session:u},error:null})}catch(i){if(ue(i))return this._returnResult({data:{session:null,user:null},error:i});throw i}}async refreshSession(s){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(s))}async _refreshSession(s){try{return await this._useSession(async i=>{var o;if(!s){const{data:h,error:g}=i;if(g)throw g;s=(o=h.session)!==null&&o!==void 0?o:void 0}if(!(s!=null&&s.refresh_token))throw new ca;const{data:c,error:u}=await this._callRefreshToken(s.refresh_token);return u?this._returnResult({data:{user:null,session:null},error:u}):c?this._returnResult({data:{user:c.user,session:c},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(i){if(ue(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async _getSessionFromURL(s,i){try{if(!yt())throw new eo("No browser detected.");if(s.error||s.error_description||s.error_code)throw new eo(s.error_description||"Error in URL with unspecified error_description",{error:s.error||"unspecified_error",code:s.error_code||"unspecified_code"});switch(i){case"implicit":if(this.flowType==="pkce")throw new Tg("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new eo("Not a valid implicit grant flow url.");break;default:}if(i==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!s.code)throw new Tg("No code detected.");const{data:R,error:A}=await this._exchangeCodeForSession(s.code);if(A)throw A;const q=new URL(window.location.href);return q.searchParams.delete("code"),window.history.replaceState(window.history.state,"",q.toString()),{data:{session:R.session,redirectType:null},error:null}}const{provider_token:o,provider_refresh_token:c,access_token:u,refresh_token:h,expires_in:g,expires_at:m,token_type:p}=s;if(!u||!g||!h||!p)throw new eo("No session defined in URL");const b=Math.round(Date.now()/1e3),w=parseInt(g);let j=b+w;m&&(j=parseInt(m));const _=j-b;_*1e3<=tr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${_}s, should have been closer to ${w}s`);const v=j-w;b-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,j,b):b-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,j,b);const{data:E,error:y}=await this._getUser(u);if(y)throw y;const k={provider_token:o,provider_refresh_token:c,access_token:u,expires_in:w,expires_at:j,refresh_token:h,token_type:p,user:E.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:k,redirectType:s.type},error:null})}catch(o){if(ue(o))return this._returnResult({data:{session:null,redirectType:null},error:o});throw o}}_isImplicitGrantCallback(s){return!!(s.access_token||s.error_description)}async _isPKCECallback(s){const i=await Xs(this.storage,`${this.storageKey}-code-verifier`);return!!(s.code&&i)}async signOut(s={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(s))}async _signOut({scope:s}={scope:"global"}){return await this._useSession(async i=>{var o;const{data:c,error:u}=i;if(u)return this._returnResult({error:u});const h=(o=c.session)===null||o===void 0?void 0:o.access_token;if(h){const{error:g}=await this.admin.signOut(h,s);if(g&&!(Fj(g)&&(g.status===404||g.status===401||g.status===403)))return this._returnResult({error:g})}return s!=="others"&&(await this._removeSession(),await Ns(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(s){const i=s2(),o={id:i,callback:s,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",i),this.stateChangeEmitters.delete(i)}};return this._debug("#onAuthStateChange()","registered callback with id",i),this.stateChangeEmitters.set(i,o),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(i)})))(),{data:{subscription:o}}}async _emitInitialSession(s){return await this._useSession(async i=>{var o,c;try{const{data:{session:u},error:h}=i;if(h)throw h;await((o=this.stateChangeEmitters.get(s))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",u)),this._debug("INITIAL_SESSION","callback id",s,"session",u)}catch(u){await((c=this.stateChangeEmitters.get(s))===null||c===void 0?void 0:c.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",s,"error",u),console.error(u)}})}async resetPasswordForEmail(s,i={}){let o=null,c=null;this.flowType==="pkce"&&([o,c]=await Jn(this.storage,this.storageKey,!0));try{return await ge(this.fetch,"POST",`${this.url}/recover`,{body:{email:s,code_challenge:o,code_challenge_method:c,gotrue_meta_security:{captcha_token:i.captchaToken}},headers:this.headers,redirectTo:i.redirectTo})}catch(u){if(ue(u))return this._returnResult({data:null,error:u});throw u}}async getUserIdentities(){var s;try{const{data:i,error:o}=await this.getUser();if(o)throw o;return this._returnResult({data:{identities:(s=i.user.identities)!==null&&s!==void 0?s:[]},error:null})}catch(i){if(ue(i))return this._returnResult({data:null,error:i});throw i}}async linkIdentity(s){return"token"in s?this.linkIdentityIdToken(s):this.linkIdentityOAuth(s)}async linkIdentityOAuth(s){var i;try{const{data:o,error:c}=await this._useSession(async u=>{var h,g,m,p,b;const{data:w,error:j}=u;if(j)throw j;const _=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,s.provider,{redirectTo:(h=s.options)===null||h===void 0?void 0:h.redirectTo,scopes:(g=s.options)===null||g===void 0?void 0:g.scopes,queryParams:(m=s.options)===null||m===void 0?void 0:m.queryParams,skipBrowserRedirect:!0});return await ge(this.fetch,"GET",_,{headers:this.headers,jwt:(b=(p=w.session)===null||p===void 0?void 0:p.access_token)!==null&&b!==void 0?b:void 0})});if(c)throw c;return yt()&&!(!((i=s.options)===null||i===void 0)&&i.skipBrowserRedirect)&&window.location.assign(o==null?void 0:o.url),this._returnResult({data:{provider:s.provider,url:o==null?void 0:o.url},error:null})}catch(o){if(ue(o))return this._returnResult({data:{provider:s.provider,url:null},error:o});throw o}}async linkIdentityIdToken(s){return await this._useSession(async i=>{var o;try{const{error:c,data:{session:u}}=i;if(c)throw c;const{options:h,provider:g,token:m,access_token:p,nonce:b}=s,w=await ge(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(o=u==null?void 0:u.access_token)!==null&&o!==void 0?o:void 0,body:{provider:g,id_token:m,access_token:p,nonce:b,link_identity:!0,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:ua}),{data:j,error:_}=w;return _?this._returnResult({data:{user:null,session:null},error:_}):!j||!j.session||!j.user?this._returnResult({data:{user:null,session:null},error:new Qn}):(j.session&&(await this._saveSession(j.session),await this._notifyAllSubscribers("USER_UPDATED",j.session)),this._returnResult({data:j,error:_}))}catch(c){if(ue(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}})}async unlinkIdentity(s){try{return await this._useSession(async i=>{var o,c;const{data:u,error:h}=i;if(h)throw h;return await ge(this.fetch,"DELETE",`${this.url}/user/identities/${s.identity_id}`,{headers:this.headers,jwt:(c=(o=u.session)===null||o===void 0?void 0:o.access_token)!==null&&c!==void 0?c:void 0})})}catch(i){if(ue(i))return this._returnResult({data:null,error:i});throw i}}async _refreshAccessToken(s){const i=`#_refreshAccessToken(${s.substring(0,5)}...)`;this._debug(i,"begin");try{const o=Date.now();return await l2(async c=>(c>0&&await i2(200*Math.pow(2,c-1)),this._debug(i,"refreshing attempt",c),await ge(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:s},headers:this.headers,xform:ua})),(c,u)=>{const h=200*Math.pow(2,c);return u&&rd(u)&&Date.now()+h-o<tr})}catch(o){if(this._debug(i,"error",o),ue(o))return this._returnResult({data:{session:null,user:null},error:o});throw o}finally{this._debug(i,"end")}}_isValidSession(s){return typeof s=="object"&&s!==null&&"access_token"in s&&"refresh_token"in s&&"expires_at"in s}async _handleProviderSignIn(s,i){const o=await this._getUrlForProvider(`${this.url}/authorize`,s,{redirectTo:i.redirectTo,scopes:i.scopes,queryParams:i.queryParams});return this._debug("#_handleProviderSignIn()","provider",s,"options",i,"url",o),yt()&&!i.skipBrowserRedirect&&window.location.assign(o),{data:{provider:s,url:o},error:null}}async _recoverAndRefresh(){var s,i;const o="#_recoverAndRefresh()";this._debug(o,"begin");try{const c=await Xs(this.storage,this.storageKey);if(c&&this.userStorage){let h=await Xs(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!h&&(h={user:c.user},await ar(this.userStorage,this.storageKey+"-user",h)),c.user=(s=h==null?void 0:h.user)!==null&&s!==void 0?s:ld()}else if(c&&!c.user&&!c.user){const h=await Xs(this.storage,this.storageKey+"-user");h&&(h!=null&&h.user)?(c.user=h.user,await Ns(this.storage,this.storageKey+"-user"),await ar(this.storage,this.storageKey,c)):c.user=ld()}if(this._debug(o,"session from storage",c),!this._isValidSession(c)){this._debug(o,"session is not valid"),c!==null&&await this._removeSession();return}const u=((i=c.expires_at)!==null&&i!==void 0?i:1/0)*1e3-Date.now()<nd;if(this._debug(o,`session has${u?"":" not"} expired with margin of ${nd}s`),u){if(this.autoRefreshToken&&c.refresh_token){const{error:h}=await this._callRefreshToken(c.refresh_token);h&&(console.error(h),rd(h)||(this._debug(o,"refresh failed with a non-retryable error, removing the session",h),await this._removeSession()))}}else if(c.user&&c.user.__isUserNotAvailableProxy===!0)try{const{data:h,error:g}=await this._getUser(c.access_token);!g&&(h!=null&&h.user)?(c.user=h.user,await this._saveSession(c),await this._notifyAllSubscribers("SIGNED_IN",c)):this._debug(o,"could not get user data, skipping SIGNED_IN notification")}catch(h){console.error("Error getting user data:",h),this._debug(o,"error getting user data, skipping SIGNED_IN notification",h)}else await this._notifyAllSubscribers("SIGNED_IN",c)}catch(c){this._debug(o,"error",c),console.error(c);return}finally{this._debug(o,"end")}}async _callRefreshToken(s){var i,o;if(!s)throw new ca;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const c=`#_callRefreshToken(${s.substring(0,5)}...)`;this._debug(c,"begin");try{this.refreshingDeferred=new Ro;const{data:u,error:h}=await this._refreshAccessToken(s);if(h)throw h;if(!u.session)throw new ca;await this._saveSession(u.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",u.session);const g={data:u.session,error:null};return this.refreshingDeferred.resolve(g),g}catch(u){if(this._debug(c,"error",u),ue(u)){const h={data:null,error:u};return rd(u)||await this._removeSession(),(i=this.refreshingDeferred)===null||i===void 0||i.resolve(h),h}throw(o=this.refreshingDeferred)===null||o===void 0||o.reject(u),u}finally{this.refreshingDeferred=null,this._debug(c,"end")}}async _notifyAllSubscribers(s,i,o=!0){const c=`#_notifyAllSubscribers(${s})`;this._debug(c,"begin",i,`broadcast = ${o}`);try{this.broadcastChannel&&o&&this.broadcastChannel.postMessage({event:s,session:i});const u=[],h=Array.from(this.stateChangeEmitters.values()).map(async g=>{try{await g.callback(s,i)}catch(m){u.push(m)}});if(await Promise.all(h),u.length>0){for(let g=0;g<u.length;g+=1)console.error(u[g]);throw u[0]}}finally{this._debug(c,"end")}}async _saveSession(s){this._debug("#_saveSession()",s),this.suppressGetSessionWarning=!0;const i=Object.assign({},s),o=i.user&&i.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!o&&i.user&&await ar(this.userStorage,this.storageKey+"-user",{user:i.user});const c=Object.assign({},i);delete c.user;const u=Ug(c);await ar(this.storage,this.storageKey,u)}else{const c=Ug(i);await ar(this.storage,this.storageKey,c)}}async _removeSession(){this._debug("#_removeSession()"),await Ns(this.storage,this.storageKey),await Ns(this.storage,this.storageKey+"-code-verifier"),await Ns(this.storage,this.storageKey+"-user"),this.userStorage&&await Ns(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const s=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{s&&yt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",s)}catch(i){console.error("removing visibilitychange callback failed",i)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const s=setInterval(()=>this._autoRefreshTokenTick(),tr);this.autoRefreshTicker=s,s&&typeof s=="object"&&typeof s.unref=="function"?s.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(s),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const s=this.autoRefreshTicker;this.autoRefreshTicker=null,s&&clearInterval(s)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const s=Date.now();try{return await this._useSession(async i=>{const{data:{session:o}}=i;if(!o||!o.refresh_token||!o.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const c=Math.floor((o.expires_at*1e3-s)/tr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${c} ticks, a tick lasts ${tr}ms, refresh threshold is ${jd} ticks`),c<=jd&&await this._callRefreshToken(o.refresh_token)})}catch(i){console.error("Auto refresh tick failed with error. This is likely a transient error.",i)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(s){if(s.isAcquireTimeout||s instanceof jb)this._debug("auto refresh token tick lock not available");else throw s}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!yt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(s){console.error("_handleVisibilityChange",s)}}async _onVisibilityChanged(s){const i=`#_onVisibilityChanged(${s})`;this._debug(i,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),s||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(i,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(s,i,o){const c=[`provider=${encodeURIComponent(i)}`];if(o!=null&&o.redirectTo&&c.push(`redirect_to=${encodeURIComponent(o.redirectTo)}`),o!=null&&o.scopes&&c.push(`scopes=${encodeURIComponent(o.scopes)}`),this.flowType==="pkce"){const[u,h]=await Jn(this.storage,this.storageKey),g=new URLSearchParams({code_challenge:`${encodeURIComponent(u)}`,code_challenge_method:`${encodeURIComponent(h)}`});c.push(g.toString())}if(o!=null&&o.queryParams){const u=new URLSearchParams(o.queryParams);c.push(u.toString())}return o!=null&&o.skipBrowserRedirect&&c.push(`skip_http_redirect=${o.skipBrowserRedirect}`),`${s}?${c.join("&")}`}async _unenroll(s){try{return await this._useSession(async i=>{var o;const{data:c,error:u}=i;return u?this._returnResult({data:null,error:u}):await ge(this.fetch,"DELETE",`${this.url}/factors/${s.factorId}`,{headers:this.headers,jwt:(o=c==null?void 0:c.session)===null||o===void 0?void 0:o.access_token})})}catch(i){if(ue(i))return this._returnResult({data:null,error:i});throw i}}async _enroll(s){try{return await this._useSession(async i=>{var o,c;const{data:u,error:h}=i;if(h)return this._returnResult({data:null,error:h});const g=Object.assign({friendly_name:s.friendlyName,factor_type:s.factorType},s.factorType==="phone"?{phone:s.phone}:s.factorType==="totp"?{issuer:s.issuer}:{}),{data:m,error:p}=await ge(this.fetch,"POST",`${this.url}/factors`,{body:g,headers:this.headers,jwt:(o=u==null?void 0:u.session)===null||o===void 0?void 0:o.access_token});return p?this._returnResult({data:null,error:p}):(s.factorType==="totp"&&m.type==="totp"&&(!((c=m==null?void 0:m.totp)===null||c===void 0)&&c.qr_code)&&(m.totp.qr_code=`data:image/svg+xml;utf-8,${m.totp.qr_code}`),this._returnResult({data:m,error:null}))})}catch(i){if(ue(i))return this._returnResult({data:null,error:i});throw i}}async _verify(s){return this._acquireLock(-1,async()=>{try{return await this._useSession(async i=>{var o;const{data:c,error:u}=i;if(u)return this._returnResult({data:null,error:u});const h=Object.assign({challenge_id:s.challengeId},"webauthn"in s?{webauthn:Object.assign(Object.assign({},s.webauthn),{credential_response:s.webauthn.type==="create"?B2(s.webauthn.credential_response):z2(s.webauthn.credential_response)})}:{code:s.code}),{data:g,error:m}=await ge(this.fetch,"POST",`${this.url}/factors/${s.factorId}/verify`,{body:h,headers:this.headers,jwt:(o=c==null?void 0:c.session)===null||o===void 0?void 0:o.access_token});return m?this._returnResult({data:null,error:m}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+g.expires_in},g)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",g),this._returnResult({data:g,error:m}))})}catch(i){if(ue(i))return this._returnResult({data:null,error:i});throw i}})}async _challenge(s){return this._acquireLock(-1,async()=>{try{return await this._useSession(async i=>{var o;const{data:c,error:u}=i;if(u)return this._returnResult({data:null,error:u});const h=await ge(this.fetch,"POST",`${this.url}/factors/${s.factorId}/challenge`,{body:s,headers:this.headers,jwt:(o=c==null?void 0:c.session)===null||o===void 0?void 0:o.access_token});if(h.error)return h;const{data:g}=h;if(g.type!=="webauthn")return{data:g,error:null};switch(g.webauthn.type){case"create":return{data:Object.assign(Object.assign({},g),{webauthn:Object.assign(Object.assign({},g.webauthn),{credential_options:Object.assign(Object.assign({},g.webauthn.credential_options),{publicKey:U2(g.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},g),{webauthn:Object.assign(Object.assign({},g.webauthn),{credential_options:Object.assign(Object.assign({},g.webauthn.credential_options),{publicKey:L2(g.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(i){if(ue(i))return this._returnResult({data:null,error:i});throw i}})}async _challengeAndVerify(s){const{data:i,error:o}=await this._challenge({factorId:s.factorId});return o?this._returnResult({data:null,error:o}):await this._verify({factorId:s.factorId,challengeId:i.id,code:s.code})}async _listFactors(){var s;const{data:{user:i},error:o}=await this.getUser();if(o)return{data:null,error:o};const c={all:[],phone:[],totp:[],webauthn:[]};for(const u of(s=i==null?void 0:i.factors)!==null&&s!==void 0?s:[])c.all.push(u),u.status==="verified"&&c[u.factor_type].push(u);return{data:c,error:null}}async _getAuthenticatorAssuranceLevel(){var s,i;const{data:{session:o},error:c}=await this.getSession();if(c)return this._returnResult({data:null,error:c});if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:u}=id(o.access_token);let h=null;u.aal&&(h=u.aal);let g=h;((i=(s=o.user.factors)===null||s===void 0?void 0:s.filter(b=>b.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(g="aal2");const p=u.amr||[];return{data:{currentLevel:h,nextLevel:g,currentAuthenticationMethods:p},error:null}}async _getAuthorizationDetails(s){try{return await this._useSession(async i=>{const{data:{session:o},error:c}=i;return c?this._returnResult({data:null,error:c}):o?await ge(this.fetch,"GET",`${this.url}/oauth/authorizations/${s}`,{headers:this.headers,jwt:o.access_token,xform:u=>({data:u,error:null})}):this._returnResult({data:null,error:new ca})})}catch(i){if(ue(i))return this._returnResult({data:null,error:i});throw i}}async _approveAuthorization(s,i){try{return await this._useSession(async o=>{const{data:{session:c},error:u}=o;if(u)return this._returnResult({data:null,error:u});if(!c)return this._returnResult({data:null,error:new ca});const h=await ge(this.fetch,"POST",`${this.url}/oauth/authorizations/${s}/consent`,{headers:this.headers,jwt:c.access_token,body:{action:"approve"},xform:g=>({data:g,error:null})});return h.data&&h.data.redirect_url&&yt()&&!(i!=null&&i.skipBrowserRedirect)&&window.location.assign(h.data.redirect_url),h})}catch(o){if(ue(o))return this._returnResult({data:null,error:o});throw o}}async _denyAuthorization(s,i){try{return await this._useSession(async o=>{const{data:{session:c},error:u}=o;if(u)return this._returnResult({data:null,error:u});if(!c)return this._returnResult({data:null,error:new ca});const h=await ge(this.fetch,"POST",`${this.url}/oauth/authorizations/${s}/consent`,{headers:this.headers,jwt:c.access_token,body:{action:"deny"},xform:g=>({data:g,error:null})});return h.data&&h.data.redirect_url&&yt()&&!(i!=null&&i.skipBrowserRedirect)&&window.location.assign(h.data.redirect_url),h})}catch(o){if(ue(o))return this._returnResult({data:null,error:o});throw o}}async fetchJwk(s,i={keys:[]}){let o=i.keys.find(g=>g.kid===s);if(o)return o;const c=Date.now();if(o=this.jwks.keys.find(g=>g.kid===s),o&&this.jwks_cached_at+Yj>c)return o;const{data:u,error:h}=await ge(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(h)throw h;return!u.keys||u.keys.length===0||(this.jwks=u,this.jwks_cached_at=c,o=u.keys.find(g=>g.kid===s),!o)?null:o}async getClaims(s,i={}){try{let o=s;if(!o){const{data:_,error:v}=await this.getSession();if(v||!_.session)return this._returnResult({data:null,error:v});o=_.session.access_token}const{header:c,payload:u,signature:h,raw:{header:g,payload:m}}=id(o);i!=null&&i.allowExpired||m2(u.exp);const p=!c.alg||c.alg.startsWith("HS")||!c.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(c.kid,i!=null&&i.keys?{keys:i.keys}:i==null?void 0:i.jwks);if(!p){const{error:_}=await this.getUser(o);if(_)throw _;return{data:{claims:u,header:c,signature:h},error:null}}const b=p2(c.alg),w=await crypto.subtle.importKey("jwk",p,b,!0,["verify"]);if(!await crypto.subtle.verify(b,w,h,t2(`${g}.${m}`)))throw new Sd("Invalid JWT signature");return{data:{claims:u,header:c,signature:h},error:null}}catch(o){if(ue(o))return this._returnResult({data:null,error:o});throw o}}}ji.nextInstanceID={};const K2=ji;class F2 extends K2{constructor(s){super(s)}}class Q2{constructor(s,i,o){var c,u,h;this.supabaseUrl=s,this.supabaseKey=i;const g=$j(s);if(!i)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",g),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",g),this.storageUrl=new URL("storage/v1",g),this.functionsUrl=new URL("functions/v1",g);const m=`sb-${g.hostname.split(".")[0]}-auth-token`,p={db:Dj,realtime:Uj,auth:Object.assign(Object.assign({},Mj),{storageKey:m}),global:Oj},b=Ij(o??{},p);this.storageKey=(c=b.auth.storageKey)!==null&&c!==void 0?c:"",this.headers=(u=b.global.headers)!==null&&u!==void 0?u:{},b.accessToken?(this.accessToken=b.accessToken,this.auth=new Proxy({},{get:(w,j)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(j)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((h=b.auth)!==null&&h!==void 0?h:{},this.headers,b.global.fetch),this.fetch=zj(i,this._getAccessToken.bind(this),b.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},b.realtime)),this.rest=new Pw(new URL("rest/v1",g).href,{headers:this.headers,schema:b.db.schema,fetch:this.fetch}),this.storage=new Aj(this.storageUrl.href,this.headers,this.fetch,o==null?void 0:o.storage),b.accessToken||this._listenForAuthEvents()}get functions(){return new zw(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(s){return this.rest.from(s)}schema(s){return this.rest.schema(s)}rpc(s,i={},o={head:!1,get:!1,count:void 0}){return this.rest.rpc(s,i,o)}channel(s,i={config:{}}){return this.realtime.channel(s,i)}getChannels(){return this.realtime.getChannels()}removeChannel(s){return this.realtime.removeChannel(s)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var s,i;if(this.accessToken)return await this.accessToken();const{data:o}=await this.auth.getSession();return(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:s,persistSession:i,detectSessionInUrl:o,storage:c,userStorage:u,storageKey:h,flowType:g,lock:m,debug:p,throwOnError:b},w,j){const _={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new F2({url:this.authUrl.href,headers:Object.assign(Object.assign({},_),w),storageKey:h,autoRefreshToken:s,persistSession:i,detectSessionInUrl:o,storage:c,userStorage:u,flowType:g,lock:m,debug:p,throwOnError:b,fetch:j,hasCustomAuthorizationHeader:Object.keys(this.headers).some(v=>v.toLowerCase()==="authorization")})}_initRealtimeClient(s){return new rj(this.realtimeUrl.href,Object.assign(Object.assign({},s),{params:Object.assign({apikey:this.supabaseKey},s==null?void 0:s.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((i,o)=>{this._handleTokenChanged(i,"CLIENT",o==null?void 0:o.access_token)})}_handleTokenChanged(s,i,o){(s==="TOKEN_REFRESHED"||s==="SIGNED_IN")&&this.changedAccessToken!==o?(this.changedAccessToken=o,this.realtime.setAuth(o)):s==="SIGNED_OUT"&&(this.realtime.setAuth(),i=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const J2=(r,s,i)=>new Q2(r,s,i);function X2(){if(typeof window<"u"||typeof process>"u")return!1;const r=process.version;if(r==null)return!1;const s=r.match(/^v(\d+)\./);return s?parseInt(s[1],10)<=18:!1}X2()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Xd=void 0,W2=void 0;console.log("[Supabase config]",{supabaseUrl:JSON.stringify(Xd),anonKeyLength:0});console.error(" Missing Supabase env vars",{supabaseUrl:Xd,supabaseAnonKeyPresent:!1});const xe=J2(Xd,W2),Z2=["Bronze","Silver","Gold","Founding Member","Platinum"],eN=r=>r!=null&&Z2.includes(r),tN=r=>{if(!r)return;const s=new Date(r);if(!Number.isNaN(s.getTime()))return s.toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"})},aN=(r,s)=>{var h,g,m,p,b,w;if(!s.membership_tier&&!s.next_billing_date)return r;const i=eN(s.membership_tier)?s.membership_tier:((h=r.plan)==null?void 0:h.name)??r.package,o=tN(s.next_billing_date)??((g=r.plan)==null?void 0:g.renewalDate)??((p=(m=r.billing)==null?void 0:m.subscription)==null?void 0:p.renewalDate),c=r.plan?{...r.plan,name:i,renewalDate:o??r.plan.renewalDate}:{name:i,billingCycle:"Billed monthly",price:((b=r.plan)==null?void 0:b.price)??"$0/month",renewalDate:o??"",rating:((w=r.plan)==null?void 0:w.rating)??"A+"},u=r.billing?{...r.billing,subscription:{...r.billing.subscription,planName:i,renewalDate:o??r.billing.subscription.renewalDate}}:r.billing;return{...r,package:i,plan:c,billing:u}},sN=()=>{if(!(typeof window>"u"))return window.location.origin},Sb=S.createContext(void 0),nN=[{title:"SEO Blog Posts",description:"Professionally written articles to boost your site's search engine ranking.",icon:"NewspaperIcon",quota:2,used:1},{title:"Quarterly Website Review",description:"Our experts will review your site for SEO and conversion improvements.",icon:"ChartBarIcon",nextDate:"August 15, 2024"},{title:"Trust Badge & Network Listing",description:"Display your verified status and get listed in our trusted network.",icon:"ShieldCheckIcon",status:"Active"},{title:"Priority Support",description:"Get faster response times from our dedicated member support team.",icon:"ChatBubbleOvalLeftEllipsisIcon",isIncluded:!0}],cd=(r,s,i)=>{var h;const o=r.user.email??"",c=((h=r.user.user_metadata)==null?void 0:h.full_name)||o||"Member",u=i&&i.email===o?i:null;return{id:(u==null?void 0:u.id)??Date.now(),name:c,email:o,role:s,package:(u==null?void 0:u.package)??"Gold",profile:(u==null?void 0:u.profile)??{contactNumber:"",address:"",description:"",dbaName:"",yearsInBusiness:void 0,websiteUrl:"",logoUrl:"",serviceAreas:[],specialties:[],socialLinks:{}},usage:(u==null?void 0:u.usage)??{blogPostsUsed:1,blogPostsTotal:2},plan:(u==null?void 0:u.plan)??{name:"Gold",billingCycle:"Billed annually",price:"$229/month",renewalDate:"Mar 15, 2025",rating:"A+"},benefits:(u==null?void 0:u.benefits)??nN.map(g=>({...g})),billing:(u==null?void 0:u.billing)??{subscription:{planName:"Gold",price:"$229 / month",billingCycle:"Monthly",status:"Active",renewalDate:"Mar 15, 2025",startedAt:"Oct 1, 2024"},paymentMethod:{brand:"Visa",last4:"4242",expiry:"04 / 27",cardholder:c},invoices:[]},account:(u==null?void 0:u.account)??{ownerName:c,ownerEmail:o,role:s==="admin"?"Administrator":"Owner",companyName:""},notifications:(u==null?void 0:u.notifications)??{documentStatus:!0,verificationStatus:!0,requestUpdates:!0,benefitDelivery:!0,billingUpdates:!0,communityUpdates:!0,emailFrequency:"real-time"}}},nt=()=>{const r=S.useContext(Sb);if(!r)throw new Error("useAuth must be used within an AuthProvider");return r},rN=({children:r})=>{const[s,i]=S.useState({session:null,user:null,isAdmin:!1,loading:!0}),[o,c]=S.useState(null),{session:u,user:h,isAdmin:g,loading:m}=s;S.useEffect(()=>{let v=!0;(async()=>{const{data:k,error:R}=await xe.auth.getSession();if(v){if(R){console.error("Failed to fetch Supabase session",R),i({session:null,user:null,isAdmin:!1,loading:!1});return}i(A=>{var q;return{...A,session:k.session??null,user:((q=k.session)==null?void 0:q.user)??null,loading:!!k.session}})}})().catch(k=>{v&&(console.error("Unexpected Supabase session error",k),i({session:null,user:null,isAdmin:!1,loading:!1}))});const{data:y}=xe.auth.onAuthStateChange((k,R)=>{v&&i({session:R??null,user:(R==null?void 0:R.user)??null,isAdmin:!1,loading:R!==null})});return()=>{v=!1,y.subscription.unsubscribe()}},[]),S.useEffect(()=>{if(!u||!h){c(null),i(y=>({...y,isAdmin:!1,loading:!1}));return}let v=!0;return i(y=>({...y,loading:!0})),(async()=>{try{const{data:y,error:k}=await xe.from("admin_profiles").select("id").eq("id",h.id).eq("is_active",!0).maybeSingle();if(!v)return;k&&k.code!=="PGRST116"&&console.error("Failed to determine admin status",k);const R=!!y;let A=null;const{data:q,error:L}=await xe.from("profiles").select("membership_tier, next_billing_date").eq("id",h.id).maybeSingle();if(!v)return;L&&L.code!=="PGRST116"?console.error("Failed to load profile membership data",L):q&&(A=q),i(Q=>({...Q,isAdmin:R,loading:!1})),c(Q=>{const B=cd(u,R?"admin":"member",Q);return A?aN(B,A):B})}catch(y){if(!v)return;console.error("Unexpected error determining admin status",y),i(k=>({...k,isAdmin:!1,loading:!1})),c(k=>cd(u,"member",k))}})().catch(y=>{v&&(console.error("Unexpected admin status resolution error",y),i(k=>({...k,isAdmin:!1,loading:!1})),c(k=>cd(u,"member",k)))}),()=>{v=!1}},[u,h]);const p=S.useCallback(async v=>{const E=sN(),{error:y}=await xe.auth.signInWithOtp({email:v,options:{shouldCreateUser:!1,emailRedirectTo:E||`${window.location.origin}/member`}});if(y)throw new Error("We couldn't find a member with that email. Please use the email you joined with.")},[]),b=S.useCallback(async(v,E)=>{try{const{data:y,error:k}=await xe.auth.signInWithPassword({email:v,password:E});if(k||!y.user)return{success:!1,error:"Invalid email or password"};const{data:R,error:A}=await xe.from("admin_profiles").select("id, role, is_active").eq("id",y.user.id).eq("is_active",!0).maybeSingle();return A&&A.code!=="PGRST116"?(await xe.auth.signOut(),{success:!1,error:"Access verification failed"}):R?{success:!0}:(await xe.auth.signOut(),{success:!1,error:"Access denied. You do not have admin privileges."})}catch(y){return console.error("Admin login error:",y),{success:!1,error:"An unexpected error occurred"}}},[]),w=S.useCallback(async()=>{const{error:v}=await xe.auth.signOut();v&&console.error("Failed to sign out from Supabase",v),i({session:null,user:null,isAdmin:!1,loading:!1}),c(null)},[]),j=S.useCallback(v=>{c(v)},[]),_=S.useMemo(()=>({session:u,user:h,isAdmin:g,loading:m,isLoading:m,currentUser:o,login:p,adminLogin:b,logout:w,updateUser:j}),[u,h,g,m,o,p,b,w,j]);return a.jsx(Sb.Provider,{value:_,children:r})},Pg=({isOpen:r,onClose:s,onSubmit:i,title:o,message:c,confirmButtonText:u="Confirm",confirmButtonClass:h="bg-error text-white hover:bg-red-600"})=>r?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md p-8 relative",children:[a.jsx("button",{onClick:s,className:"absolute top-4 right-4 text-gray hover:text-charcoal",children:a.jsx(wt,{className:"w-7 h-7"})}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 mb-4",children:a.jsx("span",{className:"text-2xl",children:""})}),a.jsx("h2",{className:"font-sora text-2xl font-bold text-charcoal",children:o}),a.jsx("p",{className:"text-gray mt-2",children:c})]}),a.jsxs("div",{className:"mt-8 flex justify-center gap-4",children:[a.jsx("button",{onClick:s,className:"py-2.5 px-6 bg-gray-light text-charcoal font-semibold rounded-lg shadow-sm border border-gray-border hover:bg-gray-200 transition-colors",children:"Cancel"}),a.jsx("button",{onClick:i,className:`py-2.5 px-6 font-bold rounded-lg shadow-lg transition-colors ${h}`,children:u})]})]})}):null,_s={totalMembers:128,activeMembers:112,pendingVerifications:9,openRequests:14,mrr:12450,monthlyChurnRate:2.3},iN=[{id:5,businessName:"All-State Clean Up",tier:"Founding Member",badgeRating:"B+",issue:"Docs missing"},{id:12,businessName:"Evergreen Environmental",tier:"Silver",badgeRating:"A",issue:"Past due"},{id:23,businessName:"Coastal Recovery Inc.",tier:"Gold",badgeRating:"A+",issue:"High churn risk"},{id:8,businessName:"Pioneer Restoration",tier:"Bronze",badgeRating:"A",issue:"Docs missing"},{id:15,businessName:"Metro Damage Control",tier:"Silver",badgeRating:"A+",issue:"Past due"}],lN=[{id:"REQ-1023",date:"Jul 28",businessName:"Acme Restoration",requestType:"Badge support",status:"Open",assignedTo:"Admin"},{id:"REQ-1024",date:"Jul 27",businessName:"Summit Clean & Dry",requestType:"SEO post",status:"In progress",assignedTo:"C. Team"},{id:"REQ-1025",date:"Jul 27",businessName:"Pioneer Restoration",requestType:"Spotlight article",status:"Open",assignedTo:"Unassigned"},{id:"REQ-1026",date:"Jul 26",businessName:"Metro Damage Control",requestType:"SEO post",status:"In progress",assignedTo:"C. Team"},{id:"REQ-1027",date:"Jul 25",businessName:"Coastal Recovery Inc.",requestType:"Badge support",status:"Open",assignedTo:"Admin"}],Ed=[{id:"mem_001",businessName:"Acme Restoration",city:"Dallas, TX",email:"owner@acmerestoration.com",tier:"Gold",rating:"A+",status:"Active",renewalDate:"2025-03-15",joinDate:"2024-01-10",mrr:497,pendingDocs:0,openRequests:2,documents:[{name:"Contractor License",status:"Approved"},{name:"Liability Insurance",status:"Approved"}],activityLog:[{event:'Request "Badge Support" created',date:"2024-07-28"},{event:"Plan changed to Gold",date:"2024-03-15"}],billingInfo:{stripeId:"cus_abc123",lastPayment:"2024-07-15",plan:"Gold Monthly"},stats:{profileViews:132,badgeClicks:24},badge:{status:"ACTIVE",badgeLabel:"Gold  A+",imageLightUrl:"https://example.com/acme-gold-a-plus-light.svg",imageDarkUrl:"https://example.com/acme-gold-a-plus-dark.svg",profileUrl:"https://restorationexpertise.com/profile/acme-restoration"}},{id:"mem_002",businessName:"Summit Clean & Dry",city:"Denver, CO",email:"contact@summitclean.com",tier:"Silver",rating:"A",status:"Active",renewalDate:"2025-08-20",joinDate:"2024-02-20",mrr:229,pendingDocs:0,openRequests:1,documents:[{name:"Contractor License",status:"Approved"},{name:"Liability Insurance",status:"Approved"}],activityLog:[{event:'Request "SEO Post" created',date:"2024-07-27"},{event:"Initial verification approved",date:"2024-02-22"}],billingInfo:{stripeId:"cus_def456",lastPayment:"2024-07-20",plan:"Silver Monthly"},stats:{profileViews:88,badgeClicks:12},badge:{status:"ACTIVE",badgeLabel:"Silver  A",imageLightUrl:"https://restorationexpertise.com/wp-content/uploads/2025/11/restorationexpertise_badge_3d_layingtra_shadow.webp",profileUrl:"https://restorationexpertise.com/profile/summit-clean-and-dry"}},{id:"mem_003",businessName:"Coastal Recovery Inc.",city:"Miami, FL",email:"dispatch@coastalrecovery.net",tier:"Gold",rating:"A+",status:"Suspended",renewalDate:"2025-06-01",joinDate:"2023-06-01",mrr:497,pendingDocs:1,openRequests:0,documents:[{name:"Contractor License",status:"Approved"},{name:"Liability Insurance",status:"Rejected"}],activityLog:[{event:"Account suspended due to failed payment.",date:"2024-07-25"}],billingInfo:{stripeId:"cus_ghi789",lastPayment:"2024-06-01",plan:"Gold Monthly"},stats:{profileViews:250,badgeClicks:45},badge:{status:"REVOKED",badgeLabel:"Gold  A+",imageLightUrl:"https://restorationexpertise.com/wp-content/uploads/2025/11/restorationexpertise_badge_3d_layingtra_shadow.webp",profileUrl:"https://restorationexpertise.com/profile/coastal-recovery-inc"}},{id:"mem_004",businessName:"Pioneer Restoration",city:"Austin, TX",email:"info@pioneertx.com",tier:"Bronze",rating:"B+",status:"Active",renewalDate:"2025-09-12",joinDate:"2024-03-12",mrr:159,pendingDocs:0,openRequests:0,documents:[{name:"Contractor License",status:"Approved"},{name:"Liability Insurance",status:"Approved"}],activityLog:[{event:"Profile updated",date:"2024-06-15"}],billingInfo:{stripeId:"cus_jkl012",lastPayment:"2024-07-12",plan:"Bronze Monthly"},stats:{profileViews:45,badgeClicks:5}},{id:"mem_005",businessName:"Evergreen Environmental",city:"Seattle, WA",email:"support@evergreenenv.com",tier:"Founding Member",rating:"A+",status:"Pending",renewalDate:"2025-01-30",joinDate:"2024-07-28",mrr:199,pendingDocs:2,openRequests:0,documents:[{name:"Contractor License",status:"Pending"},{name:"Liability Insurance",status:"Pending"}],activityLog:[{event:"Account created",date:"2024-07-28"}],billingInfo:{stripeId:"cus_mno345",lastPayment:"2024-07-28",plan:"Founding Monthly"},stats:{profileViews:0,badgeClicks:0},badge:{status:"PENDING",badgeLabel:"Founding Member  A+",imageLightUrl:"https://restorationexpertise.com/wp-content/uploads/2025/11/restorationexpertise_badge_3d_layingtra_shadow.webp",profileUrl:"https://restorationexpertise.com/profile/evergreen-environmental"}},{id:"mem_006",businessName:"Midwest Damage Repair",city:"Chicago, IL",email:"claims@midwestdr.com",tier:"Silver",rating:"A",status:"Canceled",renewalDate:"2024-07-31",joinDate:"2023-08-01",mrr:0,pendingDocs:0,openRequests:0,documents:[{name:"Contractor License",status:"Approved"},{name:"Liability Insurance",status:"Approved"}],activityLog:[{event:"Subscription canceled by user",date:"2024-07-10"}],billingInfo:{stripeId:"cus_pqr678",lastPayment:"2024-06-30",plan:"Silver Monthly"},stats:{profileViews:60,badgeClicks:8}}],kd=new Date;kd.setDate(kd.getDate()+29);const Cd=new Date;Cd.setDate(Cd.getDate()-60);kd.toISOString().split("T")[0],Cd.toISOString().split("T")[0];const Ts=new Date,xo=new Date(Ts);xo.setDate(xo.getDate()-1);const Ad=new Date(Ts);Ad.setDate(Ad.getDate()-5);const bo=new Date(Ts);bo.setDate(bo.getDate()+7);const Td=new Date(Ts);Td.setDate(Td.getDate()+14);bo.toISOString().split("T")[0],xo.toISOString().split("T")[0],bo.toISOString().split("T")[0],`${xo.toISOString().split("T")[0]}`,Ts.toISOString().split("T")[0],Td.toISOString().split("T")[0],`${Ts.toISOString().split("T")[0]}`,Ad.toISOString().split("T")[0];const oN=Ts.getMonth(),cN=Ts.getFullYear();Math.round(2500/12),new Date(cN,oN,2).toISOString().split("T")[0];const uN=[{id:"admin_001",name:"Max Bauer",email:"max@restorationexpertise.com",role:"Superadmin",status:"Active",lastLogin:"2025-02-20 14:32"},{id:"admin_002",name:"Sarah Lee",email:"sarah@restorationexpertise.com",role:"Support",status:"Active",lastLogin:"2025-02-19 09:12"},{id:"admin_003",name:"Alex King",email:"alex@restorationexpertise.com",role:"Content",status:"Suspended",lastLogin:"2025-01-31 17:45"}],dN=[{id:1,title:"Get your legal basics in place",level:"Foundation",chapter:"Business Setup",status:"completed",effort:"Deep work",details:{why:"Ensures your business is compliant from day one, protecting you from legal risks.",checklist:[{text:"Register business name"},{text:"Apply for EIN"},{text:"Open a business bank account"}]}},{id:2,title:"Define your service area",level:"Foundation",chapter:"Business Setup",status:"in_progress",effort:"Quick win",details:{why:"Focuses your marketing efforts and operational logistics, preventing overextension.",checklist:[{text:"Map primary 30-mile radius"},{text:"List target zip codes"}]}},{id:3,title:"Set up core software stack",level:"Foundation",chapter:"Operations",status:"completed",effort:"Deep work",details:{why:"The right software streamlines everything from job management to billing, saving you time and reducing errors.",checklist:[{text:"Choose a CRM"},{text:"Set up accounting software (e.g., QuickBooks)"},{text:"Establish file sharing (e.g., Google Drive)"}]}},{id:4,title:"Create initial pricing structure",level:"Foundation",chapter:"Finance",status:"not_started",effort:"Deep work",details:{why:"Clear pricing ensures profitability and simplifies the quoting process for your team and customers.",checklist:[{text:"Research competitor rates"},{text:"Create a price book for common services"}]}},{id:5,title:"Establish your brand identity",level:"Foundation",chapter:"Marketing",status:"completed",effort:"Quick win",details:{why:"A strong brand builds recognition and trust with potential customers.",checklist:[{text:"Design a professional logo"},{text:"Define brand colors and fonts"}]}},{id:6,title:"Launch your professional website",level:"Acceleration",chapter:"Marketing",status:"in_progress",effort:"Deep work",details:{why:"Your website is your digital storefront. It's often the first impression a customer has of your business.",checklist:[{text:"Buy a domain name"},{text:"Build essential pages (Home, About, Services, Contact)"},{text:"Ensure it is mobile-friendly"}]}},{id:7,title:"Optimize your Google Business Profile",level:"Acceleration",chapter:"Marketing",status:"not_started",effort:"Quick win",details:{why:"This is the most important tool for local SEO, driving phone calls and website visits from nearby customers.",checklist:[{text:"Fill out all sections completely"},{text:"Add high-quality photos"},{text:"Get your first 5 reviews"}]}},{id:8,title:"Implement a customer review system",level:"Acceleration",chapter:"Marketing",status:"not_started",effort:"Quick win",details:{why:"Consistent, positive reviews build social proof and are a major factor in customer decision-making.",checklist:[{text:"Choose a review request tool"},{text:"Create an email/SMS template"}]}},{id:9,title:"Start your first local SEO campaign",level:"Acceleration",chapter:"Marketing",status:"not_started",effort:"Deep work",details:{why:"SEO is a long-term investment that generates high-quality leads for free once it's established.",checklist:[{text:"Identify 10 primary keywords"},{text:"Optimize website service pages"}]}},{id:10,title:"Hire your first technician",level:"Acceleration",chapter:"Team",status:"not_started",effort:"Deep work",details:{why:"Hiring allows you to scale your operations and step away from doing all the hands-on work yourself.",checklist:[{text:"Write a detailed job description"},{text:"Post on relevant job boards"},{text:"Develop an onboarding plan"}]}},{id:11,title:"Develop a franchise model",level:"Empire & Legacy",chapter:"Scaling",status:"not_started",effort:"Deep work",details:{why:"Franchising allows for rapid expansion using other people's capital and management.",checklist:[{text:"Create a Franchise Disclosure Document (FDD)"},{text:"Systemize all operations into a playbook"}]}},{id:12,title:"Build a leadership team",level:"Empire & Legacy",chapter:"Team",status:"not_started",effort:"Deep work",details:{why:"A strong leadership team enables you to work ON the business, not IN it.",checklist:[{text:"Define key roles (Ops Manager, Sales Manager)"},{text:"Create a compensation and incentive plan"}]}},{id:13,title:"Expand to a second location",level:"Empire & Legacy",chapter:"Scaling",status:"not_started",effort:"Deep work",details:{why:"Expansion into new markets is a direct path to significant revenue growth.",checklist:[{text:"Conduct market research on a new territory"},{text:"Develop a launch plan and budget"}]}}];new Date(Date.now()-2880*60*1e3).toISOString(),new Date(Date.now()-7200*60*1e3).toISOString(),new Date(Date.now()-3600*1e3).toISOString();const hN=(r=1024)=>{const[s,i]=S.useState(window.innerWidth<r);return S.useEffect(()=>{const o=()=>{i(window.innerWidth<r)};return window.addEventListener("resize",o),()=>window.removeEventListener("resize",o)},[r]),s},vo=({children:r,className:s="",onClick:i})=>a.jsx("div",{onClick:i,className:`bg-[var(--bg-card)] p-6 rounded-2xl shadow-lg border border-[var(--border-subtle)] ${s} ${i?"cursor-pointer transition-transform duration-200 hover:-translatey-1":""}`,children:r}),Hg=99,Vg=({completedCount:r})=>{const s=Math.round(r/Hg*100),[i,o]=S.useState(0);S.useEffect(()=>{const u=setTimeout(()=>o(s),100);return()=>clearTimeout(u)},[s]);const c=()=>s===100?"Blueprint Master":s>=75?"Restoration Leader":s>=50?"Trusted Operator":s>=25?"Emerging Pro":"Getting Organized";return a.jsxs(vo,{children:[a.jsxs("div",{className:"flex flex-col md:flex-row justify-between md:items-center gap-4",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"font-playfair text-xl font-bold text-[var(--text-main)]",children:"Your Progress"}),a.jsxs("p",{className:"text-lg text-[var(--text-main)]",children:[a.jsxs("span",{className:"font-bold",children:[r," of ",Hg]})," steps completed  ",s,"%"]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-sm font-semibold text-[var(--text-muted)]",children:"Mastery Level"}),a.jsx("p",{className:"font-bold text-lg text-[var(--accent-dark)]",children:c()})]})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-4 mt-4",children:a.jsx("div",{className:"bg-[var(--accent)] h-4 rounded-full transition-all duration-1000 ease-out",style:{width:`${i}%`}})}),a.jsx("div",{className:"mt-4 flex flex-wrap items-center gap-x-4 gap-y-2 text-sm",children:a.jsxs("p",{children:["This week: ",a.jsx("span",{className:"font-bold",children:"3"})," steps completed (demo)"]})})]})},Gg=({groupedSteps:r,steps:s,selectedStepId:i,onSelectStep:o})=>{const[c,u]=S.useState({Foundation:!0}),h=p=>{u(b=>({...b,[p]:!b[p]}))},g={not_started:"bg-gray-200 text-gray-dark",in_progress:"bg-info/20 text-blue-800",completed:"bg-success/20 text-green-800"},m={"Quick win":"border-gold text-gold-dark","Deep work":"border-charcoal text-charcoal"};return a.jsx("div",{className:"space-y-6",children:Object.entries(r).map(([p,b])=>{const w=s.filter(v=>v.level===p),j=w.filter(v=>v.status==="completed").length,_=w.length>0?j/w.length*100:0;return a.jsxs(vo,{className:"p-0 overflow-hidden",children:[a.jsxs("button",{onClick:()=>h(p),className:"w-full p-4 flex justify-between items-center text-left",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-playfair text-xl font-bold text-[var(--text-main)]",children:p}),a.jsxs("p",{className:"text-sm text-[var(--text-muted)]",children:[j," of ",w.length," steps completed"]})]}),a.jsx(nn,{className:`w-6 h-6 text-[var(--text-muted)] transition-transform ${c[p]?"rotate-180":""}`})]}),c[p]&&a.jsxs("div",{className:"px-4 pb-4 animate-fade-in",children:[a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1.5 mb-4",children:a.jsx("div",{className:"bg-[var(--accent)] h-1.5 rounded-full",style:{width:`${_}%`}})}),Object.entries(b).map(([v,E])=>a.jsxs("div",{className:"mb-4",children:[a.jsx("h4",{className:"font-bold text-sm uppercase text-[var(--text-muted)] tracking-wider pb-1 mb-2 border-b border-[var(--border-subtle)]",children:v}),a.jsx("div",{className:"space-y-2",children:E.map(y=>a.jsxs("div",{onClick:()=>o(y.id),className:`p-3 rounded-lg cursor-pointer transition-all duration-200 flex items-start gap-3 ${i===y.id?"bg-[var(--accent-bg-subtle)] shadow-inner":"hover:bg-[var(--bg-subtle)]"}`,children:[a.jsx("div",{className:`w-6 h-6 rounded-full shrink-0 flex items-center justify-center font-bold text-xs mt-0.5 ${y.status==="completed"?"bg-[var(--accent)] text-[var(--accent-text)]":"bg-gray-200 text-gray-dark"}`,children:y.status==="completed"?a.jsx(bi,{className:"w-4 h-4"}):y.id}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-[var(--text-main)] leading-tight",children:y.title}),a.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[a.jsx("span",{className:`px-2 py-0.5 text-[10px] font-bold rounded-full ${g[y.status]}`,children:y.status.replace("_"," ")}),a.jsx("span",{className:`px-2 py-0.5 text-[10px] font-bold rounded-full border ${m[y.effort]}`,children:y.effort})]})]})]},y.id))})]},v))]})]},p)})})},Yg=({step:r,onUpdateStep:s})=>{const[i,o]=S.useState(""),[c,u]=S.useState({});if(S.useEffect(()=>{if(r){o("");const g=r.details.checklist.reduce((m,p)=>({...m,[p.text]:!1}),{});u(g)}},[r]),!r)return a.jsx(vo,{className:"flex items-center justify-center min-h-[400px]",children:a.jsxs("div",{className:"text-center",children:[a.jsx($d,{className:"w-16 h-16 mx-auto text-gray-300"}),a.jsx("h3",{className:"mt-2 text-xl font-bold text-[var(--text-main)]",children:"Select a step"}),a.jsx("p",{className:"mt-1 text-[var(--text-muted)]",children:"Choose a step from the list to see details and track your progress."})]})});const h=["not_started","in_progress","completed"];return a.jsxs(vo,{children:[a.jsxs("p",{className:"text-sm font-bold text-[var(--accent-dark)]",children:[r.level," / ",r.chapter]}),a.jsxs("h2",{className:"font-playfair text-3xl font-bold text-[var(--text-main)] mt-1",children:["Step ",r.id,": ",r.title]}),a.jsxs("div",{className:"mt-6",children:[a.jsx("p",{className:"text-sm font-semibold text-[var(--text-muted)] mb-2",children:"Set status:"}),a.jsx("div",{className:"flex bg-[var(--bg-subtle)] p-1 rounded-lg",children:h.map(g=>a.jsx("button",{onClick:()=>s(r.id,g),className:`flex-1 py-2 text-sm font-bold rounded-md transition-all ${r.status===g?"bg-[var(--accent)] text-[var(--accent-text)] shadow-sm":"text-[var(--text-muted)] hover:bg-white/50"}`,children:g.replace("_"," ")},g))})]}),a.jsxs("div",{className:"mt-6 pt-6 border-t border-[var(--border-subtle)]",children:[a.jsx("h4",{className:"font-bold text-[var(--text-main)] mb-2",children:"Why this matters"}),a.jsx("p",{className:"text-[var(--text-muted)] text-sm",children:r.details.why})]}),a.jsxs("div",{className:"mt-6 pt-6 border-t border-[var(--border-subtle)]",children:[a.jsx("h4",{className:"font-bold text-[var(--text-main)] mb-2",children:"Checklist"}),a.jsx("div",{className:"space-y-2",children:r.details.checklist.map(g=>a.jsxs("label",{className:"flex items-center gap-3 p-2 rounded-md hover:bg-[var(--bg-subtle)]",children:[a.jsx("input",{type:"checkbox",checked:c[g.text]||!1,onChange:m=>u({...c,[g.text]:m.target.checked}),className:"h-5 w-5 rounded border-gray-300 text-[var(--accent)] focus:ring-[var(--accent)]"}),a.jsx("span",{className:`text-sm ${c[g.text]?"line-through text-[var(--text-muted)]":"text-[var(--text-main)]"}`,children:g.text})]},g.text))})]}),a.jsxs("div",{className:"mt-6 pt-6 border-t border-[var(--border-subtle)]",children:[a.jsx("h4",{className:"font-bold text-[var(--text-main)] mb-2",children:"My notes for this step"}),a.jsx("textarea",{value:i,onChange:g=>o(g.target.value),rows:4,className:"w-full p-2 border border-[var(--border-subtle)] rounded-lg bg-[var(--bg-input)] focus:ring-[var(--accent)] focus:border-[var(--accent)]",placeholder:"Add any personal notes, reminders, or links here..."}),a.jsx("div",{className:"text-right mt-2",children:a.jsx("button",{className:"py-2 px-4 bg-[var(--accent)] text-[var(--accent-text)] font-bold text-sm rounded-lg shadow-sm",children:"Save Note"})})]})]})},fN=({isOpen:r,onClose:s,children:i})=>(S.useEffect(()=>(r?document.body.style.overflow="hidden":document.body.style.overflow="auto",()=>{document.body.style.overflow="auto"}),[r]),r?a.jsxs("div",{className:"fixed inset-0 z-50 flex flex-col items-end",role:"dialog","aria-modal":"true",children:[a.jsx("div",{className:"absolute inset-0 bg-[var(--bg-overlay)] animate-fade-in",onClick:s}),a.jsxs("div",{className:"relative w-full bg-[var(--bg-main)] rounded-t-2xl shadow-2xl h-[85vh] flex flex-col animate-slide-up-drawer",children:[a.jsxs("div",{className:"shrink-0 p-4 border-b border-[var(--border-subtle)] bg-[var(--bg-card)] rounded-t-2xl",children:[a.jsx("div",{className:"w-12 h-1.5 bg-[var(--border-subtle)] rounded-full mx-auto mb-2"}),a.jsx("button",{onClick:s,className:"absolute top-3 right-3 p-1 text-[var(--text-muted)] hover:text-[var(--text-main)]",children:a.jsx(wt,{className:"w-7 h-7"})})]}),a.jsx("div",{className:"flex-grow overflow-y-auto p-4",children:i})]})]}):null),mN=({onNavigate:r})=>{const s=hN(),[i,o]=S.useState(dN),[c,u]=S.useState(null),h=S.useMemo(()=>i.filter(_=>_.status==="completed").length,[i]),g=S.useMemo(()=>i.reduce((_,v)=>(_[v.level]||(_[v.level]={}),_[v.level][v.chapter]||(_[v.level][v.chapter]=[]),_[v.level][v.chapter].push(v),_),{}),[i]),m=(_,v)=>{o(E=>E.map(y=>y.id===_?{...y,status:v}:y))},p=_=>{u(_)},b=()=>{u(null)},w=S.useMemo(()=>i.find(_=>_.id===c)||null,[i,c]),j=s&&c!==null;return a.jsxs("div",{className:"animate-fade-in",children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("h1",{className:"font-playfair text-4xl font-bold text-[var(--text-main)]",children:"99 Steps Blueprint"}),a.jsx("p",{className:"mt-2 text-lg text-[var(--text-muted)]",children:"Your step-by-step roadmap to building a dominant restoration business."})]}),s?a.jsxs(a.Fragment,{children:[a.jsx(Gg,{groupedSteps:g,steps:i,selectedStepId:c,onSelectStep:p}),a.jsx("div",{className:"mt-8",children:a.jsx(Vg,{completedCount:h})}),a.jsx(fN,{isOpen:j,onClose:b,children:a.jsx(Yg,{step:w,onUpdateStep:m})})]}):a.jsxs(a.Fragment,{children:[a.jsx(Vg,{completedCount:h}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 items-start mt-8",children:[a.jsx("div",{className:"lg:col-span-1",children:a.jsx(Gg,{groupedSteps:g,steps:i,selectedStepId:c,onSelectStep:p})}),a.jsx("div",{className:"lg:col-span-2 sticky top-8",children:a.jsx(Yg,{step:w,onUpdateStep:m})})]})]})]})},Eb=S.createContext(null),pN=()=>{if(typeof window<"u"){const r=window.localStorage.getItem("re_theme");if(r==="light"||r==="dark")return r;if(window.matchMedia("(prefers-color-scheme: dark)").matches)return"dark"}return"light"},gN=({children:r})=>{const[s,i]=S.useState(pN);S.useEffect(()=>{document.documentElement.setAttribute("data-theme",s),localStorage.setItem("re_theme",s)},[s]);const o=S.useMemo(()=>({theme:s,setTheme:i}),[s]);return a.jsx(Eb.Provider,{value:o,children:r})},xN=()=>{const r=S.useContext(Eb);if(!r)throw new Error("useTheme must be used within a ThemeProvider");return r},yo=({variant:r})=>{const{theme:s,setTheme:i}=xN(),o=()=>{i(s==="light"?"dark":"light")};return r==="icon"?a.jsx("button",{onClick:o,className:"p-2 rounded-full text-[var(--text-muted)] hover:bg-[var(--bg-subtle)]","aria-label":s==="light"?"Switch to dark mode":"Switch to light mode",children:s==="light"?a.jsx(fg,{className:"w-5 h-5"}):a.jsx(hg,{className:"w-5 h-5"})}):r==="row"?a.jsxs("div",{className:"px-4",children:[a.jsx("p",{className:"text-xs font-semibold text-[var(--text-muted)] mb-2",children:"Appearance"}),a.jsxs("div",{className:"flex bg-[var(--bg-subtle)] p-1 rounded-lg",children:[a.jsxs("button",{onClick:()=>i("light"),className:`flex-1 py-1.5 text-sm font-semibold rounded-md flex items-center justify-center gap-2 transition-colors ${s==="light"?"bg-[var(--bg-card)] text-[var(--text-main)] shadow-sm":"text-[var(--text-muted)]"}`,children:[a.jsx(hg,{className:"w-4 h-4"})," Light"]}),a.jsxs("button",{onClick:()=>i("dark"),className:`flex-1 py-1.5 text-sm font-semibold rounded-md flex items-center justify-center gap-2 transition-colors ${s==="dark"?"bg-[var(--bg-card)] text-[var(--text-main)] shadow-sm":"text-[var(--text-muted)]"}`,children:[a.jsx(fg,{className:"w-4 h-4"})," Dark"]})]})]}):null},Na=({icon:r,label:s,isActive:i,onClick:o,attention:c})=>a.jsxs("button",{onClick:o,className:`flex items-center w-full px-4 py-3 rounded-lg text-left transition-colors duration-200 relative ${i?"bg-[var(--accent-bg-subtle)] text-[var(--accent-dark)] font-bold":"text-[var(--text-muted)] hover:bg-[var(--bg-subtle)] hover:text-[var(--text-main)]"}`,children:[i&&a.jsx("div",{className:"absolute left-0 top-0 h-full w-1 bg-[var(--accent)] rounded-r-full"}),a.jsx("div",{className:`ml-2 ${i?"text-[var(--accent-dark)]":""}`,children:r}),a.jsx("span",{className:"ml-3",children:s}),c&&a.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 w-2 h-2 bg-error rounded-full animate-pulse"})]}),be=({children:r,className:s="",onClick:i})=>a.jsx("div",{onClick:i,className:`bg-[var(--bg-card)] p-6 rounded-2xl shadow-lg border border-[var(--border-subtle)] ${s} ${i?"cursor-pointer transition-transform duration-200 hover:-translate-y-1":""}`,children:r}),bN={NewspaperIcon:ko,MagnifyingGlassIcon:hr,ShieldCheckIcon:_t,ArrowDownTrayIcon:Qa,ArrowTrendingUpIcon:Cw,StarIcon:Co,CreditCardIcon:ir,CheckCircleIcon:na,ClockIcon:Si,ExclamationTriangleIcon:Sa,ChartBarIcon:Sx,ChatBubbleOvalLeftEllipsisIcon:Ei,ClipboardIcon:Ea,LightBulbIcon:Ao,BriefcaseIcon:Eo,KeyIcon:Tx},to=r=>{if(!r)return null;if(typeof r=="object")return r;if(typeof r=="string")try{return JSON.parse(r)}catch(s){return console.warn("Failed to parse JSON payload",s),null}return null},As=r=>{if(!r)return null;const s=new Date(r);return Number.isNaN(s.getTime())?r:s.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},oo=r=>{if(!r)return null;const s=new Date(r);return Number.isNaN(s.getTime())?r:s.toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit"})},ao=r=>{if(!r)return"Just now";const s=new Date(r);if(Number.isNaN(s.getTime()))return r;const i=Date.now()-s.getTime(),o=Math.floor(i/(1e3*60));if(o<1)return"Just now";if(o<60)return`${o} minute${o===1?"":"s"} ago`;const c=Math.floor(o/60);if(c<24)return`${c} hour${c===1?"":"s"} ago`;const u=Math.floor(c/24);return u<7?`${u} day${u===1?"":"s"} ago`:As(r)??r},vN=r=>{if(r==null)return null;if(typeof r=="number")return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(r);const s=Number(r);return Number.isNaN(s)?r:new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(s)},Wd=r=>{if(r==null)return null;if(typeof r=="string"){const c=Number(r);return Number.isNaN(c)?r:Wd(c)}if(r===0)return"0 B";const s=["B","KB","MB","GB"],i=Math.min(Math.floor(Math.log(r)/Math.log(1024)),s.length-1),o=r/1024**i;return`${o.toFixed(o>=10?0:1)} ${s[i]}`},Kg=r=>!!(r&&typeof r=="object"&&"code"in r),Fg={business_license:"Business License",license:"Business License",liability_insurance:"Proof of Liability Insurance",insurance:"Proof of Liability Insurance",w9:"W-9 Form",other:"Supporting Document"},yN=r=>{if(!r)return"Document";const s=r.toLowerCase();return Fg[s]?Fg[s]:r.replace(/[-_]+/g," ").replace(/\b\w/g,i=>i.toUpperCase())},Qg=r=>{const s=r==null?void 0:r.toLowerCase();return s?s.includes("active")||s.includes("verified")?"active":s.includes("action")||s.includes("needs")?"actionRequired":"pending":"pending"},wN=r=>{const s=r==null?void 0:r.toLowerCase();return s?s.includes("approve")||s.includes("valid")?"approved":s.includes("review")||s.includes("pending")?"underReview":s.includes("reject")||s.includes("declin")?"rejected":s.includes("replace")||s.includes("expire")||s.includes("update")?"needsReplacement":"notUploaded":"notUploaded"},kb=r=>{const s=(r==null?void 0:r.toLowerCase())??"";return s.includes("progress")?"in_progress":s.includes("complete")||s.includes("done")?"completed":s.includes("cancel")?"canceled":"open"},Cb=r=>{const s=(r==null?void 0:r.toLowerCase())??"";return s.includes("high")?"high":s.includes("low")?"low":"medium"},Es={open:"Open",in_progress:"In progress",completed:"Completed",canceled:"Canceled"},wo={low:"Low",medium:"Medium",high:"High"},jN=r=>{const s=kb(r);return Es[s]},di=r=>r?bN[r]??_t:_t,jo=r=>{if(!r)return Ea;const s=r.toLowerCase();return s.includes("blog")?ko:s.includes("spotlight")?Co:s.includes("review")?hr:s.includes("badge")?_t:s.includes("consult")?Ei:Ea},NN=r=>{const s=r.uploaded_at??r.created_at??r.updated_at??null,i=r.doc_type??r.document_type??null,o=r.document_name??yN(i??void 0),c=r.file_url??null,u=r.file_name??(c?c.split("/").pop()??null:null);return{id:r.id,name:o,docType:i,docTypeLabel:o,status:wN(r.status),uploadDate:As(s),adminNote:r.admin_note??null,fileName:u??o,fileSize:Wd(r.file_size),uploadTimestamp:oo(s),rawTimestamp:s,fileUrl:c,storagePath:c,createdAt:r.created_at??null,updatedAt:r.updated_at??null,statusText:r.status??null}},_N=r=>{const s=Cb(r.priority);return{id:String(r.id),service:r.request_type??r.service??"Service Request",title:r.title??"Untitled Request",status:jN(r.status),createdAt:r.created_at??r.updated_at??null,priority:wo[s]}},SN=r=>({id:String(r.id),profileId:r.profile_id??"",requestType:r.request_type??r.service??"Service Request",title:r.title??"Untitled Request",description:r.description??null,priority:Cb(r.priority),status:kb(r.status),adminNotes:r.admin_notes??null,assignedAdminId:r.assigned_admin_id!==null&&r.assigned_admin_id!==void 0?String(r.assigned_admin_id):null,createdAt:r.created_at??new Date().toISOString(),updatedAt:r.updated_at??null}),EN=r=>({id:String(r.id),serviceRequestId:String(r.service_request_id??""),actorUserId:r.actor_user_id??null,action:r.action??null,description:r.description??null,createdAt:r.created_at??new Date().toISOString(),actorName:r.actor_name??null}),sr={open:"bg-gray-200 text-gray-800",in_progress:"bg-info/20 text-blue-800",completed:"bg-success/20 text-green-800",canceled:"bg-gray-200 text-gray-500"},Rd={low:"bg-gray-100 text-gray-700",medium:"bg-gray-200 text-gray-800",high:"bg-error/20 text-error"},kN=({status:r,verificationValidUntil:s,verificationRating:i,onNavigate:o})=>{const h={active:{title:"Verified Restoration Expertise Member",text:"Your badge is live and visible to homeowners.",subtext:[s?`Valid until: ${s}`:null,i?`Rating: ${i}`:null].filter(Boolean).join("  ")||null,buttonText:"View Badge",buttonAction:()=>o("badge"),Icon:na,color:"success"},pending:{title:"Verification in Progress",text:"We are reviewing your documents. This typically takes 1 to 3 business days.",subtext:null,buttonText:"View Documents",buttonAction:()=>o("documents"),Icon:Si,color:"warning"},actionRequired:{title:"Action required to get verified",text:"Some documents or profile details are missing.",subtext:null,buttonText:"Complete Profile",buttonAction:()=>o("profile"),Icon:Sa,color:"error"}}[r],m={success:{bg:"bg-success/5",border:"border-success/20",text:"text-success",iconBg:"bg-success/10"},warning:{bg:"bg-warning/5",border:"border-warning/20",text:"text-warning",iconBg:"bg-warning/10"},error:{bg:"bg-error/5",border:"border-error/20",text:"text-error",iconBg:"bg-error/10"}}[h.color];return a.jsxs("div",{className:`p-6 rounded-2xl shadow-md border ${m.bg} ${m.border} flex flex-col sm:flex-row items-start sm:items-center gap-4 sm:gap-6`,children:[a.jsx("div",{className:`p-3 rounded-full ${m.iconBg} ${m.text}`,children:a.jsx(h.Icon,{className:"w-8 h-8"})}),a.jsxs("div",{className:"flex-grow",children:[a.jsx("h2",{className:"font-playfair text-xl sm:text-2xl font-bold text-[var(--text-main)]",children:h.title}),a.jsx("p",{className:"text-[var(--text-muted)] mt-1",children:h.text}),h.subtext&&a.jsx("p",{className:"text-sm text-[var(--text-muted)] mt-2",children:h.subtext})]}),a.jsx("button",{onClick:h.buttonAction,className:"w-full sm:w-auto mt-2 sm:mt-0 py-2.5 px-6 bg-[var(--accent)] text-[var(--accent-text)] font-bold rounded-lg shadow-md hover:bg-[var(--accent-light)] transition-transform transform hover:scale-105",children:h.buttonText})]})},so=({icon:r,title:s,value:i,label:o})=>a.jsxs(be,{className:"transition-transform transform hover:-translate-y-1",children:[a.jsxs("div",{className:"flex items-center text-[var(--accent-dark)] mb-2",children:[r,a.jsx("h3",{className:"ml-2 text-sm font-semibold uppercase tracking-wide text-[var(--text-muted)]",children:s})]}),a.jsx("p",{className:"font-playfair text-3xl sm:text-4xl font-bold text-[var(--text-main)]",children:i}),o&&a.jsx("p",{className:"text-sm text-[var(--text-muted)]",children:o})]}),CN=({data:r,onNavigate:s,onNewRequest:i})=>{const o=({icon:h,label:g,onClick:m})=>a.jsxs("button",{onClick:m,className:"bg-[var(--accent)] text-[var(--accent-text)] font-bold rounded-lg p-4 flex flex-col items-center justify-center text-center transition-colors hover:bg-[var(--accent-dark)] h-28",children:[a.jsx(h,{className:"w-8 h-8 mb-2"}),a.jsx("span",{className:"text-sm",children:g})]}),c=r??{status:"pending",verificationValidUntil:null,verificationRating:null,stats:{profileViewsValue:null,profileViewsPeriod:null,badgeClicksValue:null,badgeClicksPeriod:null,planName:null,planPrice:null,nextRenewal:null},benefits:{description:null,items:[]},activityLog:[]},u=h=>h==null?"0":typeof h=="number"?h.toLocaleString():h;return a.jsxs("div",{className:"space-y-8 animate-fade-in",children:[a.jsx(kN,{status:c.status,verificationValidUntil:c.verificationValidUntil,verificationRating:c.verificationRating,onNavigate:s}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[a.jsx(so,{icon:a.jsx(lr,{className:"w-5 h-5"}),title:"Profile Views",value:u(c.stats.profileViewsValue),label:c.stats.profileViewsPeriod??"Last 30 days"}),a.jsx(so,{icon:a.jsx(So,{className:"w-5 h-5"}),title:"Badge Clicks",value:u(c.stats.badgeClicksValue),label:c.stats.badgeClicksPeriod??"Last 30 days"}),a.jsx(so,{icon:a.jsx(ir,{className:"w-5 h-5"}),title:"Current Plan",value:c.stats.planName??"",label:c.stats.planPrice??""}),a.jsx(so,{icon:a.jsx(Tw,{className:"w-5 h-5"}),title:"Next Renewal",value:c.stats.nextRenewal??""})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[a.jsxs(be,{className:"lg:col-span-2",children:[a.jsx("h2",{className:"font-playfair text-2xl font-bold text-[var(--text-main)] mb-1",children:"Your Benefits"}),a.jsx("p",{className:"text-[var(--text-muted)] mb-6",children:c.benefits.description??"Your current plan gives you access to premium features to boost your online presence and credibility."}),a.jsxs("ul",{className:"space-y-4",children:[c.benefits.items.map((h,g)=>{const m=h.Icon??_t;return a.jsxs("li",{className:"flex items-center",children:[a.jsx("div",{className:"bg-[var(--accent-bg-subtle)] text-[var(--accent-dark)] p-2 rounded-full mr-4",children:a.jsx(m,{className:"w-5 h-5"})}),a.jsxs("div",{className:"flex-grow",children:[a.jsx("p",{className:"font-semibold text-[var(--text-main)]",children:h.name}),h.progress&&a.jsx("p",{className:"text-sm text-[var(--text-muted)]",children:h.progress})]})]},g)}),c.benefits.items.length===0&&a.jsx("li",{className:"text-[var(--text-muted)]",children:"No benefits found for your membership yet."})]}),a.jsx("div",{className:"text-right mt-6",children:a.jsx("button",{onClick:()=>s("benefits"),className:"font-semibold text-[var(--accent-dark)] hover:underline",children:"View full benefits "})})]}),a.jsxs(be,{children:[a.jsx("h2",{className:"font-playfair text-2xl font-bold text-[var(--text-main)] mb-6",children:"Quick Actions"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsx(o,{icon:Qa,label:"Download Badge",onClick:()=>s("badge")}),a.jsx(o,{icon:_a,label:"Edit Profile",onClick:()=>s("profile")}),a.jsx(o,{icon:ir,label:"Manage Billing",onClick:()=>s("billing")}),a.jsx(o,{icon:Aw,label:"Request Service",onClick:i})]})]})]}),a.jsxs(be,{children:[a.jsx("h2",{className:"font-playfair text-2xl font-bold text-[var(--text-main)] mb-4",children:"Recent Activity"}),a.jsxs("ul",{className:"divide-y divide-[var(--border-subtle)]",children:[c.activityLog.map((h,g)=>{const m=h.Icon??Ea;return a.jsxs("li",{className:"py-4 flex items-center",children:[a.jsx("div",{className:"bg-[var(--bg-subtle)] p-3 rounded-full mr-4 text-[var(--text-muted)]",children:a.jsx(m,{className:"w-5 h-5"})}),a.jsx("div",{className:"flex-grow",children:a.jsx("p",{className:"text-[var(--text-main)]",children:h.description})}),a.jsx("p",{className:"text-sm text-[var(--text-muted)] ml-4 text-right whitespace-nowrap",children:h.timestamp})]},g)}),c.activityLog.length===0&&a.jsx("li",{className:"py-4 text-[var(--text-muted)]",children:"No recent activity yet. Start by submitting a service request or uploading documents."})]})]})]})},AN=({onNewRequest:r,showToast:s,refreshKey:i})=>{var K;const{session:o}=nt(),[c,u]=S.useState([]),[h,g]=S.useState({}),[m,p]=S.useState(!1),[b,w]=S.useState(null),[j,_]=S.useState(""),[v,E]=S.useState("all"),[y,k]=S.useState("All"),[R,A]=S.useState(null),q=[{value:"all",label:"All statuses"},{value:"open",label:Es.open},{value:"in_progress",label:Es.in_progress},{value:"completed",label:Es.completed},{value:"canceled",label:Es.canceled}],L=S.useMemo(()=>{const H=new Set;return c.forEach(J=>{J.requestType&&H.add(J.requestType)}),["All",...Array.from(H)]},[c]),Q=S.useMemo(()=>c.reduce((H,J)=>(H[J.status]=(H[J.status]??0)+1,H),{open:0,in_progress:0,completed:0,canceled:0}),[c]),B=S.useMemo(()=>{const H=j.trim().toLowerCase();return c.filter(J=>{const D=H.length===0||J.title.toLowerCase().includes(H)||J.id.toLowerCase().includes(H),W=v==="all"||J.status===v,se=y==="All"||J.requestType===y;return D&&W&&se})},[c,j,v,y]),Z=S.useMemo(()=>R?c.find(H=>H.id===R)??null:null,[c,R]),M=Z?h[Z.id]??[]:[],ae=S.useCallback(async()=>{var H;if(!((H=o==null?void 0:o.user)!=null&&H.id)){u([]),g({});return}p(!0);try{const{data:J,error:D}=await xe.from("service_requests").select("id, profile_id, request_type, service, title, description, priority, status, admin_notes, assigned_admin_id, created_at, updated_at").eq("profile_id",o.user.id).order("created_at",{ascending:!1});if(D)throw D;const W=J??[],se=Array.from(new Set(W.map(ee=>ee.assigned_admin_id).filter(ee=>ee!=null))).map(ee=>String(ee));let me=[];if(se.length>0){const{data:ee,error:ne}=await xe.from("admin_profiles").select("id, user_id, display_name, email").in("id",se);ne?console.error("Failed to load assigned admin details",ne):me=ee??[]}const je=new Map(me.map(ee=>[String(ee.id),ee.display_name??ee.email??String(ee.id)])),T=new Map(me.filter(ee=>!!ee.user_id).map(ee=>[ee.user_id,ee.display_name??ee.email??ee.user_id])),V=W.map(ee=>{const ne=SN(ee);return{...ne,assignedAdminName:ne.assignedAdminId?je.get(String(ne.assignedAdminId))??null:null}});u(V);const te=W.map(ee=>ee.id).filter(ee=>ee!=null);if(te.length>0){const{data:ee,error:ne}=await xe.from("service_request_activity").select("*").in("service_request_id",te).order("created_at",{ascending:!1});if(ne)console.error("Failed to load service request activity",ne),g({});else{const de=ee??[],oe=new Set;if(de.forEach(De=>{const Ve=De.actor_user_id;Ve&&!T.has(Ve)&&oe.add(Ve)}),oe.size>0){const{data:De,error:Ve}=await xe.from("admin_profiles").select("user_id, display_name, email").in("user_id",Array.from(oe));Ve?console.error("Failed to load activity actor details",Ve):(De??[]).forEach(Gt=>{Gt.user_id&&T.set(Gt.user_id,Gt.display_name??Gt.email??Gt.user_id)})}const Ae={};de.forEach(De=>{const Ve=EN(De);if(!Ve.actorName&&Ve.actorUserId){const pa=T.get(Ve.actorUserId);pa&&(Ve.actorName=pa)}Ve.serviceRequestId&&(Ae[Ve.serviceRequestId]||(Ae[Ve.serviceRequestId]=[]),Ae[Ve.serviceRequestId].push(Ve))}),g(Ae)}}else g({});w(null)}catch(J){console.error("Failed to load service requests",J),w("We were unable to load your service requests. Please try again."),u([]),g({})}finally{p(!1)}},[(K=o==null?void 0:o.user)==null?void 0:K.id]);S.useEffect(()=>{ae()},[ae,i]);const ce=H=>{(H==="all"||H==="open"||H==="in_progress"||H==="completed"||H==="canceled")&&E(H)},I=()=>{ae()};return a.jsxs(a.Fragment,{children:[Z&&a.jsx(KN,{request:Z,activities:M,onClose:()=>A(null)}),a.jsxs("div",{className:"animate-fade-in space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"font-playfair text-4xl font-bold text-[var(--text-main)]",children:"My Service Requests"}),a.jsx("p",{className:"mt-2 text-lg text-[var(--text-muted)]",children:"Track every request you have submitted and see updates from our team in one place."})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 w-full sm:w-auto",children:[a.jsx("button",{onClick:I,className:"py-2.5 px-6 bg-[var(--bg-card)] border border-[var(--border-subtle)] rounded-lg font-semibold text-[var(--text-main)] hover:bg-[var(--bg-subtle)]",children:"Refresh"}),a.jsx("button",{onClick:r,className:"py-2.5 px-6 bg-[var(--accent)] text-[var(--accent-text)] font-bold rounded-lg shadow-md hover:bg-[var(--accent-light)] whitespace-nowrap",children:"New Request"})]})]}),a.jsxs("div",{className:"bg-[var(--bg-card)] p-3 rounded-xl shadow-md border border-[var(--border-subtle)] flex flex-wrap items-center justify-center sm:justify-start gap-x-6 gap-y-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-[var(--text-muted)]",children:"Open:"}),a.jsx("span",{className:`px-2.5 py-1 text-sm font-bold rounded-full ${sr.open}`,children:Q.open})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-[var(--text-muted)]",children:"In Progress:"}),a.jsx("span",{className:`px-2.5 py-1 text-sm font-bold rounded-full ${sr.in_progress}`,children:Q.in_progress})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-[var(--text-muted)]",children:"Completed:"}),a.jsx("span",{className:`px-2.5 py-1 text-sm font-bold rounded-full ${sr.completed}`,children:Q.completed})]})]}),a.jsxs(be,{className:"p-4 space-y-4",children:[b&&a.jsx("div",{className:"rounded-lg border border-error/40 bg-error/10 px-4 py-3 text-sm text-error",children:b}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"relative md:col-span-1",children:[a.jsx(hr,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-[var(--text-muted)]"}),a.jsx("input",{type:"text",placeholder:"Search by title or request ID...",value:j,onChange:H=>_(H.target.value),className:"w-full pl-10 pr-4 py-2 border border-[var(--border-subtle)] rounded-lg bg-[var(--bg-subtle)] focus:ring-[var(--accent)] focus:border-[var(--accent)]"})]}),a.jsxs("div",{className:"md:col-span-2 grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsx("select",{value:v,onChange:H=>ce(H.target.value),className:"w-full p-2 border border-[var(--border-subtle)] rounded-lg bg-[var(--bg-subtle)] focus:ring-[var(--accent)] focus:border-[var(--accent)]",children:q.map(H=>a.jsx("option",{value:H.value,children:H.label},H.value))}),a.jsx("select",{value:y,onChange:H=>k(H.target.value),className:"w-full p-2 border border-[var(--border-subtle)] rounded-lg bg-[var(--bg-subtle)] focus:ring-[var(--accent)] focus:border-[var(--accent)]",children:L.map(H=>a.jsx("option",{value:H,children:H},H))})]})]})]}),m&&c.length===0?a.jsx(be,{children:a.jsxs("div",{className:"flex items-center justify-center gap-3 py-12 text-[var(--text-muted)]",children:[a.jsx("span",{className:"h-3 w-3 animate-pulse rounded-full bg-[var(--accent)]"}),"Loading your service requests..."]})}):B.length>0?a.jsxs(be,{className:"p-0 overflow-hidden",children:[a.jsx("div",{className:"overflow-x-auto hidden md:block",children:a.jsxs("table",{className:"min-w-full",children:[a.jsx("thead",{className:"bg-[var(--bg-subtle)]",children:a.jsxs("tr",{className:"border-b border-[var(--border-subtle)]",children:[a.jsx("th",{className:"py-3 px-4 text-left text-sm font-semibold text-[var(--text-muted)]",children:"Created"}),a.jsx("th",{className:"py-3 px-4 text-left text-sm font-semibold text-[var(--text-muted)]",children:"Request"}),a.jsx("th",{className:"py-3 px-4 text-left text-sm font-semibold text-[var(--text-muted)]",children:"Status"}),a.jsx("th",{className:"py-3 px-4 text-left text-sm font-semibold text-[var(--text-muted)]",children:"Priority"}),a.jsx("th",{className:"py-3 px-4 text-left text-sm font-semibold text-[var(--text-muted)]",children:"Admin Notes"}),a.jsx("th",{className:"py-3 px-4 text-right text-sm font-semibold text-[var(--text-muted)]",children:"Actions"})]})}),a.jsx("tbody",{className:"divide-y divide-[var(--border-subtle)]",children:B.map(H=>{const J=jo(H.requestType);return a.jsxs("tr",{className:"cursor-pointer hover:bg-[var(--bg-subtle)]",onClick:()=>A(H.id),children:[a.jsx("td",{className:"py-3 px-4 text-[var(--text-main)] whitespace-nowrap",children:As(H.createdAt)??""}),a.jsx("td",{className:"py-3 px-4 text-[var(--text-main)]",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(J,{className:"w-5 h-5 text-[var(--text-muted)]"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:H.title}),a.jsx("p",{className:"text-xs text-[var(--text-muted)]",children:H.requestType})]})]})}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:`px-3 py-1 text-xs font-bold rounded-full ${sr[H.status]}`,children:Es[H.status]})}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:`px-3 py-1 text-xs font-semibold rounded-full ${Rd[H.priority]}`,children:wo[H.priority]})}),a.jsx("td",{className:"py-3 px-4 text-sm text-[var(--text-muted)] max-w-xs truncate",children:H.adminNotes??""}),a.jsx("td",{className:"py-3 px-4 text-right",children:a.jsx("button",{onClick:D=>{D.stopPropagation(),A(H.id)},className:"p-2 text-[var(--text-muted)] hover:text-[var(--accent-dark)]",children:a.jsx(lr,{className:"w-5 h-5"})})})]},H.id)})})]})}),a.jsx("div",{className:"md:hidden divide-y divide-[var(--border-subtle)]",children:B.map(H=>{const J=jo(H.requestType);return a.jsxs("div",{className:"p-4 space-y-3",onClick:()=>A(H.id),children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-[var(--text-main)]",children:[a.jsx(J,{className:"w-5 h-5 text-[var(--text-muted)]"}),H.requestType]}),a.jsx("p",{className:"mt-2 font-bold text-lg text-[var(--text-main)]",children:H.title})]}),a.jsx("span",{className:`px-3 py-1 text-xs font-bold rounded-full ${sr[H.status]}`,children:Es[H.status]})]}),a.jsx("p",{className:"text-sm text-[var(--text-muted)]",children:As(H.createdAt)??""}),a.jsx("p",{className:"text-sm text-[var(--text-muted)] line-clamp-2",children:H.adminNotes??"No admin notes yet."}),a.jsxs("div",{className:"flex justify-between items-center text-sm text-[var(--text-muted)]",children:[a.jsx("span",{className:`px-2 py-1 rounded-full ${Rd[H.priority]} font-semibold`,children:wo[H.priority]}),a.jsx("button",{className:"font-semibold text-[var(--accent-dark)] hover:underline",children:"View details "})]})]},H.id)})})]}):a.jsx(be,{children:a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Ea,{className:"w-16 h-16 mx-auto text-gray-300"}),a.jsx("h3",{className:"mt-4 text-xl font-bold text-[var(--text-main)]",children:"No requests yet"}),a.jsx("p",{className:"mt-1 text-[var(--text-muted)]",children:j||v!=="all"||y!=="All"?"Try adjusting your filters to see more results.":"Submit your first request to get help from our team."}),a.jsx("button",{onClick:r,className:"mt-6 py-2.5 px-6 bg-[var(--accent)] text-[var(--accent-text)] font-bold rounded-lg shadow-md hover:bg-[var(--accent-light)]",children:"Create a request"})]})})]})]})},TN=({showToast:r})=>{const{currentUser:s,updateUser:i}=nt(),o=S.useRef(null);if(!s)return null;const c=(v,E)=>{const y={...s};E&&(y.name=E),y.profile={...s.profile,...v},i(y),r("Changes saved successfully.","success")},u=S.useMemo(()=>{const v=[s.name,s.profile.contactNumber,s.profile.address,s.profile.logoUrl,s.profile.description,s.profile.yearsInBusiness,s.profile.serviceAreas,s.profile.specialties],E=v.filter(y=>Array.isArray(y)?y.length>0:!!y).length;return Math.round(E/v.length*100)},[s]),h=["Water Damage","Fire Restoration","Mold Remediation","Storm Damage","Reconstruction","Biohazard Cleanup"],g=({value:v})=>a.jsxs(be,{className:"mb-8",children:[a.jsxs("h2",{className:"font-playfair text-xl font-bold text-[var(--text-main)] mb-2",children:["Profile Completeness: ",v,"%"]}),a.jsx("div",{className:"w-full bg-[var(--bg-subtle)] rounded-full h-2.5",children:a.jsx("div",{className:"bg-[var(--accent)] h-2.5 rounded-full",style:{width:`${v}%`}})}),a.jsx("p",{className:"text-sm text-[var(--text-muted)] mt-2",children:"Complete your profile to increase your visibility in our network."})]}),m=()=>{const[v,E]=S.useState(!1),[y,k]=S.useState({name:s.name,dbaName:s.profile.dbaName||"",yearsInBusiness:s.profile.yearsInBusiness||1,description:s.profile.description||""}),R=()=>{const{name:q,...L}=y;c(L,q),E(!1)},A=()=>{k({name:s.name,dbaName:s.profile.dbaName||"",yearsInBusiness:s.profile.yearsInBusiness||1,description:s.profile.description||""}),E(!1)};return a.jsxs(be,{children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-playfair text-2xl font-bold text-[var(--text-main)]",children:"Business Information"}),a.jsx("p",{className:"text-sm text-[var(--text-muted)]",children:"This information appears on your public profile and badge."})]}),!v&&a.jsxs("button",{onClick:()=>E(!0),className:"flex items-center gap-2 py-2 px-4 bg-[var(--bg-card)] border border-[var(--border-subtle)] rounded-lg shadow-sm font-semibold text-[var(--text-main)] hover:bg-[var(--bg-subtle)] text-sm",children:[a.jsx(_a,{className:"w-4 h-4"})," Edit"]})]}),v?a.jsxs("div",{className:"space-y-4 animate-fade-in",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-[var(--text-muted)]",children:"Business Name"}),a.jsx("input",{type:"text",value:y.name,onChange:q=>k({...y,name:q.target.value}),className:"mt-1 block w-full p-2 border border-[var(--border-subtle)] rounded-lg bg-[var(--bg-input)]"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-[var(--text-muted)]",children:"DBA / Brand Name (optional)"}),a.jsx("input",{type:"text",value:y.dbaName,onChange:q=>k({...y,dbaName:q.target.value}),className:"mt-1 block w-full p-2 border border-[var(--border-subtle)] rounded-lg bg-[var(--bg-input)]"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-[var(--text-muted)]",children:"Years in Business"}),a.jsx("input",{type:"number",value:y.yearsInBusiness,onChange:q=>k({...y,yearsInBusiness:parseInt(q.target.value)||0}),className:"mt-1 block w-full p-2 border border-[var(--border-subtle)] rounded-lg bg-[var(--bg-input)]"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-[var(--text-muted)]",children:"Description"}),a.jsx("textarea",{value:y.description,onChange:q=>k({...y,description:q.target.value}),rows:4,className:"mt-1 block w-full p-2 border border-[var(--border-subtle)] rounded-lg bg-[var(--bg-input)]"})]}),a.jsxs("div",{className:"flex justify-end gap-4 pt-2",children:[a.jsx("button",{onClick:A,className:"py-2 px-5 bg-[var(--bg-subtle)] border border-[var(--border-subtle)] rounded-lg font-semibold",children:"Cancel"}),a.jsx("button",{onClick:R,className:"py-2 px-5 bg-[var(--accent)] text-[var(--accent-text)] rounded-lg font-bold",children:"Save Changes"})]})]}):a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-[var(--text-muted)]",children:"Business Name"}),a.jsx("p",{className:"font-semibold text-[var(--text-main)]",children:s.name})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-[var(--text-muted)]",children:"DBA / Brand Name"}),a.jsx("p",{className:"font-semibold text-[var(--text-main)]",children:s.profile.dbaName||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-[var(--text-muted)]",children:"Years in Business"}),a.jsx("p",{className:"font-semibold text-[var(--text-main)]",children:s.profile.yearsInBusiness||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-[var(--text-muted)]",children:"Description"}),a.jsx("p",{className:"text-[var(--text-main)] whitespace-pre-wrap",children:s.profile.description||"N/A"})]})]})]})},p=()=>{const[v,E]=S.useState(!1),[y,k]=S.useState({contactNumber:s.profile.contactNumber||"",address:s.profile.address||"",websiteUrl:s.profile.websiteUrl||""}),[R,A]=S.useState({}),q=()=>{const Q={};return y.contactNumber||(Q.contactNumber="Phone number is required."),y.address||(Q.address="Address is required."),y.websiteUrl&&!/^https?:\/\//.test(y.websiteUrl)&&(Q.websiteUrl="Please enter a valid URL (e.g., https://...)."),A(Q),Object.keys(Q).length===0},L=()=>{q()?(c(y),E(!1)):r("Please complete required fields.","error")};return a.jsxs(be,{children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsx("div",{children:a.jsx("h3",{className:"font-playfair text-2xl font-bold text-[var(--text-main)]",children:"Contact Details"})}),!v&&a.jsxs("button",{onClick:()=>E(!0),className:"flex items-center gap-2 py-2 px-4 bg-[var(--bg-card)] border border-[var(--border-subtle)] rounded-lg shadow-sm font-semibold text-[var(--text-main)] hover:bg-[var(--bg-subtle)] text-sm",children:[a.jsx(_a,{className:"w-4 h-4"})," Edit"]})]}),v?a.jsxs("div",{className:"space-y-4 animate-fade-in",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-[var(--text-muted)]",children:"Email (read-only)"}),a.jsx("p",{className:"mt-1 block w-full p-2 bg-[var(--bg-subtle)] border border-[var(--border-subtle)] rounded-lg text-[var(--text-muted)]",children:s.email})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-[var(--text-muted)]",children:"Phone"}),a.jsx("input",{type:"tel",value:y.contactNumber,onChange:Q=>k({...y,contactNumber:Q.target.value}),className:`mt-1 block w-full p-2 border rounded-lg bg-[var(--bg-input)] ${R.contactNumber?"border-error":"border-[var(--border-subtle)]"}`}),R.contactNumber&&a.jsx("p",{className:"text-xs text-error mt-1",children:R.contactNumber})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-[var(--text-muted)]",children:"Address"}),a.jsx("input",{type:"text",value:y.address,onChange:Q=>k({...y,address:Q.target.value}),className:`mt-1 block w-full p-2 border rounded-lg bg-[var(--bg-input)] ${R.address?"border-error":"border-[var(--border-subtle)]"}`}),R.address&&a.jsx("p",{className:"text-xs text-error mt-1",children:R.address})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-[var(--text-muted)]",children:"Website URL"}),a.jsx("input",{type:"url",value:y.websiteUrl,onChange:Q=>k({...y,websiteUrl:Q.target.value}),className:`mt-1 block w-full p-2 border rounded-lg bg-[var(--bg-input)] ${R.websiteUrl?"border-error":"border-[var(--border-subtle)]"}`}),R.websiteUrl&&a.jsx("p",{className:"text-xs text-error mt-1",children:R.websiteUrl})]}),a.jsxs("div",{className:"flex justify-end gap-4 pt-2",children:[a.jsx("button",{onClick:()=>E(!1),className:"py-2 px-5 bg-[var(--bg-subtle)] border border-[var(--border-subtle)] rounded-lg font-semibold",children:"Cancel"}),a.jsx("button",{onClick:L,className:"py-2 px-5 bg-[var(--accent)] text-[var(--accent-text)] rounded-lg font-bold",children:"Save Changes"})]})]}):a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-[var(--text-muted)]",children:"Email"}),a.jsx("p",{className:"font-semibold text-[var(--text-main)]",children:s.email})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-[var(--text-muted)]",children:"Phone"}),a.jsx("p",{className:"font-semibold text-[var(--text-main)]",children:s.profile.contactNumber||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-[var(--text-muted)]",children:"Address"}),a.jsx("p",{className:"font-semibold text-[var(--text-main)]",children:s.profile.address||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-[var(--text-muted)]",children:"Website URL"}),a.jsx("p",{className:"font-semibold text-[var(--accent-dark)] hover:underline cursor-pointer",children:s.profile.websiteUrl||"N/A"})]})]})]})},b=()=>{var B,Z;const[v,E]=S.useState(!1),[y,k]=S.useState({serviceAreas:s.profile.serviceAreas||[],specialties:s.profile.specialties||[]}),[R,A]=S.useState(""),q=()=>{R&&!y.serviceAreas.includes(R)&&(k(M=>({...M,serviceAreas:[...M.serviceAreas,R]})),A(""))},L=M=>{k(ae=>({...ae,serviceAreas:ae.serviceAreas.filter(ce=>ce!==M)}))},Q=M=>{k(ae=>({...ae,specialties:ae.specialties.includes(M)?ae.specialties.filter(ce=>ce!==M):[...ae.specialties,M]}))};return a.jsxs(be,{children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsx("div",{children:a.jsx("h3",{className:"font-playfair text-2xl font-bold text-[var(--text-main)]",children:"Service Areas & Specialties"})}),!v&&a.jsxs("button",{onClick:()=>E(!0),className:"flex items-center gap-2 py-2 px-4 bg-[var(--bg-card)] border border-[var(--border-subtle)] rounded-lg shadow-sm font-semibold text-[var(--text-main)] hover:bg-[var(--bg-subtle)] text-sm",children:[a.jsx(_a,{className:"w-4 h-4"})," Edit"]})]}),v?a.jsxs("div",{className:"space-y-6 animate-fade-in",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-[var(--text-muted)]",children:"Service Areas"}),a.jsxs("div",{className:"flex gap-2 mt-1",children:[a.jsx("input",{type:"text",value:R,onChange:M=>A(M.target.value),placeholder:"e.g., Dallas",className:"flex-grow p-2 border border-[var(--border-subtle)] rounded-lg bg-[var(--bg-input)]"}),a.jsx("button",{onClick:q,className:"py-2 px-4 bg-[var(--accent)] text-[var(--accent-text)] rounded-lg font-bold",children:"Add"})]}),a.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:y.serviceAreas.map(M=>a.jsxs("div",{className:"bg-gray-200 text-charcoal px-3 py-1 rounded-full flex items-center gap-2 text-sm",children:[M,a.jsx("button",{onClick:()=>L(M),children:a.jsx(wt,{className:"w-4 h-4"})})]},M))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-[var(--text-muted)]",children:"Specialties"}),a.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:h.map(M=>a.jsx("button",{onClick:()=>Q(M),className:`px-4 py-2 rounded-full font-semibold transition-colors text-sm ${y.specialties.includes(M)?"bg-[var(--accent)] text-[var(--accent-text)]":"bg-gray-200 text-gray-dark"}`,children:M},M))})]}),a.jsxs("div",{className:"flex justify-end gap-4 pt-2",children:[a.jsx("button",{onClick:()=>E(!1),className:"py-2 px-5 bg-[var(--bg-subtle)] border border-[var(--border-subtle)] rounded-lg font-semibold",children:"Cancel"}),a.jsx("button",{onClick:()=>{c(y),E(!1)},className:"py-2 px-5 bg-[var(--accent)] text-[var(--accent-text)] rounded-lg font-bold",children:"Save Changes"})]})]}):a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-[var(--text-muted)]",children:"Service Areas"}),a.jsx("div",{className:"flex flex-wrap gap-2 mt-1",children:((B=s.profile.serviceAreas)==null?void 0:B.map(M=>a.jsx("span",{className:"bg-[var(--bg-subtle)] px-3 py-1 rounded-full text-sm font-medium",children:M},M)))||a.jsx("p",{className:"text-[var(--text-main)]",children:"N/A"})})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-[var(--text-muted)]",children:"Specialties"}),a.jsx("div",{className:"flex flex-wrap gap-2 mt-1",children:((Z=s.profile.specialties)==null?void 0:Z.map(M=>a.jsx("span",{className:"bg-gold/20 text-gold-dark px-3 py-1 rounded-full text-sm font-bold",children:M},M)))||a.jsx("p",{className:"text-[var(--text-main)]",children:"N/A"})})]})]}),a.jsx("p",{className:"text-xs text-[var(--text-muted)] mt-4",children:"These will appear on your public profile and affect homeowner search results."})]})},w=()=>{var q,L,Q,B,Z;const[v,E]=S.useState(!1),[y,k]=S.useState({logoUrl:s.profile.logoUrl||"",socialLinks:s.profile.socialLinks||{}}),R=M=>{const{name:ae,value:ce}=M.target;k(I=>({...I,socialLinks:{...I.socialLinks,[ae]:ce}}))},A=({icon:M,name:ae,value:ce})=>a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center font-bold text-gray-dark text-sm shrink-0",children:M}),a.jsx("input",{type:"url",placeholder:"https://...",name:ae,value:ce,onChange:R,className:"mt-1 block w-full p-2 border border-[var(--border-subtle)] rounded-lg bg-[var(--bg-input)]"})]});return a.jsxs(be,{children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsx("div",{children:a.jsx("h3",{className:"font-playfair text-2xl font-bold text-[var(--text-main)]",children:"Branding & Social Links"})}),!v&&a.jsxs("button",{onClick:()=>E(!0),className:"flex items-center gap-2 py-2 px-4 bg-[var(--bg-card)] border border-[var(--border-subtle)] rounded-lg shadow-sm font-semibold text-[var(--text-main)] hover:bg-[var(--bg-subtle)] text-sm",children:[a.jsx(_a,{className:"w-4 h-4"})," Edit"]})]}),v?a.jsxs("div",{className:"space-y-6 animate-fade-in",children:[a.jsxs("div",{className:"flex flex-col items-center text-center",children:[a.jsx("img",{src:s.profile.logoUrl||"https://via.placeholder.com/150",alt:"Business Logo",className:"w-32 h-32 rounded-full object-cover mb-4 border-4 border-white shadow-md"}),a.jsx("input",{type:"file",ref:o,className:"hidden",accept:"image/png, image/jpeg"}),a.jsx("button",{onClick:()=>{var M;return(M=o.current)==null?void 0:M.click()},className:"py-2 px-5 bg-[var(--bg-card)] border border-[var(--border-subtle)] rounded-lg font-semibold shadow-sm",children:"Upload new logo"}),a.jsx("p",{className:"text-xs text-[var(--text-muted)] mt-2",children:"Recommended: 400x400 PNG with transparent background."})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx(A,{icon:"G",name:"google",value:((q=y.socialLinks)==null?void 0:q.google)||""}),a.jsx(A,{icon:"f",name:"facebook",value:((L=y.socialLinks)==null?void 0:L.facebook)||""}),a.jsx(A,{icon:"ig",name:"instagram",value:((Q=y.socialLinks)==null?void 0:Q.instagram)||""}),a.jsx(A,{icon:"in",name:"linkedin",value:((B=y.socialLinks)==null?void 0:B.linkedin)||""}),a.jsx(A,{icon:"Y",name:"yelp",value:((Z=y.socialLinks)==null?void 0:Z.yelp)||""})]}),a.jsxs("div",{className:"flex justify-end gap-4 pt-2",children:[a.jsx("button",{onClick:()=>E(!1),className:"py-2 px-5 bg-[var(--bg-subtle)] border border-[var(--border-subtle)] rounded-lg font-semibold",children:"Cancel"}),a.jsx("button",{onClick:()=>{c(y),E(!1)},className:"py-2 px-5 bg-[var(--accent)] text-[var(--accent-text)] rounded-lg font-bold",children:"Save Changes"})]})]}):a.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-8",children:[a.jsx("img",{src:s.profile.logoUrl||"https://via.placeholder.com/150",alt:"Business Logo",className:"w-32 h-32 rounded-full object-cover border-4 border-white shadow-lg shrink-0"}),a.jsxs("div",{className:"w-full",children:[a.jsx("h4",{className:"font-bold mb-2",children:"Social Links"}),Object.entries(s.profile.socialLinks||{}).map(([M,ae])=>ae?a.jsxs("p",{className:"text-sm truncate",children:[a.jsxs("span",{className:"font-semibold capitalize",children:[M,":"]})," ",a.jsx("a",{href:ae,className:"text-[var(--accent-dark)] hover:underline",children:ae})]},M):null)]})]})]})},j=()=>{var v,E,y;return a.jsxs(be,{children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h2",{className:"font-playfair text-2xl font-bold text-[var(--text-main)]",children:"Public Profile Preview"}),a.jsx("a",{href:"#",className:"font-semibold text-[var(--accent-dark)] hover:underline text-sm",children:"View live profile "})]}),a.jsxs("div",{className:"bg-[var(--bg-subtle)] p-6 rounded-xl border border-[var(--border-subtle)]",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row items-start gap-6",children:[a.jsx("img",{src:s.profile.logoUrl||"https://via.placeholder.com/150",alt:"Logo",className:"w-24 h-24 rounded-full object-cover border-4 border-white shadow-md shrink-0"}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("h3",{className:"text-2xl font-bold text-[var(--text-main)]",children:s.name}),a.jsx("span",{className:"bg-success text-white px-3 py-1 text-xs font-bold rounded-full",children:((v=s.plan)==null?void 0:v.rating)??"A+"})]}),a.jsxs("p",{className:"text-[var(--text-muted)] font-medium",children:[s.profile.address,"  ",s.profile.yearsInBusiness," years in business"]})]})]}),a.jsxs("div",{className:"mt-4 pt-4 border-t border-[var(--border-subtle)]",children:[a.jsxs("p",{className:"font-semibold text-[var(--text-main)]",children:["Serving: ",a.jsx("span",{className:"font-normal text-[var(--text-muted)]",children:(E=s.profile.serviceAreas)==null?void 0:E.join("  ")})]}),a.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:(y=s.profile.specialties)==null?void 0:y.map(k=>a.jsx("span",{className:"bg-gold/20 text-gold-dark px-3 py-1 rounded-full text-xs font-bold",children:k},k))})]}),a.jsx("p",{className:"mt-4 text-[var(--text-main)]",children:s.profile.description}),a.jsxs("div",{className:"mt-6 flex items-center gap-2 text-sm font-semibold text-[var(--text-muted)]",children:[a.jsx(_t,{className:"w-5 h-5 text-success"}),"Verified by Restoration Expertise"]})]})]})},_=()=>{var ce,I,K,H;const[v,E]=S.useState("light"),[y,k]=S.useState("medium"),[R,A]=S.useState(!0),q=!!s.profile.logoUrl&&!!s.profile.address,L=()=>{r("Download will be available in the full version.","success")},Q=()=>{const J=s.name.toLowerCase().replace(/\s+/g,"-"),D=`<a href="https://restorationexpertise.com/profile/${J}" target="_blank" rel="noopener noreferrer">
  <img src="https://restorationexpertise.com/cards/${J}.png" alt="Restoration Expertise Verified Member - ${s.name}" />
</a>`;navigator.clipboard.writeText(D),r("Embed code copied!","success")},B=((ce=s.profile.address)==null?void 0:ce.split(",").slice(1).join(",").trim())||"",Z=((I=s.profile.description)==null?void 0:I.substring(0,80))+(s.profile.description&&s.profile.description.length>80?"...":""),M={small:"scale-90",medium:"scale-100",large:"scale-110"},ae=()=>a.jsx("div",{className:`w-12 h-12 p-0.5 rounded-md grid grid-cols-5 grid-rows-5 gap-px ${v==="light"?"bg-gray-200":"bg-gray-dark"}`,children:Array.from({length:25}).map((J,D)=>a.jsx("div",{className:`${Math.random()>.5?v==="light"?"bg-charcoal":"bg-white":""}`},D))});return a.jsxs(be,{className:"mt-8",children:[a.jsx("h2",{className:"font-playfair text-2xl font-bold text-[var(--text-main)]",children:"Public Profile Card"}),a.jsx("p",{className:"mt-1 text-[var(--text-muted)]",children:"Generate a shareable card for your website, proposals or social media."}),q?a.jsxs("div",{className:"mt-6 grid grid-cols-1 lg:grid-cols-2 gap-8 items-center",children:[a.jsx("div",{className:"flex justify-center items-center min-h-[280px]",children:a.jsx("div",{className:`origin-center transition-transform duration-300 ${M[y]}`,children:a.jsxs("div",{className:`w-[350px] h-[200px] rounded-xl shadow-2xl p-4 flex flex-col justify-between transition-colors ${v==="light"?"bg-white":"bg-charcoal-dark"}`,children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("img",{src:s.profile.logoUrl,alt:"Logo",className:"w-12 h-12 rounded-full object-cover border-2 border-white/50"}),a.jsxs("div",{children:[a.jsx("p",{className:`font-bold text-lg leading-tight ${v==="light"?"text-charcoal":"text-white"}`,children:s.name}),a.jsxs("p",{className:`text-xs font-semibold ${v==="light"?"text-gold-dark":"text-gold-light"}`,children:["Verified  ",((K=s.plan)==null?void 0:K.name)??"Member","  ",((H=s.plan)==null?void 0:H.rating)??"A+"]})]})]}),R&&a.jsxs("div",{className:"text-center",children:[a.jsx(ae,{}),a.jsx("p",{className:`text-[8px] mt-1 ${v==="light"?"text-gray-dark":"text-gray"}`,children:"Scans to your public profile"})]})]}),a.jsxs("div",{className:"pr-16",children:[a.jsx("p",{className:`text-sm truncate ${v==="light"?"text-gray-dark":"text-gray"}`,children:Z}),a.jsx("p",{className:`text-xs font-semibold mt-1 ${v==="light"?"text-charcoal":"text-white"}`,children:B})]}),a.jsxs("div",{className:"flex items-center gap-1.5 text-xs",children:[a.jsx(_t,{className:`w-4 h-4 ${v==="light"?"text-success":"text-gold"}`}),a.jsxs("p",{className:`font-semibold ${v==="light"?"text-gray-dark":"text-gray"}`,children:["Verified by ",a.jsx("span",{className:"font-bold",children:"Restoration Expertise"})]})]})]})})}),a.jsxs("div",{children:[a.jsxs("div",{className:"space-y-4 p-4 border border-[var(--border-subtle)] rounded-lg bg-[var(--bg-card)]",children:[a.jsx("h4",{className:"font-bold text-[var(--text-main)]",children:"Options"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-[var(--text-muted)] mb-1",children:"Theme"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>E("light"),className:`px-3 py-1.5 rounded-md text-sm font-semibold flex-1 ${v==="light"?"bg-[var(--accent)] text-[var(--accent-text)]":"bg-[var(--bg-card)] border hover:bg-[var(--bg-subtle)]"}`,children:"Light"}),a.jsx("button",{onClick:()=>E("dark"),className:`px-3 py-1.5 rounded-md text-sm font-semibold flex-1 ${v==="dark"?"bg-[var(--accent)] text-[var(--accent-text)]":"bg-charcoal text-white border border-charcoal-light hover:bg-charcoal"}`,children:"Dark"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-[var(--text-muted)]",htmlFor:"card-size",children:"Preview Size"}),a.jsxs("select",{id:"card-size",value:y,onChange:J=>k(J.target.value),className:"w-full mt-1 p-2 border border-[var(--border-subtle)] rounded-lg text-sm bg-[var(--bg-card)] focus:ring-[var(--accent)] focus:border-[var(--accent)]",children:[a.jsx("option",{value:"small",children:"Small"}),a.jsx("option",{value:"medium",children:"Medium"}),a.jsx("option",{value:"large",children:"Large"})]})]}),a.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-[var(--text-muted)] cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:R,onChange:J=>A(J.target.checked),className:"h-4 w-4 rounded border-[var(--border-subtle)] text-[var(--accent)] focus:ring-[var(--accent)]"}),"Show QR code"]})]}),a.jsxs("div",{className:"mt-6 space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("button",{onClick:L,className:"py-2 px-4 bg-[var(--bg-card)] text-[var(--text-main)] font-bold rounded-lg shadow-md border border-[var(--border-subtle)] hover:bg-[var(--bg-subtle)] flex items-center justify-center gap-2",children:[a.jsx(Qa,{className:"w-5 h-5"})," PNG"]}),a.jsxs("button",{onClick:L,className:"py-2 px-4 bg-[var(--bg-card)] text-[var(--text-main)] font-bold rounded-lg shadow-md border border-[var(--border-subtle)] hover:bg-[var(--bg-subtle)] flex items-center justify-center gap-2",children:[a.jsx(Qa,{className:"w-5 h-5"})," PDF"]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-[var(--text-muted)]",children:"Embed snippet"}),a.jsxs("div",{className:"relative mt-1",children:[a.jsx("pre",{className:"bg-charcoal-dark p-4 rounded-lg text-gray-light text-xs whitespace-pre-wrap overflow-x-auto",children:a.jsx("code",{children:`<a href="https://restorationexpertise.com/profile/${s.name.toLowerCase().replace(/\s+/g,"-")}"...`})}),a.jsx("button",{onClick:Q,className:"absolute top-2 right-2 p-1.5 bg-gray-dark rounded-md text-gray-light hover:bg-gray-dark/50",title:"Copy code",children:a.jsx(Ea,{className:"w-5 h-5"})})]})]})]})]})]}):a.jsxs("div",{className:"mt-6 p-4 bg-warning/10 border border-warning/20 rounded-lg flex items-center gap-3",children:[a.jsx(Sa,{className:"w-6 h-6 text-warning"}),a.jsx("p",{className:"font-semibold text-yellow-800",children:"To generate a complete profile card, please fill out your logo and address in the sections above."})]})]})};return a.jsxs("div",{className:"animate-fade-in max-w-4xl mx-auto",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"font-playfair text-4xl font-bold text-[var(--text-main)]",children:"Business Profile"}),a.jsx("p",{className:"mt-2 text-lg text-[var(--text-muted)]",children:"Keep your business details accurate to build trust and speed up verification."})]}),a.jsxs("div",{className:"mt-8 space-y-8",children:[a.jsx(g,{value:u}),a.jsx(m,{}),a.jsx(p,{}),a.jsx(b,{}),a.jsx(w,{}),a.jsx(j,{}),a.jsx(_,{})]})]})},RN=({onNavigate:r,showToast:s})=>{const{currentUser:i}=nt(),o=Ed.find(v=>v.email===(i==null?void 0:i.email))||Ed[0],{badge:c}=o,[u,h]=S.useState("light"),[g,m]=S.useState(!1);if(!c||c.status==="NONE")return a.jsxs("div",{className:"animate-fade-in space-y-8",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"font-playfair text-4xl font-bold text-[var(--text-main)]",children:"Your Restoration Expertise Badge"}),a.jsx("p",{className:"mt-2 text-lg text-[var(--text-muted)]",children:"Add this badge to your website and profiles so homeowners instantly know youre verified."})]}),a.jsx(be,{children:a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Si,{className:"w-16 h-16 mx-auto text-gray-300"}),a.jsx("h3",{className:"mt-4 text-xl font-bold text-[var(--text-main)]",children:"Your badge is not ready yet."}),a.jsx("p",{className:"mt-1 text-[var(--text-muted)]",children:"Once our team approves your documents, it will appear here."})]})})]});if(c.status==="PENDING")return a.jsxs("div",{className:"animate-fade-in space-y-8",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"font-playfair text-4xl font-bold text-[var(--text-main)]",children:"Your Restoration Expertise Badge"}),a.jsx("p",{className:"mt-2 text-lg text-[var(--text-muted)]",children:"Add this badge to your website and profiles so homeowners instantly know youre verified."})]}),a.jsx(be,{children:a.jsxs("div",{className:"text-center py-12",children:[a.jsx(hr,{className:"w-16 h-16 mx-auto text-gray-300"}),a.jsx("h3",{className:"mt-4 text-xl font-bold text-[var(--text-main)]",children:"Your business is eligible and under review."}),a.jsx("p",{className:"mt-1 text-[var(--text-muted)]",children:"Were preparing your badge design."})]})})]});const p=u==="dark"&&c.imageDarkUrl||c.imageLightUrl,b=`<a href="${c.profileUrl}" target="_blank" rel="noopener noreferrer">
    <img src="${c.imageLightUrl}"
         alt="Restoration Expertise Verified Member  ${c.badgeLabel}"
         style="max-width:180px;height:auto;" />
  </a>`,w=()=>{navigator.clipboard.writeText(b),m(!0),setTimeout(()=>m(!1),2e3),s("Code copied to clipboard!","success")},_={ACTIVE:{chipText:"Active",chipColor:"bg-success text-white"},PENDING:{chipText:"Pending",chipColor:"bg-warning text-charcoal"},REVOKED:{chipText:"Revoked",chipColor:"bg-error text-white"}}[c.status];return a.jsxs("div",{className:"animate-fade-in space-y-8",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"font-playfair text-4xl font-bold text-[var(--text-main)]",children:"Your Restoration Expertise Badge"}),a.jsx("p",{className:"mt-2 text-lg text-[var(--text-muted)]",children:"Add this badge to your website and profiles so homeowners instantly know youre verified."})]}),a.jsxs("div",{className:"mt-6 bg-gold/10 border border-gold/20 text-[var(--text-main)] p-3 sm:p-4 rounded-xl flex flex-col sm:flex-row justify-between items-start sm:items-center gap-2",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(_t,{className:"w-6 h-6 text-gold-dark mr-3 shrink-0"}),a.jsxs("p",{className:"text-sm sm:text-base font-semibold",children:["Verified Member  ",o.tier," Plan  Rating: ",o.rating]})]}),a.jsx("button",{onClick:()=>r("billing"),className:"font-bold text-sm bg-gold/20 text-gold-dark py-1.5 px-3 rounded-md hover:bg-gold/30 transition-colors whitespace-nowrap self-end sm:self-center",children:"Manage plan "})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-8 items-start",children:[a.jsxs("div",{className:"lg:col-span-3",children:[a.jsxs("div",{className:"flex space-x-2 mb-4",children:[a.jsx("button",{onClick:()=>h("light"),className:`px-4 py-2 rounded-lg font-semibold text-sm transition-all ${u==="light"?"bg-[var(--accent)] text-[var(--accent-text)] shadow-md":"bg-[var(--bg-card)] border border-[var(--border-subtle)]"}`,children:"Light background"}),a.jsx("button",{onClick:()=>h("dark"),className:`px-4 py-2 rounded-lg font-semibold text-sm transition-all ${u==="dark"?"bg-[var(--accent)] text-[var(--accent-text)] shadow-md":"bg-[var(--bg-card)] border border-[var(--border-subtle)]"}`,children:"Dark background"})]}),a.jsxs("div",{className:`relative p-8 rounded-2xl shadow-lg border border-[var(--border-subtle)] flex items-center justify-center min-h-[350px] transition-colors ${u==="light"?"bg-[var(--bg-subtle)]":"bg-charcoal-dark"}`,children:[_&&a.jsx("span",{className:`absolute top-4 right-4 text-xs font-bold px-3 py-1 rounded-full ${_.chipColor}`,children:_.chipText}),a.jsx("img",{src:p,alt:c.badgeLabel,className:"max-w-xs h-auto"})]}),a.jsxs("p",{className:"text-sm text-[var(--text-muted)] mt-4 text-center lg:text-left px-2",children:["This badge reflects your current plan (",o.tier,") and rating (",o.rating,"). Any future upgrades or renewals will automatically update your badge."]})]}),a.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[a.jsxs(be,{children:[a.jsx("h3",{className:"font-playfair text-xl font-bold text-[var(--text-main)] mb-4",children:"Download & Embed"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[a.jsx("a",{href:p,download:`${o.businessName.toLowerCase().replace(/ /g,"-")}-badge.png`,children:a.jsxs("button",{className:"w-full py-3 px-4 bg-[var(--bg-card)] text-[var(--text-main)] font-bold rounded-lg shadow-md border border-[var(--border-subtle)] hover:bg-[var(--bg-subtle)] transition-all flex items-center justify-center gap-2",children:[a.jsx(Qa,{className:"w-5 h-5"})," PNG"]})}),a.jsx("a",{href:p,download:`${o.businessName.toLowerCase().replace(/ /g,"-")}-badge.svg`,children:a.jsxs("button",{className:"w-full py-3 px-4 bg-[var(--bg-card)] text-[var(--text-main)] font-bold rounded-lg shadow-md border border-[var(--border-subtle)] hover:bg-[var(--bg-subtle)] transition-all flex items-center justify-center gap-2",children:[a.jsx(Qa,{className:"w-5 h-5"})," SVG"]})})]}),a.jsxs("div",{className:"relative bg-charcoal-dark p-4 rounded-lg",children:[a.jsx("button",{onClick:w,className:"absolute top-2 right-2 p-1.5 bg-gray-dark rounded-md text-gray-light hover:bg-gray-dark/50",title:"Copy code",children:g?a.jsx(bi,{className:"w-5 h-5 text-success"}):a.jsx(Ea,{className:"w-5 h-5"})}),a.jsx("pre",{children:a.jsx("code",{className:"text-gray-light text-sm whitespace-pre-wrap select-all",children:b})})]}),a.jsxs("div",{className:"mt-4 pt-4 border-t border-[var(--border-subtle)] flex flex-col sm:flex-row justify-between items-start sm:items-center gap-2 text-xs",children:[a.jsx("p",{className:"text-[var(--text-muted)]",children:"Current plan limit: 1 badge per company website"}),a.jsx("button",{onClick:()=>r("benefits"),className:"font-semibold text-[var(--accent-dark)] hover:underline self-end sm:self-center",children:"View benefits "})]})]}),a.jsxs(be,{children:[a.jsxs("div",{className:"flex items-center mb-4",children:[a.jsx("div",{className:"bg-gold/10 text-gold-dark p-2 rounded-full mr-3",children:a.jsx(Ao,{className:"w-5 h-5"})}),a.jsx("h3",{className:"font-playfair text-xl font-bold text-[var(--text-main)]",children:"Where to place your badge"})]}),a.jsxs("ul",{className:"space-y-2 list-disc list-inside text-[var(--text-muted)]",children:[a.jsx("li",{children:"Place above the fold on your homepage near your main call to action."}),a.jsx("li",{children:"Add it to your About and Reviews pages."}),a.jsx("li",{children:"Include it in your email signature or proposal PDFs."})]})]})]})]})]})},ON=[{value:"license",label:"Business License"},{value:"insurance",label:"Proof of Liability Insurance"}],DN=({documents:r,onNavigate:s,onRefreshDocuments:i})=>{const[o,c]=S.useState(!1),[u,h]=S.useState(!1),[g,m]=S.useState(""),[p,b]=S.useState(null),[w,j]=S.useState(null),[_,v]=S.useState(null),E=S.useRef(null),{session:y}=nt(),{approvedCount:k,underReviewCount:R,needsAttentionCount:A,docsNeedingAttention:q}=S.useMemo(()=>{const D=r.filter(me=>me.status==="approved"),W=r.filter(me=>me.status==="underReview"),se=r.filter(me=>["notUploaded","needsReplacement","rejected"].includes(me.status));return{approvedCount:D.length,underReviewCount:W.length,needsAttentionCount:se.length,docsNeedingAttention:se}},[r]),L=r.length,Q=L>0?k/L*100:0,B={approved:{icon:na,color:"text-success",label:"Approved",pill:"bg-success/10 text-success"},underReview:{icon:Si,color:"text-warning",label:"Under review",pill:"bg-warning/10 text-yellow-800"},rejected:{icon:wt,color:"text-error",label:"Rejected",pill:"bg-error/10 text-error"},needsReplacement:{icon:Sa,color:"text-warning",label:"Needs replacement",pill:"bg-warning/10 text-yellow-800"},notUploaded:{icon:wt,color:"text-error",label:"Not uploaded",pill:"bg-gray-200 text-gray-dark"}},Z=r.filter(D=>D.status!=="notUploaded"),M=()=>{j(null),v(null)},ae=D=>{var se;const W=((se=D.target.files)==null?void 0:se[0])??null;b(W),M()},ce=D=>{m(D.target.value),M()},I=()=>{var D;(D=E.current)==null||D.click()},K=async D=>{var se;if(D.preventDefault(),M(),!((se=y==null?void 0:y.user)!=null&&se.id)){j("You must be signed in to upload documents.");return}if(!g||!p){j("Select a document type and file to upload.");return}c(!0);const W=`${y.user.id}/${g}-${Date.now()}-${p.name}`;try{const{error:me}=await xe.storage.from("member-documents").upload(W,p,{cacheControl:"3600",upsert:!1});if(me)throw me;const{error:je}=await xe.from("member_documents").insert({profile_id:y.user.id,doc_type:g,file_url:W,status:"pending"});if(je)throw await xe.storage.from("member-documents").remove([W]),je;v("Document uploaded successfully. We will review it shortly."),b(null),m(""),E.current&&(E.current.value="");try{await i()}catch(T){console.error("Failed to refresh documents after upload",T),j("Document uploaded successfully, but we could not refresh the list. Please refresh the page.")}}catch(me){console.error("Failed to upload document",me),j("Unable to upload your document right now. Please try again.")}finally{c(!1)}},H=()=>{const D=()=>A===0?"border-success":k===0&&A>0?"border-error":"border-warning";return a.jsxs("div",{className:"relative group w-full bg-[var(--bg-card)] p-4 rounded-xl shadow-md border-l-4 transition-all",style:{borderColor:D().split("-")[1]},children:[a.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:a.jsxs("div",{children:[a.jsx("p",{className:"font-bold text-[var(--text-main)]",children:L>0?`Verification Progress: ${k} / ${L} documents approved`:"No documents uploaded yet"}),L>0&&a.jsxs("p",{className:"text-sm text-[var(--text-muted)]",children:[a.jsx("span",{className:"font-semibold",children:"Under review:"})," ",R,"  ",a.jsx("span",{className:"font-semibold",children:"Needs attention:"})," ",A]})]})}),a.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 w-max px-3 py-1.5 bg-charcoal text-white text-xs font-semibold rounded-md opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none",children:["Approved: ",k,"  Under review: ",R,"  Needs attention: ",A,a.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 w-0 h-0 border-x-4 border-x-transparent border-t-4 border-t-charcoal"})]})]})},J=()=>{const D=W=>{switch(W){case"notUploaded":return"(missing)";case"needsReplacement":return"(policy expired)";case"rejected":return"(rejected, see note)";default:return""}};return L===0?a.jsx(be,{className:"bg-gold/10 border-gold/20",children:a.jsxs("div",{className:"flex flex-col sm:flex-row items-start gap-4",children:[a.jsx("div",{className:"bg-gold/20 text-gold-dark p-3 rounded-full shrink-0",children:a.jsx(an,{className:"w-6 h-6"})}),a.jsxs("div",{className:"flex-grow",children:[a.jsx("h2",{className:"font-playfair text-2xl font-bold text-charcoal",children:"Start your verification"}),a.jsx("p",{className:"mt-2 text-gray-dark",children:"Upload your first document to begin the verification process."})]})]})}):a.jsx(be,{className:"bg-gold/10 border-gold/20",children:a.jsxs("div",{className:"flex flex-col sm:flex-row items-start gap-4",children:[a.jsx("div",{className:"bg-gold/20 text-gold-dark p-3 rounded-full shrink-0",children:q.length>0?a.jsx(Ao,{className:"w-6 h-6"}):a.jsx(na,{className:"w-6 h-6"})}),a.jsx("div",{className:"flex-grow",children:q.length>0?a.jsxs(a.Fragment,{children:[a.jsx("h2",{className:"font-playfair text-2xl font-bold text-charcoal",children:"Next Steps to Get Verified"}),a.jsx("p",{className:"mt-2 text-gray-dark",children:"To complete your verification, please take care of the items below:"}),a.jsx("ul",{className:"mt-4 space-y-2 list-disc list-inside text-charcoal font-semibold",children:q.map(W=>a.jsxs("li",{children:[W.status==="notUploaded"?"Upload":"Replace"," ",W.name," ",a.jsx("span",{className:"font-normal text-gray-dark",children:D(W.status)})]},String(W.id)))}),a.jsx("p",{className:"mt-4 text-xs text-text-muted italic",children:"Once these are uploaded, our team typically reviews within 23 business days."})]}):a.jsxs(a.Fragment,{children:[a.jsx("h2",{className:"font-playfair text-2xl font-bold text-charcoal",children:"Youre all set for now"}),a.jsx("p",{className:"mt-2 text-gray-dark",children:"All submitted documents are either approved or under review. Well notify you if we need anything else."})]})})]})})};return a.jsxs("div",{className:"animate-fade-in space-y-8",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"font-playfair text-4xl font-bold text-[var(--text-main)]",children:"Verification Documents"}),a.jsx("p",{className:"mt-2 text-lg text-[var(--text-muted)]",children:"Upload and manage the documents we need to verify your business."})]}),a.jsx(H,{}),a.jsxs(be,{className:"p-0",children:[a.jsx("div",{className:"p-6 border-b border-[var(--border-subtle)]",children:a.jsx("h2",{className:"font-playfair text-2xl font-bold text-[var(--text-main)]",children:"Document Checklist"})}),a.jsx("ul",{className:"divide-y divide-[var(--border-subtle)]",children:r.length===0?a.jsx("li",{className:"p-6 text-sm text-[var(--text-muted)]",children:"No documents uploaded yet. Use the form below to submit your first document."}):r.map(D=>{const{icon:W,color:se,label:me}=B[D.status];return a.jsx("li",{className:"p-6 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:a.jsxs("div",{className:"flex items-start flex-grow",children:[a.jsx(W,{className:`w-7 h-7 mr-4 mt-1 shrink-0 ${se}`}),a.jsxs("div",{children:[a.jsx("p",{className:"font-bold text-lg text-[var(--text-main)]",children:D.docTypeLabel}),a.jsxs("p",{className:`text-sm font-semibold ${se}`,children:[me,D.uploadDate&&a.jsxs("span",{className:"text-[var(--text-muted)] font-normal ml-2",children:[" Uploaded: ",D.uploadDate]})]}),D.fileName&&a.jsxs("p",{className:"text-xs text-[var(--text-muted)] mt-1",children:["File: ",D.fileName,D.fileSize?`  ${D.fileSize}`:""]}),D.adminNote&&a.jsxs("p",{className:"text-xs text-[var(--text-muted)] italic mt-1",children:["Note: ",D.adminNote]})]})]})},D.id)})}),a.jsxs("div",{className:"p-6 bg-[var(--bg-subtle)] rounded-b-2xl",children:[a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[a.jsx("p",{className:"text-sm font-semibold text-[var(--text-main)]",children:"Overall Progress"}),a.jsx("p",{className:"text-sm font-bold text-[var(--text-main)]",children:L>0?`${k} of ${L} documents approved`:"Upload your first document to begin verification"})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:a.jsx("div",{className:"bg-[var(--accent)] h-2.5 rounded-full transition-all duration-500",style:{width:`${Q}%`}})})]})]}),a.jsxs(be,{children:[a.jsx("h2",{className:"font-playfair text-2xl font-bold text-[var(--text-main)] mb-4",children:"Upload Documents"}),a.jsxs("form",{onSubmit:K,className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"document-type",className:"block text-sm font-semibold text-[var(--text-main)] mb-2",children:"Document type"}),a.jsxs("select",{id:"document-type",value:g,onChange:ce,className:"w-full rounded-lg border border-[var(--border-subtle)] bg-[var(--bg-card)] px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-[var(--accent)]",children:[a.jsx("option",{value:"",children:"Select a document type"}),ON.map(D=>a.jsx("option",{value:D.value,children:D.label},D.value))]})]}),a.jsxs("div",{className:"relative flex flex-col items-center justify-center p-10 border-2 border-dashed rounded-xl bg-[var(--bg-subtle)] border-[var(--border-subtle)]",children:[a.jsx(an,{className:"w-12 h-12 text-[var(--text-muted)]"}),p?a.jsxs(a.Fragment,{children:[a.jsx("p",{className:"mt-4 text-lg font-semibold text-[var(--text-main)]",children:p.name}),a.jsx("p",{className:"text-sm text-[var(--text-muted)]",children:Wd(p.size)??`${p.size} bytes`})]}):a.jsx("p",{className:"mt-4 text-lg font-semibold text-[var(--text-main)]",children:"Select a file to upload"}),a.jsx("p",{className:"text-sm text-[var(--text-muted)] mt-2",children:"Accepted: PDF, JPG, PNG (max 10MB each)"}),a.jsx("input",{ref:E,type:"file",className:"hidden",onChange:ae,accept:".pdf,.jpg,.jpeg,.png"}),a.jsx("button",{type:"button",onClick:I,className:"mt-6 py-2.5 px-6 bg-[var(--bg-card)] border border-[var(--border-subtle)] rounded-lg font-semibold text-[var(--text-main)] hover:bg-[var(--bg-subtle)] shadow-sm",children:"Choose file"})]}),(w||_)&&a.jsxs("div",{className:"space-y-2",children:[w&&a.jsx("p",{className:"text-sm text-error",children:w}),_&&a.jsx("p",{className:"text-sm text-success",children:_})]}),a.jsx("div",{className:"flex justify-end",children:a.jsx("button",{type:"submit",disabled:!g||!p||o,className:"py-2.5 px-8 bg-gold text-charcoal font-bold rounded-lg shadow-lg hover:bg-gold-light transition-all transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:scale-100",children:o?"Uploading...":"Submit for Verification"})})]})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsx("h2",{className:"font-playfair text-2xl font-bold text-[var(--text-main)]",children:"Uploaded Documents"}),Z.length===0?a.jsx(be,{className:"text-sm text-[var(--text-muted)]",children:"No documents have been uploaded yet."}):Z.map(D=>a.jsx(be,{className:"flex flex-col gap-3",children:a.jsx("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("p",{className:"font-bold text-[var(--text-main)]",children:D.fileName}),a.jsx("span",{className:`px-2 py-0.5 text-xs font-semibold rounded-full ${B[D.status].pill}`,children:B[D.status].label})]}),a.jsxs("p",{className:"text-sm text-[var(--text-muted)] mt-1",children:[D.uploadTimestamp??"Pending timestamp",D.fileSize?`  ${D.fileSize}`:""]}),D.adminNote&&a.jsxs("p",{className:"text-xs text-[var(--text-muted)] italic mt-2",children:["Admin Note: ",D.adminNote]})]})})},D.id))]}),a.jsx(J,{}),a.jsxs(be,{children:[a.jsxs("button",{onClick:()=>h(!u),className:"w-full flex justify-between items-center text-left",children:[a.jsx("h2",{className:"font-playfair text-2xl font-bold text-[var(--text-main)]",children:"Document Upload Guidelines"}),a.jsx(nn,{className:`w-6 h-6 text-[var(--text-muted)] transition-transform ${u?"rotate-180":""}`})]}),u&&a.jsxs("div",{className:"mt-4 pt-4 border-t border-[var(--border-subtle)] animate-fade-in",children:[a.jsxs("ul",{className:"space-y-2 list-disc list-inside text-[var(--text-muted)]",children:[a.jsx("li",{children:"Documents must be current and not expired."}),a.jsx("li",{children:"Text must be clearly readable, no blurry photos."}),a.jsx("li",{children:"Upload all pages, front and back if applicable."}),a.jsx("li",{children:"Information must match your business name and details."})]}),a.jsxs("div",{className:"mt-6 pt-6 border-t border-[var(--border-subtle)] flex flex-col sm:flex-row justify-between items-start sm:items-center gap-2",children:[a.jsx("p",{className:"text-[var(--text-main)] font-semibold",children:"Need help with your documents?"}),a.jsx("a",{href:"mailto:documents@restorationexpertise.com",className:"font-bold text-[var(--accent-dark)] hover:underline",children:"Contact Support "})]})]})]})]})},MN=({benefit:r,onClose:s,onRequest:i})=>{const o=r.quota&&r.used?r.used/r.quota*100:0,c=r.quota!==void 0&&r.used!==void 0&&r.used<r.quota;return a.jsx("div",{className:"fixed inset-0 bg-[var(--bg-overlay)] flex items-center justify-center z-50 p-4 animate-fade-in",onClick:s,children:a.jsxs("div",{className:"bg-[var(--bg-card)] rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto relative animate-slide-up",onClick:u=>u.stopPropagation(),children:[a.jsxs("div",{className:"p-6 sm:p-8",children:[a.jsx("button",{onClick:s,className:"absolute top-4 right-4 text-[var(--text-muted)] hover:text-[var(--text-main)]",children:a.jsx(wt,{className:"w-8 h-8"})}),a.jsx("h2",{className:"font-playfair text-3xl font-bold text-[var(--text-main)] mb-2",children:r.title}),a.jsx("p",{className:"text-[var(--text-muted)] text-lg",children:r.description}),r.quota!==void 0&&r.used!==void 0&&a.jsxs("div",{className:"mt-6",children:[a.jsx("h3",{className:"font-semibold text-[var(--text-main)] mb-2",children:"Current Usage"}),a.jsxs("div",{className:"flex justify-between text-sm font-medium text-[var(--text-muted)] mb-1",children:[a.jsx("span",{children:"Usage"}),a.jsxs("span",{children:[r.used," of ",r.quota," used this year"]})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:a.jsx("div",{className:"bg-[var(--accent)] h-2.5 rounded-full",style:{width:`${o}%`}})})]}),a.jsxs("div",{className:"mt-8 pt-6 border-t border-[var(--border-subtle)] space-y-3",children:[a.jsx("h3",{className:"font-semibold text-[var(--text-main)]",children:"History (Example)"}),a.jsxs("ul",{className:"text-sm text-[var(--text-muted)] space-y-2",children:[a.jsxs("li",{className:"flex justify-between",children:[a.jsx("span",{children:"Request for 'Basement Mold Prevention'"})," ",a.jsx("span",{children:"Jul 15, 2024"})]}),a.jsxs("li",{className:"flex justify-between",children:[a.jsx("span",{children:"Request for 'Post-Fire Cleanup Guide'"})," ",a.jsx("span",{children:"Jan 20, 2024"})]})]})]})]}),a.jsxs("div",{className:"p-6 bg-[var(--bg-subtle)] sticky bottom-0 rounded-b-2xl flex flex-col sm:flex-row justify-end items-center gap-4",children:[a.jsx("button",{onClick:s,className:"w-full sm:w-auto py-2.5 px-6 bg-[var(--bg-card)] border border-[var(--border-subtle)] rounded-lg font-semibold shadow-sm hover:bg-[var(--bg-subtle)]",children:"Close"}),c&&a.jsx("button",{onClick:()=>i(r.title),className:"w-full sm:w-auto py-2.5 px-6 bg-[var(--accent)] text-[var(--accent-text)] font-bold rounded-lg shadow-md hover:bg-[var(--accent-light)]",children:"Request new post"})]})]})})},UN=({benefits:r})=>{const{totalUsed:s,totalQuota:i,usagePercent:o,readableBenefits:c}=S.useMemo(()=>{const m=r.filter(j=>j.quota!==void 0&&j.used!==void 0),p=m.reduce((j,_)=>j+(_.used||0),0),b=m.reduce((j,_)=>j+(_.quota||0),0),w=b>0?p/b*100:0;return{totalUsed:p,totalQuota:b,usagePercent:w,readableBenefits:m}},[r]),u=60,h=2*Math.PI*u,g=h-o/100*h;return a.jsxs(be,{children:[a.jsx("h2",{className:"font-playfair text-2xl font-bold text-[var(--text-main)] mb-4",children:"Usage Overview"}),a.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-8",children:[a.jsxs("div",{className:"relative w-40 h-40 shrink-0",children:[a.jsxs("svg",{className:"w-full h-full",viewBox:"0 0 140 140",children:[a.jsx("circle",{className:"text-gray-200",strokeWidth:"12",stroke:"currentColor",fill:"transparent",r:u,cx:"70",cy:"70"}),a.jsx("circle",{className:"text-[var(--accent)]",strokeWidth:"12",strokeDasharray:h,strokeDashoffset:g,strokeLinecap:"round",stroke:"currentColor",fill:"transparent",r:u,cx:"70",cy:"70",style:{transform:"rotate(-90deg)",transformOrigin:"50% 50%",transition:"stroke-dashoffset 0.5s ease-out"}})]}),a.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center font-bold text-[var(--text-main)]",children:[a.jsx("span",{className:"font-playfair text-3xl",children:s}),a.jsxs("span",{className:"text-lg text-[var(--text-muted)]",children:["/ ",i," Used"]})]})]}),a.jsx("div",{className:"w-full",children:a.jsx("ul",{className:"space-y-2",children:c.map(m=>a.jsxs("li",{className:"text-sm",children:[a.jsxs("div",{className:"flex justify-between font-medium",children:[a.jsx("span",{children:m.title}),a.jsxs("span",{className:"text-[var(--text-muted)]",children:[m.used,"/",m.quota]})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1.5 mt-1",children:a.jsx("div",{className:"bg-[var(--accent)] h-1.5 rounded-full",style:{width:`${m.used/m.quota*100}%`}})})]},m.title))})})]})]})},LN=({showToast:r})=>{const{currentUser:s,updateUser:i}=nt(),[o,c]=S.useState((s==null?void 0:s.benefits)||[]),[u,h]=S.useState(null);if(S.useEffect(()=>{c((s==null?void 0:s.benefits)||[])},[s==null?void 0:s.benefits]),!s||!s.plan)return null;const{plan:g}=s,m={Gold:"bg-gold text-charcoal",Silver:"bg-gray-300 text-charcoal",Bronze:"bg-yellow-700 text-white","Founding Member":"bg-charcoal text-gold",Platinum:"bg-gray-800 text-white"},p={NewspaperIcon:ko,ChartBarIcon:Sx,ShieldCheckIcon:_t,ChatBubbleOvalLeftEllipsisIcon:Ei},b=j=>{const _=o.map(v=>v.title===j&&v.used!==void 0&&v.quota!==void 0&&v.used<v.quota?{...v,used:v.used+1}:v);c(_),i({...s,benefits:_}),r(" Request submitted! Our team will reach out within 23 business days.","success"),h(null)},w=({benefit:j,onClick:_})=>{const v=p[j.icon],E=j.quota&&j.used?j.used/j.quota*100:0;return a.jsxs(be,{onClick:_,className:"flex flex-col",children:[a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx("div",{className:"bg-[var(--accent-bg-subtle)] text-[var(--accent-dark)] p-3 rounded-full",children:v&&a.jsx(v,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-playfair text-xl font-bold text-[var(--text-main)]",children:j.title}),a.jsx("p",{className:"text-sm text-[var(--text-muted)] mt-1",children:j.description})]})]}),a.jsxs("div",{className:"mt-4 pt-4 border-t border-[var(--border-subtle)] flex-grow",children:[j.quota!==void 0&&j.used!==void 0&&a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between text-sm font-medium text-[var(--text-muted)] mb-1",children:[a.jsx("span",{children:"Usage"}),a.jsxs("span",{children:[j.used," of ",j.quota," used"]})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:a.jsx("div",{className:"bg-[var(--accent)] h-2.5 rounded-full",style:{width:`${E}%`}})})]}),j.nextDate&&a.jsxs("p",{className:"text-sm font-semibold text-[var(--text-main)]",children:["Next scheduled: ",a.jsx("span",{className:"font-normal",children:j.nextDate})]}),j.status&&a.jsxs("p",{className:"text-sm font-semibold text-[var(--text-main)]",children:["Status: ",a.jsx("span",{className:"font-normal text-success",children:j.status})]}),j.isIncluded&&a.jsxs("p",{className:"text-sm font-semibold text-success flex items-center gap-1",children:[a.jsx(na,{className:"w-4 h-4"})," Included in your plan"]})]}),j.quota!==void 0&&a.jsx("div",{className:"mt-4 text-right",children:a.jsx("button",{onClick:y=>{y.stopPropagation(),_()},className:"py-2 px-4 bg-[var(--accent)] text-[var(--accent-text)] font-bold text-sm rounded-lg shadow-sm hover:bg-[var(--accent-light)]",children:"Request Now"})})]})};return a.jsxs("div",{className:"animate-fade-in space-y-8",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"font-playfair text-4xl font-bold text-[var(--text-main)]",children:"Your Membership Benefits"}),a.jsx("p",{className:"mt-2 text-lg text-[var(--text-muted)]",children:"See whats included in your plan and how to make the most of your membership."})]}),a.jsx(be,{children:a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"font-playfair text-2xl font-bold text-[var(--text-main)]",children:"Your Current Plan"}),a.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[a.jsx("span",{className:`px-4 py-1 text-sm font-bold rounded-full ${m[g.name]||"bg-gray-200"}`,children:g.name}),a.jsx("span",{className:"font-semibold text-[var(--text-main)]",children:g.rating})]}),a.jsxs("p",{className:"text-sm text-[var(--text-muted)] mt-2",children:[g.billingCycle,"  Renews on ",g.renewalDate]})]}),a.jsxs("div",{className:"flex gap-3 self-end md:self-center",children:[a.jsx("button",{onClick:()=>r("Coming soon","success"),className:"py-2.5 px-5 bg-[var(--bg-card)] border border-[var(--border-subtle)] rounded-lg font-semibold shadow-sm hover:bg-[var(--bg-subtle)]",children:"View Invoice"}),a.jsx("button",{onClick:()=>r("Coming soon","success"),className:"py-2.5 px-5 bg-[var(--accent)] text-[var(--accent-text)] font-bold rounded-lg shadow-md hover:bg-[var(--accent-light)]",children:"Upgrade Plan"})]})]})}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:o.map((j,_)=>a.jsx(w,{benefit:j,onClick:()=>h(j)},_))}),a.jsx(UN,{benefits:o}),a.jsxs("div",{className:"bg-gradient-to-r from-gold to-gold-dark text-charcoal p-8 rounded-2xl shadow-lg flex flex-col md:flex-row justify-between items-center gap-6",children:[a.jsxs("div",{className:"text-center md:text-left",children:[a.jsx("h2",{className:"font-playfair text-2xl font-bold",children:"Ready to grow faster?"}),a.jsx("p",{className:"mt-1",children:"Upgrade to Platinum and unlock unlimited SEO posts, faster reviews, and exclusive member promotions."})]}),a.jsx("button",{onClick:()=>r("Coming soon","success"),className:"py-3 px-8 bg-charcoal text-white font-bold rounded-lg shadow-md hover:bg-charcoal-light transition-colors whitespace-nowrap",children:"Compare Plans"})]}),u&&a.jsx(MN,{benefit:o.find(j=>j.title===u.title)||u,onClose:()=>h(null),onRequest:b})]})},BN=({isOpen:r,onClose:s,onConfirm:i})=>r?a.jsx("div",{className:"fixed inset-0 bg-[var(--bg-overlay)] flex items-center justify-center z-50 p-4 animate-fade-in",onClick:s,children:a.jsxs("div",{className:"bg-[var(--bg-card)] rounded-2xl shadow-2xl w-full max-w-md max-h-[90vh] overflow-y-auto relative animate-slide-up",onClick:o=>o.stopPropagation(),children:[a.jsxs("div",{className:"p-6 sm:p-8",children:[a.jsx("h2",{className:"font-playfair text-2xl font-bold text-[var(--text-main)] mb-4",children:"Pause Billing"}),a.jsx("p",{className:"text-[var(--text-muted)] mb-6",children:"Your subscription will be paused from your next renewal date. You will not be billed and your benefits will be temporarily suspended."}),a.jsxs("fieldset",{className:"space-y-3",children:[a.jsx("legend",{className:"font-semibold text-[var(--text-main)]",children:"Pause duration (dummy):"}),a.jsxs("label",{className:"flex items-center gap-3 p-3 border rounded-lg",children:[a.jsx("input",{type:"radio",name:"pause-duration",className:"h-4 w-4 text-[var(--accent)] focus:ring-[var(--accent)]"})," 1 Month"]}),a.jsxs("label",{className:"flex items-center gap-3 p-3 border rounded-lg",children:[a.jsx("input",{type:"radio",name:"pause-duration",className:"h-4 w-4 text-[var(--accent)] focus:ring-[var(--accent)]"})," 3 Months"]})]})]}),a.jsxs("div",{className:"p-6 bg-[var(--bg-subtle)] sticky bottom-0 rounded-b-2xl flex flex-col sm:flex-row justify-end items-center gap-4",children:[a.jsx("button",{onClick:s,className:"w-full sm:w-auto py-2.5 px-6 bg-[var(--bg-card)] border border-[var(--border-subtle)] rounded-lg font-semibold shadow-sm hover:bg-[var(--bg-subtle)]",children:"Cancel"}),a.jsx("button",{onClick:i,className:"w-full sm:w-auto py-2.5 px-6 bg-[var(--accent)] text-[var(--accent-text)] font-bold rounded-lg shadow-md hover:bg-[var(--accent-light)]",children:"Confirm Pause"})]})]})}):null,zN=({isOpen:r,onClose:s,onConfirm:i})=>r?a.jsx("div",{className:"fixed inset-0 bg-[var(--bg-overlay)] flex items-center justify-center z-50 p-4 animate-fade-in",onClick:s,children:a.jsxs("div",{className:"bg-[var(--bg-card)] rounded-2xl shadow-2xl w-full max-w-lg max-h-[90vh] overflow-y-auto relative animate-slide-up",onClick:o=>o.stopPropagation(),children:[a.jsxs("div",{className:"p-6 sm:p-8 text-center",children:[a.jsx("div",{className:"mx-auto w-16 h-16 flex items-center justify-center rounded-full bg-error/10 text-error mb-4",children:a.jsx(Sa,{className:"w-8 h-8"})}),a.jsx("h2",{className:"font-playfair text-3xl font-bold text-[var(--text-main)] mb-4",children:"Are you sure you want to cancel?"}),a.jsx("p",{className:"text-[var(--text-muted)] text-lg",children:"Canceling will remove your active badge and network listing at the end of your current period. You will lose access to all your membership benefits."})]}),a.jsxs("div",{className:"p-6 bg-[var(--bg-subtle)] sticky bottom-0 rounded-b-2xl flex flex-col-reverse sm:flex-row justify-center items-center gap-4",children:[a.jsx("button",{onClick:i,className:"w-full sm:w-auto py-2.5 px-6 bg-error text-white font-bold rounded-lg shadow-md hover:bg-red-600",children:"Cancel at end of period"}),a.jsx("button",{onClick:s,className:"w-full sm:w-auto py-2.5 px-6 bg-[var(--accent)] text-[var(--accent-text)] font-bold rounded-lg shadow-md hover:bg-[var(--accent-light)]",children:"Keep my subscription"})]})]})}):null,qN=({showToast:r,billingData:s,invoices:i=[]})=>{var y;const{session:o}=nt(),[c,u]=S.useState(!1),[h,g]=S.useState(!1),m=()=>{g(!1),r("Your subscription is scheduled for cancellation.","success")};if(!s)return a.jsx(be,{children:a.jsx("p",{children:"Billing information is not available."})});const p={plan:s.plan_name||"Unknown Plan",status:s.subscription_status||"Unknown",renewalDate:s.next_renewal_date,price:s.plan_price||"$0"},b={brand:s.payment_method_brand||"Unknown",last4:s.payment_method_last4||"****",expiry:s.payment_method_expiry||"",cardholder:s.cardholder_name||((y=o==null?void 0:o.user)==null?void 0:y.email)||"Unknown"},j={Active:{text:"Active",color:"bg-success/20 text-success"},"Past due":{text:"Past Due",color:"bg-warning/20 text-yellow-800"},Canceled:{text:"Ends on "+p.renewalDate,color:"bg-gray-200 text-gray-dark"}}[p.status],_=k=>k.toLowerCase()==="visa"?a.jsx("div",{className:"font-bold text-blue-800 italic text-2xl",children:"VISA"}):k.toLowerCase()==="mastercard"?a.jsx("div",{className:"font-bold text-red-600",children:"Mastercard"}):a.jsx(ir,{className:"w-8 h-8 text-gray-dark"}),v=k=>({Paid:"bg-success/20 text-success",Failed:"bg-error/20 text-error",Pending:"bg-warning/20 text-yellow-800"})[k],E=()=>p.status==="Past due"?a.jsxs("div",{className:"p-4 rounded-xl bg-warning/10 border border-warning/20 flex items-center gap-4",children:[a.jsx(Sa,{className:"w-6 h-6 text-warning shrink-0"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-bold text-yellow-900",children:"Your last payment failed."}),a.jsx("p",{className:"text-sm text-yellow-800",children:"Please update your payment method to avoid interruption."})]})]}):p.status==="Canceled"?a.jsxs("div",{className:"p-4 rounded-xl bg-[var(--bg-subtle)] border border-[var(--border-subtle)] flex items-center gap-4",children:[a.jsx(Sa,{className:"w-6 h-6 text-[var(--text-muted)] shrink-0"}),a.jsxs("div",{children:[a.jsxs("p",{className:"font-bold text-[var(--text-main)]",children:["Your subscription is scheduled to end on ",p.renewalDate,"."]}),a.jsx("p",{className:"text-sm text-[var(--text-muted)]",children:"Your badge and benefits will become inactive after that date."})]})]}):a.jsxs("div",{className:"p-4 rounded-xl bg-[var(--bg-subtle)] border border-[var(--border-subtle)] flex items-center gap-4",children:[a.jsx(ir,{className:"w-6 h-6 text-[var(--text-muted)] shrink-0"}),a.jsxs("p",{className:"text-[var(--text-main)] sm:text-lg",children:["Next payment: ",a.jsxs("span",{className:"font-bold",children:[p.price.split(" ")[0]," on ",p.renewalDate]}),"  ",p.planName," plan  Billed ",p.billingCycle]})]});return a.jsxs(a.Fragment,{children:[a.jsx(BN,{isOpen:c,onClose:()=>u(!1),onConfirm:()=>{r("Your subscription will be paused starting from the next billing cycle.","success"),u(!1)}}),a.jsx(zN,{isOpen:h,onClose:()=>g(!1),onConfirm:m}),a.jsxs("div",{className:"animate-fade-in space-y-8",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"font-playfair text-4xl font-bold text-[var(--text-main)]",children:"Billing & Subscription"}),a.jsx("p",{className:"mt-2 text-lg text-[var(--text-muted)]",children:"Manage your Restoration Expertise membership, payment details, and invoices."})]}),a.jsx(E,{}),a.jsx(be,{children:a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start gap-4",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"font-playfair text-2xl font-bold text-[var(--text-main)]",children:"Current Subscription"}),a.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[a.jsxs("p",{className:"text-xl font-semibold text-[var(--text-main)]",children:[p.planName,"  ",p.price]}),a.jsx("span",{className:`px-3 py-1 text-xs font-bold rounded-full ${j.color}`,children:j.text})]}),a.jsxs("p",{className:"text-sm text-[var(--text-muted)] mt-2",children:[p.status==="Canceled"?"Access ends":"Next charge",": ",p.renewalDate,"  Member since: ",p.startedAt]})]}),a.jsxs("div",{className:"flex gap-3 self-end md:self-auto shrink-0",children:[a.jsx("button",{onClick:()=>r("This will be connected to Stripe later.","success"),className:"py-2.5 px-5 bg-[var(--bg-card)] border border-[var(--border-subtle)] rounded-lg font-semibold shadow-sm hover:bg-[var(--bg-subtle)]",children:"Change plan"}),a.jsx("button",{onClick:()=>r("This will be connected to Stripe later.","success"),className:"py-2.5 px-5 bg-[var(--accent)] text-[var(--accent-text)] font-bold rounded-lg shadow-md hover:bg-[var(--accent-light)]",children:"Open customer portal"})]})]})}),a.jsxs(be,{className:p.status==="Past due"?"border-2 border-warning":"",children:[a.jsx("h2",{className:"font-playfair text-2xl font-bold text-[var(--text-main)] mb-4",children:"Payment Method"}),a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start gap-4",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-16 h-10 bg-gray-200 rounded-md flex items-center justify-center",children:_(b.brand)}),a.jsxs("div",{children:[a.jsxs("p",{className:"font-semibold text-[var(--text-main)]",children:[b.brand," ending in ",b.last4]}),a.jsxs("p",{className:"text-sm text-[var(--text-muted)]",children:["Expires ",b.expiry]}),a.jsxs("p",{className:"text-sm text-[var(--text-muted)] mt-1",children:["Cardholder: ",b.cardholder]})]})]}),a.jsxs("div",{className:"flex gap-3 self-end md:self-auto shrink-0",children:[a.jsx("button",{onClick:()=>r("Card update flow will be handled by Stripe in the live version.","success"),className:"py-2.5 px-5 bg-[var(--bg-card)] border border-[var(--border-subtle)] rounded-lg font-semibold shadow-sm hover:bg-[var(--bg-subtle)]",children:"Update card"}),a.jsx("button",{disabled:!0,className:"py-2.5 px-5 bg-[var(--bg-card)] border border-[var(--border-subtle)] rounded-lg font-semibold shadow-sm disabled:opacity-50 disabled:cursor-not-allowed",children:"Remove"})]})]})]}),a.jsxs(be,{children:[a.jsx("h2",{className:"font-playfair text-2xl font-bold text-[var(--text-main)] mb-4",children:"Invoice History"}),a.jsx("div",{className:"overflow-x-auto hidden md:block",children:a.jsxs("table",{className:"min-w-full",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b border-[var(--border-subtle)]",children:[a.jsx("th",{className:"py-3 px-4 text-left text-sm font-semibold text-[var(--text-muted)]",children:"Invoice #"}),a.jsx("th",{className:"py-3 px-4 text-left text-sm font-semibold text-[var(--text-muted)]",children:"Date"}),a.jsx("th",{className:"py-3 px-4 text-left text-sm font-semibold text-[var(--text-muted)]",children:"Amount"}),a.jsx("th",{className:"py-3 px-4 text-left text-sm font-semibold text-[var(--text-muted)]",children:"Status"}),a.jsx("th",{className:"py-3 px-4 text-right text-sm font-semibold text-[var(--text-muted)]",children:"Actions"})]})}),a.jsx("tbody",{children:i==null?void 0:i.map(k=>a.jsxs("tr",{className:"border-b border-[var(--border-subtle)] last:border-0 hover:bg-[var(--bg-subtle)]",children:[a.jsx("td",{className:"py-3 px-4 text-[var(--text-main)] font-semibold",children:k.id}),a.jsx("td",{className:"py-3 px-4 text-[var(--text-main)]",children:k.date}),a.jsx("td",{className:"py-3 px-4 text-[var(--text-main)]",children:k.amount}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:`px-3 py-1 text-xs font-semibold rounded-full ${v(k.status)}`,children:k.status})}),a.jsx("td",{className:"py-3 px-4 text-right",children:a.jsx("button",{onClick:()=>r("Download will be available in the live version.","success"),className:"p-2 text-[var(--text-muted)] hover:text-[var(--accent-dark)]",children:a.jsx(Qa,{className:"w-5 h-5"})})})]},k.id))})]})}),a.jsx("div",{className:"space-y-4 md:hidden",children:i==null?void 0:i.map(k=>a.jsxs("div",{className:"p-4 border border-[var(--border-subtle)] rounded-lg",children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-bold text-[var(--text-main)]",children:k.id}),a.jsx("p",{className:"text-sm text-[var(--text-muted)]",children:k.date})]}),a.jsx("span",{className:`px-3 py-1 text-xs font-semibold rounded-full ${v(k.status)}`,children:k.status})]}),a.jsxs("div",{className:"flex justify-between items-center mt-3 pt-3 border-t border-[var(--border-subtle)]",children:[a.jsx("p",{className:"font-semibold text-[var(--text-main)]",children:k.amount}),a.jsxs("button",{onClick:()=>r("Download will be available in the live version.","success"),className:"flex items-center gap-2 py-1 px-3 bg-[var(--bg-card)] border border-[var(--border-subtle)] rounded-lg text-sm font-semibold",children:[a.jsx(Qa,{className:"w-4 h-4"})," PDF"]})]})]},k.id))})]}),a.jsxs(be,{children:[a.jsx("h2",{className:"font-playfair text-2xl font-bold text-[var(--text-main)] mb-2",children:"Manage Subscription"}),a.jsx("p",{className:"text-[var(--text-muted)] mb-6",children:"Control your membership status. Changes here will affect your access to benefits and your badge."}),p.status==="Canceled"?a.jsx("div",{className:"p-4 bg-[var(--bg-subtle)] rounded-lg text-center text-[var(--text-muted)] font-medium",children:"Subscription already scheduled for cancellation."}):a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[a.jsx("button",{onClick:()=>u(!0),className:"py-3 px-4 bg-[var(--bg-card)] border border-[var(--border-subtle)] rounded-lg font-semibold shadow-sm hover:bg-[var(--bg-subtle)]",children:"Pause billing"}),a.jsx("button",{onClick:()=>g(!0),className:"py-3 px-4 bg-[var(--bg-card)] border border-[var(--border-subtle)] rounded-lg font-semibold shadow-sm text-error hover:bg-error/5",children:"Cancel subscription"}),a.jsx("button",{onClick:()=>r("Use the payment method section above to update your card.","success"),className:"py-3 px-4 bg-[var(--bg-card)] border border-[var(--border-subtle)] rounded-lg font-semibold shadow-sm hover:bg-[var(--bg-subtle)]",children:"Update billing details"})]})]})]})]})},IN=[{title:"Monthly Owner Roundtable",date:"March 5, 2025  3:00 PM CST",type:"Zoom Call",tier:null},{title:"Website & SEO Hotseat",date:"March 18, 2025  2:00 PM CST",type:"Workshop",tier:"Gold+"},{title:"Badge Optimization Workshop",date:"April 2, 2025  4:00 PM CST",type:"Workshop",tier:null}],$N=[{title:"Start Here: Onboarding Post",description:"New to the group? Introduce yourself and get the lay of the land.",icon:Co,link:"#"},{title:"Monthly Wins Thread",description:"Share your recent victories, big or small. Let's celebrate together.",icon:So,link:"#"},{title:"Website & SEO Review Thread",description:"Get feedback on your site from the community and our team.",icon:hr,link:"#"},{title:"Hiring & Operations Thread",description:"Discuss challenges and solutions for finding and managing great people.",icon:Eo,link:"#"}],PN=({onNavigate:r})=>{var b;const{currentUser:s}=nt(),i=S.useRef(null),[o,c]=S.useState(!1),[u,h]=S.useState(!1),g=()=>{var w;(w=i.current)==null||w.scrollIntoView({behavior:"smooth"})},m=[{title:"Case study: How XYZ Restoration added $40k/mo with SEO + reviews.",snippet:"John from XYZ breaks down the exact steps he took to dominate local search results, from optimizing his Google Business Profile to implementing a simple, effective review generation system.",link:"#"},{title:"Discussion: Should you niche into water only or stay full service?",snippet:"A lively debate on the pros and cons of specializing vs. being a one-stop-shop. See what other successful owners are doing and why.",link:"#"},{title:"Win: Member landed a $15k fire job from a website badge visitor.",snippet:"Sarah shares how a homeowner found her through the Restoration Expertise network and specifically mentioned the verification badge as the deciding factor.",link:"#"}],p=["Real talk from other owners, not theory.","Feedback on your website, offers and systems.","First access to new tools, templates and calls.","Priority answers from the Restoration Expertise team."];return a.jsxs("div",{className:"animate-fade-in space-y-8",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"font-playfair text-4xl font-bold text-[var(--text-main)]",children:"Community Hub"}),a.jsx("p",{className:"mt-2 text-lg text-[var(--text-muted)]",children:"Connect with other restoration owners, share wins, and get support from our team."})]}),a.jsx(be,{className:"!p-0 overflow-hidden",children:a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3",children:[a.jsxs("div",{className:"lg:col-span-2 p-8 bg-[var(--accent-bg-subtle)]",children:[a.jsx("h2",{className:"font-playfair text-3xl font-bold text-[var(--text-main)] mb-4",children:"Join the Restoration Expertise Community"}),a.jsx("p",{className:"text-[var(--text-muted)] mb-6 max-w-xl",children:"Ask questions, share best practices, and learn from other verified restoration companies in our private, members-only group."}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[a.jsx("a",{href:"https://facebook.com/groups/restorationexpertise",target:"_blank",rel:"noopener noreferrer",className:"py-3 px-6 bg-[var(--accent)] text-[var(--accent-text)] font-bold rounded-lg shadow-md hover:bg-[var(--accent-light)] text-center",children:"Join Private Facebook Group"}),a.jsx("button",{onClick:g,className:"py-3 px-6 bg-[var(--bg-card)] border border-[var(--border-subtle)] rounded-lg font-semibold text-[var(--text-main)] shadow-sm hover:bg-[var(--bg-subtle)]",children:"Community Guidelines"})]})]}),a.jsxs("div",{className:"lg:col-span-1 bg-[var(--accent-bg-subtle)] p-8 flex flex-col justify-center",children:[a.jsx("h3",{className:"font-semibold text-[var(--text-main)] mb-4",children:"Community Stats"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Cs,{className:"w-6 h-6 text-[var(--accent-dark)]"}),a.jsxs("p",{className:"text-[var(--text-main)]",children:[a.jsx("span",{className:"font-bold text-xl",children:"134"})," members"]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Ei,{className:"w-6 h-6 text-[var(--accent-dark)]"}),a.jsxs("p",{className:"text-[var(--text-main)]",children:[a.jsx("span",{className:"font-bold text-xl",children:"18"})," posts, ",a.jsx("span",{className:"font-bold text-xl",children:"42"})," comments this week"]})]})]})]})]})}),a.jsxs(be,{children:[a.jsx("h2",{className:"font-playfair text-2xl font-bold text-[var(--text-main)] mb-4",children:"Why join?"}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:p.map((w,j)=>a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"bg-success/10 text-success p-1.5 rounded-full mt-1",children:a.jsx(bi,{className:"w-4 h-4"})}),a.jsx("p",{className:"text-[var(--text-main)]",children:w})]},j))})]}),a.jsxs(be,{children:[a.jsx("h2",{className:"font-playfair text-2xl font-bold text-[var(--text-main)] mb-4",children:"Community Highlights"}),a.jsx("div",{className:"space-y-6",children:m.map((w,j)=>a.jsxs("div",{className:"pb-6 border-b border-[var(--border-subtle)] last:border-b-0 last:pb-0",children:[a.jsx("h3",{className:"font-bold text-lg text-[var(--text-main)] mb-2",children:w.title}),a.jsx("p",{className:"text-[var(--text-muted)] mb-3",children:w.snippet}),a.jsx("a",{href:w.link,target:"_blank",rel:"noopener noreferrer",className:"font-semibold text-[var(--accent-dark)] hover:underline",children:"View in group "})]},j))})]}),a.jsx("div",{ref:i,className:"scroll-mt-20",children:a.jsxs(be,{children:[a.jsxs("button",{onClick:()=>c(!o),className:"w-full flex justify-between items-center text-left",children:[a.jsx("h2",{className:"font-playfair text-2xl font-bold text-[var(--text-main)]",children:"Community Guidelines"}),a.jsx(nn,{className:`w-6 h-6 text-[var(--text-muted)] transition-transform ${o?"rotate-180":""}`})]}),o&&a.jsxs("div",{className:"mt-4 pt-4 border-t border-[var(--border-subtle)] animate-fade-in",children:[a.jsxs("ul",{className:"list-disc list-inside space-y-2 text-[var(--text-muted)]",children:[a.jsx("li",{children:"Respect confidentiality. No sharing sensitive client details."}),a.jsx("li",{children:"No spam or cold pitching other members."}),a.jsx("li",{children:"Keep discussions focused on restoration and business growth."}),a.jsx("li",{children:"Constructive feedback only; no drama."}),a.jsx("li",{children:"One promo post per month in the designated thread."}),a.jsx("li",{children:"Violation may lead to temporary or permanent removal."})]}),a.jsxs("div",{className:"mt-6 pt-4 border-t border-[var(--border-subtle)]",children:[a.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:u,onChange:w=>h(w.target.checked),className:"h-5 w-5 rounded border-[var(--border-subtle)] text-[var(--accent)] focus:ring-[var(--accent)]"}),a.jsx("span",{className:"font-semibold text-[var(--text-main)]",children:"Ive read and agree to the community guidelines"})]}),u&&a.jsx("p",{className:"mt-3 text-sm text-success font-semibold bg-success/10 p-2 rounded-md animate-fade-in",children:"Nice. Youre good to go  see you inside the group."})]})]})]})}),a.jsxs(be,{children:[a.jsx("h2",{className:"font-playfair text-2xl font-bold text-[var(--text-main)] mb-4",children:"Upcoming Calls & Events"}),a.jsx("div",{className:"space-y-4",children:IN.map((w,j)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3 p-4 bg-[var(--bg-subtle)] rounded-lg border border-[var(--border-subtle)]",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("h3",{className:"font-bold text-lg text-[var(--text-main)]",children:w.title}),w.tier&&a.jsxs("span",{className:"text-xs font-bold px-2 py-0.5 bg-gold/20 text-gold-dark rounded-full",children:[w.tier," members"]})]}),a.jsxs("p",{className:"text-sm text-[var(--text-muted)] mt-1",children:[w.date,"  ",w.type]})]}),a.jsx("button",{className:"py-2 px-4 bg-[var(--bg-card)] border border-[var(--border-subtle)] rounded-lg font-semibold text-[var(--text-main)] shadow-sm hover:bg-[var(--bg-subtle)] text-sm whitespace-nowrap self-end sm:self-center",children:"Add to calendar"})]},j))})]}),a.jsxs(be,{children:[a.jsx("h2",{className:"font-playfair text-2xl font-bold text-[var(--text-main)] mb-4",children:"Community Resources"}),a.jsx("div",{className:"space-y-4",children:$N.map((w,j)=>{const _=w.icon;return a.jsxs("a",{href:w.link,target:"_blank",rel:"noopener noreferrer",className:"flex items-start gap-4 p-4 rounded-lg hover:bg-[var(--bg-subtle)] border border-transparent hover:border-[var(--border-subtle)] transition-colors group",children:[a.jsx("div",{className:"bg-gold/10 text-gold-dark p-3 rounded-full mt-1",children:a.jsx(_,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-lg text-[var(--text-main)]",children:w.title}),a.jsx("p",{className:"text-sm text-[var(--text-muted)]",children:w.description}),a.jsx("span",{className:"mt-2 inline-block font-semibold text-gold-dark text-sm group-hover:underline",children:"Open in group "})]})]},j)})})]}),((b=s==null?void 0:s.plan)==null?void 0:b.name)==="Bronze"&&a.jsxs("div",{className:"mt-8 p-6 bg-gradient-to-r from-charcoal to-charcoal-dark text-white rounded-2xl shadow-lg flex flex-col sm:flex-row justify-between items-center gap-4",children:[a.jsxs("div",{className:"text-center sm:text-left",children:[a.jsx("h3",{className:"font-playfair text-xl font-bold",children:"Unlock Full Community Access"}),a.jsx("p",{className:"text-gray-light mt-1",children:"Some community calls are reserved for Gold members. Upgrade in Billing to unlock full access."})]}),a.jsx("button",{onClick:()=>r("billing"),className:"py-2.5 px-6 bg-gold text-charcoal font-bold rounded-lg shadow-md hover:bg-gold-light whitespace-nowrap",children:"Upgrade in Billing"})]})]})},HN=({isOpen:r,onClose:s,onConfirm:i,companyName:o})=>{const[c,u]=S.useState(""),h=c===o;return r?a.jsx("div",{className:"fixed inset-0 bg-[var(--bg-overlay)] flex items-center justify-center z-50 p-4 animate-fade-in",onClick:s,children:a.jsxs("div",{className:"bg-[var(--bg-card)] rounded-2xl shadow-2xl w-full max-w-lg overflow-hidden relative animate-slide-up",onClick:g=>g.stopPropagation(),children:[a.jsxs("div",{className:"p-6 sm:p-8",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"mx-auto w-16 h-16 flex items-center justify-center rounded-full bg-error/10 text-error mb-4",children:a.jsx(Sa,{className:"w-8 h-8"})}),a.jsx("h2",{className:"font-playfair text-3xl font-bold text-[var(--text-main)]",children:"Delete Account"})]}),a.jsxs("p",{className:"text-[var(--text-muted)] text-center mt-4 text-lg",children:["Deleting your account will remove your badge, listings, and access to the Member Hub.",a.jsx("br",{}),a.jsx("span",{className:"font-bold text-error",children:"This action is permanent and cannot be undone."})]}),a.jsxs("div",{className:"mt-6",children:[a.jsxs("label",{htmlFor:"company-name-confirm",className:"block text-sm font-medium text-[var(--text-muted)]",children:['To confirm, please type "',a.jsx("span",{className:"font-bold text-[var(--text-main)]",children:o}),'" below:']}),a.jsx("input",{id:"company-name-confirm",type:"text",value:c,onChange:g=>u(g.target.value),className:"mt-1 block w-full p-3 border border-[var(--border-subtle)] rounded-lg shadow-sm focus:ring-[var(--accent)] focus:border-[var(--accent)] bg-[var(--bg-input)]"})]})]}),a.jsxs("div",{className:"p-6 bg-[var(--bg-subtle)] flex flex-col sm:flex-row justify-end items-center gap-4",children:[a.jsx("button",{onClick:s,className:"w-full sm:w-auto py-2.5 px-6 bg-[var(--bg-card)] border border-[var(--border-subtle)] rounded-lg font-semibold shadow-sm hover:bg-[var(--bg-subtle)]",children:"Cancel"}),a.jsx("button",{onClick:i,disabled:!h,className:"w-full sm:w-auto py-2.5 px-6 bg-error text-white font-bold rounded-lg shadow-md hover:bg-red-600 disabled:opacity-50 disabled:cursor-not-allowed",children:"Confirm Delete"})]})]})}):null},VN=({showToast:r,onNavigate:s})=>{var I,K;const{currentUser:i,updateUser:o}=nt(),[c,u]=S.useState(!1),[h,g]=S.useState({ownerName:((I=i==null?void 0:i.account)==null?void 0:I.ownerName)||(i==null?void 0:i.name)||"",ownerEmail:((K=i==null?void 0:i.account)==null?void 0:K.ownerEmail)||(i==null?void 0:i.email)||""}),[m,p]=S.useState(!0),[b,w]=S.useState(!1),[j,_]=S.useState({timezone:"US/Central",dateFormat:"MM/DD/YYYY"}),[v,E]=S.useState((i==null?void 0:i.notifications)||{documentStatus:!0,verificationStatus:!0,requestUpdates:!0,benefitDelivery:!1,billingUpdates:!0,communityUpdates:!0,emailFrequency:"real-time"}),[y,k]=S.useState(!1),[R,A]=S.useState(!1);if(S.useEffect(()=>{var H,J;i&&(g({ownerName:((H=i.account)==null?void 0:H.ownerName)||i.name,ownerEmail:((J=i.account)==null?void 0:J.ownerEmail)||i.email}),i.notifications&&E(i.notifications))},[i]),!i||!i.account)return null;const q=()=>{if(!i)return;const H={...i,account:{...i.account,...h}};o(H),u(!1),r("Account info updated.","success")},L=()=>{var H,J;g({ownerName:((H=i.account)==null?void 0:H.ownerName)||"",ownerEmail:((J=i.account)==null?void 0:J.ownerEmail)||""}),u(!1)},Q=()=>{w(!1),r("All active sessions have been cleared (dummy state).","success")},B=()=>{console.log("Preferences saved:",j),r("Preferences saved.","success")},Z=()=>{if(!i)return;const H={...i,notifications:v};o(H),r("Notification settings saved.","success")},M=()=>{k(!1),r("Data export will be available in the full version.","success")},ae=()=>{A(!1),r("Account deletion will be handled by support in the live version.","success")},ce=({label:H,checked:J,onChange:D})=>a.jsxs("label",{className:"flex justify-between items-center cursor-pointer p-3 hover:bg-[var(--bg-subtle)] rounded-lg",children:[a.jsx("span",{className:"font-medium text-[var(--text-main)]",children:H}),a.jsx("input",{type:"checkbox",className:"toggle-checkbox",checked:J,onChange:W=>D(W.target.checked)})]});return a.jsxs("div",{className:"animate-fade-in max-w-4xl mx-auto",children:[a.jsx("style",{children:`
                .toggle-checkbox { -webkit-appearance: none; -moz-appearance: none; appearance: none; width: 3rem; height: 1.5rem; background-color: #E5E7EB; border-radius: 9999px; position: relative; cursor: pointer; transition: background-color 0.2s ease-in-out; }
                html[data-theme='dark'] .toggle-checkbox { background-color: #4A4A4A; }
                .toggle-checkbox::before { content: ''; position: absolute; width: 1.25rem; height: 1.25rem; border-radius: 9999px; background-color: white; top: 2px; left: 2px; transition: transform 0.2s ease-in-out; }
                .toggle-checkbox:checked { background-color: var(--accent); }
                .toggle-checkbox:checked::before { transform: translateX(1.5rem); }
            `}),a.jsx(Pg,{isOpen:b,onClose:()=>w(!1),onSubmit:Q,title:"Log out of all devices?",message:"This will sign you out of all other active sessions. Your current session will remain active.",confirmButtonText:"Yes, Log Out All",confirmButtonClass:"bg-error text-white hover:bg-red-600"}),a.jsx(Pg,{isOpen:y,onClose:()=>k(!1),onSubmit:M,title:"Export Account Data",message:"Well prepare an export of your profile, documents metadata and billing records.",confirmButtonText:"Start Export",confirmButtonClass:"bg-gold text-charcoal hover:bg-gold-light"}),a.jsx(HN,{isOpen:R,onClose:()=>A(!1),onConfirm:ae,companyName:i.account.companyName}),a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"font-playfair text-4xl font-bold text-[var(--text-main)]",children:"Settings"}),a.jsx("p",{className:"mt-2 text-lg text-[var(--text-muted)]",children:"Manage your account details, sign-in preferences, and basic settings."})]}),a.jsxs(be,{children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsx("div",{children:a.jsx("h2",{className:"font-playfair text-2xl font-bold text-[var(--text-main)]",children:"Account Information"})}),!c&&a.jsxs("button",{onClick:()=>u(!0),className:"flex items-center gap-2 py-2 px-4 bg-[var(--bg-card)] border border-[var(--border-subtle)] rounded-lg shadow-sm font-semibold text-[var(--text-main)] hover:bg-[var(--bg-subtle)] text-sm",children:[a.jsx(_a,{className:"w-4 h-4"})," Edit"]})]}),c?a.jsxs("div",{className:"space-y-4 animate-fade-in",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-[var(--text-muted)]",children:"Account Owner Name"}),a.jsx("input",{type:"text",value:h.ownerName,onChange:H=>g({...h,ownerName:H.target.value}),className:"mt-1 block w-full p-2 border border-[var(--border-subtle)] rounded-lg bg-[var(--bg-input)]"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-[var(--text-muted)]",children:"Account Email"}),a.jsx("input",{type:"email",value:h.ownerEmail,onChange:H=>g({...h,ownerEmail:H.target.value}),className:"mt-1 block w-full p-2 border border-[var(--border-subtle)] rounded-lg bg-[var(--bg-input)]"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-[var(--text-muted)]",children:"Role"}),a.jsx("p",{className:"font-semibold text-[var(--text-muted)] bg-[var(--bg-subtle)] p-3 rounded-lg",children:i.account.role})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-[var(--text-muted)]",children:"Company Name"}),a.jsx("p",{className:"font-semibold text-[var(--text-muted)] bg-[var(--bg-subtle)] p-3 rounded-lg",children:i.account.companyName})]}),a.jsxs("div",{className:"flex justify-end gap-4 pt-2",children:[a.jsx("button",{onClick:L,className:"py-2 px-5 bg-[var(--bg-subtle)] border border-[var(--border-subtle)] rounded-lg font-semibold",children:"Cancel"}),a.jsx("button",{onClick:q,className:"py-2 px-5 bg-[var(--accent)] text-[var(--accent-text)] rounded-lg font-bold",children:"Save Changes"})]})]}):a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-[var(--text-muted)]",children:"Account Owner Name"}),a.jsx("p",{className:"font-semibold text-[var(--text-main)]",children:h.ownerName})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-[var(--text-muted)]",children:"Account Email"}),a.jsx("p",{className:"font-semibold text-[var(--text-main)]",children:h.ownerEmail})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-[var(--text-muted)]",children:"Role"}),a.jsx("p",{className:"font-semibold text-[var(--text-main)]",children:i.account.role})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-[var(--text-muted)]",children:"Company Name"}),a.jsx("button",{onClick:()=>s("profile"),className:"font-semibold text-[var(--accent-dark)] hover:underline",children:i.account.companyName})]})]})]}),a.jsxs(be,{children:[a.jsx("div",{className:"flex justify-between items-start mb-4",children:a.jsx("h2",{className:"font-playfair text-2xl font-bold text-[var(--text-main)]",children:"Sign-in & Security"})}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center p-3 bg-[var(--bg-subtle)] rounded-lg",children:[a.jsx("span",{className:"font-medium text-[var(--text-main)]",children:"Login method"}),a.jsx("span",{className:"font-semibold text-[var(--text-muted)]",children:"Email magic link"})]}),a.jsxs("label",{className:"flex justify-between items-center cursor-pointer",children:[a.jsx("span",{className:"font-medium text-[var(--text-main)] max-w-xs sm:max-w-none",children:"Require confirmation for new logins from unknown devices"}),a.jsx("input",{type:"checkbox",className:"toggle-checkbox",checked:m,onChange:H=>p(H.target.checked)})]}),a.jsxs("div",{className:"pt-4 border-t border-[var(--border-subtle)] flex flex-col sm:flex-row gap-4",children:[a.jsx("button",{onClick:()=>w(!0),className:"py-2.5 px-5 bg-[var(--bg-card)] border border-[var(--border-subtle)] rounded-lg font-semibold shadow-sm hover:bg-[var(--bg-subtle)]",children:"Log out of all devices"}),a.jsx("button",{onClick:()=>r("Verification email resent.","success"),className:"py-2.5 px-5 bg-[var(--bg-card)] border border-[var(--border-subtle)] rounded-lg font-semibold shadow-sm hover:bg-[var(--bg-subtle)]",children:"Resend verification email"})]}),a.jsx("p",{className:"text-xs text-[var(--text-muted)]",children:"Security features like 2FA and device history will be added in the full version."})]})]}),a.jsxs(be,{children:[a.jsx("div",{className:"flex justify-between items-start mb-4",children:a.jsx("h2",{className:"font-playfair text-2xl font-bold text-[var(--text-main)]",children:"Preferences"})}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-[var(--text-muted)] mb-1",children:"Timezone"}),a.jsxs("select",{value:j.timezone,onChange:H=>_({...j,timezone:H.target.value}),className:"w-full p-3 border border-[var(--border-subtle)] rounded-lg bg-[var(--bg-card)] focus:ring-[var(--accent)] focus:border-[var(--accent)]",children:[a.jsx("option",{children:"US/Pacific"}),a.jsx("option",{children:"US/Mountain"}),a.jsx("option",{children:"US/Central"}),a.jsx("option",{children:"US/Eastern"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-[var(--text-muted)] mb-2",children:"Date Format"}),a.jsxs("div",{className:"flex gap-4",children:[a.jsxs("label",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"radio",name:"date-format",value:"MM/DD/YYYY",checked:j.dateFormat==="MM/DD/YYYY",onChange:H=>_({...j,dateFormat:H.target.value}),className:"h-4 w-4 text-[var(--accent)] focus:ring-[var(--accent)]"})," MM/DD/YYYY"]}),a.jsxs("label",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"radio",name:"date-format",value:"DD/MM/YYYY",checked:j.dateFormat==="DD/MM/YYYY",onChange:H=>_({...j,dateFormat:H.target.value}),className:"h-4 w-4 text-[var(--accent)] focus:ring-[var(--accent)]"})," DD/MM/YYYY"]})]})]}),a.jsxs("div",{className:"flex justify-between items-center p-3 bg-[var(--bg-subtle)] rounded-lg",children:[a.jsx("span",{className:"font-medium text-[var(--text-main)]",children:"Currency"}),a.jsx("span",{className:"font-semibold text-[var(--text-muted)]",children:"USD (United States Dollar)"})]})]}),a.jsx("div",{className:"mt-6 pt-6 border-t border-[var(--border-subtle)] text-right",children:a.jsx("button",{onClick:B,className:"py-2 px-5 bg-[var(--accent)] text-[var(--accent-text)] rounded-lg font-bold",children:"Save Preferences"})})]}),a.jsxs(be,{children:[a.jsx("h2",{className:"font-playfair text-2xl font-bold text-[var(--text-main)] mb-4",children:"Notification Preferences"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-[var(--text-muted)] mb-2",children:"Documents & Verification"}),a.jsx(ce,{label:"Email me when a document is approved or rejected",checked:v.documentStatus,onChange:H=>E(J=>({...J,documentStatus:H}))}),a.jsx(ce,{label:"Email me when my verification status changes",checked:v.verificationStatus,onChange:H=>E(J=>({...J,verificationStatus:H}))})]}),a.jsxs("div",{className:"pt-4 border-t border-[var(--border-subtle)]",children:[a.jsx("h3",{className:"font-semibold text-[var(--text-muted)] mb-2",children:"Benefits & Requests"}),a.jsx(ce,{label:"Email me when a new request is created or updated",checked:v.requestUpdates,onChange:H=>E(J=>({...J,requestUpdates:H}))}),a.jsx(ce,{label:"Email me when a benefit (e.g. SEO post) is delivered",checked:v.benefitDelivery,onChange:H=>E(J=>({...J,benefitDelivery:H}))})]}),a.jsxs("div",{className:"pt-4 border-t border-[var(--border-subtle)]",children:[a.jsx("h3",{className:"font-semibold text-[var(--text-muted)] mb-2",children:"Billing"}),a.jsx(ce,{label:"Email me about upcoming renewals and failed payments",checked:v.billingUpdates,onChange:H=>E(J=>({...J,billingUpdates:H}))})]}),a.jsxs("div",{className:"pt-4 border-t border-[var(--border-subtle)]",children:[a.jsx("h3",{className:"font-semibold text-[var(--text-muted)] mb-2",children:"Community"}),a.jsx(ce,{label:"Email me about new events and important announcements",checked:v.communityUpdates,onChange:H=>E(J=>({...J,communityUpdates:H}))})]})]})]}),a.jsxs(be,{children:[a.jsx("h2",{className:"font-playfair text-2xl font-bold text-[var(--text-main)] mb-4",children:"Email Frequency"}),a.jsxs("fieldset",{className:"space-y-3",children:[a.jsxs("label",{className:"flex items-center gap-3",children:[a.jsx("input",{type:"radio",name:"email-frequency",value:"real-time",checked:v.emailFrequency==="real-time",onChange:H=>E(J=>({...J,emailFrequency:H.target.value})),className:"h-4 w-4 text-[var(--accent)] focus:ring-[var(--accent)]"})," Real-time (recommended)"]}),a.jsxs("label",{className:"flex items-center gap-3",children:[a.jsx("input",{type:"radio",name:"email-frequency",value:"daily",checked:v.emailFrequency==="daily",onChange:H=>E(J=>({...J,emailFrequency:H.target.value})),className:"h-4 w-4 text-[var(--accent)] focus:ring-[var(--accent)]"})," Daily summary"]}),a.jsxs("label",{className:"flex items-center gap-3",children:[a.jsx("input",{type:"radio",name:"email-frequency",value:"weekly",checked:v.emailFrequency==="weekly",onChange:H=>E(J=>({...J,emailFrequency:H.target.value})),className:"h-4 w-4 text-[var(--accent)] focus:ring-[var(--accent)]"})," Weekly summary"]})]}),a.jsx("p",{className:"text-sm text-[var(--text-muted)] mt-4",children:"Well include documents, requests and community highlights in your summary emails."}),a.jsx("div",{className:"mt-6 pt-6 border-t border-[var(--border-subtle)] text-right",children:a.jsx("button",{onClick:Z,className:"py-2 px-5 bg-[var(--accent)] text-[var(--accent-text)] rounded-lg font-bold",children:"Save Notification Settings"})})]}),a.jsxs(be,{className:"border-error",children:[a.jsx("h2",{className:"font-playfair text-2xl font-bold text-error",children:"Danger Zone"}),a.jsxs("div",{className:"mt-6 space-y-4",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center p-4 bg-[var(--bg-subtle)] rounded-lg",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-[var(--text-main)]",children:"Export account data"}),a.jsx("p",{className:"text-sm text-[var(--text-muted)]",children:"Download your profile, documents metadata, and billing records."})]}),a.jsx("button",{onClick:()=>k(!0),className:"py-2 px-4 mt-2 sm:mt-0 bg-[var(--bg-card)] border border-[var(--border-subtle)] rounded-lg font-semibold text-[var(--text-main)] shadow-sm hover:bg-[var(--bg-subtle)] whitespace-nowrap",children:"Export Data"})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center p-4 bg-error/5 rounded-lg",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-error",children:"Delete account"}),a.jsx("p",{className:"text-sm text-red-800",children:"Permanently remove your account and all associated data."})]}),a.jsx("button",{onClick:()=>A(!0),className:"py-2 px-4 mt-2 sm:mt-0 bg-error text-white font-bold rounded-lg shadow-sm hover:bg-red-600 whitespace-nowrap",children:"Delete Account"})]})]})]})]})]})},GN={overview:"Overview","my-requests":"My Service Requests",profile:"Business Profile",badge:"My Badge",documents:"Verification Documents",benefits:"Your Membership Benefits",billing:"Billing & Subscription",community:"Community Hub",blueprint:"99 Steps Blueprint",settings:"Settings"},YN=()=>{var Gt,pr,ga,rn,ln;const{currentUser:r,logout:s,session:i}=nt(),[o,c]=S.useState("overview"),[u,h]=S.useState(!1),[g,m]=S.useState(!1),p=S.useRef(null),[b,w]=S.useState(null),[j,_]=S.useState(!1),[v,E]=S.useState(0),[y,k]=S.useState(null),[R,A]=S.useState(null),[q,L]=S.useState(null),[Q,B]=S.useState([]),[Z,M]=S.useState([]),[ae,ce]=S.useState(null),[I,K]=S.useState([]),[H,J]=S.useState(null),[D,W]=S.useState([]),[se,me]=S.useState(!1),[je,T]=S.useState(null),V=S.useCallback(async()=>{var St;if(!((St=i==null?void 0:i.user)!=null&&St.id))return B([]),[];const{data:Ne,error:Ie}=await xe.from("member_documents").select("*").eq("profile_id",i.user.id).order("created_at",{ascending:!1});if(Ie)throw console.error("Failed to load member documents",Ie),Ie;const jt=(Ne??[]).map(NN);return B(jt),jt},[(Gt=i==null?void 0:i.user)==null?void 0:Gt.id]),te=S.useCallback(async()=>{var ot;if(!((ot=i==null?void 0:i.user)!=null&&ot.id)){ce(null);return}const{data:Ne,error:Ie}=await xe.from("v_member_overview").select("*").eq("profile_id",i.user.id).maybeSingle();Ie?console.error("Failed to load overview data:",Ie):ce(Ne)},[(pr=i==null?void 0:i.user)==null?void 0:pr.id]),ee=S.useCallback(async()=>{var ot;if(!((ot=i==null?void 0:i.user)!=null&&ot.id)){K([]);return}const[Ne,Ie]=await Promise.allSettled([xe.from("service_requests").select("*").eq("profile_id",i.user.id).order("created_at",{ascending:!1}),xe.from("service_request_activity").select("*").eq("profile_id",i.user.id).order("created_at",{ascending:!1})]);if(Ne.status==="fulfilled"&&!Ne.value.error){const jt=Ne.value.data||[];let St=[];Ie.status==="fulfilled"&&!Ie.value.error&&(St=Ie.value.data||[]);const Xa=jt.map(Ut=>({...Ut,activity:St.filter(We=>We.request_id===Ut.id)}));K(Xa)}else console.error("Failed to load service requests:",Ne.status==="fulfilled"?Ne.value.error:"Promise rejected")},[(ga=i==null?void 0:i.user)==null?void 0:ga.id]),ne=S.useCallback(async()=>{var ot;if(!((ot=i==null?void 0:i.user)!=null&&ot.id)){J(null),W([]);return}const[Ne,Ie]=await Promise.allSettled([xe.from("v_member_billing").select("*").eq("profile_id",i.user.id).maybeSingle(),xe.from("invoices").select("*").eq("profile_id",i.user.id).order("invoice_date",{ascending:!1})]);Ne.status==="fulfilled"&&!Ne.value.error?J(Ne.value.data):console.error("Failed to load billing data:",Ne.status==="fulfilled"?Ne.value.error:"Promise rejected"),Ie.status==="fulfilled"&&!Ie.value.error?W(Ie.value.data||[]):console.error("Failed to load invoices:",Ie.status==="fulfilled"?Ie.value.error:"Promise rejected")},[(rn=i==null?void 0:i.user)==null?void 0:rn.id]);S.useEffect(()=>{if(b){const Ne=setTimeout(()=>w(null),3e3);return()=>clearTimeout(Ne)}},[b]);const de=(Ne,Ie)=>{w({message:Ne,type:Ie})};S.useEffect(()=>{const Ne=Ie=>{p.current&&!p.current.contains(Ie.target)&&m(!1)};return document.addEventListener("mousedown",Ne),()=>document.removeEventListener("mousedown",Ne)},[]),S.useEffect(()=>{var ot;if(!((ot=i==null?void 0:i.user)!=null&&ot.id)){k(null),A(null),L(null),B([]),M([]);return}let Ne=!0;return me(!0),T(null),(async()=>{try{await Promise.all([te(),ee(),ne(),V()]);const[jt,St,Xa,Ut]=await Promise.all([xe.from("profiles").select("*").eq("id",i.user.id).maybeSingle(),xe.from("memberships").select("*").eq("profile_id",i.user.id).order("created_at",{ascending:!1}).limit(1).maybeSingle(),xe.from("subscriptions").select("*").eq("profile_id",i.user.id).order("created_at",{ascending:!1}).limit(1).maybeSingle(),xe.from("service_requests").select("*").eq("profile_id",i.user.id).order("created_at",{ascending:!1}).limit(5)]);if(!Ne)return;let We=null;try{await V()}catch(Et){console.error("Failed to load member documents",Et),We=Kg(Et)?Et:null}const on=[jt.error,St.error,Xa.error,Ut.error,We].filter(Et=>Kg(Et)&&Et.code!=="PGRST116");on.length>0?(on.forEach(Et=>{Et&&console.error("Failed to load dashboard data",Et)}),T("Some dashboard data failed to load. Please refresh to try again.")):T(null),k(jt.data??null),A(St.data??null),L(Xa.data??null);const cn=Ut.data??[];M(cn.map(_N))}catch(jt){if(!Ne)return;console.error("Unexpected error loading dashboard data",jt),T("Unable to load your dashboard right now. Please try again later."),k(null),A(null),L(null),B([]),M([])}finally{Ne&&me(!1)}})(),()=>{Ne=!1}},[(ln=i==null?void 0:i.user)==null?void 0:ln.id,V]);const oe=Ne=>{c(Ne),h(!1)},Ae=S.useMemo(()=>{var xt,Ai,Ti,Ri;if(ae)return{status:Qg(ae.member_status),verificationValidUntil:As(ae.verification_valid_until),verificationRating:ae.verification_rating,stats:{profileViewsValue:ae.profile_views_value,profileViewsPeriod:ae.profile_views_period||"Last 30 days",badgeClicksValue:ae.badge_clicks_value,badgeClicksPeriod:ae.badge_clicks_period||"Last 30 days",planName:ae.plan_name,planPrice:ae.plan_price,nextRenewal:As(ae.next_renewal)},benefits:{description:ae.benefits_description,items:((xt=to(ae.benefits))==null?void 0:xt.map(he=>({name:he.name??"Benefit",progress:he.progress??null,Icon:di(he.icon??void 0)})))||[]},activityLog:((Ai=to(ae.activity_log))==null?void 0:Ai.map(he=>({description:he.description??"Account activity",timestamp:he.timestamp?ao(he.timestamp):"Recently",Icon:di(he.icon??void 0)})))||[]};const Ne=(y==null?void 0:y.member_status)??(y==null?void 0:y.verification_status)??(R==null?void 0:R.status)??(q==null?void 0:q.status),Ie=Qg(Ne??void 0),ot=(y==null?void 0:y.verification_valid_until)??(R==null?void 0:R.verification_valid_until)??(R==null?void 0:R.renewal_date)??null,jt=As(ot)??null,St=(y==null?void 0:y.verification_rating)??(R==null?void 0:R.badge_rating)??(y==null?void 0:y.badge_rating)??((Ti=r==null?void 0:r.plan)==null?void 0:Ti.rating)??null,Xa=(R==null?void 0:R.tier)??(q==null?void 0:q.tier)??(y==null?void 0:y.membership_tier)??null;let Ut=null;if((q==null?void 0:q.unit_amount_cents)!==null&&(q==null?void 0:q.unit_amount_cents)!==void 0){const he=q.unit_amount_cents/100,rt=vN(he);if(rt){const dt=(Ri=q.billing_cycle)==null?void 0:Ri.toLowerCase();dt!=null&&dt.includes("year")?Ut=`${rt}/year`:dt!=null&&dt.includes("month")?Ut=`${rt}/month`:dt?Ut=`${rt}/${dt}`:Ut=rt}}const We=As((q==null?void 0:q.current_period_end)??(y==null?void 0:y.next_billing_date)??null)??null,on=(y==null?void 0:y.profile_views_value)??(y==null?void 0:y.profile_views)??null,cn=(y==null?void 0:y.profile_views_period)??"Last 30 days",Et=(y==null?void 0:y.badge_clicks_value)??(y==null?void 0:y.badge_clicks)??null,un=(y==null?void 0:y.badge_clicks_period)??"Last 30 days",gr=to((R==null?void 0:R.benefits)??(y==null?void 0:y.benefits)),Ci=(R==null?void 0:R.benefits_description)??(y==null?void 0:y.benefits_description)??null,Oo=((r==null?void 0:r.benefits)??[]).map(he=>({name:he.title,progress:he.quota!==void 0&&he.used!==void 0?`${he.used} of ${he.quota} used`:he.status??he.nextDate??(he.isIncluded?"Included":null),Icon:di(he.icon)})),Do=gr&&gr.length>0?gr.map(he=>({name:he.name??"Benefit",progress:he.progress??null,Icon:di(he.icon??void 0)})):Oo,xa=[];(to(y==null?void 0:y.activity_log)??[]).forEach(he=>{const rt=he.timestamp??null;xa.push({description:he.description??"Account activity",timestamp:he.timestamp?ao(he.timestamp):"Recently",Icon:di(he.icon??void 0),createdAt:rt})}),Z.forEach(he=>{xa.push({description:`${he.service}: ${he.title}`,timestamp:he.createdAt?ao(he.createdAt):"Recently",Icon:jo(he.service),createdAt:he.createdAt})}),Q.forEach(he=>{if(!he.rawTimestamp)return;const rt=he.status==="approved"?"approved":he.status==="underReview"?"submitted for review":"needs attention",dt=he.status==="approved"?na:he.status==="underReview"?Si:Sa;xa.push({description:`${he.name} ${rt}`,timestamp:ao(he.rawTimestamp),Icon:dt,createdAt:he.rawTimestamp})});const ba=xa.sort((he,rt)=>{const dt=he.createdAt?new Date(he.createdAt).getTime():0;return(rt.createdAt?new Date(rt.createdAt).getTime():0)-dt}).slice(0,5).map(({createdAt:he,...rt})=>rt);return{status:Ie,verificationValidUntil:jt,verificationRating:St,stats:{profileViewsValue:on,profileViewsPeriod:cn,badgeClicksValue:Et,badgeClicksPeriod:un,planName:Xa,planPrice:Ut,nextRenewal:We},benefits:{description:Ci,items:Do},activityLog:ba}},[ae,y,R,q,Q,Z,r]),De=Q.some(Ne=>["notUploaded","needsReplacement","rejected"].includes(Ne.status)),Ve=()=>{switch(o){case"overview":return a.jsx(CN,{data:Ae,onNavigate:c,onNewRequest:()=>_(!0)});case"my-requests":return a.jsx(AN,{onNewRequest:()=>_(!0),showToast:de,refreshKey:v});case"profile":return a.jsx(TN,{showToast:de});case"badge":return a.jsx(RN,{onNavigate:c,showToast:de});case"documents":return a.jsx(DN,{documents:Q,onNavigate:c,onRefreshDocuments:V});case"benefits":return a.jsx(LN,{showToast:de});case"billing":return a.jsx(qN,{showToast:de,billingData:H,invoices:D});case"community":return a.jsx(PN,{onNavigate:c});case"blueprint":return a.jsx(mN,{onNavigate:c});case"settings":return a.jsx(VN,{showToast:de,onNavigate:c});default:return null}},pa=a.jsxs(a.Fragment,{children:[a.jsx(Na,{icon:a.jsx(Ex,{className:"w-6 h-6"}),label:"Overview",isActive:o==="overview",onClick:()=>oe("overview")}),a.jsx(Na,{icon:a.jsx(Rx,{className:"w-6 h-6"}),label:"My Requests",isActive:o==="my-requests",onClick:()=>oe("my-requests")}),a.jsx(Na,{icon:a.jsx(vi,{className:"w-6 h-6"}),label:"Profile",isActive:o==="profile",onClick:()=>oe("profile")}),a.jsx(Na,{icon:a.jsx(So,{className:"w-6 h-6"}),label:"Badge",isActive:o==="badge",onClick:()=>oe("badge")}),a.jsx(Na,{icon:a.jsx(kw,{className:"w-6 h-6"}),label:"Documents",isActive:o==="documents",onClick:()=>oe("documents"),attention:De}),a.jsx(Na,{icon:a.jsx(Co,{className:"w-6 h-6"}),label:"Benefits",isActive:o==="benefits",onClick:()=>oe("benefits")}),a.jsx(Na,{icon:a.jsx(ir,{className:"w-6 h-6"}),label:"Billing",isActive:o==="billing",onClick:()=>oe("billing")}),a.jsx(Na,{icon:a.jsx(Cs,{className:"w-6 h-6"}),label:"Community",isActive:o==="community",onClick:()=>oe("community")}),a.jsx(Na,{icon:a.jsx($d,{className:"w-6 h-6"}),label:"99 Steps Blueprint",isActive:o==="blueprint",onClick:()=>oe("blueprint")}),a.jsx(Na,{icon:a.jsx(Cx,{className:"w-6 h-6"}),label:"Settings",isActive:o==="settings",onClick:()=>oe("settings")})]});return a.jsxs("div",{className:"flex h-screen bg-[var(--bg-main)] text-[var(--text-main)] font-inter",children:[b&&a.jsx("div",{className:`fixed top-20 right-8 z-[100] py-3 px-5 rounded-lg shadow-lg text-white animate-slide-in-right ${b.type==="success"?"bg-success":"bg-error"}`,children:b.message}),j&&a.jsx(FN,{onClose:()=>_(!1),showToast:de,onCreated:()=>E(Ne=>Ne+1)}),a.jsx("div",{className:`fixed inset-0 z-40 bg-black/50 transition-opacity md:hidden ${u?"opacity-100":"opacity-0 pointer-events-none"}`,onClick:()=>h(!1)}),a.jsxs("aside",{className:`fixed md:relative top-0 left-0 h-full z-50 w-64 bg-[var(--bg-card)] border-r border-[var(--border-subtle)] flex flex-col transition-transform duration-300 ease-in-out ${u?"translate-x-0":"-translate-x-full md:translate-x-0"}`,children:[a.jsxs("div",{className:"px-6 py-4 flex items-center border-b border-[var(--border-subtle)] h-16 shrink-0",children:[a.jsx("img",{src:"https://restorationexpertise.com/wp-content/uploads/2025/11/Restorationexpertise_ig_profilepic_2_small.webp",alt:"Logo",className:"w-8 h-8 mr-2"}),a.jsx("h1",{className:"font-playfair text-xl font-bold text-[var(--text-main)]",children:"Member Hub"})]}),a.jsx("nav",{className:"flex-grow p-4 space-y-1 overflow-y-auto",children:pa}),a.jsxs("div",{className:"p-4 border-t border-[var(--border-subtle)] space-y-4",children:[a.jsx(yo,{variant:"row"}),a.jsxs("button",{onClick:()=>void s(),className:"flex items-center w-full px-4 py-3 rounded-lg text-left text-[var(--text-muted)] hover:bg-red-500/10 hover:text-error transition-colors",children:[a.jsx(kx,{className:"w-6 h-6"}),a.jsx("span",{className:"ml-3 font-semibold",children:"Logout"})]})]})]}),a.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[a.jsxs("header",{className:"sticky top-0 z-30 bg-[var(--bg-card)] shadow-sm border-b border-[var(--border-subtle)] h-16 flex items-center justify-between px-4 md:px-6 shrink-0",children:[a.jsx("button",{onClick:()=>h(!0),className:"text-[var(--text-main)] md:hidden",children:a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})})}),a.jsx("h1",{className:"font-playfair text-xl md:text-2xl font-bold text-[var(--text-main)]",children:GN[o]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(yo,{variant:"icon"}),a.jsxs("div",{className:"relative",ref:p,children:[a.jsxs("button",{onClick:()=>m(!g),className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-9 h-9 bg-[var(--accent-bg-subtle)] rounded-full flex items-center justify-center",children:a.jsx(vi,{className:"w-6 h-6 text-[var(--accent-dark)]"})}),a.jsx("span",{className:"hidden sm:inline font-semibold text-sm",children:r==null?void 0:r.name})]}),g&&a.jsxs("div",{className:"absolute right-0 mt-2 w-56 bg-[var(--bg-card)] rounded-lg shadow-xl border border-[var(--border-subtle)] z-50 animate-fade-in",children:[a.jsx("a",{href:"#",className:"block px-4 py-2 text-sm text-[var(--text-main)] hover:bg-[var(--bg-subtle)]",children:"View Public Profile"}),a.jsx("a",{href:"#",className:"block px-4 py-2 text-sm text-[var(--text-main)] hover:bg-[var(--bg-subtle)]",children:"Account Settings"}),a.jsx("a",{href:"#",className:"block px-4 py-2 text-sm text-[var(--text-main)] hover:bg-[var(--bg-subtle)]",children:"Billing"}),a.jsx("a",{href:"#",className:"block px-4 py-2 text-sm text-[var(--text-main)] hover:bg-[var(--bg-subtle)]",children:"Help & Support"}),a.jsx("div",{className:"border-t border-[var(--border-subtle)] my-1"}),a.jsx("button",{onClick:()=>void s(),className:"w-full text-left px-4 py-2 text-sm text-error hover:bg-[var(--bg-subtle)]",children:"Logout"})]})]})]})]}),a.jsx("main",{className:"flex-1 overflow-x-hidden overflow-y-auto",children:a.jsxs("div",{className:"relative max-w-7xl mx-auto p-4 sm:p-6 lg:p-8",children:[je&&a.jsx("div",{className:"mb-6 rounded-xl border border-error/20 bg-error/10 px-4 py-3 text-error font-semibold",children:je}),Ve(),se&&a.jsx("div",{className:"absolute inset-0 z-20 flex items-center justify-center rounded-2xl bg-[var(--bg-main)]/70 backdrop-blur-sm",children:a.jsx("div",{className:"rounded-xl border border-[var(--border-subtle)] bg-[var(--bg-card)] px-6 py-4 text-[var(--text-main)] font-semibold shadow-lg",children:"Loading your dashboard..."})})]})})]})]})},KN=({request:r,activities:s,onClose:i})=>{const o=jo(r.requestType),[c,u]=S.useState(!0);return a.jsx("div",{className:"fixed inset-0 bg-[var(--bg-overlay)] flex items-center justify-center z-50 p-4 animate-fade-in",onClick:i,children:a.jsxs("div",{className:"bg-[var(--bg-card)] rounded-2xl shadow-2xl w-full max-w-3xl md:max-h-[90vh] flex flex-col h-full md:h-auto",onClick:h=>h.stopPropagation(),children:[a.jsxs("header",{className:"p-6 border-b border-[var(--border-subtle)] flex justify-between items-start gap-4",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-3 text-sm text-[var(--text-muted)] mb-2",children:[a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full bg-[var(--bg-subtle)] font-semibold text-[var(--text-main)]",children:[a.jsx(o,{className:"w-4 h-4 text-[var(--text-muted)]"}),r.requestType]}),a.jsx("span",{children:""}),a.jsx("span",{children:r.id})]}),a.jsx("h2",{className:"font-playfair text-2xl md:text-3xl font-bold text-[var(--text-main)]",children:r.title}),a.jsxs("p",{className:"text-sm text-[var(--text-muted)] mt-2",children:["Created ",oo(r.createdAt)??"",r.updatedAt?`  Updated ${oo(r.updatedAt)??""}`:""]})]}),a.jsx("button",{onClick:i,className:"text-[var(--text-muted)] hover:text-[var(--text-main)]",children:a.jsx(wt,{className:"w-7 h-7"})})]}),a.jsxs("div",{className:"p-6 overflow-y-auto flex-grow space-y-8",children:[a.jsxs("section",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-semibold text-[var(--text-muted)] uppercase tracking-wide",children:"Status"}),a.jsx("span",{className:`inline-flex items-center px-3 py-1 mt-2 text-xs font-bold rounded-full ${sr[r.status]}`,children:Es[r.status]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-semibold text-[var(--text-muted)] uppercase tracking-wide",children:"Priority"}),a.jsx("span",{className:`inline-flex items-center px-3 py-1 mt-2 text-xs font-semibold rounded-full ${Rd[r.priority]}`,children:wo[r.priority]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-semibold text-[var(--text-muted)] uppercase tracking-wide",children:"Assigned Admin"}),a.jsx("p",{className:"text-[var(--text-main)] font-medium mt-1",children:r.assignedAdminName??r.assignedAdminId??"Unassigned"})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-semibold text-[var(--text-muted)] uppercase tracking-wide",children:"Admin Notes"}),a.jsx("p",{className:"text-[var(--text-main)] mt-2 whitespace-pre-wrap",children:r.adminNotes??"No notes added yet."})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-semibold text-[var(--text-muted)] uppercase tracking-wide",children:"Profile ID"}),a.jsx("p",{className:"text-[var(--text-main)] mt-2 font-mono text-sm",children:r.profileId})]})]})]}),a.jsxs("section",{children:[a.jsx("h3",{className:"font-semibold text-[var(--text-main)] mb-2",children:"Description"}),a.jsx("p",{className:"text-[var(--text-muted)] whitespace-pre-wrap bg-[var(--bg-subtle)] border border-[var(--border-subtle)] rounded-lg p-4",children:r.description||"No description was provided with this request."})]}),a.jsxs("section",{className:"border border-[var(--border-subtle)] rounded-xl overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>u(h=>!h),className:"w-full flex items-center justify-between px-4 py-3 bg-[var(--bg-subtle)] text-[var(--text-main)] font-semibold",children:[a.jsxs("span",{children:["Activity (",s.length,")"]}),a.jsx(nn,{className:`w-5 h-5 transition-transform ${c?"rotate-180":""}`})]}),c&&a.jsx("div",{className:"max-h-80 overflow-y-auto",children:s.length===0?a.jsx("p",{className:"px-4 py-6 text-sm text-[var(--text-muted)]",children:"No updates have been recorded yet."}):a.jsx("ul",{className:"divide-y divide-[var(--border-subtle)]",children:s.map(h=>a.jsx("li",{className:"px-4 py-3 text-sm",children:a.jsxs("div",{className:"flex items-start justify-between gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-[var(--text-main)]",children:h.description??h.action??"Activity recorded"}),(h.actorName||h.actorUserId)&&a.jsxs("p",{className:"text-xs text-[var(--text-muted)] mt-1",children:["by ",h.actorName??h.actorUserId]})]}),a.jsx("span",{className:"text-xs text-[var(--text-muted)]",children:oo(h.createdAt)??""})]})},h.id))})})]})]})]})})},FN=({onClose:r,showToast:s,onCreated:i})=>{const{currentUser:o,session:c}=nt(),[u,h]=S.useState("SEO Blog Post"),[g,m]=S.useState(""),[p,b]=S.useState(""),[w,j]=S.useState("medium"),[_,v]=S.useState(!1),[E,y]=S.useState(null),k={low:"Low",medium:"Medium",high:"High"},R=["SEO Blog Post","Spotlight Article","Website Review","Badge Support","Other"],A=S.useMemo(()=>{if(!(o!=null&&o.benefits))return"";if(u==="SEO Blog Post"){const L=o.benefits.find(Q=>Q.title==="SEO Blog Posts");if(L&&L.quota!==void 0&&L.used!==void 0)return`You have ${Math.max(L.quota-L.used,0)} of ${L.quota} SEO blog posts remaining this year.`}return u==="Website Review"?"Your plan includes quarterly website reviews.":""},[o==null?void 0:o.benefits,u]),q=async L=>{var Q;if(L.preventDefault(),y(null),!((Q=c==null?void 0:c.user)!=null&&Q.id)){y("You need to be logged in to create a request.");return}if(!g.trim()||!p.trim()){y("Title and description are required.");return}v(!0);try{const{error:B}=await xe.from("service_requests").insert({profile_id:c.user.id,request_type:u,title:g.trim(),description:p.trim(),priority:w,status:"open"});if(B)throw B;s("Request created! Our team will review it within 12 business days.","success"),i(),r()}catch(B){console.error("Failed to create service request",B),s("We could not submit your request. Please try again.","error"),y("Unable to submit the request.")}finally{v(!1)}};return a.jsx("div",{className:"fixed inset-0 bg-[var(--bg-overlay)] flex items-center justify-center z-50 p-4 animate-fade-in",onClick:r,children:a.jsxs("form",{onSubmit:q,className:"bg-[var(--bg-card)] rounded-2xl shadow-2xl w-full max-w-2xl md:max-h-[90vh] flex flex-col h-full md:h-auto",onClick:L=>L.stopPropagation(),children:[a.jsxs("header",{className:"p-6 border-b border-[var(--border-subtle)] flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"font-playfair text-3xl font-bold text-[var(--text-main)]",children:"New Service Request"}),a.jsx("p",{className:"text-sm text-[var(--text-muted)] mt-1",children:"Fill out the details below and our team will get started right away."})]}),a.jsx("button",{type:"button",onClick:r,className:"text-[var(--text-muted)] hover:text-[var(--text-main)]",children:a.jsx(wt,{className:"w-7 h-7"})})]}),a.jsxs("div",{className:"p-6 flex-grow overflow-y-auto space-y-6",children:[E&&a.jsx("div",{className:"rounded-lg border border-error/40 bg-error/10 px-4 py-3 text-sm text-error",children:E}),a.jsx("p",{className:"p-3 bg-[var(--bg-subtle)] rounded-lg text-sm text-[var(--text-main)] border border-[var(--border-subtle)]",children:"Requests that are part of your plan (e.g. SEO posts, website reviews) will be counted against your benefits."}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"service-type",className:"block text-sm font-medium text-[var(--text-muted)] mb-1",children:"Service Type"}),a.jsx("select",{id:"service-type",value:u,onChange:L=>h(L.target.value),className:"w-full p-3 border border-[var(--border-subtle)] rounded-lg bg-[var(--bg-input)] focus:ring-[var(--accent)] focus:border-[var(--accent)]",children:R.map(L=>a.jsx("option",{value:L,children:L},L))}),A&&a.jsx("p",{className:"mt-2 text-sm text-info font-medium",children:A})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"request-title",className:"block text-sm font-medium text-[var(--text-muted)] mb-1",children:"Request Title"}),a.jsx("input",{type:"text",id:"request-title",value:g,onChange:L=>m(L.target.value),placeholder:"e.g., Article on Emergency Fire Restoration",className:"w-full p-3 border border-[var(--border-subtle)] rounded-lg bg-[var(--bg-input)] focus:ring-[var(--accent)] focus:border-[var(--accent)]"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-[var(--text-muted)] mb-1",children:"Description / Brief"}),a.jsx("textarea",{id:"description",value:p,onChange:L=>b(L.target.value),rows:5,placeholder:"Please provide as much detail as possible, including any target keywords, desired tone, or specific instructions.",className:"w-full p-3 border border-[var(--border-subtle)] rounded-lg bg-[var(--bg-input)] focus:ring-[var(--accent)] focus:border-[var(--accent)]"})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"priority",className:"block text-sm font-medium text-[var(--text-muted)] mb-1",children:"Priority"}),a.jsx("select",{id:"priority",value:w,onChange:L=>j(L.target.value),className:"w-full p-3 border border-[var(--border-subtle)] rounded-lg bg-[var(--bg-input)] focus:ring-[var(--accent)] focus:border-[var(--accent)]",children:Object.keys(k).map(L=>a.jsx("option",{value:L,children:k[L]},L))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-[var(--text-muted)] mb-1",children:"Attachments (optional)"}),a.jsxs("div",{className:"flex items-center justify-center w-full p-3 border-2 border-dashed border-[var(--border-subtle)] rounded-lg bg-[var(--bg-subtle)] text-[var(--text-muted)]",children:[a.jsx(an,{className:"w-6 h-6 mr-2"}),a.jsx("span",{children:"Click or drag to upload files"})]})]})]})]}),a.jsxs("footer",{className:"p-4 bg-[var(--bg-subtle)] border-t border-[var(--border-subtle)] flex flex-col sm:flex-row justify-end items-center gap-4",children:[a.jsx("button",{type:"button",onClick:r,className:"w-full sm:w-auto py-2.5 px-6 bg-[var(--bg-card)] border border-[var(--border-subtle)] rounded-lg font-semibold shadow-sm hover:bg-[var(--bg-subtle)]",disabled:_,children:"Cancel"}),a.jsx("button",{type:"submit",className:"w-full sm:w-auto py-2.5 px-6 bg-[var(--accent)] text-[var(--accent-text)] font-bold rounded-lg shadow-md hover:bg-[var(--accent-light)] disabled:opacity-70 disabled:cursor-not-allowed",disabled:_,children:_?"Submitting...":"Submit Request"})]})]})})},no=({title:r,value:s,subtitle:i,icon:o})=>a.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-lg border border-gray-border group relative cursor-pointer transition-transform hover:-translate-y-1",children:[a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-semibold text-gray-dark uppercase",children:r}),a.jsx("p",{className:"font-playfair text-4xl font-bold text-charcoal mt-1",children:s}),a.jsx("p",{className:"text-sm text-text-muted mt-1",children:i})]}),a.jsx("div",{className:"bg-info/10 text-blue-600 p-3 rounded-full",children:o})]}),a.jsx("div",{className:"absolute bottom-2 right-2 px-2 py-1 bg-charcoal text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none",children:"Click to view members list filtered by this metric"})]}),QN=({members:r})=>a.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-border overflow-hidden",children:[a.jsx("h2",{className:"font-playfair text-xl font-bold text-charcoal p-6 border-b border-gray-border",children:"Members Needing Attention"}),a.jsx("div",{className:"overflow-x-auto hidden md:block",children:a.jsxs("table",{className:"min-w-full",children:[a.jsx("thead",{className:"bg-gray-light/50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4 text-left text-xs font-semibold text-gray-dark",children:"Business"}),a.jsx("th",{className:"py-3 px-4 text-left text-xs font-semibold text-gray-dark",children:"Issue"}),a.jsx("th",{className:"py-3 px-4 text-right text-xs font-semibold text-gray-dark",children:"Actions"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-border",children:r.map(s=>a.jsxs("tr",{className:"hover:bg-gray-light/50",children:[a.jsxs("td",{className:"p-4",children:[a.jsx("p",{className:"font-semibold text-charcoal",children:s.businessName}),a.jsxs("p",{className:"text-sm text-gray-dark",children:[s.tier,"  ",s.badgeRating]})]}),a.jsx("td",{className:"p-4",children:a.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-warning/20 text-yellow-800",children:s.issue})}),a.jsx("td",{className:"p-4 text-right",children:a.jsx("button",{className:"p-2 text-gray-dark hover:text-info rounded-full",children:a.jsx(lr,{className:"w-5 h-5"})})})]},s.id))})]})}),a.jsx("div",{className:"md:hidden divide-y divide-gray-border",children:r.map(s=>a.jsxs("div",{className:"p-4",children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-charcoal",children:s.businessName}),a.jsxs("p",{className:"text-sm text-gray-dark",children:[s.tier,"  ",s.badgeRating]})]}),a.jsx("button",{className:"p-2 text-gray-dark",children:a.jsx(lr,{className:"w-5 h-5"})})]}),a.jsx("div",{className:"mt-2",children:a.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-warning/20 text-yellow-800",children:s.issue})})]},s.id))})]}),JN=({requests:r})=>{const s={Open:"bg-gray-200 text-gray-800","In progress":"bg-info/20 text-blue-800"};return a.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-border overflow-hidden",children:[a.jsx("h2",{className:"font-playfair text-xl font-bold text-charcoal p-6 border-b border-gray-border",children:"Active Service Requests"}),a.jsx("div",{className:"overflow-x-auto hidden md:block",children:a.jsxs("table",{className:"min-w-full",children:[a.jsx("thead",{className:"bg-gray-light/50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4 text-left text-xs font-semibold text-gray-dark",children:"Request"}),a.jsx("th",{className:"py-3 px-4 text-left text-xs font-semibold text-gray-dark",children:"Assigned"}),a.jsx("th",{className:"py-3 px-4 text-left text-xs font-semibold text-gray-dark",children:"Status"}),a.jsx("th",{className:"py-3 px-4 text-right text-xs font-semibold text-gray-dark",children:"Actions"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-border",children:r.map(i=>a.jsxs("tr",{className:"hover:bg-gray-light/50",children:[a.jsxs("td",{className:"p-4",children:[a.jsx("p",{className:"font-semibold text-charcoal",children:i.businessName}),a.jsxs("p",{className:"text-sm text-gray-dark",children:[i.requestType,"  ",i.date]})]}),a.jsx("td",{className:"p-4 text-sm text-gray-dark",children:i.assignedTo}),a.jsx("td",{className:"p-4",children:a.jsx("span",{className:`px-2 py-1 text-xs font-bold rounded-full ${s[i.status]}`,children:i.status})}),a.jsx("td",{className:"p-4 text-right",children:a.jsx("button",{className:"p-2 text-gray-dark hover:text-info rounded-full",children:a.jsx(lr,{className:"w-5 h-5"})})})]},i.id))})]})}),a.jsx("div",{className:"md:hidden divide-y divide-gray-border",children:r.map(i=>a.jsxs("div",{className:"p-4",children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-charcoal",children:i.businessName}),a.jsx("p",{className:"text-sm text-gray-dark",children:i.requestType})]}),a.jsx("span",{className:`px-2 py-1 text-xs font-bold rounded-full ${s[i.status]}`,children:i.status})]}),a.jsxs("div",{className:"flex justify-between items-center mt-3 text-sm text-gray-dark",children:[a.jsxs("span",{children:[i.date,"  Assigned: ",i.assignedTo]}),a.jsx("button",{className:"font-semibold text-info hover:underline",children:"View "})]})]},i.id))})]})},Jg=()=>{const r=_s.totalMembers-_s.activeMembers,s=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0}).format(_s.mrr);return a.jsxs("div",{className:"p-4 md:p-6 lg:p-8 animate-fade-in",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"font-playfair text-3xl md:text-4xl font-bold text-charcoal",children:"Overview"}),a.jsx("p",{className:"text-gray-dark mt-1 text-lg",children:"A high-level view of platform activity and health."})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-6",children:[a.jsx(no,{title:"Total Members",value:_s.totalMembers.toString(),subtitle:`${_s.activeMembers} active / ${r} inactive`,icon:a.jsx(Cs,{className:"w-6 h-6"})}),a.jsx(no,{title:"Pending Verifications",value:_s.pendingVerifications.toString(),subtitle:"Docs needing review",icon:a.jsx(_t,{className:"w-6 h-6"})}),a.jsx(no,{title:"Open Service Requests",value:_s.openRequests.toString(),subtitle:"Content + support tickets",icon:a.jsx(Eo,{className:"w-6 h-6"})}),a.jsx(no,{title:"Monthly Recurring Revenue",value:s,subtitle:`Churn: ${_s.monthlyChurnRate}% this month`,icon:a.jsx(Ax,{className:"w-6 h-6"})})]}),a.jsxs("div",{className:"mt-8 grid grid-cols-1 lg:grid-cols-2 gap-8",children:[a.jsx(QN,{members:iN}),a.jsx(JN,{requests:lN})]})]})},XN=({member:r,onClose:s,onUpdate:i,showToast:o})=>{var y,k,R,A,q;const[c,u]=S.useState("Overview"),[h,g]=S.useState(!1),[m,p]=S.useState({tier:r.tier,rating:r.rating,status:r.status,renewalDate:r.renewalDate,badgeStatus:((y=r.badge)==null?void 0:y.status)??"NONE",badgeLabel:((k=r.badge)==null?void 0:k.badgeLabel)??"",badgeImageLightUrl:((R=r.badge)==null?void 0:R.imageLightUrl)??"",badgeImageDarkUrl:((A=r.badge)==null?void 0:A.imageDarkUrl)??"",badgeProfileUrl:((q=r.badge)==null?void 0:q.profileUrl)??""}),b=()=>{var L;i({...r,tier:m.tier,rating:m.rating,status:m.status,renewalDate:m.renewalDate,badge:{status:m.badgeStatus,badgeLabel:m.badgeLabel||`${m.tier}  ${m.rating}`,imageLightUrl:m.badgeImageLightUrl,imageDarkUrl:m.badgeImageDarkUrl||void 0,profileUrl:m.badgeProfileUrl||((L=r.badge)==null?void 0:L.profileUrl)||""}}),g(!1)},w=()=>{var L,Q,B,Z,M;p({tier:r.tier,rating:r.rating,status:r.status,renewalDate:r.renewalDate,badgeStatus:((L=r.badge)==null?void 0:L.status)??"NONE",badgeLabel:((Q=r.badge)==null?void 0:Q.badgeLabel)??"",badgeImageLightUrl:((B=r.badge)==null?void 0:B.imageLightUrl)??"",badgeImageDarkUrl:((Z=r.badge)==null?void 0:Z.imageDarkUrl)??"",badgeProfileUrl:((M=r.badge)==null?void 0:M.profileUrl)??""}),g(!1)},j={Active:"bg-success/20 text-success",Suspended:"bg-error/20 text-error",Pending:"bg-info/20 text-info",Canceled:"bg-gray-200 text-gray-800"},_=({label:L})=>a.jsx("button",{onClick:()=>u(L),className:`px-4 py-2 text-sm font-semibold rounded-md transition-colors ${c===L?"bg-info/10 text-info":"text-gray-dark hover:bg-gray-light"}`,children:L}),v=({label:L,value:Q})=>a.jsxs("div",{className:"flex justify-between items-center py-2",children:[a.jsx("span",{className:"text-sm font-medium text-gray-dark",children:L}),a.jsx("span",{className:"text-sm font-semibold text-charcoal text-right",children:Q})]}),E=()=>{switch(c){case"Verification":return a.jsxs("div",{className:"space-y-3",children:[r.documents.map(L=>a.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-light/60 rounded-lg",children:[a.jsx("span",{className:"font-semibold",children:L.name}),a.jsx("span",{className:`px-2 py-0.5 text-xs font-bold rounded-full ${L.status==="Approved"?"bg-success/20 text-success":L.status==="Pending"?"bg-info/20 text-info":"bg-error/20 text-error"}`,children:L.status})]},L.name)),a.jsx("button",{className:"w-full mt-4 text-center py-2 bg-white border border-gray-border text-charcoal font-semibold rounded-lg hover:bg-gray-light",children:"Open in Verifications"})]});case"Billing":return a.jsxs("div",{className:"space-y-2",children:[a.jsx(v,{label:"Stripe Customer ID",value:a.jsx("code",{children:r.billingInfo.stripeId})}),a.jsx(v,{label:"Current Plan",value:r.billingInfo.plan}),a.jsx(v,{label:"MRR",value:`$${r.mrr}`}),a.jsx(v,{label:"Last Payment",value:r.billingInfo.lastPayment})]});case"Activity":return a.jsx("ul",{className:"space-y-3",children:r.activityLog.map((L,Q)=>a.jsxs("li",{className:"flex items-start text-sm",children:[a.jsx("div",{className:"w-2 h-2 bg-info rounded-full mt-1.5 mr-3 shrink-0"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-charcoal",children:L.event}),a.jsx("p",{className:"text-gray-dark",children:L.date})]})]},Q))});case"Overview":default:return a.jsxs("div",{className:"space-y-2",children:[a.jsx(v,{label:"Email",value:r.email}),a.jsx(v,{label:"Location",value:r.city}),a.jsx(v,{label:"Joined On",value:r.joinDate}),a.jsx(v,{label:"Profile Views",value:r.stats.profileViews.toLocaleString()}),a.jsx(v,{label:"Badge Clicks",value:r.stats.badgeClicks.toLocaleString()}),r.badge&&a.jsx(a.Fragment,{children:a.jsxs("div",{className:"pt-2 mt-2 border-t border-gray-border",children:[a.jsx(v,{label:"Badge Status",value:r.badge.status}),a.jsx(v,{label:"Badge Label",value:r.badge.badgeLabel})]})})]})}};return a.jsxs("div",{className:"fixed inset-0 z-40",children:[a.jsx("div",{className:"absolute inset-0 bg-black/50 animate-fade-in",onClick:s}),a.jsxs("div",{className:"absolute inset-y-0 right-0 w-full max-w-md md:max-w-sm lg:max-w-md bg-white shadow-2xl flex flex-col animate-slide-in-right",children:[a.jsx("div",{className:"p-4 border-b border-gray-border shrink-0",children:a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"font-playfair text-2xl font-bold text-charcoal",children:r.businessName}),a.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[a.jsx("span",{className:`px-2 py-0.5 text-xs font-bold rounded-full ${j[m.status]}`,children:m.status}),a.jsx("span",{className:"text-sm font-semibold text-gray-dark",children:m.tier}),a.jsx("span",{className:"text-sm font-semibold text-gray-dark",children:m.rating})]})]}),a.jsx("button",{onClick:s,className:"p-1 text-gray-dark hover:text-charcoal",children:a.jsx(wt,{className:"w-6 h-6"})})]})}),a.jsx("div",{className:"flex-grow p-4 overflow-y-auto",children:h?a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"p-4 bg-gray-light rounded-lg border border-gray-border space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-dark",children:"Tier"}),a.jsxs("select",{value:m.tier,onChange:L=>p({...m,tier:L.target.value}),className:"w-full mt-1 p-2 border rounded-md",children:[a.jsx("option",{children:"Bronze"}),a.jsx("option",{children:"Silver"}),a.jsx("option",{children:"Gold"}),a.jsx("option",{children:"Founding Member"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-dark",children:"Badge Rating"}),a.jsxs("select",{value:m.rating,onChange:L=>p({...m,rating:L.target.value}),className:"w-full mt-1 p-2 border rounded-md",children:[a.jsx("option",{children:"A+"}),a.jsx("option",{children:"A"}),a.jsx("option",{children:"B+"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-dark",children:"Status"}),a.jsxs("select",{value:m.status,onChange:L=>p({...m,status:L.target.value}),className:"w-full mt-1 p-2 border rounded-md",children:[a.jsx("option",{children:"Active"}),a.jsx("option",{children:"Pending"}),a.jsx("option",{children:"Suspended"}),a.jsx("option",{children:"Canceled"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-dark",children:"Renewal Date"}),a.jsx("input",{type:"date",value:m.renewalDate,onChange:L=>p({...m,renewalDate:L.target.value}),className:"w-full mt-1 p-2 border rounded-md"})]})]}),a.jsxs("div",{className:"p-4 bg-gray-light rounded-lg border border-gray-border space-y-4",children:[a.jsx("h3",{className:"font-bold text-charcoal -mb-2",children:"Badge Settings"}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-dark",children:"Badge Status"}),a.jsxs("select",{value:m.badgeStatus,onChange:L=>p({...m,badgeStatus:L.target.value}),className:"w-full mt-1 p-2 border rounded-md",children:[a.jsx("option",{children:"NONE"}),a.jsx("option",{children:"PENDING"}),a.jsx("option",{children:"ACTIVE"}),a.jsx("option",{children:"REVOKED"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-dark",children:"Badge Label"}),a.jsx("input",{type:"text",value:m.badgeLabel,onChange:L=>p({...m,badgeLabel:L.target.value}),placeholder:`${m.tier}  ${m.rating}`,className:"w-full mt-1 p-2 border rounded-md"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-dark",children:"Image URL (Light)"}),a.jsx("input",{type:"text",value:m.badgeImageLightUrl,onChange:L=>p({...m,badgeImageLightUrl:L.target.value}),placeholder:"https:///badge-light.svg",className:"w-full mt-1 p-2 border rounded-md"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-dark",children:"Image URL (Dark)"}),a.jsx("input",{type:"text",value:m.badgeImageDarkUrl,onChange:L=>p({...m,badgeImageDarkUrl:L.target.value}),placeholder:"https:///badge-dark.svg",className:"w-full mt-1 p-2 border rounded-md"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-dark",children:"Profile URL"}),a.jsx("input",{type:"text",value:m.badgeProfileUrl,onChange:L=>p({...m,badgeProfileUrl:L.target.value}),placeholder:`https://restorationexpertise.com/profile/${r.businessName.toLowerCase().replace(/ /g,"-")}`,className:"w-full mt-1 p-2 border rounded-md"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-dark",children:"Preview"}),a.jsx("div",{className:"mt-1 p-4 border border-dashed border-gray-border rounded-lg flex items-center justify-center min-h-[100px] bg-white",children:m.badgeImageLightUrl?a.jsx("img",{src:m.badgeImageLightUrl,alt:"Badge Preview",className:"max-w-full h-auto max-h-24"}):a.jsx("p",{className:"text-gray-dark text-sm",children:"No image URL set"})})]})]}),a.jsx("p",{className:"text-xs text-center text-gray-dark pt-2",children:"In production, these changes will sync to Stripe and the member portal."})]}):a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-center p-1 bg-gray-light rounded-lg mb-4",children:[a.jsx(_,{label:"Overview"}),a.jsx(_,{label:"Verification"}),a.jsx(_,{label:"Billing"}),a.jsx(_,{label:"Activity"})]}),a.jsx("div",{className:"p-2",children:E()})]})}),a.jsx("div",{className:"p-4 border-t border-gray-border shrink-0",children:h?a.jsxs("div",{className:"flex justify-end gap-3",children:[a.jsx("button",{onClick:w,className:"py-2 px-4 bg-white border border-gray-border rounded-lg font-semibold shadow-sm",children:"Cancel"}),a.jsx("button",{onClick:b,className:"py-2 px-4 bg-gold text-charcoal font-bold rounded-lg shadow-md",children:"Save Changes"})]}):a.jsxs("button",{onClick:()=>g(!0),className:"w-full py-2.5 bg-info/10 text-info font-bold rounded-lg flex items-center justify-center gap-2",children:[a.jsx(_a,{className:"w-5 h-5"})," Edit Member"]})})]})]})},WN=({isOpen:r,onClose:s,memberName:i})=>r?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4 animate-fade-in",onClick:s,children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md p-6 relative animate-slide-up",onClick:o=>o.stopPropagation(),children:[a.jsx("button",{onClick:s,className:"absolute top-4 right-4 text-gray-dark hover:text-charcoal",children:a.jsx(wt,{className:"w-6 h-6"})}),a.jsxs("div",{className:"text-center",children:[a.jsx("h2",{className:"font-playfair text-2xl font-bold text-charcoal",children:"Impersonate Member"}),a.jsxs("p",{className:"text-gray-dark mt-2",children:["You are about to impersonate ",a.jsx("strong",{className:"text-charcoal",children:i}),"."]}),a.jsx("p",{className:"text-sm bg-gray-light p-3 rounded-lg mt-4 text-left",children:"Impersonation will let admins view the Member Hub exactly as this business sees it. This is useful for troubleshooting issues with their account, benefits, or billing display."})]}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row justify-end gap-3",children:[a.jsx("button",{onClick:s,className:"py-2 px-5 bg-white border border-gray-border font-semibold rounded-lg shadow-sm order-2 sm:order-1",children:"Close"}),a.jsx("button",{disabled:!0,className:"py-2 px-5 bg-info text-white font-bold rounded-lg shadow-md disabled:opacity-50 disabled:cursor-not-allowed order-1 sm:order-2",children:"Start Impersonation (Disabled)"})]})]})}):null,ZN=({showToast:r})=>{const[s,i]=S.useState(Ed),[o,c]=S.useState(""),[u,h]=S.useState({tier:"All",status:"All",rating:"All"}),[g,m]=S.useState({key:"joinDate",direction:"descending"}),[p,b]=S.useState(null),[w,j]=S.useState(!1),[_,v]=S.useState(""),E=B=>{const{name:Z,value:M}=B.target;h(ae=>({...ae,[Z]:M}))},y=B=>{let Z="ascending";g.key===B&&g.direction==="ascending"&&(Z="descending"),m({key:B,direction:Z})},k=B=>{i(Z=>Z.map(M=>M.id===B.id?B:M)),b(B),r("Member updated successfully.","success")},R=B=>{v(B.businessName),j(!0)},A=S.useMemo(()=>{let B=[...s];return B=B.filter(Z=>{const M=Z.businessName.toLowerCase().includes(o.toLowerCase())||Z.email.toLowerCase().includes(o.toLowerCase()),ae=u.tier==="All"||Z.tier===u.tier,ce=u.status==="All"||Z.status===u.status,I=u.rating==="All"||Z.rating===u.rating;return M&&ae&&ce&&I}),g.key&&B.sort((Z,M)=>{const ae=Z[g.key],ce=M[g.key];return ae<ce?g.direction==="ascending"?-1:1:ae>ce?g.direction==="ascending"?1:-1:0}),B},[s,o,u,g]),q={Active:"bg-success/20 text-success",Suspended:"bg-error/20 text-error",Pending:"bg-info/20 text-info",Canceled:"bg-gray-200 text-gray-800"},L={Bronze:"bg-yellow-700/20 text-yellow-800",Silver:"bg-gray-300/60 text-gray-800",Gold:"bg-gold/20 text-gold-dark","Founding Member":"bg-charcoal/80 text-white",Platinum:"bg-blue-900/20 text-blue-900"},Q=({sortKey:B,label:Z})=>{const M=g.key===B,ae=g.direction==="ascending"?"":"";return a.jsxs("th",{onClick:()=>y(B),className:"px-4 py-3 text-left text-xs font-bold text-charcoal uppercase tracking-wider cursor-pointer",children:[Z," ",M&&a.jsx("span",{className:"text-info",children:ae})]})};return a.jsxs(a.Fragment,{children:[p&&a.jsx(XN,{member:p,onClose:()=>b(null),onUpdate:k,showToast:r}),a.jsx(WN,{isOpen:w,onClose:()=>j(!1),memberName:_}),a.jsxs("div",{className:"p-4 md:p-6 lg:p-8 animate-fade-in",children:[a.jsx("div",{className:"flex flex-col md:flex-row justify-between md:items-center gap-4 mb-6",children:a.jsxs("div",{children:[a.jsx("h1",{className:"font-playfair text-3xl font-bold text-charcoal",children:"Members"}),a.jsx("p",{className:"text-gray-dark mt-1",children:"Manage all member accounts, view details, and perform admin actions."})]})}),a.jsx("div",{className:"bg-white p-4 rounded-2xl shadow-lg border border-gray-border mb-6",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx(hr,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray"}),a.jsx("input",{type:"text",placeholder:"Search by name or email...",value:o,onChange:B=>c(B.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-border rounded-lg bg-gray-light/50 focus:ring-info focus:border-info"})]}),a.jsxs("select",{name:"tier",value:u.tier,onChange:E,className:"w-full p-2 border border-gray-border rounded-lg bg-gray-light/50 focus:ring-info focus:border-info",children:[a.jsx("option",{value:"All",children:"All Tiers"}),a.jsx("option",{children:"Bronze"}),a.jsx("option",{children:"Silver"}),a.jsx("option",{children:"Gold"}),a.jsx("option",{children:"Founding Member"})]}),a.jsxs("select",{name:"status",value:u.status,onChange:E,className:"w-full p-2 border border-gray-border rounded-lg bg-gray-light/50 focus:ring-info focus:border-info",children:[a.jsx("option",{value:"All",children:"All Statuses"}),a.jsx("option",{children:"Active"}),a.jsx("option",{children:"Pending"}),a.jsx("option",{children:"Suspended"}),a.jsx("option",{children:"Canceled"})]}),a.jsxs("select",{name:"rating",value:u.rating,onChange:E,className:"w-full p-2 border border-gray-border rounded-lg bg-gray-light/50 focus:ring-info focus:border-info",children:[a.jsx("option",{value:"All",children:"All Ratings"}),a.jsx("option",{children:"A+"}),a.jsx("option",{children:"A"}),a.jsx("option",{children:"B+"})]})]})}),a.jsx("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-border overflow-hidden hidden md:block",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-border",children:[a.jsx("thead",{className:"bg-gray-light/50",children:a.jsxs("tr",{children:[a.jsx(Q,{sortKey:"businessName",label:"Business"}),a.jsx(Q,{sortKey:"tier",label:"Tier"}),a.jsx(Q,{sortKey:"rating",label:"Rating"}),a.jsx(Q,{sortKey:"status",label:"Status"}),a.jsx(Q,{sortKey:"mrr",label:"MRR"}),a.jsx(Q,{sortKey:"renewalDate",label:"Renewal"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold text-charcoal uppercase tracking-wider",children:"Pending"}),a.jsx("th",{className:"px-4 py-3 text-right text-xs font-bold text-charcoal uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-border",children:A.map(B=>a.jsxs("tr",{className:"hover:bg-gray-light/50",children:[a.jsxs("td",{className:"p-4 whitespace-nowrap",children:[a.jsx("p",{className:"font-semibold text-charcoal",children:B.businessName}),a.jsx("p",{className:"text-sm text-gray-dark",children:B.city})]}),a.jsx("td",{className:"p-4 whitespace-nowrap",children:a.jsx("span",{className:`px-2 py-1 text-xs font-bold rounded-full ${L[B.tier]}`,children:B.tier})}),a.jsx("td",{className:"p-4 whitespace-nowrap font-semibold",children:B.rating}),a.jsx("td",{className:"p-4 whitespace-nowrap",children:a.jsx("span",{className:`px-2 py-1 text-xs font-bold rounded-full ${q[B.status]}`,children:B.status})}),a.jsxs("td",{className:"p-4 whitespace-nowrap",children:["$",B.mrr.toLocaleString()]}),a.jsx("td",{className:"p-4 whitespace-nowrap text-sm",children:B.renewalDate}),a.jsx("td",{className:"p-4 whitespace-nowrap text-sm",children:B.pendingDocs>0||B.openRequests>0?`${B.pendingDocs} D / ${B.openRequests} R`:""}),a.jsx("td",{className:"p-4 whitespace-nowrap text-right text-sm font-medium",children:a.jsxs("div",{className:"flex justify-end gap-1",children:[a.jsx("button",{onClick:()=>b(B),className:"p-2 text-gray-dark hover:text-info rounded-full",title:"View",children:a.jsx(lr,{className:"w-5 h-5"})}),a.jsx("button",{onClick:()=>b(B),className:"p-2 text-gray-dark hover:text-info rounded-full",title:"Edit",children:a.jsx(_a,{className:"w-5 h-5"})}),a.jsx("button",{onClick:()=>R(B),className:"p-2 text-gray-dark hover:text-info rounded-full",title:"Impersonate",children:a.jsx(vi,{className:"w-5 h-5"})})]})})]},B.id))})]})})}),a.jsx("div",{className:"md:hidden space-y-4",children:A.map(B=>a.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-border p-4",children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-bold text-charcoal",children:B.businessName}),a.jsx("p",{className:"text-sm text-gray-dark",children:B.email}),a.jsx("p",{className:"text-sm text-gray-dark",children:B.city})]}),a.jsxs("div",{className:"flex flex-col items-end gap-1",children:[a.jsx("span",{className:`px-2 py-1 text-xs font-bold rounded-full ${L[B.tier]}`,children:B.tier}),a.jsx("span",{className:`px-2 py-1 text-xs font-bold rounded-full ${q[B.status]}`,children:B.status})]})]}),a.jsxs("div",{className:"mt-4 pt-3 border-t border-gray-border flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsxs("p",{className:"text-sm text-gray-dark",children:["MRR: ",a.jsxs("span",{className:"font-semibold text-charcoal",children:["$",B.mrr.toLocaleString()]})]}),a.jsxs("p",{className:"text-sm text-gray-dark",children:["Renews: ",a.jsx("span",{className:"font-semibold text-charcoal",children:B.renewalDate})]})]}),a.jsx("button",{onClick:()=>b(B),className:"py-2 px-4 bg-info/10 text-info font-bold rounded-lg",children:"View"})]})]},B.id))}),A.length===0&&a.jsxs("div",{className:"text-center py-16 bg-white rounded-2xl shadow-lg border border-gray-border",children:[a.jsx("h3",{className:"text-xl font-bold text-charcoal",children:"No members found"}),a.jsx("p",{className:"text-gray-dark mt-1",children:"Try adjusting your search or filters."})]})]})]})},Xg=({user:r,onClose:s,onSave:i,title:o,subtext:c})=>{const[u,h]=S.useState({name:(r==null?void 0:r.name)||"",email:(r==null?void 0:r.email)||"",role:(r==null?void 0:r.role)||"Support"}),g=u.name.trim()&&u.email.trim()&&u.email.includes("@"),m=p=>{p.preventDefault(),g&&i(r?{...r,name:u.name,role:u.role}:u)};return a.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4 animate-fade-in",onClick:s,children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md p-6 relative animate-slide-up",onClick:p=>p.stopPropagation(),children:[a.jsx("button",{onClick:s,className:"absolute top-4 right-4 text-gray-dark hover:text-charcoal",children:a.jsx(wt,{className:"w-6 h-6"})}),a.jsx("h2",{className:"font-playfair text-2xl font-bold text-charcoal mb-2",children:o}),c&&a.jsx("p",{className:"text-sm text-gray-dark mb-4",children:c}),a.jsxs("form",{onSubmit:m,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-dark",children:"Full Name"}),a.jsx("input",{type:"text",value:u.name,onChange:p=>h({...u,name:p.target.value}),className:"mt-1 block w-full p-2 border border-gray-border rounded-lg",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-dark",children:"Email"}),a.jsx("input",{type:"email",value:u.email,onChange:p=>h({...u,email:p.target.value}),className:"mt-1 block w-full p-2 border border-gray-border rounded-lg",required:!0,disabled:!!r})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-dark",children:"Role"}),a.jsxs("select",{value:u.role,onChange:p=>h({...u,role:p.target.value}),className:"mt-1 block w-full p-2 border border-gray-border rounded-lg",children:[a.jsx("option",{children:"Superadmin"}),a.jsx("option",{children:"Operations"}),a.jsx("option",{children:"Support"}),a.jsx("option",{children:"Content"}),a.jsx("option",{children:"ReadOnly"})]})]}),a.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[a.jsx("button",{type:"button",onClick:s,className:"py-2 px-4 bg-gray-light border border-gray-border rounded-lg font-semibold",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:!g,className:"py-2 px-4 bg-gold text-charcoal font-bold rounded-lg disabled:opacity-50",children:"Save"})]})]})]})})},e1=({users:r,onInvite:s,onEdit:i,onToggleStatus:o,showToast:c})=>{const u={Active:"bg-success/20 text-success",Suspended:"bg-gray-200 text-gray-800"};return a.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-border",children:[a.jsxs("div",{className:"p-4 md:p-6 flex justify-between items-center border-b border-gray-border",children:[a.jsx("h2",{className:"font-playfair text-xl font-bold text-charcoal",children:"Admin Users"}),a.jsx("button",{onClick:s,className:"py-2 px-4 bg-gold text-charcoal font-bold rounded-lg shadow-sm text-sm",children:"Invite Admin"})]}),a.jsx("div",{className:"overflow-x-auto hidden md:block",children:a.jsxs("table",{className:"min-w-full",children:[a.jsx("thead",{className:"bg-gray-light/50",children:a.jsx("tr",{children:["Name","Role","Status","Last Login","Actions"].map(h=>a.jsx("th",{className:"p-4 text-left text-xs font-bold text-charcoal uppercase",children:h},h))})}),a.jsx("tbody",{className:"divide-y divide-gray-border",children:r.map(h=>a.jsxs("tr",{children:[a.jsxs("td",{className:"p-4",children:[a.jsx("p",{className:"font-semibold text-charcoal",children:h.name}),a.jsx("p",{className:"text-sm text-gray-dark",children:h.email})]}),a.jsx("td",{className:"p-4 text-sm",children:h.role}),a.jsx("td",{className:"p-4",children:a.jsx("span",{className:`px-2 py-1 text-xs font-bold rounded-full ${u[h.status]}`,children:h.status})}),a.jsx("td",{className:"p-4 text-sm",children:h.lastLogin}),a.jsx("td",{className:"p-4",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>i(h),className:"p-2 text-gray-dark hover:text-info rounded-full",children:a.jsx(_a,{className:"w-5 h-5"})}),a.jsx("button",{onClick:()=>o(h),className:"text-sm font-semibold text-gray-dark hover:underline",children:h.status==="Active"?"Suspend":"Activate"}),a.jsx("button",{onClick:()=>c("Login reset email would be sent in production.","success"),className:"p-2 text-gray-dark hover:text-info rounded-full",children:a.jsx(Tx,{className:"w-5 h-5"})})]})})]},h.id))})]})}),a.jsx("div",{className:"md:hidden divide-y divide-gray-border",children:r.map(h=>a.jsxs("div",{className:"p-4 space-y-3",children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsx("p",{className:"font-bold text-charcoal",children:h.name}),a.jsx("span",{className:`px-2 py-1 text-xs font-bold rounded-full ${u[h.status]}`,children:h.status})]}),a.jsxs("div",{className:"text-sm",children:[a.jsx("p",{className:"text-gray-dark",children:h.email}),a.jsx("p",{className:"font-semibold",children:h.role})]}),a.jsxs("div",{className:"flex justify-between items-center text-sm",children:[a.jsxs("p",{className:"text-gray-dark",children:["Last login: ",h.lastLogin]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>i(h),className:"py-1 px-3 bg-info/10 text-info font-bold rounded-md",children:"Edit"}),a.jsx("button",{onClick:()=>o(h),className:"py-1 px-3 bg-gray-200 font-semibold rounded-md",children:h.status==="Active"?"Suspend":"Activate"})]})]})]},h.id))})]})},t1=()=>{const r={"View Members":{Superadmin:!0,Operations:!0,Support:!0,Content:!0,ReadOnly:!0},"Edit Members":{Superadmin:!0,Operations:!0,Support:!0,Content:!1,ReadOnly:!1},"Manage Verifications":{Superadmin:!0,Operations:!0,Support:!0,Content:!1,ReadOnly:!0},"Manage Service Requests":{Superadmin:!0,Operations:!0,Support:!0,Content:!0,ReadOnly:!0},"Manage Billing":{Superadmin:!0,Operations:!0,Support:!1,Content:!1,ReadOnly:!0},"Manage Admin Users":{Superadmin:!0,Operations:!1,Support:!1,Content:!1,ReadOnly:!1}},s=["Superadmin","Operations","Support","Content","ReadOnly"];return a.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-border",children:[a.jsx("div",{className:"p-4 md:p-6 border-b border-gray-border",children:a.jsx("h2",{className:"font-playfair text-xl font-bold text-charcoal",children:"Roles & Permissions"})}),a.jsxs("div",{className:"p-4 md:p-6",children:[a.jsx("div",{className:"hidden md:block overflow-x-auto",children:a.jsxs("table",{className:"min-w-full",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-3 text-left text-xs font-bold text-charcoal uppercase",children:"Capability"}),s.map(i=>a.jsx("th",{className:"p-3 text-center text-xs font-bold text-charcoal uppercase",children:i},i))]})}),a.jsx("tbody",{className:"divide-y divide-gray-border",children:Object.entries(r).map(([i,o])=>a.jsxs("tr",{children:[a.jsx("td",{className:"p-3 font-semibold text-charcoal",children:i}),s.map(c=>a.jsx("td",{className:"p-3 text-center",children:o[c]&&a.jsx(bi,{className:"w-5 h-5 text-success mx-auto"})},c))]},i))})]})}),a.jsx("div",{className:"md:hidden space-y-6",children:s.map(i=>a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-lg text-charcoal border-b border-gray-border pb-1 mb-2",children:i}),a.jsx("ul",{className:"space-y-1",children:Object.entries(r).map(([o,c])=>a.jsxs("li",{className:"flex items-center gap-2 text-sm",children:[c[i]?a.jsx(bi,{className:"w-4 h-4 text-success"}):a.jsx(wt,{className:"w-4 h-4 text-error"}),a.jsx("span",{children:o})]},o))})]},i))})]}),a.jsx("div",{className:"p-4 bg-gray-light/50 text-sm text-gray-dark rounded-b-2xl",children:"Permissions are static in this demo. In production, this matrix will drive access control for admin users."})]})},a1=({showToast:r})=>{const[s,i]=S.useState(uN),[o,c]=S.useState(!1),[u,h]=S.useState(!1),[g,m]=S.useState(null),p=_=>{const v={..._,id:`admin_${Date.now()}`,status:"Active",lastLogin:"-"};i(E=>[v,...E]),r("Admin invited (demo).","success"),c(!1)},b=_=>{i(v=>v.map(E=>E.id===_.id?_:E)),r("Admin user updated.","success"),h(!1),m(null)},w=_=>{const v=_.status==="Active"?"Suspended":"Active",E={..._,status:v};i(y=>y.map(k=>k.id===E.id?E:k)),r(`User ${v.toLowerCase()}.`,"success")},j=_=>{m(_),h(!0)};return a.jsxs(a.Fragment,{children:[o&&a.jsx(Xg,{onClose:()=>c(!1),onSave:p,title:"Invite Admin",subtext:"Invite will send an email in the live version. For now we just add them to the list."}),u&&g&&a.jsx(Xg,{user:g,onClose:()=>{h(!1),m(null)},onSave:b,title:"Edit Admin User"}),a.jsx("div",{className:"p-4 md:p-6 lg:p-8 animate-fade-in",children:a.jsxs("div",{className:"max-w-4xl mx-auto",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"font-playfair text-3xl font-bold text-charcoal",children:"Admin Settings"}),a.jsx("p",{className:"text-gray-dark mt-1",children:"Manage admin users, roles, and access to the Restoration Expertise admin tools."})]}),a.jsxs("div",{className:"space-y-8",children:[a.jsx(e1,{users:s,onInvite:()=>c(!0),onEdit:j,onToggleStatus:w,showToast:r}),a.jsx(t1,{})]})]})})]})},Wg=r=>{if(!r)return"";const s=new Date(r);return Number.isNaN(s.getTime())?r:new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric"}).format(s)},s1=r=>{if(!r)return"";const s=new Date(r);return Number.isNaN(s.getTime())?r:new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"numeric"}).format(s)},n1=r=>{const s=(r==null?void 0:r.toLowerCase())??"";return s.includes("progress")?"in_progress":s.includes("complete")?"completed":s.includes("cancel")?"canceled":"open"},r1=r=>{const s=(r==null?void 0:r.toLowerCase())??"";return s.includes("high")?"high":s.includes("low")?"low":"medium"},i1=r=>({id:String(r.id),profileId:r.profile_id??"",requestType:r.request_type??"Service Request",title:r.title??"Untitled Request",description:r.description??null,priority:r1(r.priority),status:n1(r.status),adminNotes:r.admin_notes??null,assignedAdminId:r.assigned_admin_id!==null&&r.assigned_admin_id!==void 0?String(r.assigned_admin_id):null,createdAt:r.created_at??new Date().toISOString(),updatedAt:r.updated_at??null}),Zg=r=>({id:String(r.id),serviceRequestId:String(r.service_request_id??""),actorUserId:r.actor_user_id??null,action:r.action??null,description:r.description??null,createdAt:r.created_at??new Date().toISOString(),actorName:r.actor_name??null}),ro={open:"Open",in_progress:"In Progress",completed:"Completed",canceled:"Canceled"},l1={open:"bg-gray-200 text-gray-800",in_progress:"bg-blue-100 text-blue-800",completed:"bg-green-100 text-green-800",canceled:"bg-gray-200 text-gray-500"},ud={low:"Low",medium:"Medium",high:"High"},o1=({showToast:r})=>{const{session:s}=nt(),[i,o]=S.useState([]),[c,u]=S.useState({}),[h,g]=S.useState([]),[m,p]=S.useState(!1),[b,w]=S.useState(null),[j,_]=S.useState({}),[v,E]=S.useState(null),y=["open","in_progress","completed","canceled"],k=["low","medium","high"],R=S.useCallback(async()=>{const{data:I,error:K}=await xe.from("admin_profiles").select("id, user_id, display_name, email").order("display_name",{ascending:!0});return K?(console.error("Failed to load admin profiles",K),[]):I??[]},[]),A=S.useCallback(async()=>{p(!0);try{const[I,K]=await Promise.all([xe.from("service_requests").select("id, profile_id, request_type, title, description, priority, status, admin_notes, assigned_admin_id, created_at, updated_at").in("status",["open","in_progress"]).order("created_at",{ascending:!1}),R()]),{data:H,error:J}=I;if(J)throw J;const D=H??[],W=new Map(K.map(V=>[String(V.id),V.display_name??V.email??String(V.id)])),se=new Map(K.filter(V=>!!V.user_id).map(V=>[V.user_id,V.display_name??V.email??V.user_id??"Admin"])),me=D.map(V=>{const te=i1(V);return{...te,assignedAdminName:te.assignedAdminId?W.get(te.assignedAdminId)??null:null}});o(me),g(K);const je=Array.from(new Set(D.map(V=>V.profile_id).filter(Boolean)));if(je.length>0){const{data:V,error:te}=await xe.from("profiles").select("id, business_name, contact_email").in("id",je);if(te)console.error("Failed to load profile details",te);else{const ee=V??[],ne=new Map(ee.map(de=>[de.id,de]));o(de=>de.map(oe=>{const Ae=ne.get(oe.profileId);return{...oe,profileName:(Ae==null?void 0:Ae.business_name)??null,profileEmail:(Ae==null?void 0:Ae.contact_email)??null}}))}}const T=D.map(V=>V.id).filter(V=>V!=null);if(T.length>0){const{data:V,error:te}=await xe.from("service_request_activity").select("*").in("service_request_id",T).order("created_at",{ascending:!1});if(te)console.error("Failed to load service request activities",te),u({});else{const ee=V??[],ne={};ee.forEach(de=>{const oe=Zg(de);if(oe.serviceRequestId){if(!oe.actorName&&oe.actorUserId){const Ae=se.get(oe.actorUserId);Ae&&(oe.actorName=Ae)}ne[oe.serviceRequestId]||(ne[oe.serviceRequestId]=[]),ne[oe.serviceRequestId].push(oe)}}),u(ne)}}else u({});w(null)}catch(I){console.error("Failed to load service requests",I),w("Unable to load service requests. Please try again."),o([]),u({})}finally{p(!1)}},[R]);S.useEffect(()=>{A()},[A]);const q=S.useMemo(()=>[{id:"",label:"Unassigned"},...h.map(I=>({id:String(I.id),label:I.display_name??I.email??String(I.id)}))],[h]),L=I=>c[I]??[],Q=(I,K)=>{u(H=>{const J=H[I]??[];return{...H,[I]:[K,...J]}})},B=async(I,K,H)=>{var J;if(!((J=s==null?void 0:s.user)!=null&&J.id)){r("You must be logged in as an admin to update requests.","error");return}E(I);try{const D={};Object.prototype.hasOwnProperty.call(K,"status")&&(D.status=K.status),Object.prototype.hasOwnProperty.call(K,"priority")&&(D.priority=K.priority),Object.prototype.hasOwnProperty.call(K,"adminNotes")&&(D.admin_notes=K.adminNotes??null),Object.prototype.hasOwnProperty.call(K,"assignedAdminId")&&(D.assigned_admin_id=K.assignedAdminId??null);const{error:W}=await xe.from("service_requests").update(D).eq("id",I);if(W)throw W;let se=null;const me=h.find(te=>te.user_id===s.user.id);if(me)se=me.display_name??me.email??null;else{const{data:te,error:ee}=await xe.from("admin_profiles").select("display_name, email").eq("user_id",s.user.id).maybeSingle();if(ee)console.error("Failed to resolve admin display name for activity log",ee);else{const ne=te??null;ne&&(se=ne.display_name??ne.email??null)}}const{data:je,error:T}=await xe.from("service_request_activity").insert({service_request_id:I,actor_user_id:s.user.id,action:H.action,description:H.description,actor_name:se}).select("*").single();if(T)throw T;const V=Zg(je);!V.actorName&&V.actorUserId&&se&&(V.actorName=se),Q(I,V),o(te=>te.map(ee=>ee.id===I?{...ee,...K}:ee)),r("Request updated successfully.","success")}catch(D){console.error("Failed to update request",D),r("Failed to update the request. Please try again.","error")}finally{E(null)}},Z=(I,K)=>{I.status!==K&&B(I.id,{status:K},{action:"status_change",description:`Status updated to ${ro[K]}`})},M=(I,K)=>{I.priority!==K&&B(I.id,{priority:K},{action:"priority_change",description:`Priority updated to ${ud[K]}`})},ae=(I,K)=>{if((I.assignedAdminId??"")===K)return;const H=q.find(J=>J.id===K);B(I.id,{assignedAdminId:K||null},{action:"assignment_change",description:K?`Assigned to ${(H==null?void 0:H.label)??"admin"}`:"Request unassigned"}),o(J=>J.map(D=>D.id===I.id?{...D,assignedAdminId:K||null,assignedAdminName:(H==null?void 0:H.label)??null}:D))},ce=I=>{_(K=>({...K,[I]:!K[I]}))};return a.jsxs("div",{className:"p-4 md:p-6 lg:p-8 animate-fade-in space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"font-playfair text-3xl font-bold text-charcoal",children:"Service Requests"}),a.jsx("p",{className:"text-gray-dark mt-1",children:"Manage member submissions and keep track of the latest updates."})]}),a.jsx("button",{onClick:()=>void A(),className:"inline-flex items-center justify-center px-4 py-2 bg-white border border-gray-border rounded-lg text-sm font-semibold text-charcoal shadow-sm hover:bg-gray-50",disabled:m,children:m?"Refreshing":"Refresh"})]}),b&&a.jsx("div",{className:"rounded-lg border border-error/40 bg-error/10 px-4 py-3 text-sm text-error",children:b}),a.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-border overflow-hidden",children:[a.jsx("div",{className:"overflow-x-auto hidden md:block",children:a.jsxs("table",{className:"min-w-full",children:[a.jsx("thead",{className:"bg-gray-light/50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-4 text-left text-xs font-bold text-gray-dark uppercase",children:"Member"}),a.jsx("th",{className:"p-4 text-left text-xs font-bold text-gray-dark uppercase",children:"Request"}),a.jsx("th",{className:"p-4 text-left text-xs font-bold text-gray-dark uppercase",children:"Status"}),a.jsx("th",{className:"p-4 text-left text-xs font-bold text-gray-dark uppercase",children:"Priority"}),a.jsx("th",{className:"p-4 text-left text-xs font-bold text-gray-dark uppercase",children:"Assigned Admin"}),a.jsx("th",{className:"p-4 text-left text-xs font-bold text-gray-dark uppercase",children:"Created"}),a.jsx("th",{className:"p-4 text-right text-xs font-bold text-gray-dark uppercase",children:"Activity"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-border",children:i.map(I=>a.jsxs("tr",{className:"hover:bg-gray-light/50",children:[a.jsxs("td",{className:"p-4 align-top",children:[a.jsx("p",{className:"font-semibold text-charcoal",children:I.profileName??"Unknown Member"}),a.jsx("p",{className:"text-sm text-gray-dark",children:I.profileEmail??I.profileId})]}),a.jsxs("td",{className:"p-4 align-top",children:[a.jsx("p",{className:"font-semibold text-charcoal",children:I.title}),a.jsx("p",{className:"text-sm text-gray-dark mt-1",children:I.requestType}),a.jsx("p",{className:"text-xs text-gray-dark mt-2 line-clamp-2",children:I.description??"No description provided."})]}),a.jsx("td",{className:"p-4 align-top",children:a.jsx("select",{value:I.status,onChange:K=>Z(I,K.target.value),className:"w-full px-2 py-1 border border-gray-border rounded-lg text-sm",disabled:v===I.id,children:y.map(K=>a.jsx("option",{value:K,children:ro[K]},K))})}),a.jsx("td",{className:"p-4 align-top",children:a.jsx("select",{value:I.priority,onChange:K=>M(I,K.target.value),className:"w-full px-2 py-1 border border-gray-border rounded-lg text-sm",disabled:v===I.id,children:k.map(K=>a.jsx("option",{value:K,children:ud[K]},K))})}),a.jsx("td",{className:"p-4 align-top",children:a.jsx("select",{value:I.assignedAdminId??"",onChange:K=>ae(I,K.target.value),className:"w-full px-2 py-1 border border-gray-border rounded-lg text-sm",disabled:v===I.id,children:q.map(K=>a.jsx("option",{value:K.id,children:K.label},K.id))})}),a.jsx("td",{className:"p-4 align-top text-sm text-gray-dark",children:Wg(I.createdAt)}),a.jsx("td",{className:"p-4 align-top text-right",children:a.jsxs("button",{onClick:()=>ce(I.id),className:"inline-flex items-center gap-2 text-sm font-semibold text-info",children:["View activity",a.jsx(nn,{className:`w-4 h-4 transition-transform ${j[I.id]?"rotate-180":""}`})]})})]},I.id))})]})}),a.jsx("div",{className:"md:hidden divide-y divide-gray-border",children:i.map(I=>a.jsxs("div",{className:"p-4 space-y-3",children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-charcoal",children:I.profileName??"Unknown Member"}),a.jsx("p",{className:"text-sm text-gray-dark",children:I.profileEmail??I.profileId})]}),a.jsx("span",{className:`px-3 py-1 text-xs font-bold rounded-full ${l1[I.status]}`,children:ro[I.status]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-charcoal",children:I.title}),a.jsx("p",{className:"text-sm text-gray-dark",children:I.requestType}),a.jsx("p",{className:"text-sm text-gray-dark mt-2 line-clamp-3",children:I.description??"No description provided."})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[a.jsx("select",{value:I.status,onChange:K=>Z(I,K.target.value),className:"px-2 py-1 border border-gray-border rounded-lg text-sm",disabled:v===I.id,children:y.map(K=>a.jsx("option",{value:K,children:ro[K]},K))}),a.jsx("select",{value:I.priority,onChange:K=>M(I,K.target.value),className:"px-2 py-1 border border-gray-border rounded-lg text-sm",disabled:v===I.id,children:k.map(K=>a.jsx("option",{value:K,children:ud[K]},K))}),a.jsx("select",{value:I.assignedAdminId??"",onChange:K=>ae(I,K.target.value),className:"px-2 py-1 border border-gray-border rounded-lg text-sm",disabled:v===I.id,children:q.map(K=>a.jsx("option",{value:K.id,children:K.label},K.id))})]}),a.jsxs("p",{className:"text-sm text-gray-dark",children:["Created ",Wg(I.createdAt)]}),a.jsxs("button",{onClick:()=>ce(I.id),className:"inline-flex items-center gap-2 text-sm font-semibold text-info",children:["View activity",a.jsx(nn,{className:`w-4 h-4 transition-transform ${j[I.id]?"rotate-180":""}`})]})]},I.id))})]}),i.length===0&&!m&&a.jsxs("div",{className:"text-center py-16 bg-white rounded-2xl shadow-lg border border-gray-border",children:[a.jsx(Ea,{className:"w-12 h-12 mx-auto text-gray-300"}),a.jsx("h3",{className:"mt-4 text-xl font-bold text-charcoal",children:"No open requests"}),a.jsx("p",{className:"text-gray-dark mt-1",children:"All caught up! New submissions will appear here automatically."})]}),Object.entries(j).filter(([,I])=>I).map(([I])=>{const K=i.find(J=>J.id===I);if(!K)return null;const H=L(I);return a.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-border p-6 space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("h2",{className:"font-playfair text-2xl font-bold text-charcoal",children:["Activity for ",K.title]}),a.jsx("button",{onClick:()=>ce(I),className:"text-sm font-semibold text-info",children:"Collapse"})]}),H.length===0?a.jsx("p",{className:"text-sm text-gray-dark",children:"No activity has been recorded for this request yet."}):a.jsx("ul",{className:"divide-y divide-gray-border",children:H.map(J=>a.jsx("li",{className:"py-3 text-sm",children:a.jsxs("div",{className:"flex justify-between items-start gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-charcoal",children:J.description??J.action??"Activity recorded"}),(J.actorName||J.actorUserId)&&a.jsxs("p",{className:"text-xs text-gray-dark mt-1",children:["by ",J.actorName??J.actorUserId]})]}),a.jsx("span",{className:"text-xs text-gray-dark",children:s1(J.createdAt)})]})},J.id))})]},I)})]})},ex=r=>{if(!r)return"";const s=new Date(r);return Number.isNaN(s.getTime())?r:new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"numeric"}).format(s)},c1=r=>(r==null?void 0:r.toLowerCase())??"pending",u1=r=>({id:String(r.id),profileId:r.profile_id??"",name:r.document_name??"Document",type:r.doc_type??null,status:c1(r.status),adminNote:r.admin_note??null,uploadedAt:r.uploaded_at??r.created_at??null}),d1=["pending","submitted","under_review"],h1=({showToast:r})=>{const{session:s}=nt(),[i,o]=S.useState([]),[c,u]=S.useState({}),[h,g]=S.useState(!1),[m,p]=S.useState(null),[b,w]=S.useState(null),j=S.useCallback(async()=>{g(!0);try{const{data:y,error:k}=await xe.from("member_documents").select("id, profile_id, document_name, doc_type, status, admin_note, uploaded_at, created_at, updated_at").in("status",d1).order("created_at",{ascending:!1});if(k)throw k;const A=(y??[]).map(u1);o(A),u(()=>{const q={};return A.forEach(L=>{L.adminNote&&(q[L.id]=L.adminNote)}),q}),p(null)}catch(y){console.error("Failed to load documents",y),p("Unable to load pending documents. Please try again."),o([])}finally{g(!1)}},[]);S.useEffect(()=>{j()},[j]);const _=(y,k)=>{u(R=>({...R,[y]:k}))},v=async(y,k)=>{var R;if(!((R=s==null?void 0:s.user)!=null&&R.id)){r("You must be logged in as an admin to update documents.","error");return}w(y.id);try{const{error:A}=await xe.from("member_documents").update({status:k,admin_note:c[y.id]??null}).eq("id",y.id);if(A)throw A;r(`Document ${k==="approved"?"approved":"rejected"} successfully.`,"success"),o(q=>q.filter(L=>L.id!==y.id))}catch(A){console.error("Failed to update document",A),r("Failed to update the document. Please try again.","error")}finally{w(null)}},E=S.useMemo(()=>i.length,[i]);return a.jsxs("div",{className:"p-4 md:p-6 lg:p-8 animate-fade-in space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"font-playfair text-3xl font-bold text-charcoal",children:"Documents Awaiting Review"}),a.jsx("p",{className:"text-gray-dark mt-1",children:"Approve or reject the latest verification uploads from members."})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("span",{className:"inline-flex items-center gap-2 px-3 py-1 rounded-full bg-info/10 text-info text-sm font-semibold",children:["Pending: ",E]}),a.jsx("button",{onClick:()=>void j(),className:"px-4 py-2 bg-white border border-gray-border rounded-lg text-sm font-semibold text-charcoal shadow-sm hover:bg-gray-50",disabled:h,children:h?"Refreshing":"Refresh"})]})]}),m&&a.jsx("div",{className:"rounded-lg border border-error/40 bg-error/10 px-4 py-3 text-sm text-error",children:m}),a.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-border overflow-hidden",children:[a.jsx("div",{className:"overflow-x-auto hidden md:block",children:a.jsxs("table",{className:"min-w-full",children:[a.jsx("thead",{className:"bg-gray-light/50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-4 text-left text-xs font-bold text-gray-dark uppercase",children:"Member"}),a.jsx("th",{className:"p-4 text-left text-xs font-bold text-gray-dark uppercase",children:"Document"}),a.jsx("th",{className:"p-4 text-left text-xs font-bold text-gray-dark uppercase",children:"Uploaded"}),a.jsx("th",{className:"p-4 text-left text-xs font-bold text-gray-dark uppercase",children:"Notes"}),a.jsx("th",{className:"p-4 text-right text-xs font-bold text-gray-dark uppercase",children:"Actions"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-border",children:i.map(y=>a.jsxs("tr",{className:"align-top",children:[a.jsxs("td",{className:"p-4",children:[a.jsx("p",{className:"font-semibold text-charcoal",children:y.profileId}),a.jsx("p",{className:"text-sm text-gray-dark uppercase tracking-wide",children:y.status})]}),a.jsxs("td",{className:"p-4",children:[a.jsx("p",{className:"font-semibold text-charcoal",children:y.name}),a.jsx("p",{className:"text-sm text-gray-dark",children:y.type??""})]}),a.jsx("td",{className:"p-4 text-sm text-gray-dark",children:ex(y.uploadedAt)}),a.jsx("td",{className:"p-4",children:a.jsx("textarea",{value:c[y.id]??"",onChange:k=>_(y.id,k.target.value),rows:3,className:"w-full border border-gray-border rounded-lg text-sm p-2 focus:outline-none focus:ring-2 focus:ring-info",placeholder:"Add an internal note"})}),a.jsx("td",{className:"p-4",children:a.jsxs("div",{className:"flex items-center justify-end gap-3",children:[a.jsxs("button",{type:"button",onClick:()=>v(y,"approved"),className:"inline-flex items-center gap-2 px-3 py-2 rounded-lg bg-success/90 text-white text-sm font-semibold shadow-sm hover:bg-success",disabled:b===y.id,children:[a.jsx(na,{className:"w-4 h-4"})," Approve"]}),a.jsxs("button",{type:"button",onClick:()=>v(y,"rejected"),className:"inline-flex items-center gap-2 px-3 py-2 rounded-lg bg-error/90 text-white text-sm font-semibold shadow-sm hover:bg-error",disabled:b===y.id,children:[a.jsx(wt,{className:"w-4 h-4"})," Reject"]})]})})]},y.id))})]})}),a.jsx("div",{className:"md:hidden divide-y divide-gray-border",children:i.map(y=>a.jsxs("div",{className:"p-4 space-y-3",children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-charcoal",children:y.name}),a.jsx("p",{className:"text-sm text-gray-dark",children:y.type??""})]}),a.jsx("span",{className:"px-3 py-1 text-xs font-bold rounded-full bg-gray-light text-gray-dark uppercase",children:y.status})]}),a.jsxs("p",{className:"text-sm text-gray-dark",children:["Profile: ",y.profileId]}),a.jsxs("p",{className:"text-sm text-gray-dark",children:["Uploaded ",ex(y.uploadedAt)]}),a.jsx("textarea",{value:c[y.id]??"",onChange:k=>_(y.id,k.target.value),rows:3,className:"w-full border border-gray-border rounded-lg text-sm p-2 focus:outline-none focus:ring-2 focus:ring-info",placeholder:"Add an internal note"}),a.jsxs("div",{className:"flex items-center justify-end gap-2",children:[a.jsxs("button",{type:"button",onClick:()=>v(y,"approved"),className:"inline-flex items-center gap-2 px-3 py-2 rounded-lg bg-success/90 text-white text-sm font-semibold shadow-sm hover:bg-success",disabled:b===y.id,children:[a.jsx(na,{className:"w-4 h-4"})," Approve"]}),a.jsxs("button",{type:"button",onClick:()=>v(y,"rejected"),className:"inline-flex items-center gap-2 px-3 py-2 rounded-lg bg-error/90 text-white text-sm font-semibold shadow-sm hover:bg-error",disabled:b===y.id,children:[a.jsx(wt,{className:"w-4 h-4"})," Reject"]})]})]},y.id))})]}),i.length===0&&!h&&a.jsxs("div",{className:"text-center py-16 bg-white rounded-2xl shadow-lg border border-gray-border",children:[a.jsx(Ea,{className:"w-12 h-12 mx-auto text-gray-300"}),a.jsx("h3",{className:"mt-4 text-xl font-bold text-charcoal",children:"No pending documents"}),a.jsx("p",{className:"text-gray-dark mt-1",children:"All member uploads have been reviewed."})]})]})},f1=r=>r==null?null:typeof r=="string"?r:new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0}).format(r),tx=r=>{if(!r)return null;const s=new Date(r);return Number.isNaN(s.getTime())?r:new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric"}).format(s)},m1=r=>{var c,u,h,g,m;const s=r.unit_amount_cents?f1(r.unit_amount_cents/100):null,i=((c=r.profiles)==null?void 0:c.full_name)||((u=r.profiles)==null?void 0:u.company_name)||`Member ${((h=r.profile_id)==null?void 0:h.slice(0,8))||"Unknown"}`,o=((g=r.profiles)==null?void 0:g.email)||`member${((m=r.profile_id)==null?void 0:m.slice(0,8))||"unknown"}@example.com`;return{id:String(r.id),memberName:i,memberEmail:o,planTier:r.tier??"Unknown",status:r.status??"unknown",price:s,renewalDate:tx(r.current_period_end??null),createdAt:tx(r.created_at??null)}},p1=({showToast:r})=>{const[s,i]=S.useState([]),[o,c]=S.useState(!1),[u,h]=S.useState(null),g=S.useCallback(async()=>{c(!0);try{const{data:p,error:b}=await xe.from("subscriptions").select(`
                  id,
                  profile_id,
                  tier,
                  status,
                  unit_amount_cents,
                  billing_cycle,
                  current_period_end,
                  created_at,
                  profiles!inner(
                    id,
                    email,
                    full_name,
                    company_name,
                    membership_tier
                  )
                `).eq("status","active").order("created_at",{ascending:!1});if(b)throw b;i((p??[]).map(m1)),h(null)}catch(p){console.error("Failed to load subscriptions",p),h("Unable to load active memberships. Please try again."),i([])}finally{c(!1)}},[]);S.useEffect(()=>{g()},[g]);const m=S.useMemo(()=>s.length,[s]);return a.jsxs("div",{className:"p-4 md:p-6 lg:p-8 animate-fade-in space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"font-playfair text-3xl font-bold text-charcoal",children:"Active Memberships"}),a.jsx("p",{className:"text-gray-dark mt-1",children:"A read-only list of members with current, active subscriptions."})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("span",{className:"inline-flex items-center gap-2 px-3 py-1 rounded-full bg-info/10 text-info text-sm font-semibold",children:["Active: ",m]}),a.jsx("button",{onClick:()=>void g(),className:"px-4 py-2 bg-white border border-gray-border rounded-lg text-sm font-semibold text-charcoal shadow-sm hover:bg-gray-50",disabled:o,children:o?"Refreshing":"Refresh"})]})]}),u&&a.jsx("div",{className:"rounded-lg border border-error/40 bg-error/10 px-4 py-3 text-sm text-error",children:u}),a.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-border overflow-hidden",children:[a.jsx("div",{className:"overflow-x-auto hidden md:block",children:a.jsxs("table",{className:"min-w-full",children:[a.jsx("thead",{className:"bg-gray-light/50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-4 text-left text-xs font-bold text-gray-dark uppercase",children:"Member"}),a.jsx("th",{className:"p-4 text-left text-xs font-bold text-gray-dark uppercase",children:"Plan"}),a.jsx("th",{className:"p-4 text-left text-xs font-bold text-gray-dark uppercase",children:"Price"}),a.jsx("th",{className:"p-4 text-left text-xs font-bold text-gray-dark uppercase",children:"Renewal Date"}),a.jsx("th",{className:"p-4 text-left text-xs font-bold text-gray-dark uppercase",children:"Joined"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-border",children:s.map(p=>a.jsxs("tr",{className:"hover:bg-gray-light/50",children:[a.jsxs("td",{className:"p-4",children:[a.jsx("p",{className:"font-semibold text-charcoal",children:p.memberName}),a.jsx("p",{className:"text-sm text-gray-dark",children:p.memberEmail})]}),a.jsxs("td",{className:"p-4",children:[a.jsx("p",{className:"font-semibold text-charcoal",children:p.planTier}),a.jsx("p",{className:"text-sm text-gray-dark",children:p.status})]}),a.jsx("td",{className:"p-4 text-sm text-gray-dark",children:p.price??""}),a.jsx("td",{className:"p-4 text-sm text-gray-dark",children:p.renewalDate??""}),a.jsx("td",{className:"p-4 text-sm text-gray-dark",children:p.createdAt??""})]},p.id))})]})}),a.jsx("div",{className:"md:hidden divide-y divide-gray-border",children:s.map(p=>a.jsxs("div",{className:"p-4 space-y-3",children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-charcoal",children:p.memberName}),a.jsx("p",{className:"text-sm text-gray-dark",children:p.memberEmail})]}),a.jsx("span",{className:"text-sm font-semibold text-gray-dark",children:p.price??""})]}),a.jsxs("p",{className:"text-sm text-gray-dark",children:["Plan: ",p.planTier," (",p.status,")"]}),a.jsxs("p",{className:"text-sm text-gray-dark",children:["Renewal ",p.renewalDate??""]}),a.jsxs("p",{className:"text-sm text-gray-dark",children:["Joined ",p.createdAt??""]})]},p.id))})]}),s.length===0&&!o&&a.jsxs("div",{className:"text-center py-16 bg-white rounded-2xl shadow-lg border border-gray-border",children:[a.jsx(Ea,{className:"w-12 h-12 mx-auto text-gray-300"}),a.jsx("h3",{className:"mt-4 text-xl font-bold text-charcoal",children:"No active memberships"}),a.jsx("p",{className:"text-gray-dark mt-1",children:"Once members activate their subscription it will appear here."})]})]})},er=({icon:r,label:s,isActive:i,onClick:o})=>a.jsxs("button",{onClick:o,className:`flex items-center w-full px-4 py-3 rounded-lg text-left transition-colors duration-200 relative ${i?"bg-info/10 text-blue-700 font-bold":"text-[var(--text-muted)] hover:bg-[var(--bg-subtle)] hover:text-[var(--text-main)]"}`,children:[i&&a.jsx("div",{className:"absolute left-0 top-0 h-full w-1 bg-info rounded-r-full"}),a.jsx("div",{className:`ml-2 ${i?"text-info":""}`,children:r}),a.jsx("span",{className:"ml-3",children:s})]}),g1=()=>{const{currentUser:r,logout:s}=nt(),[i,o]=S.useState("overview"),[c,u]=S.useState(!1),[h,g]=S.useState(!1),m=S.useRef(null),[p,b]=S.useState(null);S.useEffect(()=>{if(p){const E=setTimeout(()=>b(null),3e3);return()=>clearTimeout(E)}},[p]);const w=(E,y)=>{b({message:E,type:y})};S.useEffect(()=>{const E=y=>{m.current&&!m.current.contains(y.target)&&g(!1)};return document.addEventListener("mousedown",E),()=>document.removeEventListener("mousedown",E)},[]);const j=E=>{o(E),u(!1)},_=()=>{switch(i){case"overview":return a.jsx(Jg,{});case"members":return a.jsx(ZN,{showToast:w});case"serviceRequests":return a.jsx(o1,{showToast:w});case"documents":return a.jsx(h1,{showToast:w});case"subscriptions":return a.jsx(p1,{showToast:w});case"settings":return a.jsx(a1,{showToast:w});default:return a.jsx(Jg,{})}},v=a.jsxs(a.Fragment,{children:[a.jsx(er,{icon:a.jsx(Ex,{className:"w-6 h-6"}),label:"Overview",isActive:i==="overview",onClick:()=>j("overview")}),a.jsx(er,{icon:a.jsx(Cs,{className:"w-6 h-6"}),label:"Members",isActive:i==="members",onClick:()=>j("members")}),a.jsx(er,{icon:a.jsx(Eo,{className:"w-6 h-6"}),label:"Service Requests",isActive:i==="serviceRequests",onClick:()=>j("serviceRequests")}),a.jsx(er,{icon:a.jsx(_t,{className:"w-6 h-6"}),label:"Documents",isActive:i==="documents",onClick:()=>j("documents")}),a.jsx(er,{icon:a.jsx(Ax,{className:"w-6 h-6"}),label:"Subscriptions",isActive:i==="subscriptions",onClick:()=>j("subscriptions")}),a.jsx(er,{icon:a.jsx(Cx,{className:"w-6 h-6"}),label:"Settings",isActive:i==="settings",onClick:()=>j("settings")})]});return a.jsxs("div",{className:"flex h-screen bg-[var(--bg-main)] text-[var(--text-main)]",children:[p&&a.jsx("div",{className:`fixed top-20 right-8 z-[100] py-3 px-5 rounded-lg shadow-lg text-white animate-slide-in-right ${p.type==="success"?"bg-success":"bg-error"}`,children:p.message}),a.jsx("div",{className:`fixed inset-0 z-40 md:hidden transition-opacity ${c?"bg-black/50":"bg-transparent pointer-events-none"}`,onClick:()=>u(!1)}),a.jsxs("aside",{className:`fixed top-0 left-0 h-full z-50 w-64 bg-[var(--bg-card)] border-r border-[var(--border-subtle)] flex flex-col transition-transform duration-300 md:relative md:translate-x-0 ${c?"translate-x-0":"-translate-x-full"}`,children:[a.jsxs("div",{className:"px-6 py-4 flex items-center border-b border-[var(--border-subtle)] h-16 shrink-0",children:[a.jsx("img",{src:"https://restorationexpertise.com/wp-content/uploads/2025/11/Restorationexpertise_ig_profilepic_2_small.webp",alt:"Logo",className:"w-8 h-8 mr-2"}),a.jsx("h1",{className:"font-playfair text-xl font-bold text-[var(--text-main)]",children:"Admin"})]}),a.jsx("nav",{className:"flex-grow p-4 space-y-2",children:v}),a.jsxs("div",{className:"p-4 border-t border-[var(--border-subtle)] space-y-4",children:[a.jsx(yo,{variant:"row"}),a.jsxs("button",{onClick:()=>void s(),className:"flex items-center w-full px-4 py-3 rounded-lg text-left text-[var(--text-muted)] hover:bg-red-500/10 hover:text-error transition-colors",children:[a.jsx(kx,{className:"w-6 h-6"}),a.jsx("span",{className:"ml-3 font-semibold",children:"Logout"})]})]})]}),a.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[a.jsxs("header",{className:"sticky top-0 z-30 bg-[var(--bg-card)] shadow-sm h-16 flex items-center justify-between px-4 md:px-6 shrink-0 border-b border-[var(--border-subtle)]",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("button",{onClick:()=>u(!0),className:"text-[var(--text-main)] md:hidden mr-4",children:a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})})}),a.jsxs("div",{className:"hidden md:flex items-center gap-3",children:[a.jsx("h1",{className:"font-playfair text-xl md:text-2xl font-bold text-[var(--text-main)]",children:"Admin Panel"}),a.jsx("span",{className:"bg-info/10 text-blue-700 text-xs font-bold px-2 py-0.5 rounded-md",children:"ADMIN"})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(yo,{variant:"icon"}),a.jsxs("div",{className:"relative",ref:m,children:[a.jsxs("button",{onClick:()=>g(!h),className:"flex items-center space-x-2 p-1 rounded-lg hover:bg-[var(--bg-subtle)]",children:[a.jsx("div",{className:"w-9 h-9 bg-info/10 rounded-full flex items-center justify-center",children:a.jsx(vi,{className:"w-6 h-6 text-blue-600"})}),a.jsxs("div",{className:"hidden sm:block text-left",children:[a.jsx("p",{className:"font-semibold text-sm text-[var(--text-main)]",children:r==null?void 0:r.name}),a.jsx("p",{className:"text-xs text-[var(--text-muted)]",children:r==null?void 0:r.email})]}),a.jsx(nn,{className:"w-4 h-4 text-[var(--text-muted)]"})]}),h&&a.jsxs("div",{className:"absolute right-0 mt-2 w-56 bg-[var(--bg-card)] rounded-lg shadow-xl border border-[var(--border-subtle)] z-50 animate-fade-in",children:[a.jsx("a",{href:"#",className:"block px-4 py-2 text-sm text-[var(--text-main)] hover:bg-[var(--bg-subtle)]",children:"My profile"}),a.jsx("a",{href:"#",className:"block px-4 py-2 text-sm text-[var(--text-main)] hover:bg-[var(--bg-subtle)]",children:"Switch to Member View"}),a.jsx("div",{className:"border-t border-[var(--border-subtle)] my-1"}),a.jsx("button",{onClick:()=>void s(),className:"w-full text-left px-4 py-2 text-sm text-error hover:bg-error/5",children:"Logout"})]})]})]})]}),a.jsx("main",{className:"flex-1 overflow-x-hidden overflow-y-auto",children:_()})]})]})},x1="restorationexpertise:last-plan",ax="restorationexpertise:last-email",b1=()=>{const{login:r,isLoading:s}=nt(),i=Rs(),o=Ja(),[c,u]=S.useState(""),[h,g]=S.useState("form"),[m,p]=S.useState(null);S.useEffect(()=>{if(typeof window>"u")return;const j=window.localStorage.getItem(ax);j&&u(j)},[]),S.useEffect(()=>{const _=new URLSearchParams(o.search).get("checkout");if(_==="success"){const E=((typeof window<"u"?window.localStorage.getItem(x1):null)??"founding-member").toLowerCase().replace(/\s+/g,"-");i(`/success/${E}`,{replace:!0})}else _==="cancelled"&&p("Checkout was cancelled. You can try again when you are ready.")},[o.search,i]);const b=async j=>{if(j.preventDefault(),!c||h!=="form")return;const _=c.trim();p(null),g("confirming");try{typeof window<"u"&&window.localStorage.setItem(ax,_),await r(_),g("confirmed")}catch(v){console.error("Failed to initiate login flow",v);const E=v instanceof Error?v.message:"Something went wrong. Please try again.";p(E),g("form")}},w=!c||h!=="form";return a.jsxs("div",{className:"login-page-container font-inter",children:[a.jsxs("div",{className:"login-animation-bg",children:[a.jsx("div",{className:"aurora-layer layer-1"}),a.jsx("div",{className:"aurora-layer layer-2"}),a.jsx("div",{className:"login-particle-container",children:Array.from({length:15}).map((j,_)=>a.jsx("div",{className:"login-particle"},_))}),a.jsx("div",{className:"light-streak"})]}),a.jsxs("div",{className:"w-full max-w-lg mx-auto relative z-10",children:[a.jsxs("div",{className:"text-center mb-8 animate-fade-in",children:[a.jsx("img",{src:"https://restorationexpertise.com/wp-content/uploads/2025/11/restorationexpertisecom2_logo3D.webp",alt:"Restoration Expertise Logo",className:"w-40 h-40 md:w-52 md:h-52 mx-auto mb-4 animate-float-logo"}),a.jsx("h1",{className:"font-playfair text-xl md:text-2xl font-bold text-white",children:"Restoration Expertise"}),a.jsx("p",{className:"text-lg text-gray-300 mt-2",children:"The Restoration Network Homeowners Trust."})]}),a.jsxs("div",{className:"login-glass-card p-8 rounded-2xl transition-all duration-500",children:[h==="form"&&a.jsxs("div",{className:"animate-fade-in space-y-6",children:[a.jsxs("form",{onSubmit:b,className:"space-y-6",children:[a.jsxs("div",{className:"text-center mb-6",children:[a.jsx("p",{className:"text-gray-300",children:"Enter your email to receive a secure magic link."}),a.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Members only. Use the email you joined with."})]}),s&&a.jsx("p",{className:"rounded-lg border border-white/10 bg-black/20 p-3 text-sm text-gray-300",children:"Connecting to Supabase"}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"email",className:"sr-only",children:"Email address"}),a.jsx("input",{id:"email",type:"email",value:c,onChange:j=>u(j.target.value),placeholder:"you@example.com",required:!0,className:"mt-1 block w-full px-4 py-3 border border-white/20 rounded-lg shadow-sm focus:ring-2 focus:ring-[var(--accent)] focus:border-[var(--accent)] bg-white/10 text-white placeholder:text-gray-400"})]}),a.jsx("button",{type:"submit",disabled:w,className:"magic-link-button w-full py-3 px-4 bg-[var(--accent)] text-[var(--accent-text)] font-bold text-lg rounded-lg shadow-lg hover:bg-[var(--accent-dark)] transition-all transform hover:scale-105 focus:outline-none focus:ring-4 focus:ring-[var(--accent)]/50 disabled:opacity-50",children:"Send Magic Link"})]}),m&&a.jsx("p",{className:"rounded-lg border border-error/40 bg-error/10 p-3 text-sm text-error",children:m}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-0 flex items-center","aria-hidden":"true",children:a.jsx("div",{className:"w-full border-t border-white/20"})}),a.jsx("div",{className:"relative flex justify-center",children:a.jsx("span",{className:"bg-[rgba(28,28,28,0.2)] px-2 text-sm text-gray-400",children:"Or"})})]}),a.jsx("button",{type:"button",onClick:()=>i("/assessment"),className:"w-full py-3 px-4 bg-white/10 text-white font-bold rounded-lg shadow-md border border-white/20 hover:bg-white/20 transition-all transform hover:scale-105",children:"Take Free Credibility Assessment"})]}),h==="confirming"&&a.jsxs("div",{className:"text-center animate-fade-in space-y-4",children:[a.jsx("div",{className:"mx-auto mb-4 h-16 w-16 animate-spin rounded-full border-4 border-[var(--accent)] border-t-transparent"}),a.jsx("h2",{className:"font-playfair text-3xl font-bold text-white",children:"Sending magic link"}),a.jsxs("p",{className:"text-gray-300",children:["We're sending a secure link to ",c,". Follow the instructions in your inbox to continue."]})]}),h==="confirmed"&&a.jsxs("div",{className:"text-center animate-fade-in space-y-4",children:[a.jsx(na,{className:"mx-auto h-16 w-16 text-success"}),a.jsx("h2",{className:"font-playfair text-3xl font-bold text-white",children:"Magic link sent!"}),a.jsx("p",{className:"text-gray-300",children:"Check your inbox for your secure login link."}),a.jsx("div",{className:"h-2.5 w-full rounded-full bg-white/10",children:a.jsx("div",{className:"h-2.5 animate-pulse rounded-full bg-[var(--accent)]"})})]})]})]}),a.jsxs("footer",{className:"absolute bottom-4 text-center text-gray-400 z-10",children:[a.jsxs("p",{children:[" ",new Date().getFullYear()," RestorationExpertise. All Rights Reserved."]}),a.jsx("button",{onClick:()=>i("/admin/login"),className:"mt-2 text-xs text-gray-500 hover:text-gray-300 transition-colors underline",children:"Admin Login"})]})]})},v1=()=>{const[r,s]=S.useState(""),[i,o]=S.useState(""),[c,u]=S.useState(""),[h,g]=S.useState(!1),{adminLogin:m}=nt(),p=Rs(),b=async j=>{j.preventDefault(),g(!0),u("");try{const _=await m(r,i);_.success?p("/admin"):u(_.error||"Login failed. Please try again.")}catch(_){console.error("Login error:",_),u("An unexpected error occurred. Please try again.")}finally{g(!1)}},w=()=>{p("/login")};return a.jsxs("div",{className:"login-page-container",children:[a.jsxs("div",{className:"login-animation-bg",children:[a.jsx("div",{className:"aurora-layer layer-1"}),a.jsx("div",{className:"aurora-layer layer-2"}),a.jsx("div",{className:"login-particle-container",children:Array.from({length:15}).map((j,_)=>a.jsx("div",{className:"login-particle"},_))}),a.jsx("div",{className:"light-streak"})]}),a.jsxs("div",{className:"login-glass-card rounded-3xl p-8 w-full max-w-md relative z-10",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("img",{src:"https://restorationexpertise.com/wp-content/uploads/2025/11/Restorationexpertise_ig_profilepic_2_small.webp",alt:"RestorationExpertise Logo",className:"w-16 h-16 mx-auto mb-4 rounded-full"}),a.jsx("h1",{className:"text-3xl font-bold font-playfair text-white mb-2",children:"Admin Login"}),a.jsx("p",{className:"text-gray-300",children:"Enter your credentials to access the admin dashboard"})]}),a.jsxs("form",{onSubmit:b,className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-200 mb-2",children:"Email Address"}),a.jsx("input",{id:"email",type:"email",value:r,onChange:j=>s(j.target.value),required:!0,className:`w-full px-4 py-3 rounded-xl border bg-white/10 backdrop-blur-sm text-white placeholder-gray-400 focus:outline-none focus:ring-2 transition-all ${c?"border-red-400 focus:ring-red-400":"border-white/20 focus:ring-gold focus:border-gold"}`,placeholder:"admin@example.com",disabled:h})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-200 mb-2",children:"Password"}),a.jsx("input",{id:"password",type:"password",value:i,onChange:j=>o(j.target.value),required:!0,className:`w-full px-4 py-3 rounded-xl border bg-white/10 backdrop-blur-sm text-white placeholder-gray-400 focus:outline-none focus:ring-2 transition-all ${c?"border-red-400 focus:ring-red-400":"border-white/20 focus:ring-gold focus:border-gold"}`,placeholder:"",disabled:h})]}),c&&a.jsx("div",{className:"text-red-400 text-sm text-center bg-red-400/10 backdrop-blur-sm rounded-lg p-3 border border-red-400/20",children:c}),a.jsx("button",{type:"submit",disabled:h,className:`w-full py-3 px-4 rounded-xl font-semibold text-charcoal transition-all transform ${h?"bg-gray-400 cursor-not-allowed":"bg-gold hover:bg-gold-light hover:scale-105 active:scale-95"} shadow-lg`,children:h?"Signing In...":"Sign In"})]}),a.jsx("div",{className:"mt-6 text-center",children:a.jsx("button",{onClick:w,className:"text-gray-300 hover:text-white text-sm transition-colors",children:" Back to Member Login"})})]})]})},Ya=["Business Basics","Operational & Professional Standards","Licensing & Compliance","Customer Feedback & Online Authority","Industry Certifications & Training","Digital & Brand Maturity"],y1=["Alabama","Alaska","Arizona","Arkansas","California","Colorado","Connecticut","Delaware","Florida","Georgia","Hawaii","Idaho","Illinois","Indiana","Iowa","Kansas","Kentucky","Louisiana","Maine","Maryland","Massachusetts","Michigan","Minnesota","Mississippi","Missouri","Montana","Nebraska","Nevada","New Hampshire","New Jersey","New Mexico","New York","North Carolina","North Dakota","Ohio","Oklahoma","Oregon","Pennsylvania","Rhode Island","South Carolina","South Dakota","Tennessee","Texas","Utah","Vermont","Virginia","Washington","West Virginia","Wisconsin","Wyoming"],w1={businessName:"",city:"",yearsInBusiness:1,employees:1,services:{water:!1,fire:!1,mold:!1,storm:!1},businessDescription:"",hasLicense:!1,hasLiabilityInsurance:!1,hasWorkersComp:!1,yearsLicensed:0,googleRating:0,googleReviews:0,otherPlatforms:{yelp:!1,bbb:!1,facebook:!1},certifications:{water:!1,fire:!1,mold:!1,other:!1},hasWebsite:!1,activeSocialMedia:!1,brandedVehicles:!1,emergencyLine:!1,hasProEmail:!1},co=12,hi={operational:20,licensing:10,feedback:30,certifications:20,digital:17};function j1(r){return r>=90?"A+":r>=80?"A":r>=65?"B+":"Needs Work"}function N1(r,s){const i=[];return r.hasLicense||i.push("No active contractor license on file."),r.hasLiabilityInsurance||i.push("No general liability insurance listed."),s.operational<10&&i.push("Operational standards are below our minimum."),s.licensing<4&&i.push("Too few years licensed for certification."),s.feedback<5&&i.push("Customer feedback and reviews are too low."),s.digital<5&&i.push("Digital & brand presence needs improvement."),s.total<70&&i.push("Overall score is below the minimum threshold."),{isEligible:i.length===0,eligibilityReasons:i}}const _1=r=>{const i=[{id:"hasLicense",label:"Get an active contractor license",description:"This is a fundamental requirement for certification and a major trust signal for homeowners.",category:"Operational",impact:"High",type:"Deep work",condition:u=>!u.hasLicense},{id:"hasLiabilityInsurance",label:"Secure general liability insurance",description:"Liability insurance is a non-negotiable for professional contractors and essential for certification.",category:"Operational",impact:"High",type:"Deep work",condition:u=>!u.hasLiabilityInsurance},{id:"yearsLicensed",label:"Increase years of licensed experience",description:"More years of licensed operation build significant credibility. While this takes time, it's a key factor for top-tier status.",category:"Licensing",impact:"High",type:"Deep work",condition:u=>u.yearsLicensed<3},{id:"googleReviewsLow",label:"Boost your Google review count",description:"Reviews are a powerful form of social proof. Aim for at least 20+ high-quality reviews to build authority.",category:"Feedback",impact:"High",type:"Deep work",condition:u=>u.googleReviews<5},{id:"hasWebsite",label:"Create a professional website",description:"A website is your digital storefront. It's a critical asset for establishing credibility and attracting leads.",category:"Digital",impact:"High",type:"Deep work",condition:u=>!u.hasWebsite},{id:"hasWorkersComp",label:"Add workers' comp insurance",description:"This is a core credibility and compliance signal, especially for businesses with employees. Many adjusters and commercial clients expect it.",category:"Operational",impact:"Medium",type:"Deep work",condition:u=>!u.hasWorkersComp},{id:"googleReviewsMedium",label:"Gather more Google reviews",description:"You have a good start, but pushing from 5-10 reviews to 20-40 can significantly increase your local authority and lead flow.",category:"Feedback",impact:"Medium",type:"Quick win",condition:u=>u.googleReviews>=5&&u.googleReviews<20},{id:"googleRating",label:"Improve your Google rating",description:"A rating below 4.5 stars can deter potential customers. Focus on delivering excellent service and encouraging happy clients to leave reviews.",category:"Feedback",impact:"Medium",type:"Deep work",condition:u=>u.googleRating>0&&u.googleRating<4.5},{id:"hasProEmail",label:"Set up a professional email address",description:"Using an email like 'info@yourcompany.com' instead of a generic Gmail or Yahoo address is a quick way to look more professional.",category:"Digital",impact:"Medium",type:"Quick win",condition:u=>!u.hasProEmail},{id:"certifications",label:"Earn more IICRC certifications",description:"Certifications demonstrate a commitment to industry standards and expertise, justifying higher prices and building trust.",category:"Certifications",impact:"Medium",type:"Deep work",condition:u=>(u.certifications.water?1:0)+(u.certifications.fire?1:0)+(u.certifications.mold?1:0)+(u.certifications.other?1:0)<2},{id:"emergencyLine",label:"Establish a 24/7 emergency line",description:"For restoration, being available 24/7 is critical. Clearly advertising this on your site can significantly increase emergency calls.",category:"Digital",impact:"Medium",type:"Quick win",condition:u=>!u.emergencyLine}].filter(u=>u.condition(r)),o={High:1,Medium:2},c={"Quick win":1,"Deep work":2};return i.sort((u,h)=>o[u.impact]!==o[h.impact]?o[u.impact]-o[h.impact]:c[u.type]-c[h.type]),i.slice(0,3).map(({condition:u,...h})=>h)},S1=r=>{const s={operational:0,licensing:0,feedback:0,certifications:0,digital:0};r.hasLicense&&(s.operational+=10),r.hasLiabilityInsurance&&(s.operational+=5),r.hasWorkersComp&&(s.operational+=5),s.operational=Math.min(hi.operational,s.operational);const i=Math.max(0,Math.min(r.yearsLicensed,hi.licensing));if(i===0?s.licensing=0:i<=2?s.licensing=4:i<=5?s.licensing=7:s.licensing=10,r.googleRating<=0&&r.googleReviews<=0)s.feedback=0;else{const j=5+(Math.max(4,r.googleRating)-4)*10;let _=0;r.googleReviews>=40?_=15:r.googleReviews>=20?_=10:r.googleReviews>=5?_=6:r.googleReviews>0&&(_=4),s.feedback=Math.min(hi.feedback,j+_)}let o=0;r.certifications.water&&o++,r.certifications.fire&&o++,r.certifications.mold&&o++,r.certifications.other&&o++,s.certifications=o*5,s.certifications=Math.min(hi.certifications,s.certifications),r.hasWebsite&&(s.digital+=7),r.hasProEmail&&(s.digital+=5),r.emergencyLine&&(s.digital+=3),r.activeSocialMedia&&(s.digital+=1),r.brandedVehicles&&(s.digital+=1),s.digital=Math.min(hi.digital,s.digital);const c=s.operational+s.licensing+s.feedback+s.certifications+s.digital,u=Math.min(100,Math.max(0,Math.round(c))),h=j1(u),g={...s,total:u},{isEligible:m,eligibilityReasons:p}=N1(r,g),b=_1(r);return{operational:s.operational,licensing:s.licensing,feedback:s.feedback,certifications:s.certifications,digital:s.digital,total:u,grade:h,isEligibleForCertification:m,eligibilityReasons:p,opportunities:b}},Ab=({score:r,breakdown:s,isPopup:i})=>{const[o,c]=S.useState(r),u=S.useRef(r);gi.useEffect(()=>{const m=u.current;if(m===r)return;let p;const b=500,w=performance.now(),j=_=>{const v=_-w,E=Math.min(v/b,1),y=1-Math.pow(1-E,3),k=Math.round(m+(r-m)*y);c(k),E<1&&(p=requestAnimationFrame(j))};return p=requestAnimationFrame(j),()=>{cancelAnimationFrame(p)}},[r]),gi.useEffect(()=>{u.current=r},[r]);const h=m=>m<45?"bg-error":m<60?"bg-warning":m<75?"bg-brand-accent":"bg-success",g=[{label:"Operational",value:s.operational,max:20},{label:"Licensing",value:s.licensing,max:10},{label:"Feedback",value:s.feedback,max:30},{label:"Certifications",value:s.certifications,max:20},{label:"Digital",value:s.digital,max:17}];return a.jsxs("div",{className:`p-4 bg-white rounded-xl shadow-lg border border-gray-border ${i?"":"sticky top-0 md:top-8 md:w-64 md:ml-8 lg:ml-16 z-10"}`,children:[a.jsx("h3",{className:"font-sora text-charcoal text-lg font-bold text-center mb-2",children:"Your Score"}),a.jsxs("div",{className:"flex justify-center items-baseline gap-1 mb-4",children:[a.jsx("span",{className:"font-sora text-6xl font-bold text-charcoal",children:o}),a.jsx("span",{className:"font-sora text-2xl font-semibold text-gray-400",children:"/100"})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-4",children:a.jsx("div",{className:`h-4 rounded-full transition-all duration-500 ${h(r)}`,style:{width:`${r}%`}})}),a.jsx("p",{className:"text-center text-sm text-gray mt-2",children:i?"Based on your current inputs.":"Updating in real-time..."}),i&&a.jsxs("div",{className:"mt-6 pt-4 border-t border-gray-border space-y-2",children:[a.jsx("h4",{className:"font-bold text-center mb-2",children:"Breakdown"}),g.map(m=>a.jsxs("div",{className:"text-sm",children:[a.jsxs("div",{className:"flex justify-between font-medium",children:[a.jsx("span",{children:m.label}),a.jsxs("span",{children:[m.value," / ",m.max]})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1.5 mt-1",children:a.jsx("div",{className:"bg-brand-accent h-1.5 rounded-full",style:{width:`${m.value/m.max*100}%`}})})]},m.label))]})]})},aa=({label:r,points:s,checked:i,onChange:o,description:c,feedbackMessage:u})=>{const[h,g]=S.useState(!1),m=p=>{p&&(g(!0),setTimeout(()=>g(!1),700)),o(p)};return a.jsxs("div",{children:[a.jsxs("label",{className:"flex flex-col sm:flex-row sm:items-center justify-between w-full p-5 border border-gray-border rounded-xl cursor-pointer hover:border-brand-accent-dark transition-colors duration-200 min-h-36 gap-3 sm:gap-0",children:[a.jsxs("div",{className:"flex-1 mr-0 sm:mr-4",children:[a.jsx("span",{className:"font-semibold text-charcoal text-base md:text-lg leading-tight",children:r}),c&&a.jsx("p",{className:"text-sm text-gray-500 mt-1",children:c})]}),a.jsxs("div",{className:"flex items-center justify-between sm:justify-start w-full sm:w-auto space-x-4 flex-shrink-0 relative",children:[a.jsxs("span",{className:"font-sora font-bold text-brand-accent text-lg",children:["+",s," pts"]}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"checkbox",checked:i,onChange:p=>m(p.target.checked),className:"sr-only"}),a.jsx("div",{className:`w-12 h-6 rounded-full transition-colors duration-200 ${i?"bg-brand-accent":"bg-gray-200"}`,children:a.jsx("div",{className:`w-5 h-5 bg-white rounded-full shadow-md transform transition-transform duration-200 ${i?"translate-x-6":"translate-x-1"}`,style:{top:"2px",position:"relative"}})})]}),h&&a.jsxs("div",{className:"absolute -top-8 -right-2 font-bold text-xl text-brand-accent animate-point-flash pointer-events-none",children:["+",s," "]})]})]}),i&&u&&a.jsxs("div",{className:"pl-4 mt-2 text-sm text-green-700 flex items-center gap-2 animate-fade-in",children:[a.jsx(na,{className:"w-5 h-5"}),a.jsx("span",{children:u})]})]})},E1=({score:r})=>{const[s,i]=S.useState(r),o=S.useRef(r);gi.useEffect(()=>{const u=o.current;if(u===r)return;let h;const g=400,m=performance.now(),p=b=>{const w=b-m,j=Math.min(w/g,1),_=1-Math.pow(1-j,3),v=Math.round(u+(r-u)*_);i(v),j<1&&(h=requestAnimationFrame(p))};return h=requestAnimationFrame(p),()=>{cancelAnimationFrame(h)}},[r]),gi.useEffect(()=>{o.current=r},[r]);const c=u=>u<45?"bg-error":u<60?"bg-warning":u<75?"bg-brand-accent":"bg-success";return a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("div",{className:"flex items-baseline w-14 justify-end",children:[a.jsx("span",{className:"font-sora font-bold text-sm text-charcoal",children:s}),a.jsx("span",{className:"font-sora text-xs text-gray-500",children:"/100"})]}),a.jsx("div",{className:"w-20 bg-gray-200 rounded-full h-2 relative",children:a.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${c(r)}`,style:{width:`${r}%`}})})]})},k1=({step:r,score:s,onScoreClick:i,onBack:o,onNext:c,canProceed:u})=>{const h=(r+1)/Ya.length*100;return a.jsxs("div",{className:"fixed bottom-0 left-0 right-0 bg-white/80 backdrop-blur-sm border-t border-gray-border z-20 md:hidden",children:[a.jsxs("div",{onClick:i,className:"px-4 pt-2 pb-1.5 cursor-pointer",children:[a.jsxs("div",{className:"flex justify-between items-center text-xs mb-1",children:[a.jsxs("span",{className:"font-bold text-gray-dark",children:["Step ",r+1," of ",Ya.length]}),a.jsx(E1,{score:s})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:"bg-brand-accent h-2 rounded-full transition-all duration-300",style:{width:`${h}%`}})}),a.jsx("p",{className:"text-center text-xs font-bold text-gray-dark mt-1.5",children:Ya[r]})]}),a.jsxs("div",{className:"p-4 flex justify-between items-center gap-4 bg-white/50",children:[a.jsx("button",{onClick:o,className:"py-3 px-6 bg-white text-charcoal font-semibold rounded-lg shadow-md border border-gray-border hover:bg-gray-100",children:"Back"}),a.jsx("button",{onClick:c,disabled:!u,className:`flex-grow py-3 px-8 font-bold text-lg rounded-lg shadow-lg ${u?"bg-brand-accent text-charcoal hover:bg-brand-accent-dark":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:r===Ya.length-1?"Finish":"Continue"})]})]})},C1=({isOpen:r,onClose:s,score:i,breakdown:o})=>r?a.jsxs("div",{className:"fixed inset-0 z-40",onClick:s,children:[a.jsx("div",{className:"absolute inset-0 bg-black/50 animate-fade-in"}),a.jsx("div",{className:"absolute bottom-0 left-0 right-0 animate-slide-up-drawer p-4",onClick:c=>c.stopPropagation(),children:a.jsx(Ab,{score:i,breakdown:o,isPopup:!0})})]}):null,A1=({onComplete:r})=>{const s=Rs(),[i,o]=S.useState(0),[c,u]=S.useState(w1),[h,g]=S.useState({full_name_entered:"",email_entered:"",state:"",city:""}),[m,p]=S.useState(!1),[b,w]=S.useState("animate-fade-in"),[j,_]=S.useState(0),v=S.useMemo(()=>S1(c),[c]),E=()=>{if(q())if(i<Ya.length-1)w("animate-slide-out-left"),setTimeout(()=>{o(Z=>Z+1),_(Z=>Z+1),w("animate-slide-in-from-right")},300);else{const Z={...v,answers:c,emailEntered:h.email_entered,fullNameEntered:h.full_name_entered,state:h.state,cityEntered:h.city};L(Z),r(Z)}},y=()=>{i>0?(w("animate-slide-out-right"),setTimeout(()=>{o(Z=>Z-1),_(Z=>Z+1),w("animate-slide-in-from-left")},300)):s("/")},k=(Z,M)=>{u(ae=>({...ae,[Z]:M}))},R=(Z,M)=>{g(ae=>({...ae,[Z]:M}))},A=Z=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(Z),q=()=>i===0?h.full_name_entered.trim()!==""&&h.email_entered.trim()!==""&&A(h.email_entered.trim())&&h.state!==""&&h.city.trim()!=="":!0,L=async Z=>{try{const{data:M,error:ae}=await xe.from("assessments").upsert({...Z,full_name_entered:h.full_name_entered,email_entered:h.email_entered,state:h.state,city:h.city},{onConflict:"id"}).select().single();return ae?(console.error("Error saving assessment data:",ae),console.log("Assessment save failed due to RLS or other issue. Continuing without persistence."),null):(console.log("Assessment data saved successfully"),M)}catch(M){return console.error("Failed to save assessment:",M),console.log("Assessment save failed. Continuing without persistence."),null}},Q=(Z,M,ae)=>{u(ce=>({...ce,[Z]:{...ce[Z],[M]:ae}}))},B=()=>{const Z="Nice  this is one of the core signals top-tier restoration firms have in place.";switch(i){case 0:return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray",children:["Full Name ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",value:h.full_name_entered,onChange:M=>R("full_name_entered",M.target.value),className:"mt-1 block w-full p-3 border border-gray-border rounded-lg shadow-sm focus:ring-brand-accent focus:border-brand-accent bg-[var(--bg-input)] text-[var(--text-main)]",placeholder:"Enter your full name",required:!0})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray",children:["Business Email ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"email",value:h.email_entered,onChange:M=>R("email_entered",M.target.value),className:`mt-1 block w-full p-3 border rounded-lg shadow-sm focus:ring-brand-accent focus:border-brand-accent bg-[var(--bg-input)] text-[var(--text-main)] ${h.email_entered&&!A(h.email_entered)?"border-red-500":"border-gray-border"}`,placeholder:"Enter your business email",required:!0}),h.email_entered&&!A(h.email_entered)&&a.jsx("p",{className:"mt-1 text-sm text-red-500",children:"Please enter a valid email address"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray",children:["State ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("select",{value:h.state,onChange:M=>R("state",M.target.value),className:"mt-1 block w-full p-3 border border-gray-border rounded-lg shadow-sm focus:ring-brand-accent focus:border-brand-accent bg-[var(--bg-input)] text-[var(--text-main)]",required:!0,children:[a.jsx("option",{value:"",children:"Select State"}),y1.map(M=>a.jsx("option",{value:M,children:M},M))]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray",children:["City ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",value:h.city,onChange:M=>R("city",M.target.value),className:"mt-1 block w-full p-3 border border-gray-border rounded-lg shadow-sm focus:ring-brand-accent focus:border-brand-accent bg-[var(--bg-input)] text-[var(--text-main)]",placeholder:"Enter your city",required:!0})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray",children:"Business Name"}),a.jsx("input",{type:"text",value:c.businessName,onChange:M=>k("businessName",M.target.value),className:"mt-1 block w-full p-3 border border-gray-border rounded-lg shadow-sm focus:ring-brand-accent focus:border-brand-accent bg-[var(--bg-input)] text-[var(--text-main)]"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray",children:"What city do you primarily serve?"}),a.jsx("input",{type:"text",value:c.city,onChange:M=>k("city",M.target.value),className:"mt-1 block w-full p-3 border border-gray-border rounded-lg shadow-sm focus:ring-brand-accent focus:border-brand-accent bg-[var(--bg-input)] text-[var(--text-main)]"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray",children:"How long have you been in business?"}),a.jsx("select",{value:c.yearsInBusiness,onChange:M=>k("yearsInBusiness",parseInt(M.target.value)),className:"mt-1 block w-full p-3 border border-gray-border rounded-lg shadow-sm focus:ring-brand-accent focus:border-brand-accent bg-[var(--bg-input)] text-[var(--text-main)]",children:[1,2,3,4,5,10,15,20].map(M=>a.jsxs("option",{value:M,children:[M,M===20?"+":""," years"]},M))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray",children:"Briefly describe your business (optional)"}),a.jsx("textarea",{value:c.businessDescription,onChange:M=>k("businessDescription",M.target.value),rows:3,className:"mt-1 block w-full p-3 border border-gray-border rounded-lg shadow-sm focus:ring-brand-accent focus:border-brand-accent bg-[var(--bg-input)] text-[var(--text-main)]",placeholder:"E.g., We are a family-owned restoration company specializing in 24/7 water and fire damage cleanup..."})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray",children:"What services do you offer?"}),a.jsx("div",{className:"mt-2 grid grid-cols-2 gap-4",children:Object.keys(c.services).map(M=>a.jsxs("label",{className:"flex items-center space-x-2 p-2 rounded-md hover:bg-gray-50",children:[a.jsx("input",{type:"checkbox",checked:c.services[M],onChange:ae=>Q("services",M,ae.target.checked),className:"h-5 w-5 rounded border-gray-300 text-brand-accent focus:ring-brand-accent"}),a.jsx("span",{className:"capitalize",children:M})]},M))})]})]});case 1:return a.jsxs("div",{className:"space-y-4",children:[a.jsx(aa,{label:"Active contractor license?",points:10,checked:c.hasLicense,onChange:M=>k("hasLicense",M),description:"Adjusters, carriers, and commercial clients often require this before sending work.",feedbackMessage:Z}),a.jsx(aa,{label:"General liability insurance $1M+?",points:5,checked:c.hasLiabilityInsurance,onChange:M=>k("hasLiabilityInsurance",M),description:"Protects you and your clients if something goes wrong on a job.",feedbackMessage:Z}),a.jsx(aa,{label:"Workers' comp insurance?",points:5,checked:c.hasWorkersComp,onChange:M=>k("hasWorkersComp",M),description:"Shows youre taking care of your team and operating legitimately."})]});case 2:return a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray mb-2",children:"How many years have you been licensed?"}),a.jsx("input",{type:"range",min:"0",max:"20",value:c.yearsLicensed,onChange:M=>k("yearsLicensed",parseInt(M.target.value)),className:"w-full custom-slider",style:{"--value-percent":`${c.yearsLicensed/20*100}%`}}),a.jsxs("div",{className:"text-center font-sora font-bold text-2xl text-charcoal mt-2",children:[c.yearsLicensed," years"]}),a.jsx("p",{className:"text-center text-sm text-gray mt-2",children:"12 years = 4 pts  35 years = 7 pts  6+ years = 10 pts"})]});case 3:return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray",children:"What's your Google Business Profile rating?"}),a.jsxs("select",{value:c.googleRating,onChange:M=>k("googleRating",parseFloat(M.target.value)),className:"mt-1 block w-full p-3 border border-gray-border rounded-lg shadow-sm focus:ring-brand-accent focus:border-brand-accent bg-[var(--bg-input)] text-[var(--text-main)]",children:[a.jsx("option",{value:0,children:"No rating yet"}),Array.from({length:11},(M,ae)=>4+ae*.1).map(M=>a.jsxs("option",{value:M.toFixed(1),children:[M.toFixed(1)," stars"]},M))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray",children:"How many Google reviews do you have?"}),a.jsx("input",{type:"number",value:c.googleReviews,onChange:M=>k("googleReviews",parseInt(M.target.value)||0),className:"mt-1 block w-full p-3 border border-gray-border rounded-lg shadow-sm focus:ring-brand-accent focus:border-brand-accent bg-[var(--bg-input)] text-[var(--text-main)]"})]})]});case 4:return a.jsxs("div",{className:"space-y-4",children:[a.jsx(aa,{label:"IICRC: Water Damage Restoration",points:5,checked:c.certifications.water,onChange:M=>Q("certifications","water",M)}),a.jsx(aa,{label:"IICRC: Fire & Smoke Restoration",points:5,checked:c.certifications.fire,onChange:M=>Q("certifications","fire",M)}),a.jsx(aa,{label:"IICRC: Mold Remediation",points:5,checked:c.certifications.mold,onChange:M=>Q("certifications","mold",M)}),a.jsx(aa,{label:"Other industry certifications",points:5,checked:c.certifications.other,onChange:M=>Q("certifications","other",M)})]});case 5:return a.jsxs("div",{className:"space-y-4",children:[a.jsx(aa,{label:"Professional website with your own domain?",points:7,checked:c.hasWebsite,onChange:M=>k("hasWebsite",M),description:"Most homeowners will judge your professionalism in the first 10 seconds on your site.",feedbackMessage:Z}),a.jsx(aa,{label:"Professional email with your own domain?",points:5,checked:c.hasProEmail,onChange:M=>k("hasProEmail",M),description:"For example: info@yourcompany.com. Shows you're an established business, not a temporary operation."}),a.jsx(aa,{label:"24/7 emergency phone line?",points:3,checked:c.emergencyLine,onChange:M=>k("emergencyLine",M),description:"Water and fire losses dont wait for business hours. Dont send panicked homeowners to voicemail."}),a.jsx(aa,{label:"Active on social media?",points:1,checked:c.activeSocialMedia,onChange:M=>k("activeSocialMedia",M),description:"A simple way to show recent work and connect with your community."}),a.jsx(aa,{label:"Branded vehicles/uniforms?",points:1,checked:c.brandedVehicles,onChange:M=>k("brandedVehicles",M),description:"Turns your work trucks into mobile billboards, building brand recognition."})]});default:return null}};return a.jsx("div",{className:"font-inter bg-gray-light min-h-screen p-4 md:p-8 pb-40 md:pb-8",children:a.jsxs("div",{className:"max-w-6xl mx-auto",children:[a.jsxs("div",{className:"mb-8 text-center animate-fade-in",style:{animationDuration:"0.6s"},children:[a.jsx("img",{src:"https://restorationexpertise.com/wp-content/uploads/2025/11/restorationexpertise_logo_s.webp",alt:"Restoration Expertise Logo",className:"mx-auto mb-4 w-full max-w-[140px] md:max-w-[180px]"}),a.jsx("h1",{className:"font-sora text-3xl md:text-4xl font-bold text-charcoal",children:"Credibility Assessment"})]}),a.jsxs("div",{className:"mb-8 hidden md:block",children:[a.jsx("div",{className:"flex justify-between mb-2",children:Ya.map((Z,M)=>a.jsx("div",{className:"text-center w-1/6",children:a.jsx("div",{className:`text-xs md:text-sm font-semibold ${i>=M?"text-brand-accent-dark":"text-gray-400"}`,children:Z})},Z))}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:a.jsx("div",{className:"bg-brand-accent h-2.5 rounded-full transition-all duration-300",style:{width:`${(i+1)/Ya.length*100}%`}})})]}),a.jsxs("div",{className:"flex flex-col md:flex-row md:mt-0",children:[a.jsxs("div",{className:"w-full md:flex-1 bg-white p-6 sm:p-8 rounded-2xl shadow-lg border border-gray-border overflow-hidden",children:[a.jsx("div",{className:"flex justify-between items-start mb-6",children:a.jsxs("div",{children:[a.jsxs("h2",{className:"font-sora text-2xl font-bold text-charcoal mb-1",children:["Step ",i+1,": ",Ya[i]]}),a.jsx("p",{className:"text-gray",children:"Complete this section to see your score update."})]})}),a.jsx("div",{className:`mt-8 ${b}`,children:B()},j)]}),a.jsx("div",{className:"hidden md:block mt-6 md:mt-0 md:w-64",children:a.jsx(Ab,{score:v.total,breakdown:v})})]}),a.jsxs("div",{className:"mt-8 hidden md:flex justify-between items-center",children:[a.jsx("button",{onClick:y,className:"py-3 px-6 bg-white text-charcoal font-semibold rounded-lg shadow-md border border-gray-border hover:bg-gray-100 transition-colors",children:"Back"}),a.jsx("button",{onClick:E,disabled:!q(),className:`py-3 px-8 font-bold text-lg rounded-lg shadow-lg transition-transform transform ${q()?"bg-brand-accent text-charcoal hover:bg-brand-accent-dark hover:scale-105":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:i===Ya.length-1?"Finish & See Results":"Continue"})]}),a.jsxs("div",{className:"md:hidden",children:[a.jsx(k1,{step:i,score:v.total,onScoreClick:()=>p(!0),onBack:y,onNext:E,canProceed:q()}),a.jsx(C1,{isOpen:m,onClose:()=>p(!1),score:v.total,breakdown:v})]})]})})},Ss=({tier:r,price:s,pricePeriod:i,features:o,popular:c,onSelect:u,spotsRemaining:h,buttonLabel:g,disabled:m,disabledText:p})=>{const b=r==="Founding Member",w=`
    w-full p-6 border rounded-2xl flex flex-col transition-all duration-300
    ${b?"bg-gradient-to-br from-gold-dark to-founding-gold text-white border-founding-gold shadow-2xl scale-105":"bg-white text-charcoal border-gray-border shadow-lg"}
    ${!b&&!m&&"transform hover:-translate-y-2"}
    ${c&&!b?"border-gold border-2":""}
  `,j=g||(b?"Claim Spot":"Select");return a.jsxs("div",{className:w,children:[c&&!b&&a.jsx("div",{className:"absolute -top-4 left-1/2 -translate-x-1/2 bg-gold text-charcoal px-4 py-1 rounded-full text-sm font-bold",children:" POPULAR"}),b&&a.jsx("div",{className:"absolute -top-4 left-1/2 -translate-x-1/2 bg-white text-charcoal px-4 py-1 rounded-full text-sm font-bold",children:" LIMITED"}),a.jsx("h3",{className:`font-sora text-2xl font-bold text-center mb-2 ${b?"text-white":"text-charcoal"}`,children:r}),a.jsxs("div",{className:"text-center mb-6",children:[a.jsx("span",{className:`font-sora text-5xl font-bold ${b?"text-white":"text-charcoal"}`,children:s}),a.jsx("span",{className:`text-lg ml-1 ${b?"text-gold-light":"text-gray"}`,children:i})]}),a.jsx("ul",{className:"space-y-3 mb-8 flex-grow",children:o.map((_,v)=>a.jsxs("li",{className:"flex items-start",children:[a.jsx("svg",{className:`w-5 h-5 mr-2 flex-shrink-0 mt-0.5 ${b?"text-gold-light":"text-success"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),a.jsx("span",{className:b?"text-gray-200":"text-charcoal",children:_})]},v))}),b&&h!==void 0&&a.jsxs("div",{className:"text-center mb-4 font-bold text-white bg-white/20 rounded-md py-1",children:[" ",h,"/",25," remaining"]}),a.jsxs("button",{onClick:u,disabled:m,className:`w-full py-3 px-6 font-bold text-lg rounded-lg transition-transform
          ${b?"bg-white text-charcoal hover:bg-gray-200":"bg-gold text-charcoal hover:bg-gold-light"}
          ${m?"opacity-60 cursor-not-allowed":"transform hover:scale-105"}
        `,children:[j," ",!m&&""]}),m&&p&&a.jsx("p",{className:"text-center text-xs mt-3 text-gray",children:p})]})},T1=({isOpen:r,onClose:s,onClaim:i})=>r?a.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4 animate-fade-in",onClick:s,children:[a.jsx("style",{children:`
                @keyframes fade-in { from { opacity: 0; } to { opacity: 1; } }
                @keyframes slide-up { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
                .animate-fade-in { animation: fade-in 0.3s ease-out; }
                .animate-slide-up { animation: slide-up 0.4s ease-out; }
            `}),a.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto p-8 relative animate-slide-up",onClick:o=>o.stopPropagation(),children:[a.jsx("button",{onClick:s,className:"absolute top-4 right-4 text-gray hover:text-charcoal",children:a.jsx(wt,{className:"w-8 h-8"})}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-3xl mb-2",children:""}),a.jsx("h2",{className:"font-sora text-3xl font-bold text-charcoal mb-2",children:"FOUNDING MEMBER INVITATION"}),a.jsx("p",{className:"text-gray text-lg mb-6",children:"You're among the first to qualify. Claim your legacy position now."})]}),a.jsx("hr",{className:"border-gray-border my-6"}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-sora text-xl font-bold text-charcoal mb-4",children:"Exclusive Founding Member Benefits:"}),a.jsx("ul",{className:"space-y-3 text-charcoal",children:["Founding Member Seal (exclusive design, never offered again)","Enhanced profile (logo, gallery, detailed services, CTA buttons)","Verified listing on RestorationExpertise.com with SEO backlink","Lifetime pricing lock at $229 per month (offer disappears after launch)","Private community access (Facebook group + resources)","Direct line to team (priority support, early access to new features)","Priority SEO backlink placement","Yearly SEO blog post","99 Steps Restoration Success Blueprint + updates (included)","Annual re-verification included"].map(o=>a.jsxs("li",{className:"flex items-start",children:[a.jsx("svg",{className:"w-5 h-5 mr-3 text-success flex-shrink-0 mt-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),a.jsx("span",{children:o})]},o))})]}),a.jsxs("div",{className:"mt-8 bg-gray-light p-6 rounded-xl border border-gray-border text-center",children:[a.jsx("p",{className:"font-sora text-3xl font-bold text-charcoal mt-1",children:"Founding Member Rate: $229/month"}),a.jsx("p",{className:"text-gray mt-1",children:"This lifetime rate is locked in and will never increase."})]}),a.jsxs("p",{className:"text-center text-warning font-bold mt-6",children:[" ",co," spots remaining | Offer ends 12/31/2025"]}),a.jsxs("div",{className:"mt-8 flex flex-col items-center space-y-4",children:[a.jsx("button",{onClick:i,className:"w-full max-w-md py-4 px-8 bg-gold text-charcoal font-bold text-xl rounded-lg shadow-lg hover:bg-gold-light transition-transform transform hover:scale-105",children:"Secure My Founding Member Spot "}),a.jsx("button",{onClick:s,className:"text-gray font-semibold hover:underline",children:"No thanks, show me regular pricing"})]})]})]}):null,R1="/.netlify/functions/create-checkout-session",O1=async(r,s="Founding Member")=>{const i={intendedTier:s};typeof r<"u"&&r!==null&&(i.assessmentId=r);const o=await fetch(R1,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)});if(!o.ok){const u=await o.text();throw new Error(`Failed to initiate checkout. Status: ${o.status}. Message: ${u}`)}const c=await o.json();if(!c.url)throw new Error("Checkout session did not return a redirect URL.");window.location.href=c.url},sx="restorationexpertise:last-plan",nx=({score:r})=>{const[s,i]=S.useState(0);S.useEffect(()=>{let h;const m=performance.now(),p=b=>{const w=b-m,j=Math.min(w/1500,1);i(Math.round(j*r)),j<1&&(h=requestAnimationFrame(p))};return h=requestAnimationFrame(p),()=>{cancelAnimationFrame(h)}},[r]);const o=h=>h<45?"text-error":h<60?"text-warning":h>=70?"text-success":"text-gold",c=2*Math.PI*55,u=c-s/100*c;return a.jsxs("div",{className:"relative w-40 h-40",children:[a.jsxs("svg",{className:"w-full h-full",viewBox:"0 0 120 120",children:[a.jsx("circle",{className:"text-gray-200",strokeWidth:"10",stroke:"currentColor",fill:"transparent",r:"55",cx:"60",cy:"60"}),a.jsx("circle",{className:o(r),strokeWidth:"10",strokeDasharray:c,strokeDashoffset:u,strokeLinecap:"round",stroke:"currentColor",fill:"transparent",r:"55",cx:"60",cy:"60",style:{transform:"rotate(-90deg)",transformOrigin:"50% 50%",transition:"stroke-dashoffset 1.5s ease-out"}})]}),a.jsxs("div",{className:`absolute inset-0 flex flex-col items-center justify-center font-sora font-bold ${o(r)}`,children:[a.jsx("span",{className:"text-5xl",children:s}),a.jsx("span",{className:"text-lg -mt-1",children:"/ 100"})]})]})},rx=({opportunities:r})=>{if(r.length===0)return a.jsx("div",{className:"max-w-5xl mx-auto mt-12 animate-slide-up",style:{animationDelay:"600ms"},children:a.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-xl border border-gray-border",children:[a.jsx("h2",{className:"font-sora text-3xl font-bold text-charcoal mb-4 text-center",children:"Top Opportunities"}),a.jsxs("div",{className:"flex items-center justify-center gap-3 bg-success/10 p-4 rounded-lg",children:[a.jsx(na,{className:"w-8 h-8 text-success shrink-0"}),a.jsx("p",{className:"text-lg font-semibold text-green-800",children:"Youve checked off every major credibility signal in our model. Strong work!"})]})]})});const s={Operational:"bg-blue-100 text-blue-800",Licensing:"bg-indigo-100 text-indigo-800",Feedback:"bg-green-100 text-green-800",Digital:"bg-purple-100 text-purple-800",Certifications:"bg-yellow-100 text-yellow-800"},i={"Quick win":"border-success text-success","Deep work":"border-gray-400 text-gray-600"};return a.jsx("div",{className:"max-w-5xl mx-auto mt-12 animate-slide-up",style:{animationDelay:"600ms"},children:a.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-xl border border-gray-border",children:[a.jsx("h2",{className:"font-sora text-3xl font-bold text-charcoal mb-6 text-center",children:"Your Top 3 Opportunities"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:r.map(o=>a.jsxs("div",{className:"bg-gray-light/50 p-6 rounded-xl border border-gray-border flex flex-col",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[a.jsx("span",{className:`px-2 py-0.5 text-xs font-bold rounded-full ${s[o.category]}`,children:o.category}),a.jsx("span",{className:`px-2 py-0.5 text-xs font-bold rounded-full border ${i[o.type]}`,children:o.type})]}),a.jsx("h3",{className:"font-bold text-lg text-charcoal leading-tight flex-grow",children:o.label}),a.jsx("p",{className:"text-sm text-gray-dark mt-2",children:o.description})]},o.id))})]})})},D1=({tier:r,onClose:s})=>r?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4 animate-fade-in",onClick:s,children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md max-h-[90vh] overflow-y-auto p-8 relative animate-slide-up",onClick:i=>i.stopPropagation(),children:[a.jsx("button",{onClick:s,className:"absolute top-4 right-4 text-gray hover:text-charcoal",children:a.jsx(wt,{className:"w-8 h-8"})}),a.jsx("div",{className:"text-center",children:a.jsxs("h2",{className:"font-sora text-3xl font-bold text-charcoal mb-4",children:[r.name," Benefits"]})}),a.jsx("ul",{className:"space-y-3 text-charcoal",children:r.features.map((i,o)=>a.jsxs("li",{className:"flex items-start",children:[a.jsx("svg",{className:"w-5 h-5 mr-3 text-success flex-shrink-0 mt-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),a.jsx("span",{children:i})]},o))}),a.jsx("div",{className:"mt-8 text-center",children:a.jsx("button",{onClick:s,className:"py-2 px-8 bg-gold text-charcoal font-bold rounded-lg shadow-md hover:bg-gold-light",children:"Close"})})]})}):null,M1=({result:r,onRetake:s,onJoin:i})=>{const{total:o,grade:c,isEligibleForCertification:u,eligibilityReasons:h,opportunities:g}=r,[m,p]=S.useState(!1),[b,w]=S.useState(null);S.useEffect(()=>{if(u){const v=setTimeout(()=>{p(!0)},3e3);return()=>clearTimeout(v)}},[u]);const j=async()=>{try{typeof window<"u"&&window.localStorage.setItem(sx,"Founding Member"),await O1(r.id,"Founding Member")}catch(v){typeof window<"u"&&window.localStorage.removeItem(sx),console.error("Failed to start Stripe Checkout",v),alert("We were unable to start checkout. Please try again or contact support.")}},_=()=>{p(!1),j().catch(()=>{})};if(u){const v=o>=80?"Premier Restoration Professional":"Certified Restoration Professional",E=`${c} ${v}`;return a.jsxs("div",{className:"min-h-screen bg-gray-light font-inter p-4 md:p-8",children:[a.jsx(T1,{isOpen:m,onClose:()=>p(!1),onClaim:_}),a.jsxs("div",{className:"bg-gradient-to-br from-success to-green-700 text-white text-center py-12 px-4 rounded-t-2xl animate-slide-up",children:[a.jsx("div",{className:"text-5xl mb-4",children:""}),a.jsx("h1",{className:"font-sora text-4xl font-bold",children:"Congratulations! You're Eligible for Certification"}),a.jsxs("p",{className:"text-lg mt-2",children:["Your Professional Credibility Index Score Qualifies You as a ",a.jsx("span",{className:"font-bold",children:E})]})]}),a.jsx("div",{className:"max-w-5xl mx-auto -mt-8 animate-slide-up",style:{animationDelay:"200ms"},children:a.jsxs("div",{className:"bg-white p-6 md:p-10 rounded-2xl shadow-xl border border-gray-border flex flex-col items-center",children:[a.jsx(nx,{score:o}),a.jsx("h2",{className:"font-sora text-2xl font-bold text-charcoal mt-6",children:"Your Score Breakdown"}),a.jsx("div",{className:"w-full max-w-md mt-4 text-center",children:a.jsx("p",{className:"text-gray",children:"This score reflects your commitment to professional standards, customer satisfaction, and industry excellence."})})]})}),a.jsx(rx,{opportunities:g}),a.jsxs("div",{className:"relative max-w-5xl mx-auto mt-24 mb-12",children:[a.jsx("div",{className:"absolute -top-20 md:-top-32 inset-x-0 flex justify-center pointer-events-none",children:a.jsx("img",{src:"https://restorationexpertise.com/wp-content/uploads/2025/11/restorationexpertise_badge_3d_layingtra_shadow.webp",alt:"Restoration Expertise Founding Member Badge",className:"w-60 h-auto md:w-96 drop-shadow-badge animate-float-badge hover:animate-paused pointer-events-auto"})}),a.jsx("div",{className:"p-8 pt-40 md:pt-64 bg-gradient-to-r from-gold-dark to-founding-gold rounded-2xl text-white shadow-2xl border-2 border-founding-gold",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h2",{className:"font-sora text-3xl font-bold mb-2",children:" FOUNDING MEMBER OPPORTUNITY"}),a.jsx("p",{className:"text-lg text-gold-light mb-4",children:"25 LIFETIME SPOTS ONLY"}),a.jsx("p",{className:"mb-6",children:"Lock in a lifetime rate of $229/mo. Get an exclusive Founding Member seal, priority placement, and all Gold-tier features."}),a.jsxs("div",{className:"flex items-center justify-center space-x-4 mb-6 text-xl font-bold",children:[a.jsx("span",{children:" Offer Expires: December 31, 2025"}),a.jsx("span",{className:"w-px h-6 bg-white/50"}),a.jsxs("span",{children:[" Only ",co," spots remaining"]})]}),a.jsx("button",{onClick:_,className:"bg-white text-charcoal font-bold text-lg py-3 px-10 rounded-lg shadow-lg hover:bg-gray-200 transition-transform transform hover:scale-105",children:"CLAIM YOUR FOUNDING MEMBER SPOT "})]})})]}),a.jsx("h2",{className:"font-sora text-3xl font-bold text-charcoal text-center mb-8",children:"Choose Your Membership Tier"}),a.jsxs("div",{className:"max-w-7xl mx-auto grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 items-start",children:[a.jsx(Ss,{tier:"Bronze",price:"$159",pricePeriod:"/mo",features:["Verified Badge (A+, A, or B+)","Profile page with SEO backlink","Basic directory listing","Community access","Annual re-verification included"],onSelect:()=>{},disabled:!0,buttonLabel:"Coming Soon",disabledText:"Bronze launches soon."}),a.jsx(Ss,{tier:"Silver",price:"$297",pricePeriod:"/mo",features:["Everything in Bronze, plus:","Featured placement in directory","Enhanced profile (logo, gallery, CTA)","Yearly SEO blog post","Quarterly compliance check"],popular:!0,onSelect:()=>{},disabled:!0,buttonLabel:"Coming Soon",disabledText:"Silver launches soon."}),a.jsx(Ss,{tier:"Gold",price:"$497",pricePeriod:"/mo",features:["Everything in Silver, plus:",'Featured in "Top Verified Experts"',"Priority SEO backlink placement","Bi-annual spotlight article","Social media spotlight (2x/year)","99-Steps Blueprint included"],onSelect:()=>{},disabled:!0,buttonLabel:"Coming Soon",disabledText:"Gold launches soon."}),a.jsx(Ss,{tier:"Founding Member",price:"$229",pricePeriod:"/mo",features:["Exclusive Founding Member Seal","Lifetime price lock at $229/mo","Enhanced Profile & Priority SEO","Yearly SEO blog post","99 Steps Blueprint included","Direct line for priority support"],onSelect:_,spotsRemaining:co})]}),a.jsx("div",{className:"text-center mt-12",children:a.jsx("button",{onClick:s,className:"text-gray font-semibold hover:underline",children:"Or, retake the assessment"})})]})}else{const v=["Verified Badge (A+, A, or B+)","Profile page with SEO backlink","Basic directory listing","Community access","Annual re-verification included"],E=["Everything in Bronze, plus:","Featured placement in directory","Enhanced profile (logo, gallery, CTA)","Yearly SEO blog post","Quarterly compliance check"],y=["Everything in Silver, plus:",'Featured in "Top Verified Experts"',"Priority SEO backlink placement","Bi-annual spotlight article","Social media spotlight (2x/year)","99-Steps Blueprint included"],k=["Exclusive Founding Member Seal","Lifetime price lock at $229/mo","Enhanced Profile & Priority SEO","Yearly SEO blog post","99 Steps Blueprint included","Direct line for priority support"];return a.jsxs("div",{className:"min-h-screen bg-gray-light font-inter p-4 md:p-8",children:[a.jsx(D1,{tier:b,onClose:()=>w(null)}),a.jsxs("div",{className:"bg-gradient-to-br from-gray-700 to-charcoal-dark text-white text-center py-12 px-4 rounded-t-2xl animate-slide-up",children:[a.jsx("h1",{className:"font-sora text-4xl font-bold",children:"Youre On Your Way!"}),a.jsxs("p",{className:"text-lg mt-2 max-w-3xl mx-auto",children:["Your current score is ",a.jsxs("span",{className:"font-bold",children:[o,"/100 (",c,")"]}),". You're not yet eligible for certification, but heres exactly what you need to improve."]})]}),a.jsxs("div",{className:"max-w-5xl mx-auto -mt-8 bg-white p-6 md:p-8 rounded-2xl shadow-xl border border-gray-border animate-slide-up",style:{animationDelay:"200ms"},children:[a.jsx("div",{className:"flex flex-col items-center",children:a.jsx(nx,{score:o})}),a.jsxs("div",{className:"mt-8",children:[a.jsx("h2",{className:"font-sora text-2xl font-bold text-charcoal text-center mb-4",children:"What You Need To Qualify"}),a.jsx("div",{className:"max-w-2xl mx-auto bg-yellow-50 border-l-4 border-warning p-6 rounded-r-lg",children:a.jsx("ul",{className:"space-y-3",children:h.map((R,A)=>a.jsxs("li",{className:"flex items-start",children:[a.jsx(Sa,{className:"w-5 h-5 text-warning mr-3 mt-0.5 shrink-0"}),a.jsx("span",{className:"text-yellow-900 font-medium",children:R})]},A))})})]})]}),a.jsx(rx,{opportunities:g}),a.jsx("div",{className:"max-w-5xl mx-auto mt-24 animate-slide-up",style:{animationDelay:"400ms"},children:a.jsxs("div",{className:"bg-gradient-to-b from-white to-[#f6e9cc] rounded-xl shadow-xl border-2 border-gold text-center pt-8",children:[a.jsx("img",{src:"https://restorationexpertise.com/wp-content/uploads/2025/11/99successblueprint_3dmockup_2tr_s.webp",alt:"99-Step Restoration Success Blueprint Mockup",className:"w-4/5 md:w-3/5 mx-auto -mt-28 mb-4 drop-shadow-xl transition-all duration-300 ease-in-out transform hover:-translate-y-1 hover:drop-shadow-2xl"}),a.jsxs("div",{className:"px-8 pb-8",children:[a.jsx("h2",{className:"font-sora text-3xl font-bold text-charcoal mb-4",children:"The 99-Step Restoration Success Blueprint"}),a.jsx("p",{className:"text-gray-dark text-lg mb-6",children:"Youre missing a few key credibility signals. Our 99-Step Restoration Success Blueprint gives you a step-by-step roadmap and a live dashboard to track your progress until you qualify for certification."}),a.jsx("ul",{className:"space-y-3 mb-8 text-left inline-block",children:["Clear checklist to fix licensing, operations, and digital presence","Quick-win tasks you can tackle this week","Built-in progress tracking as you improve your score"].map(R=>a.jsxs("li",{className:"flex items-start",children:[a.jsx(na,{className:"w-6 h-6 text-success mr-3 shrink-0"}),a.jsx("span",{className:"text-charcoal text-lg",children:R})]},R))}),a.jsx("a",{href:"https://restorationexpertise.com/99-steps",target:"_blank",rel:"noopener noreferrer",className:"block w-full text-center py-4 px-8 bg-gold text-charcoal font-bold text-xl rounded-lg shadow-lg hover:bg-gold-light transition-transform transform hover:scale-105",children:"Get the 99-Step Blueprint & Dashboard"})]})]})}),a.jsx("p",{className:"max-w-4xl mx-auto text-center text-gray-dark mt-8 px-4",children:"Step 1: Use the Blueprint to fix your gaps. Step 2: Unlock these member benefits once you qualify."}),a.jsxs("div",{className:"text-center mt-8",children:[a.jsx("h2",{className:"font-sora text-3xl font-bold text-charcoal mb-2",children:"What Youll Unlock Once You Qualify"}),a.jsx("p",{className:"text-gray-dark mb-8",children:"Preview the benefits youll access after you meet the certification requirements."})]}),a.jsxs("div",{className:"max-w-7xl mx-auto grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 items-start",children:[a.jsx(Ss,{tier:"Bronze",price:"$159",pricePeriod:"/mo",features:v,onSelect:()=>w({name:"Bronze",features:v}),buttonLabel:"Preview benefits"}),a.jsx(Ss,{tier:"Silver",price:"$297",pricePeriod:"/mo",features:E,popular:!0,onSelect:()=>w({name:"Silver",features:E}),buttonLabel:"Preview benefits"}),a.jsx(Ss,{tier:"Gold",price:"$497",pricePeriod:"/mo",features:y,onSelect:()=>w({name:"Gold",features:y}),buttonLabel:"Preview benefits"}),a.jsx(Ss,{tier:"Founding Member",price:"$229",pricePeriod:"/mo",features:k,onSelect:()=>{},spotsRemaining:co,buttonLabel:"Claim Spot",disabled:!0,disabledText:"Available once your business qualifies for certification."})]}),a.jsxs("div",{className:"text-center mt-16",children:[a.jsx("button",{onClick:s,className:"py-3 px-8 bg-gold text-charcoal font-bold text-lg rounded-lg shadow-lg hover:bg-gold-light transition-transform transform hover:scale-105",children:"Ive improved my business  retake the assessment"}),a.jsx("p",{className:"text-sm text-gray-dark mt-4",children:"Most contractors reach eligibility within a few weeks once they follow the Blueprint."})]})]})}},ix="restorationexpertise:last-plan",lx="restorationexpertise:last-email",ox=r=>{switch(r==null?void 0:r.toLowerCase()){case"bronze":return"bronze";case"silver":return"silver";case"gold":return"gold";case"founding-member":return"founding-member";default:return"founding-member"}},U1={bronze:{badgeText:"Bronze Member",badgeClass:"bg-yellow-900/50 text-[#CD7F32] border border-[#CD7F32]/50",ratingText:"B+ Restoration Professional",benefits:[{icon:an,title:"Upload Your Documents",description:"Submit required documents for account verification and badge approval."},{icon:Cs,title:"Join the Community",description:"Access our private community for networking and support."},{icon:_t,title:"Claim Your Badge",description:"Download your verified badge once your account is approved."},{icon:Rx,title:"Explore Resources",description:"Check out the member resources to get started."}]},silver:{badgeText:"Silver Member",badgeClass:"bg-gray-500/50 text-[#C0C0C0] border border-[#C0C0C0]/50",ratingText:"A- Restoration Specialist",benefits:[{icon:an,title:"Upload Your Documents",description:"Submit required documents for account verification and badge approval."},{icon:Cs,title:"Join the Community",description:"Access our private community for networking and support."},{icon:_t,title:"Claim Your Enhanced Badge",description:"Download your verified badge once your account is approved."},{icon:ko,title:"Explore Premium Resources",description:"Access the resource library and request your first SEO post."}]},gold:{badgeText:"Gold Member",badgeClass:"bg-gold/30 text-gold-light border border-gold/50",ratingText:"A Elite Restoration Expert",benefits:[{icon:an,title:"Upload Your Documents",description:"Submit required documents for account verification and badge approval."},{icon:Cs,title:"Join the Member's Circle",description:"Get access to our exclusive circle for Gold members."},{icon:_t,title:"Claim Your Premium Badge",description:"Download your verified badge once your account is approved."},{icon:$d,title:"Access the 99-Steps Blueprint",description:"Start your journey to mastery with our exclusive blueprint dashboard."}]},"founding-member":{badgeText:" Founding Member",badgeClass:"fm-metallic-shine !text-transparent !bg-clip-text",ratingText:"A+ Founding Elite - Restoration Pioneer",benefits:[{icon:an,title:"Upload Your Documents",description:"Submit required documents for account verification and badge approval."},{icon:Cs,title:"Join the Founder's Circle",description:"Access our private community for direct communication and networking."},{icon:_t,title:"Claim Your Exclusive Badge",description:"Download your verified badge once your account is approved."},{icon:So,title:"Explore Premium Resources",description:"Access lifetime tools, exclusive content, and early feature releases."}]}},L1=()=>a.jsx("div",{className:"success-particles",children:Array.from({length:30}).map((r,s)=>a.jsx("div",{className:"success-particle",style:{left:`${Math.random()*100}%`,width:`${Math.random()*3+1}px`,height:`${Math.random()*3+1}px`,animationDelay:`${Math.random()*20}s`,animationDuration:`${Math.random()*15+10}s`}},s))}),B1=()=>{var ce;const{plan:r}=O0(),s=Rs(),i=r??"founding-member";let o=null,c=null;try{const I=nt();o=I.currentUser,c=I.login}catch(I){console.warn("Auth context not available:",I)}const u=S.useMemo(()=>{try{return ox(i)}catch(I){return console.error("Error normalizing plan:",I),"founding-member"}},[i]),h=U1[u],g=u==="founding-member",[m,p]=S.useState(!1),[b,w]=S.useState(""),[j,_]=S.useState("idle"),[v,E]=S.useState(""),[y,k]=S.useState(""),[R,A]=S.useState(0),q=(o==null?void 0:o.name)??"Your Business",L=((ce=o==null?void 0:o.account)==null?void 0:ce.ownerName)??(o==null?void 0:o.name)??"Your Name",Q=(o==null?void 0:o.email)??y;S.useEffect(()=>{if(typeof window>"u")return;const I=window.localStorage.getItem(ix);if(!r&&I){const K=ox(I);s(`/success/${K}`,{replace:!0});return}window.localStorage.removeItem(ix)},[s,r]),S.useEffect(()=>{if(typeof window>"u")return;const I=window.localStorage.getItem(lx);I&&k(I)},[]);const B=async I=>{if(!I){_("error"),E("Please provide an email address to resend your login link.");return}if(R>0){_("error"),E(`Please wait ${R} seconds before resending.`);return}try{if(_("sending"),E("Sending a fresh magic link"),!xe||!xe.auth)throw new Error("Supabase client not available");const{error:K}=await xe.auth.signInWithOtp({email:I,options:{emailRedirectTo:`${window.location.origin}/auth/callback`}});if(K){K.message.includes("redirect_to not allowed")?(_("error"),E(" Dev Configuration: Please add this domain to Supabase Auth  URL Configuration  Redirect URLs"),console.error("Supabase Auth redirect URL not configured:",`${window.location.origin}/auth/callback`)):K.message.includes("rate")?(_("error"),E("Rate limit reached. Please wait a moment before trying again."),A(60)):(_("error"),E(K.message)),console.error("Magic link error:",K);return}_("sent"),E(`Magic link sent to ${I}. Check your inbox and Spam/Promotions folder if you don't see it.`),A(60),typeof window<"u"&&window.localStorage.setItem(lx,I),k(I)}catch(K){_("error");const H=K instanceof Error?K.message:"Unable to send a magic link right now. Please try again later.";E(H),console.error("Magic link error:",K)}};S.useEffect(()=>{try{const H=new URLSearchParams(window.location.search).get("email")||y||Q;H&&j==="idle"&&B(H)}catch(I){console.error("Error in magic link auto-trigger:",I)}},[y,Q]),S.useEffect(()=>{if(!(typeof document>"u"))return document.body.dataset.plan=u,()=>{delete document.body.dataset.plan}},[u]),S.useEffect(()=>{if(R>0){const I=setInterval(()=>{A(K=>K-1)},1e3);return()=>clearInterval(I)}},[R]);const Z=async()=>{if(!b){_("error"),E("Enter the new email address you would like to use.");return}await B(b.trim()),p(!1),w("")},M="Welcome to the Biggest Restoration Community Homeowners Trust",ae=I=>a.jsx("div",{className:"success-page-container",children:a.jsxs("main",{className:"relative z-10 w-full max-w-4xl mx-auto",children:[a.jsxs("div",{className:"mb-8 text-center",children:[a.jsx("div",{className:"text-6xl mb-4",children:""}),a.jsx("h1",{className:"font-bold text-2xl md:text-3xl max-w-2xl mx-auto text-white",children:"Welcome to the Biggest Restoration Community Homeowners Trust"}),a.jsx("p",{className:"mt-4 text-lg md:text-xl text-gray-300",children:"Your payment was successful. You're officially a member!"})]}),a.jsx("div",{className:"mb-8",children:a.jsxs("div",{className:"w-full max-w-xl mx-auto p-6 rounded-2xl shadow-xl bg-black/20 border border-white/20",children:[a.jsx("h2",{className:"font-bold text-xl text-white mb-3",children:"Check Your Email to Log In"}),a.jsx("p",{className:"text-gray-300 mb-4",children:"We've sent a magic login link to your email. Please check your inbox and click the link to access your account."}),a.jsx("div",{className:"text-center",children:a.jsx("a",{href:"/login",className:"inline-block px-6 py-2 rounded-lg bg-blue-600 hover:bg-blue-700 text-white font-semibold",children:"Go to Login Page"})})]})}),a.jsxs("div",{className:"text-center text-gray-300",children:[a.jsxs("p",{children:["Need help? ",a.jsx("a",{className:"text-blue-400 hover:underline",href:"mailto:support@restorationexpertise.com",children:"Contact support"})]}),I&&a.jsxs("div",{className:"mt-4 p-3 bg-red-900/50 text-red-200 text-sm rounded border border-red-500/50",children:["Debug: ",I]})]})]})});try{return a.jsxs("div",{className:"success-page-container",children:[a.jsx(L1,{}),g&&a.jsx("div",{className:"fm-light-ray"}),a.jsxs("main",{className:"relative z-10 w-full max-w-4xl mx-auto animate-fade-in-up",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx(Ew,{className:"text-gold"}),g?a.jsx("h1",{className:"font-playfair text-2xl md:text-3xl font-bold max-w-2xl mx-auto fm-h1",children:M.split("").map((I,K)=>a.jsx("span",{className:"fm-metallic-shine",style:{animationDelay:`${.5+K*.02}s`,transform:"translateY(20px)"},children:I===" "?"":I},K))}):a.jsx("h1",{className:"font-playfair text-2xl md:text-3xl font-bold max-w-2xl mx-auto text-white",children:M}),a.jsx("p",{className:"mt-4 text-lg md:text-xl text-gray-300",children:"Your payment was successful. You're officially a member!"})]}),a.jsx("div",{className:"mb-8 animate-fade-in-up",style:{animationDelay:"1.2s"},children:a.jsxs("div",{className:"w-full max-w-xl mx-auto p-6 rounded-2xl shadow-xl fm-glass-card border border-gold/20",children:[a.jsx("h2",{className:"font-bold text-lg text-white mb-4",children:" Your Plan Summary"}),a.jsxs("div",{className:"space-y-2 text-left text-sm",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-400",children:"Plan:"})," ",a.jsx("span",{className:`font-semibold ${g?"fm-metallic-shine !text-transparent !bg-clip-text":"text-white"}`,children:h.badgeText})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-400",children:"Rating:"})," ",a.jsx("span",{className:"font-semibold text-white",children:h.ratingText})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-400",children:"Business:"})," ",a.jsx("span",{className:"font-semibold text-white",children:q})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-400",children:"Contact:"})," ",a.jsx("span",{className:"font-semibold text-white",children:L})]})]})]})}),a.jsx("div",{className:"mb-16 animate-fade-in-up",style:{animationDelay:"1.4s"},children:a.jsxs("div",{className:"w-full max-w-xl mx-auto p-6 md:p-8 rounded-2xl shadow-xl fm-glass-card border border-gold/20",children:[a.jsx("h2",{className:"font-bold text-xl text-white mb-3",children:"Check Your Email to Log In"}),a.jsx("p",{className:"text-gray-300",children:"We've sent a magic login link to your personal dashboard. Please check your inbox and click the link to access your account."}),a.jsxs("div",{className:"mt-4 bg-black/20 p-3 rounded-lg text-center text-white",children:[" Sent to: ",a.jsx("strong",{children:Q||"your email"})]}),m?a.jsxs("div",{className:"mt-4 space-y-2 animate-fade-in",children:[a.jsx("input",{type:"email",value:b,onChange:I=>w(I.target.value),placeholder:"Enter new email address",className:"w-full p-2 rounded bg-white/10 text-white border border-gray-500 focus:ring-gold focus:border-gold"}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx("button",{onClick:()=>p(!1),className:"py-1 px-3 text-xs rounded bg-gray-600 hover:bg-gray-500 text-white",children:"Cancel"}),a.jsx("button",{onClick:Z,className:"py-1 px-3 text-xs rounded bg-gold text-charcoal font-semibold hover:bg-gold-light",children:"Update Email"})]})]}):a.jsxs("div",{className:"mt-4 text-center text-sm space-x-4",children:[a.jsx("button",{onClick:()=>p(!0),className:"font-semibold text-gray-400 hover:text-white hover:underline",children:"Wrong email? Update it here"}),a.jsx("button",{onClick:()=>B(Q),disabled:R>0,className:`font-semibold ${R>0?"text-gray-600 cursor-not-allowed":"text-gray-400 hover:text-white hover:underline"}`,children:R>0?`Resend in ${R}s`:"Resend login link"})]}),j!=="idle"&&a.jsx("div",{className:`mt-4 rounded-lg border px-3 py-2 text-sm ${j==="sent"?"border-success/40 bg-success/10 text-success":j==="error"?"border-error/40 bg-error/10 text-error":"border-white/30 bg-white/10 text-white"}`,children:v})]})}),a.jsxs("div",{className:"mt-16",children:[a.jsx("h2",{className:"font-playfair text-3xl font-bold mb-8 text-white",children:"What's Next?"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 stagger-in",children:h.benefits.map((I,K)=>{const H=I.icon;return a.jsxs("div",{className:"p-6 rounded-2xl shadow-lg transition-transform transform hover:-translate-y-1 fm-glass-card",style:{animationDelay:`${1.6+K*.15}s`},children:[a.jsx("div",{className:"inline-block p-3 rounded-full mb-4 bg-white/10 text-gold",children:a.jsx(H,{className:"w-6 h-6"})}),a.jsx("h3",{className:"font-bold text-lg mb-2 text-white",children:I.title}),a.jsx("p",{className:"text-sm text-gray-300",children:I.description})]},I.title)})})]}),a.jsxs("div",{className:"mt-16",children:[a.jsx("h2",{className:"font-playfair text-3xl font-bold mb-6 text-white",children:"Need a Quick Start?"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"fm-glass-card p-6 rounded-2xl text-white",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx(vi,{className:"w-10 h-10 text-gold"}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold",children:"Complete Your Profile"}),a.jsx("p",{className:"text-sm text-gray-300",children:"Upload your logo, service areas, and certifications."})]})]}),a.jsx("button",{onClick:()=>s("/login"),className:"w-full py-2 rounded-lg bg-white/10 hover:bg-white/20 text-sm font-semibold",children:"Go to login"})]}),a.jsxs("div",{className:"fm-glass-card p-6 rounded-2xl text-white",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx(Qa,{className:"w-10 h-10 text-gold"}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold",children:"Download Your Badge"}),a.jsx("p",{className:"text-sm text-gray-300",children:"Showcase your verified status across your channels."})]})]}),a.jsx("button",{onClick:()=>s("/login"),className:"w-full py-2 rounded-lg bg-white/10 hover:bg-white/20 text-sm font-semibold",children:"Access badge library"})]}),a.jsxs("div",{className:"fm-glass-card p-6 rounded-2xl text-white",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx(Rw,{className:"w-10 h-10 text-gold"}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold",children:"Schedule Onboarding"}),a.jsx("p",{className:"text-sm text-gray-300",children:"Book time with our team to map your first 30 days."})]})]}),a.jsx("button",{onClick:()=>window.open("mailto:support@restorationexpertise.com","_blank"),className:"w-full py-2 rounded-lg bg-white/10 hover:bg-white/20 text-sm font-semibold",children:"Email support"})]})]})]}),a.jsxs("div",{className:"mt-16 text-center space-y-4 text-gray-300",children:[a.jsxs("div",{className:"flex flex-col items-center gap-3 md:flex-row md:justify-center",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(_a,{className:"w-6 h-6 text-gold"}),a.jsx("span",{children:"Finish your onboarding checklist inside the dashboard."})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Ei,{className:"w-6 h-6 text-gold"}),a.jsx("span",{children:"Join the private member community for weekly live sessions."})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Ao,{className:"w-6 h-6 text-gold"}),a.jsx("span",{children:"Track your credibility goals with the 99-Step Blueprint."})]})]}),a.jsxs("p",{className:"text-sm",children:["Need help? ",a.jsx("a",{className:"text-gold hover:underline",href:"mailto:support@restorationexpertise.com",children:"Contact support"})]})]})]})]})}catch(I){return console.error("Critical error in SuccessPage:",I),ae(I instanceof Error?I.message:"Unknown rendering error")}},z1=()=>{const r=Rs();return S.useEffect(()=>{(()=>{xe.auth.onAuthStateChange((i,o)=>{console.log("Auth state change:",i,o),i==="SIGNED_IN"?(console.log("User signed in successfully, redirecting to dashboard"),r("/dashboard",{replace:!0})):i==="SIGNED_OUT"?(console.log("User signed out"),r("/",{replace:!0})):(console.log("Other auth event:",i),setTimeout(()=>{r("/",{replace:!0})},3e3))})})()},[r]),a.jsx("div",{className:"min-h-screen bg-gray-light flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-brand-accent mx-auto mb-4"}),a.jsx("h2",{className:"text-xl font-semibold text-charcoal mb-2",children:"Completing Sign In..."}),a.jsx("p",{className:"text-gray",children:"Please wait while we log you in to your account."})]})})},Zd=()=>a.jsx("div",{className:"flex min-h-screen items-center justify-center bg-[var(--bg-main)] text-[var(--text-muted)]",children:a.jsx("span",{className:"animate-pulse text-lg",children:"Connecting to Supabase..."})}),cx=()=>{const{session:r,isAdmin:s,loading:i}=nt();return i?a.jsx(Zd,{}):r?a.jsx(rr,{to:s?"/admin":"/member/dashboard",replace:!0}):a.jsx(b1,{})},q1=()=>{const{session:r,loading:s}=nt();return s?a.jsx(Zd,{}):r?a.jsx(YN,{}):a.jsx(rr,{to:"/login",replace:!0})},I1=()=>{const{session:r,isAdmin:s,loading:i}=nt();return i?a.jsx(Zd,{}):r?s?a.jsx(g1,{}):a.jsx(rr,{to:"/admin/login",replace:!0}):a.jsx(rr,{to:"/admin/login",replace:!0})},$1=()=>{const r=Rs(),{session:s,currentUser:i}=nt(),[o,c]=S.useState(null),[u,h]=S.useState(!1),g=(v,E)=>{if(E)return"Founding Member";switch(v){case"A+":case"A":return"Gold";case"B+":return"Silver";default:return"Bronze"}},m=async v=>{const{data:E,error:y}=await xe.from("profiles").select("id, last_assessment_id, last_pci_score").eq("id",v).maybeSingle();if(y)throw y;if(E)return E;const{data:k,error:R}=await xe.from("profiles").insert({id:v}).select("id, last_assessment_id, last_pci_score").single();if(R)throw R;return k},p=async(v,E,y)=>{const{error:k}=await xe.from("profiles").update({last_assessment_id:E,last_pci_score:y}).eq("id",v);if(k)throw k},b=async(v,E,y)=>{const{error:k}=await xe.from("memberships").insert({profile_id:v,tier:E,status:"pending",verification_status:"pending",badge_rating:null,assessment_id:y});if(k)throw k},w=async v=>{var L,Q,B,Z,M,ae,ce,I;if(u)return;const E=v.isEligibleForCertification?"eligible":"not_eligible",y=g(v.grade,v.isEligibleForCertification),k=(L=v.emailEntered)==null?void 0:L.trim(),A=(k&&k.length>0?k:void 0)??((Q=s==null?void 0:s.user)==null?void 0:Q.email)??(i==null?void 0:i.email)??null;if(!A){console.error("No email available from assessment or session - this should not happen");return}h(!0);let q=null;if((B=s==null?void 0:s.user)!=null&&B.id)try{q=await m(s.user.id)}catch(K){console.error("Failed to load or create profile",K),alert("We will continue with your assessment, but updating your profile may not be complete.")}try{const{data:K,error:H}=await xe.from("assessments").insert({user_id:((Z=s==null?void 0:s.user)==null?void 0:Z.id)??null,profile_id:(q==null?void 0:q.id)??null,email_entered:A,full_name_entered:((M=v.fullNameEntered)==null?void 0:M.trim())||null,state:((ae=v.state)==null?void 0:ae.trim())||null,city:((ce=v.cityEntered)==null?void 0:ce.trim())||null,answers:v.answers,total_score:v.total,operational_score:v.operational,licensing_score:v.licensing,feedback_score:v.feedback,certifications_score:v.certifications,digital_score:v.digital,scenario:E,pci_rating:v.grade,intended_membership_tier:y}).select().single();if(H)throw H;const J=K;if(q!=null&&q.id&&J.id!=null){try{await p(q.id,J.id,v.total)}catch(W){console.error("Failed to update profile with assessment",W),alert("We saved your assessment but could not update your profile.")}if(v.isEligibleForCertification&&y)try{await b(q.id,y,J.id)}catch(W){console.error("Failed to create pending membership",W),alert("We saved your assessment but could not update your membership status.")}}const D={...v,answers:J.answers??v.answers,operational:J.operational_score??v.operational,licensing:J.licensing_score??v.licensing,feedback:J.feedback_score??v.feedback,certifications:J.certifications_score??v.certifications,digital:J.digital_score??v.digital,total:J.total_score??v.total,grade:J.pci_rating??v.grade,isEligibleForCertification:J.scenario?J.scenario==="eligible":v.isEligibleForCertification,scenario:J.scenario??E,pciRating:J.pci_rating??v.grade,intendedMembershipTier:J.intended_membership_tier??y,id:J.id,createdAt:J.created_at,userId:J.user_id??((I=s==null?void 0:s.user)==null?void 0:I.id)??null,emailEntered:J.email_entered??A,fullNameEntered:J.full_name_entered??v.fullNameEntered,state:J.state??v.state,cityEntered:J.city??v.cityEntered};c(D),r("/results")}catch(K){console.error("Failed to save assessment result",K),alert("We had trouble saving your assessment. Please try again.")}finally{h(!1)}},j=()=>{c(null),r("/assessment")},_=()=>{r("/")};return a.jsxs(K0,{children:[a.jsx(oa,{path:"/",element:a.jsx(cx,{})}),a.jsx(oa,{path:"/login",element:a.jsx(cx,{})}),a.jsx(oa,{path:"/admin/login",element:a.jsx(v1,{})}),a.jsx(oa,{path:"/assessment",element:a.jsx(A1,{onComplete:w})}),a.jsx(oa,{path:"/results",element:o?a.jsx(M1,{result:o,onRetake:j,onJoin:_}):a.jsx(rr,{to:"/assessment",replace:!0})}),a.jsx(oa,{path:"/success/:plan",element:a.jsx(B1,{})}),a.jsx(oa,{path:"/auth/callback",element:a.jsx(z1,{})}),a.jsx(oa,{path:"/member/dashboard",element:a.jsx(q1,{})}),a.jsx(oa,{path:"/admin/*",element:a.jsx(I1,{})}),a.jsx(oa,{path:"*",element:a.jsx(rr,{to:"/",replace:!0})})]})},P1=()=>a.jsx(gN,{children:a.jsx($1,{})}),Tb=document.getElementById("root");if(!Tb)throw new Error("Could not find root element to mount to");const H1=a0.createRoot(Tb);H1.render(a.jsx(gi.StrictMode,{children:a.jsx(gw,{children:a.jsx(rN,{children:a.jsx(P1,{})})})}));
//# sourceMappingURL=index-Qo04LH9m.js.map

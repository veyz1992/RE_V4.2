function Yy(r,s){for(var i=0;i<s.length;i++){const o=s[i];if(typeof o!="string"&&!Array.isArray(o)){for(const c in o)if(c!=="default"&&!(c in r)){const u=Object.getOwnPropertyDescriptor(o,c);u&&Object.defineProperty(r,c,u.get?u:{enumerable:!0,get:()=>o[c]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))o(c);new MutationObserver(c=>{for(const u of c)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&o(h)}).observe(document,{childList:!0,subtree:!0});function i(c){const u={};return c.integrity&&(u.integrity=c.integrity),c.referrerPolicy&&(u.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?u.credentials="include":c.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function o(c){if(c.ep)return;c.ep=!0;const u=i(c);fetch(c.href,u)}})();function Ud(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function Ky(r){if(Object.prototype.hasOwnProperty.call(r,"__esModule"))return r;var s=r.default;if(typeof s=="function"){var i=function o(){return this instanceof o?Reflect.construct(s,arguments,this.constructor):s.apply(this,arguments)};i.prototype=s.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(r).forEach(function(o){var c=Object.getOwnPropertyDescriptor(r,o);Object.defineProperty(i,o,c.get?c:{enumerable:!0,get:function(){return r[o]}})}),i}var Ku={exports:{}},ci={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tp;function Fy(){if(tp)return ci;tp=1;var r=Symbol.for("react.transitional.element"),s=Symbol.for("react.fragment");function i(o,c,u){var h=null;if(u!==void 0&&(h=""+u),c.key!==void 0&&(h=""+c.key),"key"in c){u={};for(var p in c)p!=="key"&&(u[p]=c[p])}else u=c;return c=u.ref,{$$typeof:r,type:o,key:h,ref:c!==void 0?c:null,props:u}}return ci.Fragment=s,ci.jsx=i,ci.jsxs=i,ci}var ap;function Qy(){return ap||(ap=1,Ku.exports=Fy()),Ku.exports}var a=Qy(),Fu={exports:{}},ye={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sp;function Jy(){if(sp)return ye;sp=1;var r=Symbol.for("react.transitional.element"),s=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),h=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),w=Symbol.for("react.activity"),N=Symbol.iterator;function S(O){return O===null||typeof O!="object"?null:(O=N&&O[N]||O["@@iterator"],typeof O=="function"?O:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,y={};function C(O,H,G){this.props=O,this.context=H,this.refs=y,this.updater=G||v}C.prototype.isReactComponent={},C.prototype.setState=function(O,H){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,H,"setState")},C.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function M(){}M.prototype=C.prototype;function T(O,H,G){this.props=O,this.context=H,this.refs=y,this.updater=G||v}var z=T.prototype=new M;z.constructor=T,E(z,C.prototype),z.isPureReactComponent=!0;var U=Array.isArray;function X(){}var B={H:null,A:null,T:null,S:null},se=Object.prototype.hasOwnProperty;function ee(O,H,G){var K=G.ref;return{$$typeof:r,type:O,key:H,ref:K!==void 0?K:null,props:G}}function te(O,H){return ee(O.type,H,O.props)}function ce(O){return typeof O=="object"&&O!==null&&O.$$typeof===r}function J(O){var H={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(G){return H[G]})}var I=/\/+/g;function k(O,H){return typeof O=="object"&&O!==null&&O.key!=null?J(""+O.key):H.toString(36)}function F(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(X,X):(O.status="pending",O.then(function(H){O.status==="pending"&&(O.status="fulfilled",O.value=H)},function(H){O.status==="pending"&&(O.status="rejected",O.reason=H)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function R(O,H,G,K,ae){var ie=typeof O;(ie==="undefined"||ie==="boolean")&&(O=null);var ue=!1;if(O===null)ue=!0;else switch(ie){case"bigint":case"string":case"number":ue=!0;break;case"object":switch(O.$$typeof){case r:case s:ue=!0;break;case b:return ue=O._init,R(ue(O._payload),H,G,K,ae)}}if(ue)return ae=ae(O),ue=K===""?"."+k(O,0):K,U(ae)?(G="",ue!=null&&(G=ue.replace(I,"$&/")+"/"),R(ae,H,G,"",function(Ve){return Ve})):ae!=null&&(ce(ae)&&(ae=te(ae,G+(ae.key==null||O&&O.key===ae.key?"":(""+ae.key).replace(I,"$&/")+"/")+ue)),H.push(ae)),1;ue=0;var Ae=K===""?".":K+":";if(U(O))for(var De=0;De<O.length;De++)K=O[De],ie=Ae+k(K,De),ue+=R(K,H,G,ie,ae);else if(De=S(O),typeof De=="function")for(O=De.call(O),De=0;!(K=O.next()).done;)K=K.value,ie=Ae+k(K,De++),ue+=R(K,H,G,ie,ae);else if(ie==="object"){if(typeof O.then=="function")return R(F(O),H,G,K,ae);throw H=String(O),Error("Objects are not valid as a React child (found: "+(H==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":H)+"). If you meant to render a collection of children, use an array instead.")}return ue}function Y(O,H,G){if(O==null)return O;var K=[],ae=0;return R(O,K,"","",function(ie){return H.call(G,ie,ae++)}),K}function ne(O){if(O._status===-1){var H=O._result;H=H(),H.then(function(G){(O._status===0||O._status===-1)&&(O._status=1,O._result=G)},function(G){(O._status===0||O._status===-1)&&(O._status=2,O._result=G)}),O._status===-1&&(O._status=0,O._result=H)}if(O._status===1)return O._result.default;throw O._result}var re=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var H=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(H))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)},xe={map:Y,forEach:function(O,H,G){Y(O,function(){H.apply(this,arguments)},G)},count:function(O){var H=0;return Y(O,function(){H++}),H},toArray:function(O){return Y(O,function(H){return H})||[]},only:function(O){if(!ce(O))throw Error("React.Children.only expected to receive a single React element child.");return O}};return ye.Activity=w,ye.Children=xe,ye.Component=C,ye.Fragment=i,ye.Profiler=c,ye.PureComponent=T,ye.StrictMode=o,ye.Suspense=m,ye.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=B,ye.__COMPILER_RUNTIME={__proto__:null,c:function(O){return B.H.useMemoCache(O)}},ye.cache=function(O){return function(){return O.apply(null,arguments)}},ye.cacheSignal=function(){return null},ye.cloneElement=function(O,H,G){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var K=E({},O.props),ae=O.key;if(H!=null)for(ie in H.key!==void 0&&(ae=""+H.key),H)!se.call(H,ie)||ie==="key"||ie==="__self"||ie==="__source"||ie==="ref"&&H.ref===void 0||(K[ie]=H[ie]);var ie=arguments.length-2;if(ie===1)K.children=G;else if(1<ie){for(var ue=Array(ie),Ae=0;Ae<ie;Ae++)ue[Ae]=arguments[Ae+2];K.children=ue}return ee(O.type,ae,K)},ye.createContext=function(O){return O={$$typeof:h,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:u,_context:O},O},ye.createElement=function(O,H,G){var K,ae={},ie=null;if(H!=null)for(K in H.key!==void 0&&(ie=""+H.key),H)se.call(H,K)&&K!=="key"&&K!=="__self"&&K!=="__source"&&(ae[K]=H[K]);var ue=arguments.length-2;if(ue===1)ae.children=G;else if(1<ue){for(var Ae=Array(ue),De=0;De<ue;De++)Ae[De]=arguments[De+2];ae.children=Ae}if(O&&O.defaultProps)for(K in ue=O.defaultProps,ue)ae[K]===void 0&&(ae[K]=ue[K]);return ee(O,ie,ae)},ye.createRef=function(){return{current:null}},ye.forwardRef=function(O){return{$$typeof:p,render:O}},ye.isValidElement=ce,ye.lazy=function(O){return{$$typeof:b,_payload:{_status:-1,_result:O},_init:ne}},ye.memo=function(O,H){return{$$typeof:g,type:O,compare:H===void 0?null:H}},ye.startTransition=function(O){var H=B.T,G={};B.T=G;try{var K=O(),ae=B.S;ae!==null&&ae(G,K),typeof K=="object"&&K!==null&&typeof K.then=="function"&&K.then(X,re)}catch(ie){re(ie)}finally{H!==null&&G.types!==null&&(H.types=G.types),B.T=H}},ye.unstable_useCacheRefresh=function(){return B.H.useCacheRefresh()},ye.use=function(O){return B.H.use(O)},ye.useActionState=function(O,H,G){return B.H.useActionState(O,H,G)},ye.useCallback=function(O,H){return B.H.useCallback(O,H)},ye.useContext=function(O){return B.H.useContext(O)},ye.useDebugValue=function(){},ye.useDeferredValue=function(O,H){return B.H.useDeferredValue(O,H)},ye.useEffect=function(O,H){return B.H.useEffect(O,H)},ye.useEffectEvent=function(O){return B.H.useEffectEvent(O)},ye.useId=function(){return B.H.useId()},ye.useImperativeHandle=function(O,H,G){return B.H.useImperativeHandle(O,H,G)},ye.useInsertionEffect=function(O,H){return B.H.useInsertionEffect(O,H)},ye.useLayoutEffect=function(O,H){return B.H.useLayoutEffect(O,H)},ye.useMemo=function(O,H){return B.H.useMemo(O,H)},ye.useOptimistic=function(O,H){return B.H.useOptimistic(O,H)},ye.useReducer=function(O,H,G){return B.H.useReducer(O,H,G)},ye.useRef=function(O){return B.H.useRef(O)},ye.useState=function(O){return B.H.useState(O)},ye.useSyncExternalStore=function(O,H,G){return B.H.useSyncExternalStore(O,H,G)},ye.useTransition=function(){return B.H.useTransition()},ye.version="19.2.0",ye}var np;function Ld(){return np||(np=1,Fu.exports=Jy()),Fu.exports}var _=Ld();const xi=Ud(_);var Qu={exports:{}},ui={},Ju={exports:{}},Xu={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rp;function Xy(){return rp||(rp=1,(function(r){function s(R,Y){var ne=R.length;R.push(Y);e:for(;0<ne;){var re=ne-1>>>1,xe=R[re];if(0<c(xe,Y))R[re]=Y,R[ne]=xe,ne=re;else break e}}function i(R){return R.length===0?null:R[0]}function o(R){if(R.length===0)return null;var Y=R[0],ne=R.pop();if(ne!==Y){R[0]=ne;e:for(var re=0,xe=R.length,O=xe>>>1;re<O;){var H=2*(re+1)-1,G=R[H],K=H+1,ae=R[K];if(0>c(G,ne))K<xe&&0>c(ae,G)?(R[re]=ae,R[K]=ne,re=K):(R[re]=G,R[H]=ne,re=H);else if(K<xe&&0>c(ae,ne))R[re]=ae,R[K]=ne,re=K;else break e}}return Y}function c(R,Y){var ne=R.sortIndex-Y.sortIndex;return ne!==0?ne:R.id-Y.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;r.unstable_now=function(){return u.now()}}else{var h=Date,p=h.now();r.unstable_now=function(){return h.now()-p}}var m=[],g=[],b=1,w=null,N=3,S=!1,v=!1,E=!1,y=!1,C=typeof setTimeout=="function"?setTimeout:null,M=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;function z(R){for(var Y=i(g);Y!==null;){if(Y.callback===null)o(g);else if(Y.startTime<=R)o(g),Y.sortIndex=Y.expirationTime,s(m,Y);else break;Y=i(g)}}function U(R){if(E=!1,z(R),!v)if(i(m)!==null)v=!0,X||(X=!0,J());else{var Y=i(g);Y!==null&&F(U,Y.startTime-R)}}var X=!1,B=-1,se=5,ee=-1;function te(){return y?!0:!(r.unstable_now()-ee<se)}function ce(){if(y=!1,X){var R=r.unstable_now();ee=R;var Y=!0;try{e:{v=!1,E&&(E=!1,M(B),B=-1),S=!0;var ne=N;try{t:{for(z(R),w=i(m);w!==null&&!(w.expirationTime>R&&te());){var re=w.callback;if(typeof re=="function"){w.callback=null,N=w.priorityLevel;var xe=re(w.expirationTime<=R);if(R=r.unstable_now(),typeof xe=="function"){w.callback=xe,z(R),Y=!0;break t}w===i(m)&&o(m),z(R)}else o(m);w=i(m)}if(w!==null)Y=!0;else{var O=i(g);O!==null&&F(U,O.startTime-R),Y=!1}}break e}finally{w=null,N=ne,S=!1}Y=void 0}}finally{Y?J():X=!1}}}var J;if(typeof T=="function")J=function(){T(ce)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,k=I.port2;I.port1.onmessage=ce,J=function(){k.postMessage(null)}}else J=function(){C(ce,0)};function F(R,Y){B=C(function(){R(r.unstable_now())},Y)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(R){R.callback=null},r.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):se=0<R?Math.floor(1e3/R):5},r.unstable_getCurrentPriorityLevel=function(){return N},r.unstable_next=function(R){switch(N){case 1:case 2:case 3:var Y=3;break;default:Y=N}var ne=N;N=Y;try{return R()}finally{N=ne}},r.unstable_requestPaint=function(){y=!0},r.unstable_runWithPriority=function(R,Y){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var ne=N;N=R;try{return Y()}finally{N=ne}},r.unstable_scheduleCallback=function(R,Y,ne){var re=r.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?re+ne:re):ne=re,R){case 1:var xe=-1;break;case 2:xe=250;break;case 5:xe=1073741823;break;case 4:xe=1e4;break;default:xe=5e3}return xe=ne+xe,R={id:b++,callback:Y,priorityLevel:R,startTime:ne,expirationTime:xe,sortIndex:-1},ne>re?(R.sortIndex=ne,s(g,R),i(m)===null&&R===i(g)&&(E?(M(B),B=-1):E=!0,F(U,ne-re))):(R.sortIndex=xe,s(m,R),v||S||(v=!0,X||(X=!0,J()))),R},r.unstable_shouldYield=te,r.unstable_wrapCallback=function(R){var Y=N;return function(){var ne=N;N=Y;try{return R.apply(this,arguments)}finally{N=ne}}}})(Xu)),Xu}var ip;function Wy(){return ip||(ip=1,Ju.exports=Xy()),Ju.exports}var Wu={exports:{}},bt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lp;function Zy(){if(lp)return bt;lp=1;var r=Ld();function s(m){var g="https://react.dev/errors/"+m;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)g+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+m+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var o={d:{f:i,r:function(){throw Error(s(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},c=Symbol.for("react.portal");function u(m,g,b){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:w==null?null:""+w,children:m,containerInfo:g,implementation:b}}var h=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(m,g){if(m==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return bt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,bt.createPortal=function(m,g){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(s(299));return u(m,g,null,b)},bt.flushSync=function(m){var g=h.T,b=o.p;try{if(h.T=null,o.p=2,m)return m()}finally{h.T=g,o.p=b,o.d.f()}},bt.preconnect=function(m,g){typeof m=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,o.d.C(m,g))},bt.prefetchDNS=function(m){typeof m=="string"&&o.d.D(m)},bt.preinit=function(m,g){if(typeof m=="string"&&g&&typeof g.as=="string"){var b=g.as,w=p(b,g.crossOrigin),N=typeof g.integrity=="string"?g.integrity:void 0,S=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;b==="style"?o.d.S(m,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:w,integrity:N,fetchPriority:S}):b==="script"&&o.d.X(m,{crossOrigin:w,integrity:N,fetchPriority:S,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},bt.preinitModule=function(m,g){if(typeof m=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var b=p(g.as,g.crossOrigin);o.d.M(m,{crossOrigin:b,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&o.d.M(m)},bt.preload=function(m,g){if(typeof m=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var b=g.as,w=p(b,g.crossOrigin);o.d.L(m,b,{crossOrigin:w,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},bt.preloadModule=function(m,g){if(typeof m=="string")if(g){var b=p(g.as,g.crossOrigin);o.d.m(m,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:b,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else o.d.m(m)},bt.requestFormReset=function(m){o.d.r(m)},bt.unstable_batchedUpdates=function(m,g){return m(g)},bt.useFormState=function(m,g,b){return h.H.useFormState(m,g,b)},bt.useFormStatus=function(){return h.H.useHostTransitionStatus()},bt.version="19.2.0",bt}var op;function e0(){if(op)return Wu.exports;op=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(s){console.error(s)}}return r(),Wu.exports=Zy(),Wu.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cp;function t0(){if(cp)return ui;cp=1;var r=Wy(),s=Ld(),i=e0();function o(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function c(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function u(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function h(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function p(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function m(e){if(u(e)!==e)throw Error(o(188))}function g(e){var t=e.alternate;if(!t){if(t=u(e),t===null)throw Error(o(188));return t!==e?null:e}for(var n=e,l=t;;){var d=n.return;if(d===null)break;var f=d.alternate;if(f===null){if(l=d.return,l!==null){n=l;continue}break}if(d.child===f.child){for(f=d.child;f;){if(f===n)return m(d),e;if(f===l)return m(d),t;f=f.sibling}throw Error(o(188))}if(n.return!==l.return)n=d,l=f;else{for(var x=!1,j=d.child;j;){if(j===n){x=!0,n=d,l=f;break}if(j===l){x=!0,l=d,n=f;break}j=j.sibling}if(!x){for(j=f.child;j;){if(j===n){x=!0,n=f,l=d;break}if(j===l){x=!0,l=f,n=d;break}j=j.sibling}if(!x)throw Error(o(189))}}if(n.alternate!==l)throw Error(o(190))}if(n.tag!==3)throw Error(o(188));return n.stateNode.current===n?e:t}function b(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=b(e),t!==null)return t;e=e.sibling}return null}var w=Object.assign,N=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),v=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),y=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),M=Symbol.for("react.consumer"),T=Symbol.for("react.context"),z=Symbol.for("react.forward_ref"),U=Symbol.for("react.suspense"),X=Symbol.for("react.suspense_list"),B=Symbol.for("react.memo"),se=Symbol.for("react.lazy"),ee=Symbol.for("react.activity"),te=Symbol.for("react.memo_cache_sentinel"),ce=Symbol.iterator;function J(e){return e===null||typeof e!="object"?null:(e=ce&&e[ce]||e["@@iterator"],typeof e=="function"?e:null)}var I=Symbol.for("react.client.reference");function k(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===I?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case E:return"Fragment";case C:return"Profiler";case y:return"StrictMode";case U:return"Suspense";case X:return"SuspenseList";case ee:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case v:return"Portal";case T:return e.displayName||"Context";case M:return(e._context.displayName||"Context")+".Consumer";case z:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case B:return t=e.displayName||null,t!==null?t:k(e.type)||"Memo";case se:t=e._payload,e=e._init;try{return k(e(t))}catch{}}return null}var F=Array.isArray,R=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ne={pending:!1,data:null,method:null,action:null},re=[],xe=-1;function O(e){return{current:e}}function H(e){0>xe||(e.current=re[xe],re[xe]=null,xe--)}function G(e,t){xe++,re[xe]=e.current,e.current=t}var K=O(null),ae=O(null),ie=O(null),ue=O(null);function Ae(e,t){switch(G(ie,t),G(ae,e),G(K,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?_g(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=_g(t),e=Sg(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}H(K),G(K,e)}function De(){H(K),H(ae),H(ie)}function Ve(e){e.memoizedState!==null&&G(ue,e);var t=K.current,n=Sg(t,e.type);t!==n&&(G(ae,e),G(K,n))}function ga(e){ae.current===e&&(H(K),H(ae)),ue.current===e&&(H(ue),ri._currentValue=ne)}var Yt,pr;function pa(e){if(Yt===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Yt=t&&t[1]||"",pr=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Yt+e+pr}var ln=!1;function on(e,t){if(!e||ln)return"";ln=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(t){var Z=function(){throw Error()};if(Object.defineProperty(Z.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Z,[])}catch(V){var $=V}Reflect.construct(e,[],Z)}else{try{Z.call()}catch(V){$=V}e.call(Z.prototype)}}else{try{throw Error()}catch(V){$=V}(Z=e())&&typeof Z.catch=="function"&&Z.catch(function(){})}}catch(V){if(V&&$&&typeof V.stack=="string")return[V.stack,$.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=l.DetermineComponentFrameRoot(),x=f[0],j=f[1];if(x&&j){var A=x.split(`
`),P=j.split(`
`);for(d=l=0;l<A.length&&!A[l].includes("DetermineComponentFrameRoot");)l++;for(;d<P.length&&!P[d].includes("DetermineComponentFrameRoot");)d++;if(l===A.length||d===P.length)for(l=A.length-1,d=P.length-1;1<=l&&0<=d&&A[l]!==P[d];)d--;for(;1<=l&&0<=d;l--,d--)if(A[l]!==P[d]){if(l!==1||d!==1)do if(l--,d--,0>d||A[l]!==P[d]){var Q=`
`+A[l].replace(" at new "," at ");return e.displayName&&Q.includes("<anonymous>")&&(Q=Q.replace("<anonymous>",e.displayName)),Q}while(1<=l&&0<=d);break}}}finally{ln=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?pa(n):""}function Ne(e,t){switch(e.tag){case 26:case 27:case 5:return pa(e.type);case 16:return pa("Lazy");case 13:return e.child!==t&&t!==null?pa("Suspense Fallback"):pa("Suspense");case 19:return pa("SuspenseList");case 0:case 15:return on(e.type,!1);case 11:return on(e.type.render,!1);case 1:return on(e.type,!0);case 31:return pa("Activity");default:return""}}function Pe(e){try{var t="",n=null;do t+=Ne(e,n),n=e,e=e.return;while(e);return t}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var ot=Object.prototype.hasOwnProperty,jt=r.unstable_scheduleCallback,St=r.unstable_cancelCallback,Ja=r.unstable_shouldYield,Ut=r.unstable_requestPaint,We=r.unstable_now,cn=r.unstable_getCurrentPriorityLevel,un=r.unstable_ImmediatePriority,Et=r.unstable_UserBlockingPriority,dn=r.unstable_NormalPriority,xr=r.unstable_LowPriority,ki=r.unstable_IdlePriority,Do=r.log,Mo=r.unstable_setDisableYieldValue,xa=null,kt=null;function ba(e){if(typeof Do=="function"&&Mo(e),kt&&typeof kt.setStrictMode=="function")try{kt.setStrictMode(xa,e)}catch{}}var xt=Math.clz32?Math.clz32:Ti,Ci=Math.log,Ai=Math.LN2;function Ti(e){return e>>>=0,e===0?32:31-(Ci(e)/Ai|0)|0}var fe=256,rt=262144,dt=4194304;function Xa(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Ri(e,t,n){var l=e.pendingLanes;if(l===0)return 0;var d=0,f=e.suspendedLanes,x=e.pingedLanes;e=e.warmLanes;var j=l&134217727;return j!==0?(l=j&~f,l!==0?d=Xa(l):(x&=j,x!==0?d=Xa(x):n||(n=j&~e,n!==0&&(d=Xa(n))))):(j=l&~f,j!==0?d=Xa(j):x!==0?d=Xa(x):n||(n=l&~e,n!==0&&(d=Xa(n)))),d===0?0:t!==0&&t!==d&&(t&f)===0&&(f=d&-d,n=t&-t,f>=n||f===32&&(n&4194048)!==0)?t:d}function br(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Db(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function nh(){var e=dt;return dt<<=1,(dt&62914560)===0&&(dt=4194304),e}function Uo(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vr(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Mb(e,t,n,l,d,f){var x=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var j=e.entanglements,A=e.expirationTimes,P=e.hiddenUpdates;for(n=x&~n;0<n;){var Q=31-xt(n),Z=1<<Q;j[Q]=0,A[Q]=-1;var $=P[Q];if($!==null)for(P[Q]=null,Q=0;Q<$.length;Q++){var V=$[Q];V!==null&&(V.lane&=-536870913)}n&=~Z}l!==0&&rh(e,l,0),f!==0&&d===0&&e.tag!==0&&(e.suspendedLanes|=f&~(x&~t))}function rh(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var l=31-xt(t);e.entangledLanes|=t,e.entanglements[l]=e.entanglements[l]|1073741824|n&261930}function ih(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var l=31-xt(n),d=1<<l;d&t|e[l]&t&&(e[l]|=t),n&=~d}}function lh(e,t){var n=t&-t;return n=(n&42)!==0?1:Lo(n),(n&(e.suspendedLanes|t))!==0?0:n}function Lo(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Bo(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function oh(){var e=Y.p;return e!==0?e:(e=window.event,e===void 0?32:Fg(e.type))}function ch(e,t){var n=Y.p;try{return Y.p=e,t()}finally{Y.p=n}}var Wa=Math.random().toString(36).slice(2),ht="__reactFiber$"+Wa,Ct="__reactProps$"+Wa,hn="__reactContainer$"+Wa,zo="__reactEvents$"+Wa,Ub="__reactListeners$"+Wa,Lb="__reactHandles$"+Wa,uh="__reactResources$"+Wa,yr="__reactMarker$"+Wa;function qo(e){delete e[ht],delete e[Ct],delete e[zo],delete e[Ub],delete e[Lb]}function fn(e){var t=e[ht];if(t)return t;for(var n=e.parentNode;n;){if(t=n[hn]||n[ht]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Og(e);e!==null;){if(n=e[ht])return n;e=Og(e)}return t}e=n,n=e.parentNode}return null}function mn(e){if(e=e[ht]||e[hn]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function wr(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(o(33))}function gn(e){var t=e[uh];return t||(t=e[uh]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function ct(e){e[yr]=!0}var dh=new Set,hh={};function Ds(e,t){pn(e,t),pn(e+"Capture",t)}function pn(e,t){for(hh[e]=t,e=0;e<t.length;e++)dh.add(t[e])}var Bb=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),fh={},mh={};function zb(e){return ot.call(mh,e)?!0:ot.call(fh,e)?!1:Bb.test(e)?mh[e]=!0:(fh[e]=!0,!1)}function Oi(e,t,n){if(zb(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var l=t.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function Di(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function Ea(e,t,n,l){if(l===null)e.removeAttribute(n);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+l)}}function Kt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function gh(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function qb(e,t,n){var l=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var d=l.get,f=l.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return d.call(this)},set:function(x){n=""+x,f.call(this,x)}}),Object.defineProperty(e,t,{enumerable:l.enumerable}),{getValue:function(){return n},setValue:function(x){n=""+x},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Po(e){if(!e._valueTracker){var t=gh(e)?"checked":"value";e._valueTracker=qb(e,t,""+e[t])}}function ph(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),l="";return e&&(l=gh(e)?e.checked?"true":"false":e.value),e=l,e!==n?(t.setValue(e),!0):!1}function Mi(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Pb=/[\n"\\]/g;function Ft(e){return e.replace(Pb,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Io(e,t,n,l,d,f,x,j){e.name="",x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?e.type=x:e.removeAttribute("type"),t!=null?x==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Kt(t)):e.value!==""+Kt(t)&&(e.value=""+Kt(t)):x!=="submit"&&x!=="reset"||e.removeAttribute("value"),t!=null?$o(e,x,Kt(t)):n!=null?$o(e,x,Kt(n)):l!=null&&e.removeAttribute("value"),d==null&&f!=null&&(e.defaultChecked=!!f),d!=null&&(e.checked=d&&typeof d!="function"&&typeof d!="symbol"),j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"?e.name=""+Kt(j):e.removeAttribute("name")}function xh(e,t,n,l,d,f,x,j){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(e.type=f),t!=null||n!=null){if(!(f!=="submit"&&f!=="reset"||t!=null)){Po(e);return}n=n!=null?""+Kt(n):"",t=t!=null?""+Kt(t):n,j||t===e.value||(e.value=t),e.defaultValue=t}l=l??d,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=j?e.checked:!!l,e.defaultChecked=!!l,x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(e.name=x),Po(e)}function $o(e,t,n){t==="number"&&Mi(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function xn(e,t,n,l){if(e=e.options,t){t={};for(var d=0;d<n.length;d++)t["$"+n[d]]=!0;for(n=0;n<e.length;n++)d=t.hasOwnProperty("$"+e[n].value),e[n].selected!==d&&(e[n].selected=d),d&&l&&(e[n].defaultSelected=!0)}else{for(n=""+Kt(n),t=null,d=0;d<e.length;d++){if(e[d].value===n){e[d].selected=!0,l&&(e[d].defaultSelected=!0);return}t!==null||e[d].disabled||(t=e[d])}t!==null&&(t.selected=!0)}}function bh(e,t,n){if(t!=null&&(t=""+Kt(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+Kt(n):""}function vh(e,t,n,l){if(t==null){if(l!=null){if(n!=null)throw Error(o(92));if(F(l)){if(1<l.length)throw Error(o(93));l=l[0]}n=l}n==null&&(n=""),t=n}n=Kt(t),e.defaultValue=n,l=e.textContent,l===n&&l!==""&&l!==null&&(e.value=l),Po(e)}function bn(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Ib=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function yh(e,t,n){var l=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?l?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":l?e.setProperty(t,n):typeof n!="number"||n===0||Ib.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function wh(e,t,n){if(t!=null&&typeof t!="object")throw Error(o(62));if(e=e.style,n!=null){for(var l in n)!n.hasOwnProperty(l)||t!=null&&t.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var d in t)l=t[d],t.hasOwnProperty(d)&&n[d]!==l&&yh(e,d,l)}else for(var f in t)t.hasOwnProperty(f)&&yh(e,f,t[f])}function Ho(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $b=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Hb=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ui(e){return Hb.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function ka(){}var Vo=null;function Go(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var vn=null,yn=null;function jh(e){var t=mn(e);if(t&&(e=t.stateNode)){var n=e[Ct]||null;e:switch(e=t.stateNode,t.type){case"input":if(Io(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+Ft(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var l=n[t];if(l!==e&&l.form===e.form){var d=l[Ct]||null;if(!d)throw Error(o(90));Io(l,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(t=0;t<n.length;t++)l=n[t],l.form===e.form&&ph(l)}break e;case"textarea":bh(e,n.value,n.defaultValue);break e;case"select":t=n.value,t!=null&&xn(e,!!n.multiple,t,!1)}}}var Yo=!1;function Nh(e,t,n){if(Yo)return e(t,n);Yo=!0;try{var l=e(t);return l}finally{if(Yo=!1,(vn!==null||yn!==null)&&(jl(),vn&&(t=vn,e=yn,yn=vn=null,jh(t),e)))for(t=0;t<e.length;t++)jh(e[t])}}function jr(e,t){var n=e.stateNode;if(n===null)return null;var l=n[Ct]||null;if(l===null)return null;n=l[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(o(231,t,typeof n));return n}var Ca=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ko=!1;if(Ca)try{var Nr={};Object.defineProperty(Nr,"passive",{get:function(){Ko=!0}}),window.addEventListener("test",Nr,Nr),window.removeEventListener("test",Nr,Nr)}catch{Ko=!1}var Za=null,Fo=null,Li=null;function _h(){if(Li)return Li;var e,t=Fo,n=t.length,l,d="value"in Za?Za.value:Za.textContent,f=d.length;for(e=0;e<n&&t[e]===d[e];e++);var x=n-e;for(l=1;l<=x&&t[n-l]===d[f-l];l++);return Li=d.slice(e,1<l?1-l:void 0)}function Bi(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function zi(){return!0}function Sh(){return!1}function At(e){function t(n,l,d,f,x){this._reactName=n,this._targetInst=d,this.type=l,this.nativeEvent=f,this.target=x,this.currentTarget=null;for(var j in e)e.hasOwnProperty(j)&&(n=e[j],this[j]=n?n(f):f[j]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?zi:Sh,this.isPropagationStopped=Sh,this}return w(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=zi)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=zi)},persist:function(){},isPersistent:zi}),t}var Ms={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},qi=At(Ms),_r=w({},Ms,{view:0,detail:0}),Vb=At(_r),Qo,Jo,Sr,Pi=w({},_r,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Wo,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Sr&&(Sr&&e.type==="mousemove"?(Qo=e.screenX-Sr.screenX,Jo=e.screenY-Sr.screenY):Jo=Qo=0,Sr=e),Qo)},movementY:function(e){return"movementY"in e?e.movementY:Jo}}),Eh=At(Pi),Gb=w({},Pi,{dataTransfer:0}),Yb=At(Gb),Kb=w({},_r,{relatedTarget:0}),Xo=At(Kb),Fb=w({},Ms,{animationName:0,elapsedTime:0,pseudoElement:0}),Qb=At(Fb),Jb=w({},Ms,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Xb=At(Jb),Wb=w({},Ms,{data:0}),kh=At(Wb),Zb={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ev={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},tv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function av(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=tv[e])?!!t[e]:!1}function Wo(){return av}var sv=w({},_r,{key:function(e){if(e.key){var t=Zb[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Bi(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?ev[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Wo,charCode:function(e){return e.type==="keypress"?Bi(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Bi(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),nv=At(sv),rv=w({},Pi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ch=At(rv),iv=w({},_r,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Wo}),lv=At(iv),ov=w({},Ms,{propertyName:0,elapsedTime:0,pseudoElement:0}),cv=At(ov),uv=w({},Pi,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),dv=At(uv),hv=w({},Ms,{newState:0,oldState:0}),fv=At(hv),mv=[9,13,27,32],Zo=Ca&&"CompositionEvent"in window,Er=null;Ca&&"documentMode"in document&&(Er=document.documentMode);var gv=Ca&&"TextEvent"in window&&!Er,Ah=Ca&&(!Zo||Er&&8<Er&&11>=Er),Th=" ",Rh=!1;function Oh(e,t){switch(e){case"keyup":return mv.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Dh(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var wn=!1;function pv(e,t){switch(e){case"compositionend":return Dh(t);case"keypress":return t.which!==32?null:(Rh=!0,Th);case"textInput":return e=t.data,e===Th&&Rh?null:e;default:return null}}function xv(e,t){if(wn)return e==="compositionend"||!Zo&&Oh(e,t)?(e=_h(),Li=Fo=Za=null,wn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ah&&t.locale!=="ko"?null:t.data;default:return null}}var bv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Mh(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!bv[e.type]:t==="textarea"}function Uh(e,t,n,l){vn?yn?yn.push(l):yn=[l]:vn=l,t=Al(t,"onChange"),0<t.length&&(n=new qi("onChange","change",null,n,l),e.push({event:n,listeners:t}))}var kr=null,Cr=null;function vv(e){bg(e,0)}function Ii(e){var t=wr(e);if(ph(t))return e}function Lh(e,t){if(e==="change")return t}var Bh=!1;if(Ca){var ec;if(Ca){var tc="oninput"in document;if(!tc){var zh=document.createElement("div");zh.setAttribute("oninput","return;"),tc=typeof zh.oninput=="function"}ec=tc}else ec=!1;Bh=ec&&(!document.documentMode||9<document.documentMode)}function qh(){kr&&(kr.detachEvent("onpropertychange",Ph),Cr=kr=null)}function Ph(e){if(e.propertyName==="value"&&Ii(Cr)){var t=[];Uh(t,Cr,e,Go(e)),Nh(vv,t)}}function yv(e,t,n){e==="focusin"?(qh(),kr=t,Cr=n,kr.attachEvent("onpropertychange",Ph)):e==="focusout"&&qh()}function wv(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ii(Cr)}function jv(e,t){if(e==="click")return Ii(t)}function Nv(e,t){if(e==="input"||e==="change")return Ii(t)}function _v(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Lt=typeof Object.is=="function"?Object.is:_v;function Ar(e,t){if(Lt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),l=Object.keys(t);if(n.length!==l.length)return!1;for(l=0;l<n.length;l++){var d=n[l];if(!ot.call(t,d)||!Lt(e[d],t[d]))return!1}return!0}function Ih(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function $h(e,t){var n=Ih(e);e=0;for(var l;n;){if(n.nodeType===3){if(l=e+n.textContent.length,e<=t&&l>=t)return{node:n,offset:t-e};e=l}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Ih(n)}}function Hh(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Hh(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Vh(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Mi(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Mi(e.document)}return t}function ac(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var Sv=Ca&&"documentMode"in document&&11>=document.documentMode,jn=null,sc=null,Tr=null,nc=!1;function Gh(e,t,n){var l=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;nc||jn==null||jn!==Mi(l)||(l=jn,"selectionStart"in l&&ac(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Tr&&Ar(Tr,l)||(Tr=l,l=Al(sc,"onSelect"),0<l.length&&(t=new qi("onSelect","select",null,t,n),e.push({event:t,listeners:l}),t.target=jn)))}function Us(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Nn={animationend:Us("Animation","AnimationEnd"),animationiteration:Us("Animation","AnimationIteration"),animationstart:Us("Animation","AnimationStart"),transitionrun:Us("Transition","TransitionRun"),transitionstart:Us("Transition","TransitionStart"),transitioncancel:Us("Transition","TransitionCancel"),transitionend:Us("Transition","TransitionEnd")},rc={},Yh={};Ca&&(Yh=document.createElement("div").style,"AnimationEvent"in window||(delete Nn.animationend.animation,delete Nn.animationiteration.animation,delete Nn.animationstart.animation),"TransitionEvent"in window||delete Nn.transitionend.transition);function Ls(e){if(rc[e])return rc[e];if(!Nn[e])return e;var t=Nn[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Yh)return rc[e]=t[n];return e}var Kh=Ls("animationend"),Fh=Ls("animationiteration"),Qh=Ls("animationstart"),Ev=Ls("transitionrun"),kv=Ls("transitionstart"),Cv=Ls("transitioncancel"),Jh=Ls("transitionend"),Xh=new Map,ic="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ic.push("scrollEnd");function ra(e,t){Xh.set(e,t),Ds(t,[e])}var $i=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Qt=[],_n=0,lc=0;function Hi(){for(var e=_n,t=lc=_n=0;t<e;){var n=Qt[t];Qt[t++]=null;var l=Qt[t];Qt[t++]=null;var d=Qt[t];Qt[t++]=null;var f=Qt[t];if(Qt[t++]=null,l!==null&&d!==null){var x=l.pending;x===null?d.next=d:(d.next=x.next,x.next=d),l.pending=d}f!==0&&Wh(n,d,f)}}function Vi(e,t,n,l){Qt[_n++]=e,Qt[_n++]=t,Qt[_n++]=n,Qt[_n++]=l,lc|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function oc(e,t,n,l){return Vi(e,t,n,l),Gi(e)}function Bs(e,t){return Vi(e,null,null,t),Gi(e)}function Wh(e,t,n){e.lanes|=n;var l=e.alternate;l!==null&&(l.lanes|=n);for(var d=!1,f=e.return;f!==null;)f.childLanes|=n,l=f.alternate,l!==null&&(l.childLanes|=n),f.tag===22&&(e=f.stateNode,e===null||e._visibility&1||(d=!0)),e=f,f=f.return;return e.tag===3?(f=e.stateNode,d&&t!==null&&(d=31-xt(n),e=f.hiddenUpdates,l=e[d],l===null?e[d]=[t]:l.push(t),t.lane=n|536870912),f):null}function Gi(e){if(50<Wr)throw Wr=0,xu=null,Error(o(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Sn={};function Av(e,t,n,l){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bt(e,t,n,l){return new Av(e,t,n,l)}function cc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Aa(e,t){var n=e.alternate;return n===null?(n=Bt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Zh(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Yi(e,t,n,l,d,f){var x=0;if(l=e,typeof e=="function")cc(e)&&(x=1);else if(typeof e=="string")x=My(e,n,K.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case ee:return e=Bt(31,n,t,d),e.elementType=ee,e.lanes=f,e;case E:return zs(n.children,d,f,t);case y:x=8,d|=24;break;case C:return e=Bt(12,n,t,d|2),e.elementType=C,e.lanes=f,e;case U:return e=Bt(13,n,t,d),e.elementType=U,e.lanes=f,e;case X:return e=Bt(19,n,t,d),e.elementType=X,e.lanes=f,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case T:x=10;break e;case M:x=9;break e;case z:x=11;break e;case B:x=14;break e;case se:x=16,l=null;break e}x=29,n=Error(o(130,e===null?"null":typeof e,"")),l=null}return t=Bt(x,n,t,d),t.elementType=e,t.type=l,t.lanes=f,t}function zs(e,t,n,l){return e=Bt(7,e,l,t),e.lanes=n,e}function uc(e,t,n){return e=Bt(6,e,null,t),e.lanes=n,e}function ef(e){var t=Bt(18,null,null,0);return t.stateNode=e,t}function dc(e,t,n){return t=Bt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var tf=new WeakMap;function Jt(e,t){if(typeof e=="object"&&e!==null){var n=tf.get(e);return n!==void 0?n:(t={value:e,source:t,stack:Pe(t)},tf.set(e,t),t)}return{value:e,source:t,stack:Pe(t)}}var En=[],kn=0,Ki=null,Rr=0,Xt=[],Wt=0,es=null,va=1,ya="";function Ta(e,t){En[kn++]=Rr,En[kn++]=Ki,Ki=e,Rr=t}function af(e,t,n){Xt[Wt++]=va,Xt[Wt++]=ya,Xt[Wt++]=es,es=e;var l=va;e=ya;var d=32-xt(l)-1;l&=~(1<<d),n+=1;var f=32-xt(t)+d;if(30<f){var x=d-d%5;f=(l&(1<<x)-1).toString(32),l>>=x,d-=x,va=1<<32-xt(t)+d|n<<d|l,ya=f+e}else va=1<<f|n<<d|l,ya=e}function hc(e){e.return!==null&&(Ta(e,1),af(e,1,0))}function fc(e){for(;e===Ki;)Ki=En[--kn],En[kn]=null,Rr=En[--kn],En[kn]=null;for(;e===es;)es=Xt[--Wt],Xt[Wt]=null,ya=Xt[--Wt],Xt[Wt]=null,va=Xt[--Wt],Xt[Wt]=null}function sf(e,t){Xt[Wt++]=va,Xt[Wt++]=ya,Xt[Wt++]=es,va=t.id,ya=t.overflow,es=e}var ft=null,$e=null,Ce=!1,ts=null,Zt=!1,mc=Error(o(519));function as(e){var t=Error(o(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Or(Jt(t,e)),mc}function nf(e){var t=e.stateNode,n=e.type,l=e.memoizedProps;switch(t[ht]=e,t[Ct]=l,n){case"dialog":Se("cancel",t),Se("close",t);break;case"iframe":case"object":case"embed":Se("load",t);break;case"video":case"audio":for(n=0;n<ei.length;n++)Se(ei[n],t);break;case"source":Se("error",t);break;case"img":case"image":case"link":Se("error",t),Se("load",t);break;case"details":Se("toggle",t);break;case"input":Se("invalid",t),xh(t,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":Se("invalid",t);break;case"textarea":Se("invalid",t),vh(t,l.value,l.defaultValue,l.children)}n=l.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||l.suppressHydrationWarning===!0||jg(t.textContent,n)?(l.popover!=null&&(Se("beforetoggle",t),Se("toggle",t)),l.onScroll!=null&&Se("scroll",t),l.onScrollEnd!=null&&Se("scrollend",t),l.onClick!=null&&(t.onclick=ka),t=!0):t=!1,t||as(e,!0)}function rf(e){for(ft=e.return;ft;)switch(ft.tag){case 5:case 31:case 13:Zt=!1;return;case 27:case 3:Zt=!0;return;default:ft=ft.return}}function Cn(e){if(e!==ft)return!1;if(!Ce)return rf(e),Ce=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||Ou(e.type,e.memoizedProps)),n=!n),n&&$e&&as(e),rf(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));$e=Rg(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));$e=Rg(e)}else t===27?(t=$e,ps(e.type)?(e=Bu,Bu=null,$e=e):$e=t):$e=ft?ta(e.stateNode.nextSibling):null;return!0}function qs(){$e=ft=null,Ce=!1}function gc(){var e=ts;return e!==null&&(Dt===null?Dt=e:Dt.push.apply(Dt,e),ts=null),e}function Or(e){ts===null?ts=[e]:ts.push(e)}var pc=O(null),Ps=null,Ra=null;function ss(e,t,n){G(pc,t._currentValue),t._currentValue=n}function Oa(e){e._currentValue=pc.current,H(pc)}function xc(e,t,n){for(;e!==null;){var l=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,l!==null&&(l.childLanes|=t)):l!==null&&(l.childLanes&t)!==t&&(l.childLanes|=t),e===n)break;e=e.return}}function bc(e,t,n,l){var d=e.child;for(d!==null&&(d.return=e);d!==null;){var f=d.dependencies;if(f!==null){var x=d.child;f=f.firstContext;e:for(;f!==null;){var j=f;f=d;for(var A=0;A<t.length;A++)if(j.context===t[A]){f.lanes|=n,j=f.alternate,j!==null&&(j.lanes|=n),xc(f.return,n,e),l||(x=null);break e}f=j.next}}else if(d.tag===18){if(x=d.return,x===null)throw Error(o(341));x.lanes|=n,f=x.alternate,f!==null&&(f.lanes|=n),xc(x,n,e),x=null}else x=d.child;if(x!==null)x.return=d;else for(x=d;x!==null;){if(x===e){x=null;break}if(d=x.sibling,d!==null){d.return=x.return,x=d;break}x=x.return}d=x}}function An(e,t,n,l){e=null;for(var d=t,f=!1;d!==null;){if(!f){if((d.flags&524288)!==0)f=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var x=d.alternate;if(x===null)throw Error(o(387));if(x=x.memoizedProps,x!==null){var j=d.type;Lt(d.pendingProps.value,x.value)||(e!==null?e.push(j):e=[j])}}else if(d===ue.current){if(x=d.alternate,x===null)throw Error(o(387));x.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(e!==null?e.push(ri):e=[ri])}d=d.return}e!==null&&bc(t,e,n,l),t.flags|=262144}function Fi(e){for(e=e.firstContext;e!==null;){if(!Lt(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Is(e){Ps=e,Ra=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function mt(e){return lf(Ps,e)}function Qi(e,t){return Ps===null&&Is(e),lf(e,t)}function lf(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},Ra===null){if(e===null)throw Error(o(308));Ra=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Ra=Ra.next=t;return n}var Tv=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,l){e.push(l)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},Rv=r.unstable_scheduleCallback,Ov=r.unstable_NormalPriority,Ze={$$typeof:T,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function vc(){return{controller:new Tv,data:new Map,refCount:0}}function Dr(e){e.refCount--,e.refCount===0&&Rv(Ov,function(){e.controller.abort()})}var Mr=null,yc=0,Tn=0,Rn=null;function Dv(e,t){if(Mr===null){var n=Mr=[];yc=0,Tn=Nu(),Rn={status:"pending",value:void 0,then:function(l){n.push(l)}}}return yc++,t.then(of,of),t}function of(){if(--yc===0&&Mr!==null){Rn!==null&&(Rn.status="fulfilled");var e=Mr;Mr=null,Tn=0,Rn=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function Mv(e,t){var n=[],l={status:"pending",value:null,reason:null,then:function(d){n.push(d)}};return e.then(function(){l.status="fulfilled",l.value=t;for(var d=0;d<n.length;d++)(0,n[d])(t)},function(d){for(l.status="rejected",l.reason=d,d=0;d<n.length;d++)(0,n[d])(void 0)}),l}var cf=R.S;R.S=function(e,t){Ym=We(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&Dv(e,t),cf!==null&&cf(e,t)};var $s=O(null);function wc(){var e=$s.current;return e!==null?e:qe.pooledCache}function Ji(e,t){t===null?G($s,$s.current):G($s,t.pool)}function uf(){var e=wc();return e===null?null:{parent:Ze._currentValue,pool:e}}var On=Error(o(460)),jc=Error(o(474)),Xi=Error(o(542)),Wi={then:function(){}};function df(e){return e=e.status,e==="fulfilled"||e==="rejected"}function hf(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(ka,ka),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,mf(e),e;default:if(typeof t.status=="string")t.then(ka,ka);else{if(e=qe,e!==null&&100<e.shellSuspendCounter)throw Error(o(482));e=t,e.status="pending",e.then(function(l){if(t.status==="pending"){var d=t;d.status="fulfilled",d.value=l}},function(l){if(t.status==="pending"){var d=t;d.status="rejected",d.reason=l}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,mf(e),e}throw Vs=t,On}}function Hs(e){try{var t=e._init;return t(e._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?(Vs=n,On):n}}var Vs=null;function ff(){if(Vs===null)throw Error(o(459));var e=Vs;return Vs=null,e}function mf(e){if(e===On||e===Xi)throw Error(o(483))}var Dn=null,Ur=0;function Zi(e){var t=Ur;return Ur+=1,Dn===null&&(Dn=[]),hf(Dn,e,t)}function Lr(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function el(e,t){throw t.$$typeof===N?Error(o(525)):(e=Object.prototype.toString.call(t),Error(o(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function gf(e){function t(L,D){if(e){var q=L.deletions;q===null?(L.deletions=[D],L.flags|=16):q.push(D)}}function n(L,D){if(!e)return null;for(;D!==null;)t(L,D),D=D.sibling;return null}function l(L){for(var D=new Map;L!==null;)L.key!==null?D.set(L.key,L):D.set(L.index,L),L=L.sibling;return D}function d(L,D){return L=Aa(L,D),L.index=0,L.sibling=null,L}function f(L,D,q){return L.index=q,e?(q=L.alternate,q!==null?(q=q.index,q<D?(L.flags|=67108866,D):q):(L.flags|=67108866,D)):(L.flags|=1048576,D)}function x(L){return e&&L.alternate===null&&(L.flags|=67108866),L}function j(L,D,q,W){return D===null||D.tag!==6?(D=uc(q,L.mode,W),D.return=L,D):(D=d(D,q),D.return=L,D)}function A(L,D,q,W){var me=q.type;return me===E?Q(L,D,q.props.children,W,q.key):D!==null&&(D.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===se&&Hs(me)===D.type)?(D=d(D,q.props),Lr(D,q),D.return=L,D):(D=Yi(q.type,q.key,q.props,null,L.mode,W),Lr(D,q),D.return=L,D)}function P(L,D,q,W){return D===null||D.tag!==4||D.stateNode.containerInfo!==q.containerInfo||D.stateNode.implementation!==q.implementation?(D=dc(q,L.mode,W),D.return=L,D):(D=d(D,q.children||[]),D.return=L,D)}function Q(L,D,q,W,me){return D===null||D.tag!==7?(D=zs(q,L.mode,W,me),D.return=L,D):(D=d(D,q),D.return=L,D)}function Z(L,D,q){if(typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint")return D=uc(""+D,L.mode,q),D.return=L,D;if(typeof D=="object"&&D!==null){switch(D.$$typeof){case S:return q=Yi(D.type,D.key,D.props,null,L.mode,q),Lr(q,D),q.return=L,q;case v:return D=dc(D,L.mode,q),D.return=L,D;case se:return D=Hs(D),Z(L,D,q)}if(F(D)||J(D))return D=zs(D,L.mode,q,null),D.return=L,D;if(typeof D.then=="function")return Z(L,Zi(D),q);if(D.$$typeof===T)return Z(L,Qi(L,D),q);el(L,D)}return null}function $(L,D,q,W){var me=D!==null?D.key:null;if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return me!==null?null:j(L,D,""+q,W);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case S:return q.key===me?A(L,D,q,W):null;case v:return q.key===me?P(L,D,q,W):null;case se:return q=Hs(q),$(L,D,q,W)}if(F(q)||J(q))return me!==null?null:Q(L,D,q,W,null);if(typeof q.then=="function")return $(L,D,Zi(q),W);if(q.$$typeof===T)return $(L,D,Qi(L,q),W);el(L,q)}return null}function V(L,D,q,W,me){if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return L=L.get(q)||null,j(D,L,""+W,me);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case S:return L=L.get(W.key===null?q:W.key)||null,A(D,L,W,me);case v:return L=L.get(W.key===null?q:W.key)||null,P(D,L,W,me);case se:return W=Hs(W),V(L,D,q,W,me)}if(F(W)||J(W))return L=L.get(q)||null,Q(D,L,W,me,null);if(typeof W.then=="function")return V(L,D,q,Zi(W),me);if(W.$$typeof===T)return V(L,D,q,Qi(D,W),me);el(D,W)}return null}function le(L,D,q,W){for(var me=null,Te=null,oe=D,je=D=0,ke=null;oe!==null&&je<q.length;je++){oe.index>je?(ke=oe,oe=null):ke=oe.sibling;var Re=$(L,oe,q[je],W);if(Re===null){oe===null&&(oe=ke);break}e&&oe&&Re.alternate===null&&t(L,oe),D=f(Re,D,je),Te===null?me=Re:Te.sibling=Re,Te=Re,oe=ke}if(je===q.length)return n(L,oe),Ce&&Ta(L,je),me;if(oe===null){for(;je<q.length;je++)oe=Z(L,q[je],W),oe!==null&&(D=f(oe,D,je),Te===null?me=oe:Te.sibling=oe,Te=oe);return Ce&&Ta(L,je),me}for(oe=l(oe);je<q.length;je++)ke=V(oe,L,je,q[je],W),ke!==null&&(e&&ke.alternate!==null&&oe.delete(ke.key===null?je:ke.key),D=f(ke,D,je),Te===null?me=ke:Te.sibling=ke,Te=ke);return e&&oe.forEach(function(ws){return t(L,ws)}),Ce&&Ta(L,je),me}function ge(L,D,q,W){if(q==null)throw Error(o(151));for(var me=null,Te=null,oe=D,je=D=0,ke=null,Re=q.next();oe!==null&&!Re.done;je++,Re=q.next()){oe.index>je?(ke=oe,oe=null):ke=oe.sibling;var ws=$(L,oe,Re.value,W);if(ws===null){oe===null&&(oe=ke);break}e&&oe&&ws.alternate===null&&t(L,oe),D=f(ws,D,je),Te===null?me=ws:Te.sibling=ws,Te=ws,oe=ke}if(Re.done)return n(L,oe),Ce&&Ta(L,je),me;if(oe===null){for(;!Re.done;je++,Re=q.next())Re=Z(L,Re.value,W),Re!==null&&(D=f(Re,D,je),Te===null?me=Re:Te.sibling=Re,Te=Re);return Ce&&Ta(L,je),me}for(oe=l(oe);!Re.done;je++,Re=q.next())Re=V(oe,L,je,Re.value,W),Re!==null&&(e&&Re.alternate!==null&&oe.delete(Re.key===null?je:Re.key),D=f(Re,D,je),Te===null?me=Re:Te.sibling=Re,Te=Re);return e&&oe.forEach(function(Gy){return t(L,Gy)}),Ce&&Ta(L,je),me}function ze(L,D,q,W){if(typeof q=="object"&&q!==null&&q.type===E&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case S:e:{for(var me=q.key;D!==null;){if(D.key===me){if(me=q.type,me===E){if(D.tag===7){n(L,D.sibling),W=d(D,q.props.children),W.return=L,L=W;break e}}else if(D.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===se&&Hs(me)===D.type){n(L,D.sibling),W=d(D,q.props),Lr(W,q),W.return=L,L=W;break e}n(L,D);break}else t(L,D);D=D.sibling}q.type===E?(W=zs(q.props.children,L.mode,W,q.key),W.return=L,L=W):(W=Yi(q.type,q.key,q.props,null,L.mode,W),Lr(W,q),W.return=L,L=W)}return x(L);case v:e:{for(me=q.key;D!==null;){if(D.key===me)if(D.tag===4&&D.stateNode.containerInfo===q.containerInfo&&D.stateNode.implementation===q.implementation){n(L,D.sibling),W=d(D,q.children||[]),W.return=L,L=W;break e}else{n(L,D);break}else t(L,D);D=D.sibling}W=dc(q,L.mode,W),W.return=L,L=W}return x(L);case se:return q=Hs(q),ze(L,D,q,W)}if(F(q))return le(L,D,q,W);if(J(q)){if(me=J(q),typeof me!="function")throw Error(o(150));return q=me.call(q),ge(L,D,q,W)}if(typeof q.then=="function")return ze(L,D,Zi(q),W);if(q.$$typeof===T)return ze(L,D,Qi(L,q),W);el(L,q)}return typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint"?(q=""+q,D!==null&&D.tag===6?(n(L,D.sibling),W=d(D,q),W.return=L,L=W):(n(L,D),W=uc(q,L.mode,W),W.return=L,L=W),x(L)):n(L,D)}return function(L,D,q,W){try{Ur=0;var me=ze(L,D,q,W);return Dn=null,me}catch(oe){if(oe===On||oe===Xi)throw oe;var Te=Bt(29,oe,null,L.mode);return Te.lanes=W,Te.return=L,Te}finally{}}}var Gs=gf(!0),pf=gf(!1),ns=!1;function Nc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function _c(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function rs(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function is(e,t,n){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(Oe&2)!==0){var d=l.pending;return d===null?t.next=t:(t.next=d.next,d.next=t),l.pending=t,t=Gi(e),Wh(e,null,n),t}return Vi(e,l,t,n),Gi(e)}function Br(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194048)!==0)){var l=t.lanes;l&=e.pendingLanes,n|=l,t.lanes=n,ih(e,n)}}function Sc(e,t){var n=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,n===l)){var d=null,f=null;if(n=n.firstBaseUpdate,n!==null){do{var x={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};f===null?d=f=x:f=f.next=x,n=n.next}while(n!==null);f===null?d=f=t:f=f.next=t}else d=f=t;n={baseState:l.baseState,firstBaseUpdate:d,lastBaseUpdate:f,shared:l.shared,callbacks:l.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var Ec=!1;function zr(){if(Ec){var e=Rn;if(e!==null)throw e}}function qr(e,t,n,l){Ec=!1;var d=e.updateQueue;ns=!1;var f=d.firstBaseUpdate,x=d.lastBaseUpdate,j=d.shared.pending;if(j!==null){d.shared.pending=null;var A=j,P=A.next;A.next=null,x===null?f=P:x.next=P,x=A;var Q=e.alternate;Q!==null&&(Q=Q.updateQueue,j=Q.lastBaseUpdate,j!==x&&(j===null?Q.firstBaseUpdate=P:j.next=P,Q.lastBaseUpdate=A))}if(f!==null){var Z=d.baseState;x=0,Q=P=A=null,j=f;do{var $=j.lane&-536870913,V=$!==j.lane;if(V?(Ee&$)===$:(l&$)===$){$!==0&&$===Tn&&(Ec=!0),Q!==null&&(Q=Q.next={lane:0,tag:j.tag,payload:j.payload,callback:null,next:null});e:{var le=e,ge=j;$=t;var ze=n;switch(ge.tag){case 1:if(le=ge.payload,typeof le=="function"){Z=le.call(ze,Z,$);break e}Z=le;break e;case 3:le.flags=le.flags&-65537|128;case 0:if(le=ge.payload,$=typeof le=="function"?le.call(ze,Z,$):le,$==null)break e;Z=w({},Z,$);break e;case 2:ns=!0}}$=j.callback,$!==null&&(e.flags|=64,V&&(e.flags|=8192),V=d.callbacks,V===null?d.callbacks=[$]:V.push($))}else V={lane:$,tag:j.tag,payload:j.payload,callback:j.callback,next:null},Q===null?(P=Q=V,A=Z):Q=Q.next=V,x|=$;if(j=j.next,j===null){if(j=d.shared.pending,j===null)break;V=j,j=V.next,V.next=null,d.lastBaseUpdate=V,d.shared.pending=null}}while(!0);Q===null&&(A=Z),d.baseState=A,d.firstBaseUpdate=P,d.lastBaseUpdate=Q,f===null&&(d.shared.lanes=0),ds|=x,e.lanes=x,e.memoizedState=Z}}function xf(e,t){if(typeof e!="function")throw Error(o(191,e));e.call(t)}function bf(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)xf(n[e],t)}var Mn=O(null),tl=O(0);function vf(e,t){e=Ia,G(tl,e),G(Mn,t),Ia=e|t.baseLanes}function kc(){G(tl,Ia),G(Mn,Mn.current)}function Cc(){Ia=tl.current,H(Mn),H(tl)}var zt=O(null),ea=null;function ls(e){var t=e.alternate;G(Je,Je.current&1),G(zt,e),ea===null&&(t===null||Mn.current!==null||t.memoizedState!==null)&&(ea=e)}function Ac(e){G(Je,Je.current),G(zt,e),ea===null&&(ea=e)}function yf(e){e.tag===22?(G(Je,Je.current),G(zt,e),ea===null&&(ea=e)):os()}function os(){G(Je,Je.current),G(zt,zt.current)}function qt(e){H(zt),ea===e&&(ea=null),H(Je)}var Je=O(0);function al(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||Uu(n)||Lu(n)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Da=0,we=null,Le=null,et=null,sl=!1,Un=!1,Ys=!1,nl=0,Pr=0,Ln=null,Uv=0;function Fe(){throw Error(o(321))}function Tc(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Lt(e[n],t[n]))return!1;return!0}function Rc(e,t,n,l,d,f){return Da=f,we=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,R.H=e===null||e.memoizedState===null?sm:Yc,Ys=!1,f=n(l,d),Ys=!1,Un&&(f=jf(t,n,l,d)),wf(e),f}function wf(e){R.H=Hr;var t=Le!==null&&Le.next!==null;if(Da=0,et=Le=we=null,sl=!1,Pr=0,Ln=null,t)throw Error(o(300));e===null||tt||(e=e.dependencies,e!==null&&Fi(e)&&(tt=!0))}function jf(e,t,n,l){we=e;var d=0;do{if(Un&&(Ln=null),Pr=0,Un=!1,25<=d)throw Error(o(301));if(d+=1,et=Le=null,e.updateQueue!=null){var f=e.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}R.H=nm,f=t(n,l)}while(Un);return f}function Lv(){var e=R.H,t=e.useState()[0];return t=typeof t.then=="function"?Ir(t):t,e=e.useState()[0],(Le!==null?Le.memoizedState:null)!==e&&(we.flags|=1024),t}function Oc(){var e=nl!==0;return nl=0,e}function Dc(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Mc(e){if(sl){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}sl=!1}Da=0,et=Le=we=null,Un=!1,Pr=nl=0,Ln=null}function Nt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return et===null?we.memoizedState=et=e:et=et.next=e,et}function Xe(){if(Le===null){var e=we.alternate;e=e!==null?e.memoizedState:null}else e=Le.next;var t=et===null?we.memoizedState:et.next;if(t!==null)et=t,Le=e;else{if(e===null)throw we.alternate===null?Error(o(467)):Error(o(310));Le=e,e={memoizedState:Le.memoizedState,baseState:Le.baseState,baseQueue:Le.baseQueue,queue:Le.queue,next:null},et===null?we.memoizedState=et=e:et=et.next=e}return et}function rl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ir(e){var t=Pr;return Pr+=1,Ln===null&&(Ln=[]),e=hf(Ln,e,t),t=we,(et===null?t.memoizedState:et.next)===null&&(t=t.alternate,R.H=t===null||t.memoizedState===null?sm:Yc),e}function il(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Ir(e);if(e.$$typeof===T)return mt(e)}throw Error(o(438,String(e)))}function Uc(e){var t=null,n=we.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var l=we.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(t={data:l.data.map(function(d){return d.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=rl(),we.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),l=0;l<e;l++)n[l]=te;return t.index++,n}function Ma(e,t){return typeof t=="function"?t(e):t}function ll(e){var t=Xe();return Lc(t,Le,e)}function Lc(e,t,n){var l=e.queue;if(l===null)throw Error(o(311));l.lastRenderedReducer=n;var d=e.baseQueue,f=l.pending;if(f!==null){if(d!==null){var x=d.next;d.next=f.next,f.next=x}t.baseQueue=d=f,l.pending=null}if(f=e.baseState,d===null)e.memoizedState=f;else{t=d.next;var j=x=null,A=null,P=t,Q=!1;do{var Z=P.lane&-536870913;if(Z!==P.lane?(Ee&Z)===Z:(Da&Z)===Z){var $=P.revertLane;if($===0)A!==null&&(A=A.next={lane:0,revertLane:0,gesture:null,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null}),Z===Tn&&(Q=!0);else if((Da&$)===$){P=P.next,$===Tn&&(Q=!0);continue}else Z={lane:0,revertLane:P.revertLane,gesture:null,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null},A===null?(j=A=Z,x=f):A=A.next=Z,we.lanes|=$,ds|=$;Z=P.action,Ys&&n(f,Z),f=P.hasEagerState?P.eagerState:n(f,Z)}else $={lane:Z,revertLane:P.revertLane,gesture:P.gesture,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null},A===null?(j=A=$,x=f):A=A.next=$,we.lanes|=Z,ds|=Z;P=P.next}while(P!==null&&P!==t);if(A===null?x=f:A.next=j,!Lt(f,e.memoizedState)&&(tt=!0,Q&&(n=Rn,n!==null)))throw n;e.memoizedState=f,e.baseState=x,e.baseQueue=A,l.lastRenderedState=f}return d===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function Bc(e){var t=Xe(),n=t.queue;if(n===null)throw Error(o(311));n.lastRenderedReducer=e;var l=n.dispatch,d=n.pending,f=t.memoizedState;if(d!==null){n.pending=null;var x=d=d.next;do f=e(f,x.action),x=x.next;while(x!==d);Lt(f,t.memoizedState)||(tt=!0),t.memoizedState=f,t.baseQueue===null&&(t.baseState=f),n.lastRenderedState=f}return[f,l]}function Nf(e,t,n){var l=we,d=Xe(),f=Ce;if(f){if(n===void 0)throw Error(o(407));n=n()}else n=t();var x=!Lt((Le||d).memoizedState,n);if(x&&(d.memoizedState=n,tt=!0),d=d.queue,Pc(Ef.bind(null,l,d,e),[e]),d.getSnapshot!==t||x||et!==null&&et.memoizedState.tag&1){if(l.flags|=2048,Bn(9,{destroy:void 0},Sf.bind(null,l,d,n,t),null),qe===null)throw Error(o(349));f||(Da&127)!==0||_f(l,t,n)}return n}function _f(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=we.updateQueue,t===null?(t=rl(),we.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Sf(e,t,n,l){t.value=n,t.getSnapshot=l,kf(t)&&Cf(e)}function Ef(e,t,n){return n(function(){kf(t)&&Cf(e)})}function kf(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Lt(e,n)}catch{return!0}}function Cf(e){var t=Bs(e,2);t!==null&&Mt(t,e,2)}function zc(e){var t=Nt();if(typeof e=="function"){var n=e;if(e=n(),Ys){ba(!0);try{n()}finally{ba(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ma,lastRenderedState:e},t}function Af(e,t,n,l){return e.baseState=n,Lc(e,Le,typeof l=="function"?l:Ma)}function Bv(e,t,n,l,d){if(ul(e))throw Error(o(485));if(e=t.action,e!==null){var f={payload:d,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(x){f.listeners.push(x)}};R.T!==null?n(!0):f.isTransition=!1,l(f),n=t.pending,n===null?(f.next=t.pending=f,Tf(t,f)):(f.next=n.next,t.pending=n.next=f)}}function Tf(e,t){var n=t.action,l=t.payload,d=e.state;if(t.isTransition){var f=R.T,x={};R.T=x;try{var j=n(d,l),A=R.S;A!==null&&A(x,j),Rf(e,t,j)}catch(P){qc(e,t,P)}finally{f!==null&&x.types!==null&&(f.types=x.types),R.T=f}}else try{f=n(d,l),Rf(e,t,f)}catch(P){qc(e,t,P)}}function Rf(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(l){Of(e,t,l)},function(l){return qc(e,t,l)}):Of(e,t,n)}function Of(e,t,n){t.status="fulfilled",t.value=n,Df(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,Tf(e,n)))}function qc(e,t,n){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do t.status="rejected",t.reason=n,Df(t),t=t.next;while(t!==l)}e.action=null}function Df(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Mf(e,t){return t}function Uf(e,t){if(Ce){var n=qe.formState;if(n!==null){e:{var l=we;if(Ce){if($e){t:{for(var d=$e,f=Zt;d.nodeType!==8;){if(!f){d=null;break t}if(d=ta(d.nextSibling),d===null){d=null;break t}}f=d.data,d=f==="F!"||f==="F"?d:null}if(d){$e=ta(d.nextSibling),l=d.data==="F!";break e}}as(l)}l=!1}l&&(t=n[0])}}return n=Nt(),n.memoizedState=n.baseState=t,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mf,lastRenderedState:t},n.queue=l,n=em.bind(null,we,l),l.dispatch=n,l=zc(!1),f=Gc.bind(null,we,!1,l.queue),l=Nt(),d={state:t,dispatch:null,action:e,pending:null},l.queue=d,n=Bv.bind(null,we,d,f,n),d.dispatch=n,l.memoizedState=e,[t,n,!1]}function Lf(e){var t=Xe();return Bf(t,Le,e)}function Bf(e,t,n){if(t=Lc(e,t,Mf)[0],e=ll(Ma)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var l=Ir(t)}catch(x){throw x===On?Xi:x}else l=t;t=Xe();var d=t.queue,f=d.dispatch;return n!==t.memoizedState&&(we.flags|=2048,Bn(9,{destroy:void 0},zv.bind(null,d,n),null)),[l,f,e]}function zv(e,t){e.action=t}function zf(e){var t=Xe(),n=Le;if(n!==null)return Bf(t,n,e);Xe(),t=t.memoizedState,n=Xe();var l=n.queue.dispatch;return n.memoizedState=e,[t,l,!1]}function Bn(e,t,n,l){return e={tag:e,create:n,deps:l,inst:t,next:null},t=we.updateQueue,t===null&&(t=rl(),we.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(l=n.next,n.next=e,e.next=l,t.lastEffect=e),e}function qf(){return Xe().memoizedState}function ol(e,t,n,l){var d=Nt();we.flags|=e,d.memoizedState=Bn(1|t,{destroy:void 0},n,l===void 0?null:l)}function cl(e,t,n,l){var d=Xe();l=l===void 0?null:l;var f=d.memoizedState.inst;Le!==null&&l!==null&&Tc(l,Le.memoizedState.deps)?d.memoizedState=Bn(t,f,n,l):(we.flags|=e,d.memoizedState=Bn(1|t,f,n,l))}function Pf(e,t){ol(8390656,8,e,t)}function Pc(e,t){cl(2048,8,e,t)}function qv(e){we.flags|=4;var t=we.updateQueue;if(t===null)t=rl(),we.updateQueue=t,t.events=[e];else{var n=t.events;n===null?t.events=[e]:n.push(e)}}function If(e){var t=Xe().memoizedState;return qv({ref:t,nextImpl:e}),function(){if((Oe&2)!==0)throw Error(o(440));return t.impl.apply(void 0,arguments)}}function $f(e,t){return cl(4,2,e,t)}function Hf(e,t){return cl(4,4,e,t)}function Vf(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Gf(e,t,n){n=n!=null?n.concat([e]):null,cl(4,4,Vf.bind(null,t,e),n)}function Ic(){}function Yf(e,t){var n=Xe();t=t===void 0?null:t;var l=n.memoizedState;return t!==null&&Tc(t,l[1])?l[0]:(n.memoizedState=[e,t],e)}function Kf(e,t){var n=Xe();t=t===void 0?null:t;var l=n.memoizedState;if(t!==null&&Tc(t,l[1]))return l[0];if(l=e(),Ys){ba(!0);try{e()}finally{ba(!1)}}return n.memoizedState=[l,t],l}function $c(e,t,n){return n===void 0||(Da&1073741824)!==0&&(Ee&261930)===0?e.memoizedState=t:(e.memoizedState=n,e=Fm(),we.lanes|=e,ds|=e,n)}function Ff(e,t,n,l){return Lt(n,t)?n:Mn.current!==null?(e=$c(e,n,l),Lt(e,t)||(tt=!0),e):(Da&42)===0||(Da&1073741824)!==0&&(Ee&261930)===0?(tt=!0,e.memoizedState=n):(e=Fm(),we.lanes|=e,ds|=e,t)}function Qf(e,t,n,l,d){var f=Y.p;Y.p=f!==0&&8>f?f:8;var x=R.T,j={};R.T=j,Gc(e,!1,t,n);try{var A=d(),P=R.S;if(P!==null&&P(j,A),A!==null&&typeof A=="object"&&typeof A.then=="function"){var Q=Mv(A,l);$r(e,t,Q,$t(e))}else $r(e,t,l,$t(e))}catch(Z){$r(e,t,{then:function(){},status:"rejected",reason:Z},$t())}finally{Y.p=f,x!==null&&j.types!==null&&(x.types=j.types),R.T=x}}function Pv(){}function Hc(e,t,n,l){if(e.tag!==5)throw Error(o(476));var d=Jf(e).queue;Qf(e,d,t,ne,n===null?Pv:function(){return Xf(e),n(l)})}function Jf(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:ne,baseState:ne,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ma,lastRenderedState:ne},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ma,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Xf(e){var t=Jf(e);t.next===null&&(t=e.alternate.memoizedState),$r(e,t.next.queue,{},$t())}function Vc(){return mt(ri)}function Wf(){return Xe().memoizedState}function Zf(){return Xe().memoizedState}function Iv(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=$t();e=rs(n);var l=is(t,e,n);l!==null&&(Mt(l,t,n),Br(l,t,n)),t={cache:vc()},e.payload=t;return}t=t.return}}function $v(e,t,n){var l=$t();n={lane:l,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},ul(e)?tm(t,n):(n=oc(e,t,n,l),n!==null&&(Mt(n,e,l),am(n,t,l)))}function em(e,t,n){var l=$t();$r(e,t,n,l)}function $r(e,t,n,l){var d={lane:l,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(ul(e))tm(t,d);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=t.lastRenderedReducer,f!==null))try{var x=t.lastRenderedState,j=f(x,n);if(d.hasEagerState=!0,d.eagerState=j,Lt(j,x))return Vi(e,t,d,0),qe===null&&Hi(),!1}catch{}finally{}if(n=oc(e,t,d,l),n!==null)return Mt(n,e,l),am(n,t,l),!0}return!1}function Gc(e,t,n,l){if(l={lane:2,revertLane:Nu(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},ul(e)){if(t)throw Error(o(479))}else t=oc(e,n,l,2),t!==null&&Mt(t,e,2)}function ul(e){var t=e.alternate;return e===we||t!==null&&t===we}function tm(e,t){Un=sl=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function am(e,t,n){if((n&4194048)!==0){var l=t.lanes;l&=e.pendingLanes,n|=l,t.lanes=n,ih(e,n)}}var Hr={readContext:mt,use:il,useCallback:Fe,useContext:Fe,useEffect:Fe,useImperativeHandle:Fe,useLayoutEffect:Fe,useInsertionEffect:Fe,useMemo:Fe,useReducer:Fe,useRef:Fe,useState:Fe,useDebugValue:Fe,useDeferredValue:Fe,useTransition:Fe,useSyncExternalStore:Fe,useId:Fe,useHostTransitionStatus:Fe,useFormState:Fe,useActionState:Fe,useOptimistic:Fe,useMemoCache:Fe,useCacheRefresh:Fe};Hr.useEffectEvent=Fe;var sm={readContext:mt,use:il,useCallback:function(e,t){return Nt().memoizedState=[e,t===void 0?null:t],e},useContext:mt,useEffect:Pf,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,ol(4194308,4,Vf.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ol(4194308,4,e,t)},useInsertionEffect:function(e,t){ol(4,2,e,t)},useMemo:function(e,t){var n=Nt();t=t===void 0?null:t;var l=e();if(Ys){ba(!0);try{e()}finally{ba(!1)}}return n.memoizedState=[l,t],l},useReducer:function(e,t,n){var l=Nt();if(n!==void 0){var d=n(t);if(Ys){ba(!0);try{n(t)}finally{ba(!1)}}}else d=t;return l.memoizedState=l.baseState=d,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:d},l.queue=e,e=e.dispatch=$v.bind(null,we,e),[l.memoizedState,e]},useRef:function(e){var t=Nt();return e={current:e},t.memoizedState=e},useState:function(e){e=zc(e);var t=e.queue,n=em.bind(null,we,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Ic,useDeferredValue:function(e,t){var n=Nt();return $c(n,e,t)},useTransition:function(){var e=zc(!1);return e=Qf.bind(null,we,e.queue,!0,!1),Nt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var l=we,d=Nt();if(Ce){if(n===void 0)throw Error(o(407));n=n()}else{if(n=t(),qe===null)throw Error(o(349));(Ee&127)!==0||_f(l,t,n)}d.memoizedState=n;var f={value:n,getSnapshot:t};return d.queue=f,Pf(Ef.bind(null,l,f,e),[e]),l.flags|=2048,Bn(9,{destroy:void 0},Sf.bind(null,l,f,n,t),null),n},useId:function(){var e=Nt(),t=qe.identifierPrefix;if(Ce){var n=ya,l=va;n=(l&~(1<<32-xt(l)-1)).toString(32)+n,t="_"+t+"R_"+n,n=nl++,0<n&&(t+="H"+n.toString(32)),t+="_"}else n=Uv++,t="_"+t+"r_"+n.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:Vc,useFormState:Uf,useActionState:Uf,useOptimistic:function(e){var t=Nt();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=Gc.bind(null,we,!0,n),n.dispatch=t,[e,t]},useMemoCache:Uc,useCacheRefresh:function(){return Nt().memoizedState=Iv.bind(null,we)},useEffectEvent:function(e){var t=Nt(),n={impl:e};return t.memoizedState=n,function(){if((Oe&2)!==0)throw Error(o(440));return n.impl.apply(void 0,arguments)}}},Yc={readContext:mt,use:il,useCallback:Yf,useContext:mt,useEffect:Pc,useImperativeHandle:Gf,useInsertionEffect:$f,useLayoutEffect:Hf,useMemo:Kf,useReducer:ll,useRef:qf,useState:function(){return ll(Ma)},useDebugValue:Ic,useDeferredValue:function(e,t){var n=Xe();return Ff(n,Le.memoizedState,e,t)},useTransition:function(){var e=ll(Ma)[0],t=Xe().memoizedState;return[typeof e=="boolean"?e:Ir(e),t]},useSyncExternalStore:Nf,useId:Wf,useHostTransitionStatus:Vc,useFormState:Lf,useActionState:Lf,useOptimistic:function(e,t){var n=Xe();return Af(n,Le,e,t)},useMemoCache:Uc,useCacheRefresh:Zf};Yc.useEffectEvent=If;var nm={readContext:mt,use:il,useCallback:Yf,useContext:mt,useEffect:Pc,useImperativeHandle:Gf,useInsertionEffect:$f,useLayoutEffect:Hf,useMemo:Kf,useReducer:Bc,useRef:qf,useState:function(){return Bc(Ma)},useDebugValue:Ic,useDeferredValue:function(e,t){var n=Xe();return Le===null?$c(n,e,t):Ff(n,Le.memoizedState,e,t)},useTransition:function(){var e=Bc(Ma)[0],t=Xe().memoizedState;return[typeof e=="boolean"?e:Ir(e),t]},useSyncExternalStore:Nf,useId:Wf,useHostTransitionStatus:Vc,useFormState:zf,useActionState:zf,useOptimistic:function(e,t){var n=Xe();return Le!==null?Af(n,Le,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:Uc,useCacheRefresh:Zf};nm.useEffectEvent=If;function Kc(e,t,n,l){t=e.memoizedState,n=n(l,t),n=n==null?t:w({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Fc={enqueueSetState:function(e,t,n){e=e._reactInternals;var l=$t(),d=rs(l);d.payload=t,n!=null&&(d.callback=n),t=is(e,d,l),t!==null&&(Mt(t,e,l),Br(t,e,l))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var l=$t(),d=rs(l);d.tag=1,d.payload=t,n!=null&&(d.callback=n),t=is(e,d,l),t!==null&&(Mt(t,e,l),Br(t,e,l))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=$t(),l=rs(n);l.tag=2,t!=null&&(l.callback=t),t=is(e,l,n),t!==null&&(Mt(t,e,n),Br(t,e,n))}};function rm(e,t,n,l,d,f,x){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,f,x):t.prototype&&t.prototype.isPureReactComponent?!Ar(n,l)||!Ar(d,f):!0}function im(e,t,n,l){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,l),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,l),t.state!==e&&Fc.enqueueReplaceState(t,t.state,null)}function Ks(e,t){var n=t;if("ref"in t){n={};for(var l in t)l!=="ref"&&(n[l]=t[l])}if(e=e.defaultProps){n===t&&(n=w({},n));for(var d in e)n[d]===void 0&&(n[d]=e[d])}return n}function lm(e){$i(e)}function om(e){console.error(e)}function cm(e){$i(e)}function dl(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(l){setTimeout(function(){throw l})}}function um(e,t,n){try{var l=e.onCaughtError;l(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function Qc(e,t,n){return n=rs(n),n.tag=3,n.payload={element:null},n.callback=function(){dl(e,t)},n}function dm(e){return e=rs(e),e.tag=3,e}function hm(e,t,n,l){var d=n.type.getDerivedStateFromError;if(typeof d=="function"){var f=l.value;e.payload=function(){return d(f)},e.callback=function(){um(t,n,l)}}var x=n.stateNode;x!==null&&typeof x.componentDidCatch=="function"&&(e.callback=function(){um(t,n,l),typeof d!="function"&&(hs===null?hs=new Set([this]):hs.add(this));var j=l.stack;this.componentDidCatch(l.value,{componentStack:j!==null?j:""})})}function Hv(e,t,n,l,d){if(n.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(t=n.alternate,t!==null&&An(t,n,d,!0),n=zt.current,n!==null){switch(n.tag){case 31:case 13:return ea===null?Nl():n.alternate===null&&Qe===0&&(Qe=3),n.flags&=-257,n.flags|=65536,n.lanes=d,l===Wi?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([l]):t.add(l),yu(e,l,d)),!1;case 22:return n.flags|=65536,l===Wi?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([l])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([l]):n.add(l)),yu(e,l,d)),!1}throw Error(o(435,n.tag))}return yu(e,l,d),Nl(),!1}if(Ce)return t=zt.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=d,l!==mc&&(e=Error(o(422),{cause:l}),Or(Jt(e,n)))):(l!==mc&&(t=Error(o(423),{cause:l}),Or(Jt(t,n))),e=e.current.alternate,e.flags|=65536,d&=-d,e.lanes|=d,l=Jt(l,n),d=Qc(e.stateNode,l,d),Sc(e,d),Qe!==4&&(Qe=2)),!1;var f=Error(o(520),{cause:l});if(f=Jt(f,n),Xr===null?Xr=[f]:Xr.push(f),Qe!==4&&(Qe=2),t===null)return!0;l=Jt(l,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=d&-d,n.lanes|=e,e=Qc(n.stateNode,l,e),Sc(n,e),!1;case 1:if(t=n.type,f=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(hs===null||!hs.has(f))))return n.flags|=65536,d&=-d,n.lanes|=d,d=dm(d),hm(d,e,n,l),Sc(n,d),!1}n=n.return}while(n!==null);return!1}var Jc=Error(o(461)),tt=!1;function gt(e,t,n,l){t.child=e===null?pf(t,null,n,l):Gs(t,e.child,n,l)}function fm(e,t,n,l,d){n=n.render;var f=t.ref;if("ref"in l){var x={};for(var j in l)j!=="ref"&&(x[j]=l[j])}else x=l;return Is(t),l=Rc(e,t,n,x,f,d),j=Oc(),e!==null&&!tt?(Dc(e,t,d),Ua(e,t,d)):(Ce&&j&&hc(t),t.flags|=1,gt(e,t,l,d),t.child)}function mm(e,t,n,l,d){if(e===null){var f=n.type;return typeof f=="function"&&!cc(f)&&f.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=f,gm(e,t,f,l,d)):(e=Yi(n.type,null,l,t,t.mode,d),e.ref=t.ref,e.return=t,t.child=e)}if(f=e.child,!nu(e,d)){var x=f.memoizedProps;if(n=n.compare,n=n!==null?n:Ar,n(x,l)&&e.ref===t.ref)return Ua(e,t,d)}return t.flags|=1,e=Aa(f,l),e.ref=t.ref,e.return=t,t.child=e}function gm(e,t,n,l,d){if(e!==null){var f=e.memoizedProps;if(Ar(f,l)&&e.ref===t.ref)if(tt=!1,t.pendingProps=l=f,nu(e,d))(e.flags&131072)!==0&&(tt=!0);else return t.lanes=e.lanes,Ua(e,t,d)}return Xc(e,t,n,l,d)}function pm(e,t,n,l){var d=l.children,f=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((t.flags&128)!==0){if(f=f!==null?f.baseLanes|n:n,e!==null){for(l=t.child=e.child,d=0;l!==null;)d=d|l.lanes|l.childLanes,l=l.sibling;l=d&~f}else l=0,t.child=null;return xm(e,t,f,n,l)}if((n&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&Ji(t,f!==null?f.cachePool:null),f!==null?vf(t,f):kc(),yf(t);else return l=t.lanes=536870912,xm(e,t,f!==null?f.baseLanes|n:n,n,l)}else f!==null?(Ji(t,f.cachePool),vf(t,f),os(),t.memoizedState=null):(e!==null&&Ji(t,null),kc(),os());return gt(e,t,d,n),t.child}function Vr(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function xm(e,t,n,l,d){var f=wc();return f=f===null?null:{parent:Ze._currentValue,pool:f},t.memoizedState={baseLanes:n,cachePool:f},e!==null&&Ji(t,null),kc(),yf(t),e!==null&&An(e,t,l,!0),t.childLanes=d,null}function hl(e,t){return t=ml({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function bm(e,t,n){return Gs(t,e.child,null,n),e=hl(t,t.pendingProps),e.flags|=2,qt(t),t.memoizedState=null,e}function Vv(e,t,n){var l=t.pendingProps,d=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(Ce){if(l.mode==="hidden")return e=hl(t,l),t.lanes=536870912,Vr(null,e);if(Ac(t),(e=$e)?(e=Tg(e,Zt),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:es!==null?{id:va,overflow:ya}:null,retryLane:536870912,hydrationErrors:null},n=ef(e),n.return=t,t.child=n,ft=t,$e=null)):e=null,e===null)throw as(t);return t.lanes=536870912,null}return hl(t,l)}var f=e.memoizedState;if(f!==null){var x=f.dehydrated;if(Ac(t),d)if(t.flags&256)t.flags&=-257,t=bm(e,t,n);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(o(558));else if(tt||An(e,t,n,!1),d=(n&e.childLanes)!==0,tt||d){if(l=qe,l!==null&&(x=lh(l,n),x!==0&&x!==f.retryLane))throw f.retryLane=x,Bs(e,x),Mt(l,e,x),Jc;Nl(),t=bm(e,t,n)}else e=f.treeContext,$e=ta(x.nextSibling),ft=t,Ce=!0,ts=null,Zt=!1,e!==null&&sf(t,e),t=hl(t,l),t.flags|=4096;return t}return e=Aa(e.child,{mode:l.mode,children:l.children}),e.ref=t.ref,t.child=e,e.return=t,e}function fl(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(o(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function Xc(e,t,n,l,d){return Is(t),n=Rc(e,t,n,l,void 0,d),l=Oc(),e!==null&&!tt?(Dc(e,t,d),Ua(e,t,d)):(Ce&&l&&hc(t),t.flags|=1,gt(e,t,n,d),t.child)}function vm(e,t,n,l,d,f){return Is(t),t.updateQueue=null,n=jf(t,l,n,d),wf(e),l=Oc(),e!==null&&!tt?(Dc(e,t,f),Ua(e,t,f)):(Ce&&l&&hc(t),t.flags|=1,gt(e,t,n,f),t.child)}function ym(e,t,n,l,d){if(Is(t),t.stateNode===null){var f=Sn,x=n.contextType;typeof x=="object"&&x!==null&&(f=mt(x)),f=new n(l,f),t.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=Fc,t.stateNode=f,f._reactInternals=t,f=t.stateNode,f.props=l,f.state=t.memoizedState,f.refs={},Nc(t),x=n.contextType,f.context=typeof x=="object"&&x!==null?mt(x):Sn,f.state=t.memoizedState,x=n.getDerivedStateFromProps,typeof x=="function"&&(Kc(t,n,x,l),f.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(x=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),x!==f.state&&Fc.enqueueReplaceState(f,f.state,null),qr(t,l,f,d),zr(),f.state=t.memoizedState),typeof f.componentDidMount=="function"&&(t.flags|=4194308),l=!0}else if(e===null){f=t.stateNode;var j=t.memoizedProps,A=Ks(n,j);f.props=A;var P=f.context,Q=n.contextType;x=Sn,typeof Q=="object"&&Q!==null&&(x=mt(Q));var Z=n.getDerivedStateFromProps;Q=typeof Z=="function"||typeof f.getSnapshotBeforeUpdate=="function",j=t.pendingProps!==j,Q||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(j||P!==x)&&im(t,f,l,x),ns=!1;var $=t.memoizedState;f.state=$,qr(t,l,f,d),zr(),P=t.memoizedState,j||$!==P||ns?(typeof Z=="function"&&(Kc(t,n,Z,l),P=t.memoizedState),(A=ns||rm(t,n,A,l,$,P,x))?(Q||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(t.flags|=4194308)):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=l,t.memoizedState=P),f.props=l,f.state=P,f.context=x,l=A):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),l=!1)}else{f=t.stateNode,_c(e,t),x=t.memoizedProps,Q=Ks(n,x),f.props=Q,Z=t.pendingProps,$=f.context,P=n.contextType,A=Sn,typeof P=="object"&&P!==null&&(A=mt(P)),j=n.getDerivedStateFromProps,(P=typeof j=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(x!==Z||$!==A)&&im(t,f,l,A),ns=!1,$=t.memoizedState,f.state=$,qr(t,l,f,d),zr();var V=t.memoizedState;x!==Z||$!==V||ns||e!==null&&e.dependencies!==null&&Fi(e.dependencies)?(typeof j=="function"&&(Kc(t,n,j,l),V=t.memoizedState),(Q=ns||rm(t,n,Q,l,$,V,A)||e!==null&&e.dependencies!==null&&Fi(e.dependencies))?(P||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(l,V,A),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(l,V,A)),typeof f.componentDidUpdate=="function"&&(t.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof f.componentDidUpdate!="function"||x===e.memoizedProps&&$===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||x===e.memoizedProps&&$===e.memoizedState||(t.flags|=1024),t.memoizedProps=l,t.memoizedState=V),f.props=l,f.state=V,f.context=A,l=Q):(typeof f.componentDidUpdate!="function"||x===e.memoizedProps&&$===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||x===e.memoizedProps&&$===e.memoizedState||(t.flags|=1024),l=!1)}return f=l,fl(e,t),l=(t.flags&128)!==0,f||l?(f=t.stateNode,n=l&&typeof n.getDerivedStateFromError!="function"?null:f.render(),t.flags|=1,e!==null&&l?(t.child=Gs(t,e.child,null,d),t.child=Gs(t,null,n,d)):gt(e,t,n,d),t.memoizedState=f.state,e=t.child):e=Ua(e,t,d),e}function wm(e,t,n,l){return qs(),t.flags|=256,gt(e,t,n,l),t.child}var Wc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Zc(e){return{baseLanes:e,cachePool:uf()}}function eu(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=It),e}function jm(e,t,n){var l=t.pendingProps,d=!1,f=(t.flags&128)!==0,x;if((x=f)||(x=e!==null&&e.memoizedState===null?!1:(Je.current&2)!==0),x&&(d=!0,t.flags&=-129),x=(t.flags&32)!==0,t.flags&=-33,e===null){if(Ce){if(d?ls(t):os(),(e=$e)?(e=Tg(e,Zt),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:es!==null?{id:va,overflow:ya}:null,retryLane:536870912,hydrationErrors:null},n=ef(e),n.return=t,t.child=n,ft=t,$e=null)):e=null,e===null)throw as(t);return Lu(e)?t.lanes=32:t.lanes=536870912,null}var j=l.children;return l=l.fallback,d?(os(),d=t.mode,j=ml({mode:"hidden",children:j},d),l=zs(l,d,n,null),j.return=t,l.return=t,j.sibling=l,t.child=j,l=t.child,l.memoizedState=Zc(n),l.childLanes=eu(e,x,n),t.memoizedState=Wc,Vr(null,l)):(ls(t),tu(t,j))}var A=e.memoizedState;if(A!==null&&(j=A.dehydrated,j!==null)){if(f)t.flags&256?(ls(t),t.flags&=-257,t=au(e,t,n)):t.memoizedState!==null?(os(),t.child=e.child,t.flags|=128,t=null):(os(),j=l.fallback,d=t.mode,l=ml({mode:"visible",children:l.children},d),j=zs(j,d,n,null),j.flags|=2,l.return=t,j.return=t,l.sibling=j,t.child=l,Gs(t,e.child,null,n),l=t.child,l.memoizedState=Zc(n),l.childLanes=eu(e,x,n),t.memoizedState=Wc,t=Vr(null,l));else if(ls(t),Lu(j)){if(x=j.nextSibling&&j.nextSibling.dataset,x)var P=x.dgst;x=P,l=Error(o(419)),l.stack="",l.digest=x,Or({value:l,source:null,stack:null}),t=au(e,t,n)}else if(tt||An(e,t,n,!1),x=(n&e.childLanes)!==0,tt||x){if(x=qe,x!==null&&(l=lh(x,n),l!==0&&l!==A.retryLane))throw A.retryLane=l,Bs(e,l),Mt(x,e,l),Jc;Uu(j)||Nl(),t=au(e,t,n)}else Uu(j)?(t.flags|=192,t.child=e.child,t=null):(e=A.treeContext,$e=ta(j.nextSibling),ft=t,Ce=!0,ts=null,Zt=!1,e!==null&&sf(t,e),t=tu(t,l.children),t.flags|=4096);return t}return d?(os(),j=l.fallback,d=t.mode,A=e.child,P=A.sibling,l=Aa(A,{mode:"hidden",children:l.children}),l.subtreeFlags=A.subtreeFlags&65011712,P!==null?j=Aa(P,j):(j=zs(j,d,n,null),j.flags|=2),j.return=t,l.return=t,l.sibling=j,t.child=l,Vr(null,l),l=t.child,j=e.child.memoizedState,j===null?j=Zc(n):(d=j.cachePool,d!==null?(A=Ze._currentValue,d=d.parent!==A?{parent:A,pool:A}:d):d=uf(),j={baseLanes:j.baseLanes|n,cachePool:d}),l.memoizedState=j,l.childLanes=eu(e,x,n),t.memoizedState=Wc,Vr(e.child,l)):(ls(t),n=e.child,e=n.sibling,n=Aa(n,{mode:"visible",children:l.children}),n.return=t,n.sibling=null,e!==null&&(x=t.deletions,x===null?(t.deletions=[e],t.flags|=16):x.push(e)),t.child=n,t.memoizedState=null,n)}function tu(e,t){return t=ml({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function ml(e,t){return e=Bt(22,e,null,t),e.lanes=0,e}function au(e,t,n){return Gs(t,e.child,null,n),e=tu(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Nm(e,t,n){e.lanes|=t;var l=e.alternate;l!==null&&(l.lanes|=t),xc(e.return,t,n)}function su(e,t,n,l,d,f){var x=e.memoizedState;x===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:l,tail:n,tailMode:d,treeForkCount:f}:(x.isBackwards=t,x.rendering=null,x.renderingStartTime=0,x.last=l,x.tail=n,x.tailMode=d,x.treeForkCount=f)}function _m(e,t,n){var l=t.pendingProps,d=l.revealOrder,f=l.tail;l=l.children;var x=Je.current,j=(x&2)!==0;if(j?(x=x&1|2,t.flags|=128):x&=1,G(Je,x),gt(e,t,l,n),l=Ce?Rr:0,!j&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Nm(e,n,t);else if(e.tag===19)Nm(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(d){case"forwards":for(n=t.child,d=null;n!==null;)e=n.alternate,e!==null&&al(e)===null&&(d=n),n=n.sibling;n=d,n===null?(d=t.child,t.child=null):(d=n.sibling,n.sibling=null),su(t,!1,d,n,f,l);break;case"backwards":case"unstable_legacy-backwards":for(n=null,d=t.child,t.child=null;d!==null;){if(e=d.alternate,e!==null&&al(e)===null){t.child=d;break}e=d.sibling,d.sibling=n,n=d,d=e}su(t,!0,n,null,f,l);break;case"together":su(t,!1,null,null,void 0,l);break;default:t.memoizedState=null}return t.child}function Ua(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),ds|=t.lanes,(n&t.childLanes)===0)if(e!==null){if(An(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(o(153));if(t.child!==null){for(e=t.child,n=Aa(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Aa(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function nu(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&Fi(e)))}function Gv(e,t,n){switch(t.tag){case 3:Ae(t,t.stateNode.containerInfo),ss(t,Ze,e.memoizedState.cache),qs();break;case 27:case 5:Ve(t);break;case 4:Ae(t,t.stateNode.containerInfo);break;case 10:ss(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,Ac(t),null;break;case 13:var l=t.memoizedState;if(l!==null)return l.dehydrated!==null?(ls(t),t.flags|=128,null):(n&t.child.childLanes)!==0?jm(e,t,n):(ls(t),e=Ua(e,t,n),e!==null?e.sibling:null);ls(t);break;case 19:var d=(e.flags&128)!==0;if(l=(n&t.childLanes)!==0,l||(An(e,t,n,!1),l=(n&t.childLanes)!==0),d){if(l)return _m(e,t,n);t.flags|=128}if(d=t.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),G(Je,Je.current),l)break;return null;case 22:return t.lanes=0,pm(e,t,n,t.pendingProps);case 24:ss(t,Ze,e.memoizedState.cache)}return Ua(e,t,n)}function Sm(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)tt=!0;else{if(!nu(e,n)&&(t.flags&128)===0)return tt=!1,Gv(e,t,n);tt=(e.flags&131072)!==0}else tt=!1,Ce&&(t.flags&1048576)!==0&&af(t,Rr,t.index);switch(t.lanes=0,t.tag){case 16:e:{var l=t.pendingProps;if(e=Hs(t.elementType),t.type=e,typeof e=="function")cc(e)?(l=Ks(e,l),t.tag=1,t=ym(null,t,e,l,n)):(t.tag=0,t=Xc(null,t,e,l,n));else{if(e!=null){var d=e.$$typeof;if(d===z){t.tag=11,t=fm(null,t,e,l,n);break e}else if(d===B){t.tag=14,t=mm(null,t,e,l,n);break e}}throw t=k(e)||e,Error(o(306,t,""))}}return t;case 0:return Xc(e,t,t.type,t.pendingProps,n);case 1:return l=t.type,d=Ks(l,t.pendingProps),ym(e,t,l,d,n);case 3:e:{if(Ae(t,t.stateNode.containerInfo),e===null)throw Error(o(387));l=t.pendingProps;var f=t.memoizedState;d=f.element,_c(e,t),qr(t,l,null,n);var x=t.memoizedState;if(l=x.cache,ss(t,Ze,l),l!==f.cache&&bc(t,[Ze],n,!0),zr(),l=x.element,f.isDehydrated)if(f={element:l,isDehydrated:!1,cache:x.cache},t.updateQueue.baseState=f,t.memoizedState=f,t.flags&256){t=wm(e,t,l,n);break e}else if(l!==d){d=Jt(Error(o(424)),t),Or(d),t=wm(e,t,l,n);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for($e=ta(e.firstChild),ft=t,Ce=!0,ts=null,Zt=!0,n=pf(t,null,l,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(qs(),l===d){t=Ua(e,t,n);break e}gt(e,t,l,n)}t=t.child}return t;case 26:return fl(e,t),e===null?(n=Lg(t.type,null,t.pendingProps,null))?t.memoizedState=n:Ce||(n=t.type,e=t.pendingProps,l=Tl(ie.current).createElement(n),l[ht]=t,l[Ct]=e,pt(l,n,e),ct(l),t.stateNode=l):t.memoizedState=Lg(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Ve(t),e===null&&Ce&&(l=t.stateNode=Dg(t.type,t.pendingProps,ie.current),ft=t,Zt=!0,d=$e,ps(t.type)?(Bu=d,$e=ta(l.firstChild)):$e=d),gt(e,t,t.pendingProps.children,n),fl(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Ce&&((d=l=$e)&&(l=wy(l,t.type,t.pendingProps,Zt),l!==null?(t.stateNode=l,ft=t,$e=ta(l.firstChild),Zt=!1,d=!0):d=!1),d||as(t)),Ve(t),d=t.type,f=t.pendingProps,x=e!==null?e.memoizedProps:null,l=f.children,Ou(d,f)?l=null:x!==null&&Ou(d,x)&&(t.flags|=32),t.memoizedState!==null&&(d=Rc(e,t,Lv,null,null,n),ri._currentValue=d),fl(e,t),gt(e,t,l,n),t.child;case 6:return e===null&&Ce&&((e=n=$e)&&(n=jy(n,t.pendingProps,Zt),n!==null?(t.stateNode=n,ft=t,$e=null,e=!0):e=!1),e||as(t)),null;case 13:return jm(e,t,n);case 4:return Ae(t,t.stateNode.containerInfo),l=t.pendingProps,e===null?t.child=Gs(t,null,l,n):gt(e,t,l,n),t.child;case 11:return fm(e,t,t.type,t.pendingProps,n);case 7:return gt(e,t,t.pendingProps,n),t.child;case 8:return gt(e,t,t.pendingProps.children,n),t.child;case 12:return gt(e,t,t.pendingProps.children,n),t.child;case 10:return l=t.pendingProps,ss(t,t.type,l.value),gt(e,t,l.children,n),t.child;case 9:return d=t.type._context,l=t.pendingProps.children,Is(t),d=mt(d),l=l(d),t.flags|=1,gt(e,t,l,n),t.child;case 14:return mm(e,t,t.type,t.pendingProps,n);case 15:return gm(e,t,t.type,t.pendingProps,n);case 19:return _m(e,t,n);case 31:return Vv(e,t,n);case 22:return pm(e,t,n,t.pendingProps);case 24:return Is(t),l=mt(Ze),e===null?(d=wc(),d===null&&(d=qe,f=vc(),d.pooledCache=f,f.refCount++,f!==null&&(d.pooledCacheLanes|=n),d=f),t.memoizedState={parent:l,cache:d},Nc(t),ss(t,Ze,d)):((e.lanes&n)!==0&&(_c(e,t),qr(t,null,null,n),zr()),d=e.memoizedState,f=t.memoizedState,d.parent!==l?(d={parent:l,cache:l},t.memoizedState=d,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=d),ss(t,Ze,l)):(l=f.cache,ss(t,Ze,l),l!==d.cache&&bc(t,[Ze],n,!0))),gt(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(o(156,t.tag))}function La(e){e.flags|=4}function ru(e,t,n,l,d){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(d&335544128)===d)if(e.stateNode.complete)e.flags|=8192;else if(Wm())e.flags|=8192;else throw Vs=Wi,jc}else e.flags&=-16777217}function Em(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Ig(t))if(Wm())e.flags|=8192;else throw Vs=Wi,jc}function gl(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?nh():536870912,e.lanes|=t,In|=t)}function Gr(e,t){if(!Ce)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var l=null;n!==null;)n.alternate!==null&&(l=n),n=n.sibling;l===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function He(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,l=0;if(t)for(var d=e.child;d!==null;)n|=d.lanes|d.childLanes,l|=d.subtreeFlags&65011712,l|=d.flags&65011712,d.return=e,d=d.sibling;else for(d=e.child;d!==null;)n|=d.lanes|d.childLanes,l|=d.subtreeFlags,l|=d.flags,d.return=e,d=d.sibling;return e.subtreeFlags|=l,e.childLanes=n,t}function Yv(e,t,n){var l=t.pendingProps;switch(fc(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return He(t),null;case 1:return He(t),null;case 3:return n=t.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),t.memoizedState.cache!==l&&(t.flags|=2048),Oa(Ze),De(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Cn(t)?La(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,gc())),He(t),null;case 26:var d=t.type,f=t.memoizedState;return e===null?(La(t),f!==null?(He(t),Em(t,f)):(He(t),ru(t,d,null,l,n))):f?f!==e.memoizedState?(La(t),He(t),Em(t,f)):(He(t),t.flags&=-16777217):(e=e.memoizedProps,e!==l&&La(t),He(t),ru(t,d,e,l,n)),null;case 27:if(ga(t),n=ie.current,d=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==l&&La(t);else{if(!l){if(t.stateNode===null)throw Error(o(166));return He(t),null}e=K.current,Cn(t)?nf(t):(e=Dg(d,l,n),t.stateNode=e,La(t))}return He(t),null;case 5:if(ga(t),d=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==l&&La(t);else{if(!l){if(t.stateNode===null)throw Error(o(166));return He(t),null}if(f=K.current,Cn(t))nf(t);else{var x=Tl(ie.current);switch(f){case 1:f=x.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:f=x.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":f=x.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":f=x.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":f=x.createElement("div"),f.innerHTML="<script><\/script>",f=f.removeChild(f.firstChild);break;case"select":f=typeof l.is=="string"?x.createElement("select",{is:l.is}):x.createElement("select"),l.multiple?f.multiple=!0:l.size&&(f.size=l.size);break;default:f=typeof l.is=="string"?x.createElement(d,{is:l.is}):x.createElement(d)}}f[ht]=t,f[Ct]=l;e:for(x=t.child;x!==null;){if(x.tag===5||x.tag===6)f.appendChild(x.stateNode);else if(x.tag!==4&&x.tag!==27&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===t)break e;for(;x.sibling===null;){if(x.return===null||x.return===t)break e;x=x.return}x.sibling.return=x.return,x=x.sibling}t.stateNode=f;e:switch(pt(f,d,l),d){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&La(t)}}return He(t),ru(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==l&&La(t);else{if(typeof l!="string"&&t.stateNode===null)throw Error(o(166));if(e=ie.current,Cn(t)){if(e=t.stateNode,n=t.memoizedProps,l=null,d=ft,d!==null)switch(d.tag){case 27:case 5:l=d.memoizedProps}e[ht]=t,e=!!(e.nodeValue===n||l!==null&&l.suppressHydrationWarning===!0||jg(e.nodeValue,n)),e||as(t,!0)}else e=Tl(e).createTextNode(l),e[ht]=t,t.stateNode=e}return He(t),null;case 31:if(n=t.memoizedState,e===null||e.memoizedState!==null){if(l=Cn(t),n!==null){if(e===null){if(!l)throw Error(o(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(557));e[ht]=t}else qs(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;He(t),e=!1}else n=gc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return t.flags&256?(qt(t),t):(qt(t),null);if((t.flags&128)!==0)throw Error(o(558))}return He(t),null;case 13:if(l=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(d=Cn(t),l!==null&&l.dehydrated!==null){if(e===null){if(!d)throw Error(o(318));if(d=t.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(o(317));d[ht]=t}else qs(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;He(t),d=!1}else d=gc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=d),d=!0;if(!d)return t.flags&256?(qt(t),t):(qt(t),null)}return qt(t),(t.flags&128)!==0?(t.lanes=n,t):(n=l!==null,e=e!==null&&e.memoizedState!==null,n&&(l=t.child,d=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(d=l.alternate.memoizedState.cachePool.pool),f=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(f=l.memoizedState.cachePool.pool),f!==d&&(l.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),gl(t,t.updateQueue),He(t),null);case 4:return De(),e===null&&ku(t.stateNode.containerInfo),He(t),null;case 10:return Oa(t.type),He(t),null;case 19:if(H(Je),l=t.memoizedState,l===null)return He(t),null;if(d=(t.flags&128)!==0,f=l.rendering,f===null)if(d)Gr(l,!1);else{if(Qe!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(f=al(e),f!==null){for(t.flags|=128,Gr(l,!1),e=f.updateQueue,t.updateQueue=e,gl(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)Zh(n,e),n=n.sibling;return G(Je,Je.current&1|2),Ce&&Ta(t,l.treeForkCount),t.child}e=e.sibling}l.tail!==null&&We()>yl&&(t.flags|=128,d=!0,Gr(l,!1),t.lanes=4194304)}else{if(!d)if(e=al(f),e!==null){if(t.flags|=128,d=!0,e=e.updateQueue,t.updateQueue=e,gl(t,e),Gr(l,!0),l.tail===null&&l.tailMode==="hidden"&&!f.alternate&&!Ce)return He(t),null}else 2*We()-l.renderingStartTime>yl&&n!==536870912&&(t.flags|=128,d=!0,Gr(l,!1),t.lanes=4194304);l.isBackwards?(f.sibling=t.child,t.child=f):(e=l.last,e!==null?e.sibling=f:t.child=f,l.last=f)}return l.tail!==null?(e=l.tail,l.rendering=e,l.tail=e.sibling,l.renderingStartTime=We(),e.sibling=null,n=Je.current,G(Je,d?n&1|2:n&1),Ce&&Ta(t,l.treeForkCount),e):(He(t),null);case 22:case 23:return qt(t),Cc(),l=t.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(t.flags|=8192):l&&(t.flags|=8192),l?(n&536870912)!==0&&(t.flags&128)===0&&(He(t),t.subtreeFlags&6&&(t.flags|=8192)):He(t),n=t.updateQueue,n!==null&&gl(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),l=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(l=t.memoizedState.cachePool.pool),l!==n&&(t.flags|=2048),e!==null&&H($s),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Oa(Ze),He(t),null;case 25:return null;case 30:return null}throw Error(o(156,t.tag))}function Kv(e,t){switch(fc(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Oa(Ze),De(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return ga(t),null;case 31:if(t.memoizedState!==null){if(qt(t),t.alternate===null)throw Error(o(340));qs()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(qt(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(o(340));qs()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return H(Je),null;case 4:return De(),null;case 10:return Oa(t.type),null;case 22:case 23:return qt(t),Cc(),e!==null&&H($s),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Oa(Ze),null;case 25:return null;default:return null}}function km(e,t){switch(fc(t),t.tag){case 3:Oa(Ze),De();break;case 26:case 27:case 5:ga(t);break;case 4:De();break;case 31:t.memoizedState!==null&&qt(t);break;case 13:qt(t);break;case 19:H(Je);break;case 10:Oa(t.type);break;case 22:case 23:qt(t),Cc(),e!==null&&H($s);break;case 24:Oa(Ze)}}function Yr(e,t){try{var n=t.updateQueue,l=n!==null?n.lastEffect:null;if(l!==null){var d=l.next;n=d;do{if((n.tag&e)===e){l=void 0;var f=n.create,x=n.inst;l=f(),x.destroy=l}n=n.next}while(n!==d)}}catch(j){Ue(t,t.return,j)}}function cs(e,t,n){try{var l=t.updateQueue,d=l!==null?l.lastEffect:null;if(d!==null){var f=d.next;l=f;do{if((l.tag&e)===e){var x=l.inst,j=x.destroy;if(j!==void 0){x.destroy=void 0,d=t;var A=n,P=j;try{P()}catch(Q){Ue(d,A,Q)}}}l=l.next}while(l!==f)}}catch(Q){Ue(t,t.return,Q)}}function Cm(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{bf(t,n)}catch(l){Ue(e,e.return,l)}}}function Am(e,t,n){n.props=Ks(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(l){Ue(e,t,l)}}function Kr(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof n=="function"?e.refCleanup=n(l):n.current=l}}catch(d){Ue(e,t,d)}}function wa(e,t){var n=e.ref,l=e.refCleanup;if(n!==null)if(typeof l=="function")try{l()}catch(d){Ue(e,t,d)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(d){Ue(e,t,d)}else n.current=null}function Tm(e){var t=e.type,n=e.memoizedProps,l=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&l.focus();break e;case"img":n.src?l.src=n.src:n.srcSet&&(l.srcset=n.srcSet)}}catch(d){Ue(e,e.return,d)}}function iu(e,t,n){try{var l=e.stateNode;gy(l,e.type,n,t),l[Ct]=t}catch(d){Ue(e,e.return,d)}}function Rm(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&ps(e.type)||e.tag===4}function lu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Rm(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&ps(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ou(e,t,n){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=ka));else if(l!==4&&(l===27&&ps(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(ou(e,t,n),e=e.sibling;e!==null;)ou(e,t,n),e=e.sibling}function pl(e,t,n){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(l!==4&&(l===27&&ps(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(pl(e,t,n),e=e.sibling;e!==null;)pl(e,t,n),e=e.sibling}function Om(e){var t=e.stateNode,n=e.memoizedProps;try{for(var l=e.type,d=t.attributes;d.length;)t.removeAttributeNode(d[0]);pt(t,l,n),t[ht]=e,t[Ct]=n}catch(f){Ue(e,e.return,f)}}var Ba=!1,at=!1,cu=!1,Dm=typeof WeakSet=="function"?WeakSet:Set,ut=null;function Fv(e,t){if(e=e.containerInfo,Tu=Bl,e=Vh(e),ac(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var l=n.getSelection&&n.getSelection();if(l&&l.rangeCount!==0){n=l.anchorNode;var d=l.anchorOffset,f=l.focusNode;l=l.focusOffset;try{n.nodeType,f.nodeType}catch{n=null;break e}var x=0,j=-1,A=-1,P=0,Q=0,Z=e,$=null;t:for(;;){for(var V;Z!==n||d!==0&&Z.nodeType!==3||(j=x+d),Z!==f||l!==0&&Z.nodeType!==3||(A=x+l),Z.nodeType===3&&(x+=Z.nodeValue.length),(V=Z.firstChild)!==null;)$=Z,Z=V;for(;;){if(Z===e)break t;if($===n&&++P===d&&(j=x),$===f&&++Q===l&&(A=x),(V=Z.nextSibling)!==null)break;Z=$,$=Z.parentNode}Z=V}n=j===-1||A===-1?null:{start:j,end:A}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ru={focusedElem:e,selectionRange:n},Bl=!1,ut=t;ut!==null;)if(t=ut,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ut=e;else for(;ut!==null;){switch(t=ut,f=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(n=0;n<e.length;n++)d=e[n],d.ref.impl=d.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&f!==null){e=void 0,n=t,d=f.memoizedProps,f=f.memoizedState,l=n.stateNode;try{var le=Ks(n.type,d);e=l.getSnapshotBeforeUpdate(le,f),l.__reactInternalSnapshotBeforeUpdate=e}catch(ge){Ue(n,n.return,ge)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)Mu(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Mu(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(o(163))}if(e=t.sibling,e!==null){e.return=t.return,ut=e;break}ut=t.return}}function Mm(e,t,n){var l=n.flags;switch(n.tag){case 0:case 11:case 15:qa(e,n),l&4&&Yr(5,n);break;case 1:if(qa(e,n),l&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(x){Ue(n,n.return,x)}else{var d=Ks(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(d,t,e.__reactInternalSnapshotBeforeUpdate)}catch(x){Ue(n,n.return,x)}}l&64&&Cm(n),l&512&&Kr(n,n.return);break;case 3:if(qa(e,n),l&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{bf(e,t)}catch(x){Ue(n,n.return,x)}}break;case 27:t===null&&l&4&&Om(n);case 26:case 5:qa(e,n),t===null&&l&4&&Tm(n),l&512&&Kr(n,n.return);break;case 12:qa(e,n);break;case 31:qa(e,n),l&4&&Bm(e,n);break;case 13:qa(e,n),l&4&&zm(e,n),l&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=sy.bind(null,n),Ny(e,n))));break;case 22:if(l=n.memoizedState!==null||Ba,!l){t=t!==null&&t.memoizedState!==null||at,d=Ba;var f=at;Ba=l,(at=t)&&!f?Pa(e,n,(n.subtreeFlags&8772)!==0):qa(e,n),Ba=d,at=f}break;case 30:break;default:qa(e,n)}}function Um(e){var t=e.alternate;t!==null&&(e.alternate=null,Um(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&qo(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Ge=null,Tt=!1;function za(e,t,n){for(n=n.child;n!==null;)Lm(e,t,n),n=n.sibling}function Lm(e,t,n){if(kt&&typeof kt.onCommitFiberUnmount=="function")try{kt.onCommitFiberUnmount(xa,n)}catch{}switch(n.tag){case 26:at||wa(n,t),za(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:at||wa(n,t);var l=Ge,d=Tt;ps(n.type)&&(Ge=n.stateNode,Tt=!1),za(e,t,n),ai(n.stateNode),Ge=l,Tt=d;break;case 5:at||wa(n,t);case 6:if(l=Ge,d=Tt,Ge=null,za(e,t,n),Ge=l,Tt=d,Ge!==null)if(Tt)try{(Ge.nodeType===9?Ge.body:Ge.nodeName==="HTML"?Ge.ownerDocument.body:Ge).removeChild(n.stateNode)}catch(f){Ue(n,t,f)}else try{Ge.removeChild(n.stateNode)}catch(f){Ue(n,t,f)}break;case 18:Ge!==null&&(Tt?(e=Ge,Cg(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,n.stateNode),Qn(e)):Cg(Ge,n.stateNode));break;case 4:l=Ge,d=Tt,Ge=n.stateNode.containerInfo,Tt=!0,za(e,t,n),Ge=l,Tt=d;break;case 0:case 11:case 14:case 15:cs(2,n,t),at||cs(4,n,t),za(e,t,n);break;case 1:at||(wa(n,t),l=n.stateNode,typeof l.componentWillUnmount=="function"&&Am(n,t,l)),za(e,t,n);break;case 21:za(e,t,n);break;case 22:at=(l=at)||n.memoizedState!==null,za(e,t,n),at=l;break;default:za(e,t,n)}}function Bm(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Qn(e)}catch(n){Ue(t,t.return,n)}}}function zm(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Qn(e)}catch(n){Ue(t,t.return,n)}}function Qv(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Dm),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Dm),t;default:throw Error(o(435,e.tag))}}function xl(e,t){var n=Qv(e);t.forEach(function(l){if(!n.has(l)){n.add(l);var d=ny.bind(null,e,l);l.then(d,d)}})}function Rt(e,t){var n=t.deletions;if(n!==null)for(var l=0;l<n.length;l++){var d=n[l],f=e,x=t,j=x;e:for(;j!==null;){switch(j.tag){case 27:if(ps(j.type)){Ge=j.stateNode,Tt=!1;break e}break;case 5:Ge=j.stateNode,Tt=!1;break e;case 3:case 4:Ge=j.stateNode.containerInfo,Tt=!0;break e}j=j.return}if(Ge===null)throw Error(o(160));Lm(f,x,d),Ge=null,Tt=!1,f=d.alternate,f!==null&&(f.return=null),d.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)qm(t,e),t=t.sibling}var ia=null;function qm(e,t){var n=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Rt(t,e),Ot(e),l&4&&(cs(3,e,e.return),Yr(3,e),cs(5,e,e.return));break;case 1:Rt(t,e),Ot(e),l&512&&(at||n===null||wa(n,n.return)),l&64&&Ba&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?l:n.concat(l))));break;case 26:var d=ia;if(Rt(t,e),Ot(e),l&512&&(at||n===null||wa(n,n.return)),l&4){var f=n!==null?n.memoizedState:null;if(l=e.memoizedState,n===null)if(l===null)if(e.stateNode===null){e:{l=e.type,n=e.memoizedProps,d=d.ownerDocument||d;t:switch(l){case"title":f=d.getElementsByTagName("title")[0],(!f||f[yr]||f[ht]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=d.createElement(l),d.head.insertBefore(f,d.querySelector("head > title"))),pt(f,l,n),f[ht]=e,ct(f),l=f;break e;case"link":var x=qg("link","href",d).get(l+(n.href||""));if(x){for(var j=0;j<x.length;j++)if(f=x[j],f.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&f.getAttribute("rel")===(n.rel==null?null:n.rel)&&f.getAttribute("title")===(n.title==null?null:n.title)&&f.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){x.splice(j,1);break t}}f=d.createElement(l),pt(f,l,n),d.head.appendChild(f);break;case"meta":if(x=qg("meta","content",d).get(l+(n.content||""))){for(j=0;j<x.length;j++)if(f=x[j],f.getAttribute("content")===(n.content==null?null:""+n.content)&&f.getAttribute("name")===(n.name==null?null:n.name)&&f.getAttribute("property")===(n.property==null?null:n.property)&&f.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&f.getAttribute("charset")===(n.charSet==null?null:n.charSet)){x.splice(j,1);break t}}f=d.createElement(l),pt(f,l,n),d.head.appendChild(f);break;default:throw Error(o(468,l))}f[ht]=e,ct(f),l=f}e.stateNode=l}else Pg(d,e.type,e.stateNode);else e.stateNode=zg(d,l,e.memoizedProps);else f!==l?(f===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):f.count--,l===null?Pg(d,e.type,e.stateNode):zg(d,l,e.memoizedProps)):l===null&&e.stateNode!==null&&iu(e,e.memoizedProps,n.memoizedProps)}break;case 27:Rt(t,e),Ot(e),l&512&&(at||n===null||wa(n,n.return)),n!==null&&l&4&&iu(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Rt(t,e),Ot(e),l&512&&(at||n===null||wa(n,n.return)),e.flags&32){d=e.stateNode;try{bn(d,"")}catch(le){Ue(e,e.return,le)}}l&4&&e.stateNode!=null&&(d=e.memoizedProps,iu(e,d,n!==null?n.memoizedProps:d)),l&1024&&(cu=!0);break;case 6:if(Rt(t,e),Ot(e),l&4){if(e.stateNode===null)throw Error(o(162));l=e.memoizedProps,n=e.stateNode;try{n.nodeValue=l}catch(le){Ue(e,e.return,le)}}break;case 3:if(Dl=null,d=ia,ia=Rl(t.containerInfo),Rt(t,e),ia=d,Ot(e),l&4&&n!==null&&n.memoizedState.isDehydrated)try{Qn(t.containerInfo)}catch(le){Ue(e,e.return,le)}cu&&(cu=!1,Pm(e));break;case 4:l=ia,ia=Rl(e.stateNode.containerInfo),Rt(t,e),Ot(e),ia=l;break;case 12:Rt(t,e),Ot(e);break;case 31:Rt(t,e),Ot(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,xl(e,l)));break;case 13:Rt(t,e),Ot(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(vl=We()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,xl(e,l)));break;case 22:d=e.memoizedState!==null;var A=n!==null&&n.memoizedState!==null,P=Ba,Q=at;if(Ba=P||d,at=Q||A,Rt(t,e),at=Q,Ba=P,Ot(e),l&8192)e:for(t=e.stateNode,t._visibility=d?t._visibility&-2:t._visibility|1,d&&(n===null||A||Ba||at||Fs(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){A=n=t;try{if(f=A.stateNode,d)x=f.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none";else{j=A.stateNode;var Z=A.memoizedProps.style,$=Z!=null&&Z.hasOwnProperty("display")?Z.display:null;j.style.display=$==null||typeof $=="boolean"?"":(""+$).trim()}}catch(le){Ue(A,A.return,le)}}}else if(t.tag===6){if(n===null){A=t;try{A.stateNode.nodeValue=d?"":A.memoizedProps}catch(le){Ue(A,A.return,le)}}}else if(t.tag===18){if(n===null){A=t;try{var V=A.stateNode;d?Ag(V,!0):Ag(A.stateNode,!1)}catch(le){Ue(A,A.return,le)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}l&4&&(l=e.updateQueue,l!==null&&(n=l.retryQueue,n!==null&&(l.retryQueue=null,xl(e,n))));break;case 19:Rt(t,e),Ot(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,xl(e,l)));break;case 30:break;case 21:break;default:Rt(t,e),Ot(e)}}function Ot(e){var t=e.flags;if(t&2){try{for(var n,l=e.return;l!==null;){if(Rm(l)){n=l;break}l=l.return}if(n==null)throw Error(o(160));switch(n.tag){case 27:var d=n.stateNode,f=lu(e);pl(e,f,d);break;case 5:var x=n.stateNode;n.flags&32&&(bn(x,""),n.flags&=-33);var j=lu(e);pl(e,j,x);break;case 3:case 4:var A=n.stateNode.containerInfo,P=lu(e);ou(e,P,A);break;default:throw Error(o(161))}}catch(Q){Ue(e,e.return,Q)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Pm(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Pm(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function qa(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Mm(e,t.alternate,t),t=t.sibling}function Fs(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:cs(4,t,t.return),Fs(t);break;case 1:wa(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&Am(t,t.return,n),Fs(t);break;case 27:ai(t.stateNode);case 26:case 5:wa(t,t.return),Fs(t);break;case 22:t.memoizedState===null&&Fs(t);break;case 30:Fs(t);break;default:Fs(t)}e=e.sibling}}function Pa(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var l=t.alternate,d=e,f=t,x=f.flags;switch(f.tag){case 0:case 11:case 15:Pa(d,f,n),Yr(4,f);break;case 1:if(Pa(d,f,n),l=f,d=l.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(P){Ue(l,l.return,P)}if(l=f,d=l.updateQueue,d!==null){var j=l.stateNode;try{var A=d.shared.hiddenCallbacks;if(A!==null)for(d.shared.hiddenCallbacks=null,d=0;d<A.length;d++)xf(A[d],j)}catch(P){Ue(l,l.return,P)}}n&&x&64&&Cm(f),Kr(f,f.return);break;case 27:Om(f);case 26:case 5:Pa(d,f,n),n&&l===null&&x&4&&Tm(f),Kr(f,f.return);break;case 12:Pa(d,f,n);break;case 31:Pa(d,f,n),n&&x&4&&Bm(d,f);break;case 13:Pa(d,f,n),n&&x&4&&zm(d,f);break;case 22:f.memoizedState===null&&Pa(d,f,n),Kr(f,f.return);break;case 30:break;default:Pa(d,f,n)}t=t.sibling}}function uu(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&Dr(n))}function du(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Dr(e))}function la(e,t,n,l){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Im(e,t,n,l),t=t.sibling}function Im(e,t,n,l){var d=t.flags;switch(t.tag){case 0:case 11:case 15:la(e,t,n,l),d&2048&&Yr(9,t);break;case 1:la(e,t,n,l);break;case 3:la(e,t,n,l),d&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Dr(e)));break;case 12:if(d&2048){la(e,t,n,l),e=t.stateNode;try{var f=t.memoizedProps,x=f.id,j=f.onPostCommit;typeof j=="function"&&j(x,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(A){Ue(t,t.return,A)}}else la(e,t,n,l);break;case 31:la(e,t,n,l);break;case 13:la(e,t,n,l);break;case 23:break;case 22:f=t.stateNode,x=t.alternate,t.memoizedState!==null?f._visibility&2?la(e,t,n,l):Fr(e,t):f._visibility&2?la(e,t,n,l):(f._visibility|=2,zn(e,t,n,l,(t.subtreeFlags&10256)!==0||!1)),d&2048&&uu(x,t);break;case 24:la(e,t,n,l),d&2048&&du(t.alternate,t);break;default:la(e,t,n,l)}}function zn(e,t,n,l,d){for(d=d&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var f=e,x=t,j=n,A=l,P=x.flags;switch(x.tag){case 0:case 11:case 15:zn(f,x,j,A,d),Yr(8,x);break;case 23:break;case 22:var Q=x.stateNode;x.memoizedState!==null?Q._visibility&2?zn(f,x,j,A,d):Fr(f,x):(Q._visibility|=2,zn(f,x,j,A,d)),d&&P&2048&&uu(x.alternate,x);break;case 24:zn(f,x,j,A,d),d&&P&2048&&du(x.alternate,x);break;default:zn(f,x,j,A,d)}t=t.sibling}}function Fr(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,l=t,d=l.flags;switch(l.tag){case 22:Fr(n,l),d&2048&&uu(l.alternate,l);break;case 24:Fr(n,l),d&2048&&du(l.alternate,l);break;default:Fr(n,l)}t=t.sibling}}var Qr=8192;function qn(e,t,n){if(e.subtreeFlags&Qr)for(e=e.child;e!==null;)$m(e,t,n),e=e.sibling}function $m(e,t,n){switch(e.tag){case 26:qn(e,t,n),e.flags&Qr&&e.memoizedState!==null&&Uy(n,ia,e.memoizedState,e.memoizedProps);break;case 5:qn(e,t,n);break;case 3:case 4:var l=ia;ia=Rl(e.stateNode.containerInfo),qn(e,t,n),ia=l;break;case 22:e.memoizedState===null&&(l=e.alternate,l!==null&&l.memoizedState!==null?(l=Qr,Qr=16777216,qn(e,t,n),Qr=l):qn(e,t,n));break;default:qn(e,t,n)}}function Hm(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Jr(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var l=t[n];ut=l,Gm(l,e)}Hm(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Vm(e),e=e.sibling}function Vm(e){switch(e.tag){case 0:case 11:case 15:Jr(e),e.flags&2048&&cs(9,e,e.return);break;case 3:Jr(e);break;case 12:Jr(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,bl(e)):Jr(e);break;default:Jr(e)}}function bl(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var l=t[n];ut=l,Gm(l,e)}Hm(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:cs(8,t,t.return),bl(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,bl(t));break;default:bl(t)}e=e.sibling}}function Gm(e,t){for(;ut!==null;){var n=ut;switch(n.tag){case 0:case 11:case 15:cs(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var l=n.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Dr(n.memoizedState.cache)}if(l=n.child,l!==null)l.return=n,ut=l;else e:for(n=e;ut!==null;){l=ut;var d=l.sibling,f=l.return;if(Um(l),l===n){ut=null;break e}if(d!==null){d.return=f,ut=d;break e}ut=f}}}var Jv={getCacheForType:function(e){var t=mt(Ze),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return mt(Ze).controller.signal}},Xv=typeof WeakMap=="function"?WeakMap:Map,Oe=0,qe=null,_e=null,Ee=0,Me=0,Pt=null,us=!1,Pn=!1,hu=!1,Ia=0,Qe=0,ds=0,Qs=0,fu=0,It=0,In=0,Xr=null,Dt=null,mu=!1,vl=0,Ym=0,yl=1/0,wl=null,hs=null,it=0,fs=null,$n=null,$a=0,gu=0,pu=null,Km=null,Wr=0,xu=null;function $t(){return(Oe&2)!==0&&Ee!==0?Ee&-Ee:R.T!==null?Nu():oh()}function Fm(){if(It===0)if((Ee&536870912)===0||Ce){var e=rt;rt<<=1,(rt&3932160)===0&&(rt=262144),It=e}else It=536870912;return e=zt.current,e!==null&&(e.flags|=32),It}function Mt(e,t,n){(e===qe&&(Me===2||Me===9)||e.cancelPendingCommit!==null)&&(Hn(e,0),ms(e,Ee,It,!1)),vr(e,n),((Oe&2)===0||e!==qe)&&(e===qe&&((Oe&2)===0&&(Qs|=n),Qe===4&&ms(e,Ee,It,!1)),ja(e))}function Qm(e,t,n){if((Oe&6)!==0)throw Error(o(327));var l=!n&&(t&127)===0&&(t&e.expiredLanes)===0||br(e,t),d=l?ey(e,t):vu(e,t,!0),f=l;do{if(d===0){Pn&&!l&&ms(e,t,0,!1);break}else{if(n=e.current.alternate,f&&!Wv(n)){d=vu(e,t,!1),f=!1;continue}if(d===2){if(f=t,e.errorRecoveryDisabledLanes&f)var x=0;else x=e.pendingLanes&-536870913,x=x!==0?x:x&536870912?536870912:0;if(x!==0){t=x;e:{var j=e;d=Xr;var A=j.current.memoizedState.isDehydrated;if(A&&(Hn(j,x).flags|=256),x=vu(j,x,!1),x!==2){if(hu&&!A){j.errorRecoveryDisabledLanes|=f,Qs|=f,d=4;break e}f=Dt,Dt=d,f!==null&&(Dt===null?Dt=f:Dt.push.apply(Dt,f))}d=x}if(f=!1,d!==2)continue}}if(d===1){Hn(e,0),ms(e,t,0,!0);break}e:{switch(l=e,f=d,f){case 0:case 1:throw Error(o(345));case 4:if((t&4194048)!==t)break;case 6:ms(l,t,It,!us);break e;case 2:Dt=null;break;case 3:case 5:break;default:throw Error(o(329))}if((t&62914560)===t&&(d=vl+300-We(),10<d)){if(ms(l,t,It,!us),Ri(l,0,!0)!==0)break e;$a=t,l.timeoutHandle=Eg(Jm.bind(null,l,n,Dt,wl,mu,t,It,Qs,In,us,f,"Throttled",-0,0),d);break e}Jm(l,n,Dt,wl,mu,t,It,Qs,In,us,f,null,-0,0)}}break}while(!0);ja(e)}function Jm(e,t,n,l,d,f,x,j,A,P,Q,Z,$,V){if(e.timeoutHandle=-1,Z=t.subtreeFlags,Z&8192||(Z&16785408)===16785408){Z={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ka},$m(t,f,Z);var le=(f&62914560)===f?vl-We():(f&4194048)===f?Ym-We():0;if(le=Ly(Z,le),le!==null){$a=f,e.cancelPendingCommit=le(ng.bind(null,e,t,f,n,l,d,x,j,A,Q,Z,null,$,V)),ms(e,f,x,!P);return}}ng(e,t,f,n,l,d,x,j,A)}function Wv(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var l=0;l<n.length;l++){var d=n[l],f=d.getSnapshot;d=d.value;try{if(!Lt(f(),d))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ms(e,t,n,l){t&=~fu,t&=~Qs,e.suspendedLanes|=t,e.pingedLanes&=~t,l&&(e.warmLanes|=t),l=e.expirationTimes;for(var d=t;0<d;){var f=31-xt(d),x=1<<f;l[f]=-1,d&=~x}n!==0&&rh(e,n,t)}function jl(){return(Oe&6)===0?(Zr(0),!1):!0}function bu(){if(_e!==null){if(Me===0)var e=_e.return;else e=_e,Ra=Ps=null,Mc(e),Dn=null,Ur=0,e=_e;for(;e!==null;)km(e.alternate,e),e=e.return;_e=null}}function Hn(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,by(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),$a=0,bu(),qe=e,_e=n=Aa(e.current,null),Ee=t,Me=0,Pt=null,us=!1,Pn=br(e,t),hu=!1,In=It=fu=Qs=ds=Qe=0,Dt=Xr=null,mu=!1,(t&8)!==0&&(t|=t&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=t;0<l;){var d=31-xt(l),f=1<<d;t|=e[d],l&=~f}return Ia=t,Hi(),n}function Xm(e,t){we=null,R.H=Hr,t===On||t===Xi?(t=ff(),Me=3):t===jc?(t=ff(),Me=4):Me=t===Jc?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Pt=t,_e===null&&(Qe=1,dl(e,Jt(t,e.current)))}function Wm(){var e=zt.current;return e===null?!0:(Ee&4194048)===Ee?ea===null:(Ee&62914560)===Ee||(Ee&536870912)!==0?e===ea:!1}function Zm(){var e=R.H;return R.H=Hr,e===null?Hr:e}function eg(){var e=R.A;return R.A=Jv,e}function Nl(){Qe=4,us||(Ee&4194048)!==Ee&&zt.current!==null||(Pn=!0),(ds&134217727)===0&&(Qs&134217727)===0||qe===null||ms(qe,Ee,It,!1)}function vu(e,t,n){var l=Oe;Oe|=2;var d=Zm(),f=eg();(qe!==e||Ee!==t)&&(wl=null,Hn(e,t)),t=!1;var x=Qe;e:do try{if(Me!==0&&_e!==null){var j=_e,A=Pt;switch(Me){case 8:bu(),x=6;break e;case 3:case 2:case 9:case 6:zt.current===null&&(t=!0);var P=Me;if(Me=0,Pt=null,Vn(e,j,A,P),n&&Pn){x=0;break e}break;default:P=Me,Me=0,Pt=null,Vn(e,j,A,P)}}Zv(),x=Qe;break}catch(Q){Xm(e,Q)}while(!0);return t&&e.shellSuspendCounter++,Ra=Ps=null,Oe=l,R.H=d,R.A=f,_e===null&&(qe=null,Ee=0,Hi()),x}function Zv(){for(;_e!==null;)tg(_e)}function ey(e,t){var n=Oe;Oe|=2;var l=Zm(),d=eg();qe!==e||Ee!==t?(wl=null,yl=We()+500,Hn(e,t)):Pn=br(e,t);e:do try{if(Me!==0&&_e!==null){t=_e;var f=Pt;t:switch(Me){case 1:Me=0,Pt=null,Vn(e,t,f,1);break;case 2:case 9:if(df(f)){Me=0,Pt=null,ag(t);break}t=function(){Me!==2&&Me!==9||qe!==e||(Me=7),ja(e)},f.then(t,t);break e;case 3:Me=7;break e;case 4:Me=5;break e;case 7:df(f)?(Me=0,Pt=null,ag(t)):(Me=0,Pt=null,Vn(e,t,f,7));break;case 5:var x=null;switch(_e.tag){case 26:x=_e.memoizedState;case 5:case 27:var j=_e;if(x?Ig(x):j.stateNode.complete){Me=0,Pt=null;var A=j.sibling;if(A!==null)_e=A;else{var P=j.return;P!==null?(_e=P,_l(P)):_e=null}break t}}Me=0,Pt=null,Vn(e,t,f,5);break;case 6:Me=0,Pt=null,Vn(e,t,f,6);break;case 8:bu(),Qe=6;break e;default:throw Error(o(462))}}ty();break}catch(Q){Xm(e,Q)}while(!0);return Ra=Ps=null,R.H=l,R.A=d,Oe=n,_e!==null?0:(qe=null,Ee=0,Hi(),Qe)}function ty(){for(;_e!==null&&!Ja();)tg(_e)}function tg(e){var t=Sm(e.alternate,e,Ia);e.memoizedProps=e.pendingProps,t===null?_l(e):_e=t}function ag(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=vm(n,t,t.pendingProps,t.type,void 0,Ee);break;case 11:t=vm(n,t,t.pendingProps,t.type.render,t.ref,Ee);break;case 5:Mc(t);default:km(n,t),t=_e=Zh(t,Ia),t=Sm(n,t,Ia)}e.memoizedProps=e.pendingProps,t===null?_l(e):_e=t}function Vn(e,t,n,l){Ra=Ps=null,Mc(t),Dn=null,Ur=0;var d=t.return;try{if(Hv(e,d,t,n,Ee)){Qe=1,dl(e,Jt(n,e.current)),_e=null;return}}catch(f){if(d!==null)throw _e=d,f;Qe=1,dl(e,Jt(n,e.current)),_e=null;return}t.flags&32768?(Ce||l===1?e=!0:Pn||(Ee&536870912)!==0?e=!1:(us=e=!0,(l===2||l===9||l===3||l===6)&&(l=zt.current,l!==null&&l.tag===13&&(l.flags|=16384))),sg(t,e)):_l(t)}function _l(e){var t=e;do{if((t.flags&32768)!==0){sg(t,us);return}e=t.return;var n=Yv(t.alternate,t,Ia);if(n!==null){_e=n;return}if(t=t.sibling,t!==null){_e=t;return}_e=t=e}while(t!==null);Qe===0&&(Qe=5)}function sg(e,t){do{var n=Kv(e.alternate,e);if(n!==null){n.flags&=32767,_e=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){_e=e;return}_e=e=n}while(e!==null);Qe=6,_e=null}function ng(e,t,n,l,d,f,x,j,A){e.cancelPendingCommit=null;do Sl();while(it!==0);if((Oe&6)!==0)throw Error(o(327));if(t!==null){if(t===e.current)throw Error(o(177));if(f=t.lanes|t.childLanes,f|=lc,Mb(e,n,f,x,j,A),e===qe&&(_e=qe=null,Ee=0),$n=t,fs=e,$a=n,gu=f,pu=d,Km=l,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,ry(dn,function(){return cg(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||l){l=R.T,R.T=null,d=Y.p,Y.p=2,x=Oe,Oe|=4;try{Fv(e,t,n)}finally{Oe=x,Y.p=d,R.T=l}}it=1,rg(),ig(),lg()}}function rg(){if(it===1){it=0;var e=fs,t=$n,n=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||n){n=R.T,R.T=null;var l=Y.p;Y.p=2;var d=Oe;Oe|=4;try{qm(t,e);var f=Ru,x=Vh(e.containerInfo),j=f.focusedElem,A=f.selectionRange;if(x!==j&&j&&j.ownerDocument&&Hh(j.ownerDocument.documentElement,j)){if(A!==null&&ac(j)){var P=A.start,Q=A.end;if(Q===void 0&&(Q=P),"selectionStart"in j)j.selectionStart=P,j.selectionEnd=Math.min(Q,j.value.length);else{var Z=j.ownerDocument||document,$=Z&&Z.defaultView||window;if($.getSelection){var V=$.getSelection(),le=j.textContent.length,ge=Math.min(A.start,le),ze=A.end===void 0?ge:Math.min(A.end,le);!V.extend&&ge>ze&&(x=ze,ze=ge,ge=x);var L=$h(j,ge),D=$h(j,ze);if(L&&D&&(V.rangeCount!==1||V.anchorNode!==L.node||V.anchorOffset!==L.offset||V.focusNode!==D.node||V.focusOffset!==D.offset)){var q=Z.createRange();q.setStart(L.node,L.offset),V.removeAllRanges(),ge>ze?(V.addRange(q),V.extend(D.node,D.offset)):(q.setEnd(D.node,D.offset),V.addRange(q))}}}}for(Z=[],V=j;V=V.parentNode;)V.nodeType===1&&Z.push({element:V,left:V.scrollLeft,top:V.scrollTop});for(typeof j.focus=="function"&&j.focus(),j=0;j<Z.length;j++){var W=Z[j];W.element.scrollLeft=W.left,W.element.scrollTop=W.top}}Bl=!!Tu,Ru=Tu=null}finally{Oe=d,Y.p=l,R.T=n}}e.current=t,it=2}}function ig(){if(it===2){it=0;var e=fs,t=$n,n=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||n){n=R.T,R.T=null;var l=Y.p;Y.p=2;var d=Oe;Oe|=4;try{Mm(e,t.alternate,t)}finally{Oe=d,Y.p=l,R.T=n}}it=3}}function lg(){if(it===4||it===3){it=0,Ut();var e=fs,t=$n,n=$a,l=Km;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?it=5:(it=0,$n=fs=null,og(e,e.pendingLanes));var d=e.pendingLanes;if(d===0&&(hs=null),Bo(n),t=t.stateNode,kt&&typeof kt.onCommitFiberRoot=="function")try{kt.onCommitFiberRoot(xa,t,void 0,(t.current.flags&128)===128)}catch{}if(l!==null){t=R.T,d=Y.p,Y.p=2,R.T=null;try{for(var f=e.onRecoverableError,x=0;x<l.length;x++){var j=l[x];f(j.value,{componentStack:j.stack})}}finally{R.T=t,Y.p=d}}($a&3)!==0&&Sl(),ja(e),d=e.pendingLanes,(n&261930)!==0&&(d&42)!==0?e===xu?Wr++:(Wr=0,xu=e):Wr=0,Zr(0)}}function og(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Dr(t)))}function Sl(){return rg(),ig(),lg(),cg()}function cg(){if(it!==5)return!1;var e=fs,t=gu;gu=0;var n=Bo($a),l=R.T,d=Y.p;try{Y.p=32>n?32:n,R.T=null,n=pu,pu=null;var f=fs,x=$a;if(it=0,$n=fs=null,$a=0,(Oe&6)!==0)throw Error(o(331));var j=Oe;if(Oe|=4,Vm(f.current),Im(f,f.current,x,n),Oe=j,Zr(0,!1),kt&&typeof kt.onPostCommitFiberRoot=="function")try{kt.onPostCommitFiberRoot(xa,f)}catch{}return!0}finally{Y.p=d,R.T=l,og(e,t)}}function ug(e,t,n){t=Jt(n,t),t=Qc(e.stateNode,t,2),e=is(e,t,2),e!==null&&(vr(e,2),ja(e))}function Ue(e,t,n){if(e.tag===3)ug(e,e,n);else for(;t!==null;){if(t.tag===3){ug(t,e,n);break}else if(t.tag===1){var l=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(hs===null||!hs.has(l))){e=Jt(n,e),n=dm(2),l=is(t,n,2),l!==null&&(hm(n,l,t,e),vr(l,2),ja(l));break}}t=t.return}}function yu(e,t,n){var l=e.pingCache;if(l===null){l=e.pingCache=new Xv;var d=new Set;l.set(t,d)}else d=l.get(t),d===void 0&&(d=new Set,l.set(t,d));d.has(n)||(hu=!0,d.add(n),e=ay.bind(null,e,t,n),t.then(e,e))}function ay(e,t,n){var l=e.pingCache;l!==null&&l.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,qe===e&&(Ee&n)===n&&(Qe===4||Qe===3&&(Ee&62914560)===Ee&&300>We()-vl?(Oe&2)===0&&Hn(e,0):fu|=n,In===Ee&&(In=0)),ja(e)}function dg(e,t){t===0&&(t=nh()),e=Bs(e,t),e!==null&&(vr(e,t),ja(e))}function sy(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),dg(e,n)}function ny(e,t){var n=0;switch(e.tag){case 31:case 13:var l=e.stateNode,d=e.memoizedState;d!==null&&(n=d.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(o(314))}l!==null&&l.delete(t),dg(e,n)}function ry(e,t){return jt(e,t)}var El=null,Gn=null,wu=!1,kl=!1,ju=!1,gs=0;function ja(e){e!==Gn&&e.next===null&&(Gn===null?El=Gn=e:Gn=Gn.next=e),kl=!0,wu||(wu=!0,ly())}function Zr(e,t){if(!ju&&kl){ju=!0;do for(var n=!1,l=El;l!==null;){if(e!==0){var d=l.pendingLanes;if(d===0)var f=0;else{var x=l.suspendedLanes,j=l.pingedLanes;f=(1<<31-xt(42|e)+1)-1,f&=d&~(x&~j),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(n=!0,gg(l,f))}else f=Ee,f=Ri(l,l===qe?f:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(f&3)===0||br(l,f)||(n=!0,gg(l,f));l=l.next}while(n);ju=!1}}function iy(){hg()}function hg(){kl=wu=!1;var e=0;gs!==0&&xy()&&(e=gs);for(var t=We(),n=null,l=El;l!==null;){var d=l.next,f=fg(l,t);f===0?(l.next=null,n===null?El=d:n.next=d,d===null&&(Gn=n)):(n=l,(e!==0||(f&3)!==0)&&(kl=!0)),l=d}it!==0&&it!==5||Zr(e),gs!==0&&(gs=0)}function fg(e,t){for(var n=e.suspendedLanes,l=e.pingedLanes,d=e.expirationTimes,f=e.pendingLanes&-62914561;0<f;){var x=31-xt(f),j=1<<x,A=d[x];A===-1?((j&n)===0||(j&l)!==0)&&(d[x]=Db(j,t)):A<=t&&(e.expiredLanes|=j),f&=~j}if(t=qe,n=Ee,n=Ri(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,n===0||e===t&&(Me===2||Me===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&St(l),e.callbackNode=null,e.callbackPriority=0;if((n&3)===0||br(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(l!==null&&St(l),Bo(n)){case 2:case 8:n=Et;break;case 32:n=dn;break;case 268435456:n=ki;break;default:n=dn}return l=mg.bind(null,e),n=jt(n,l),e.callbackPriority=t,e.callbackNode=n,t}return l!==null&&l!==null&&St(l),e.callbackPriority=2,e.callbackNode=null,2}function mg(e,t){if(it!==0&&it!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(Sl()&&e.callbackNode!==n)return null;var l=Ee;return l=Ri(e,e===qe?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(Qm(e,l,t),fg(e,We()),e.callbackNode!=null&&e.callbackNode===n?mg.bind(null,e):null)}function gg(e,t){if(Sl())return null;Qm(e,t,!0)}function ly(){vy(function(){(Oe&6)!==0?jt(un,iy):hg()})}function Nu(){if(gs===0){var e=Tn;e===0&&(e=fe,fe<<=1,(fe&261888)===0&&(fe=256)),gs=e}return gs}function pg(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Ui(""+e)}function xg(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function oy(e,t,n,l,d){if(t==="submit"&&n&&n.stateNode===d){var f=pg((d[Ct]||null).action),x=l.submitter;x&&(t=(t=x[Ct]||null)?pg(t.formAction):x.getAttribute("formAction"),t!==null&&(f=t,x=null));var j=new qi("action","action",null,l,d);e.push({event:j,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(gs!==0){var A=x?xg(d,x):new FormData(d);Hc(n,{pending:!0,data:A,method:d.method,action:f},null,A)}}else typeof f=="function"&&(j.preventDefault(),A=x?xg(d,x):new FormData(d),Hc(n,{pending:!0,data:A,method:d.method,action:f},f,A))},currentTarget:d}]})}}for(var _u=0;_u<ic.length;_u++){var Su=ic[_u],cy=Su.toLowerCase(),uy=Su[0].toUpperCase()+Su.slice(1);ra(cy,"on"+uy)}ra(Kh,"onAnimationEnd"),ra(Fh,"onAnimationIteration"),ra(Qh,"onAnimationStart"),ra("dblclick","onDoubleClick"),ra("focusin","onFocus"),ra("focusout","onBlur"),ra(Ev,"onTransitionRun"),ra(kv,"onTransitionStart"),ra(Cv,"onTransitionCancel"),ra(Jh,"onTransitionEnd"),pn("onMouseEnter",["mouseout","mouseover"]),pn("onMouseLeave",["mouseout","mouseover"]),pn("onPointerEnter",["pointerout","pointerover"]),pn("onPointerLeave",["pointerout","pointerover"]),Ds("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ds("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ds("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ds("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ds("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ds("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ei="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),dy=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ei));function bg(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var l=e[n],d=l.event;l=l.listeners;e:{var f=void 0;if(t)for(var x=l.length-1;0<=x;x--){var j=l[x],A=j.instance,P=j.currentTarget;if(j=j.listener,A!==f&&d.isPropagationStopped())break e;f=j,d.currentTarget=P;try{f(d)}catch(Q){$i(Q)}d.currentTarget=null,f=A}else for(x=0;x<l.length;x++){if(j=l[x],A=j.instance,P=j.currentTarget,j=j.listener,A!==f&&d.isPropagationStopped())break e;f=j,d.currentTarget=P;try{f(d)}catch(Q){$i(Q)}d.currentTarget=null,f=A}}}}function Se(e,t){var n=t[zo];n===void 0&&(n=t[zo]=new Set);var l=e+"__bubble";n.has(l)||(vg(t,e,2,!1),n.add(l))}function Eu(e,t,n){var l=0;t&&(l|=4),vg(n,e,l,t)}var Cl="_reactListening"+Math.random().toString(36).slice(2);function ku(e){if(!e[Cl]){e[Cl]=!0,dh.forEach(function(n){n!=="selectionchange"&&(dy.has(n)||Eu(n,!1,e),Eu(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Cl]||(t[Cl]=!0,Eu("selectionchange",!1,t))}}function vg(e,t,n,l){switch(Fg(t)){case 2:var d=qy;break;case 8:d=Py;break;default:d=$u}n=d.bind(null,t,n,e),d=void 0,!Ko||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(d=!0),l?d!==void 0?e.addEventListener(t,n,{capture:!0,passive:d}):e.addEventListener(t,n,!0):d!==void 0?e.addEventListener(t,n,{passive:d}):e.addEventListener(t,n,!1)}function Cu(e,t,n,l,d){var f=l;if((t&1)===0&&(t&2)===0&&l!==null)e:for(;;){if(l===null)return;var x=l.tag;if(x===3||x===4){var j=l.stateNode.containerInfo;if(j===d)break;if(x===4)for(x=l.return;x!==null;){var A=x.tag;if((A===3||A===4)&&x.stateNode.containerInfo===d)return;x=x.return}for(;j!==null;){if(x=fn(j),x===null)return;if(A=x.tag,A===5||A===6||A===26||A===27){l=f=x;continue e}j=j.parentNode}}l=l.return}Nh(function(){var P=f,Q=Go(n),Z=[];e:{var $=Xh.get(e);if($!==void 0){var V=qi,le=e;switch(e){case"keypress":if(Bi(n)===0)break e;case"keydown":case"keyup":V=nv;break;case"focusin":le="focus",V=Xo;break;case"focusout":le="blur",V=Xo;break;case"beforeblur":case"afterblur":V=Xo;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":V=Eh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":V=Yb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":V=lv;break;case Kh:case Fh:case Qh:V=Qb;break;case Jh:V=cv;break;case"scroll":case"scrollend":V=Vb;break;case"wheel":V=dv;break;case"copy":case"cut":case"paste":V=Xb;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":V=Ch;break;case"toggle":case"beforetoggle":V=fv}var ge=(t&4)!==0,ze=!ge&&(e==="scroll"||e==="scrollend"),L=ge?$!==null?$+"Capture":null:$;ge=[];for(var D=P,q;D!==null;){var W=D;if(q=W.stateNode,W=W.tag,W!==5&&W!==26&&W!==27||q===null||L===null||(W=jr(D,L),W!=null&&ge.push(ti(D,W,q))),ze)break;D=D.return}0<ge.length&&($=new V($,le,null,n,Q),Z.push({event:$,listeners:ge}))}}if((t&7)===0){e:{if($=e==="mouseover"||e==="pointerover",V=e==="mouseout"||e==="pointerout",$&&n!==Vo&&(le=n.relatedTarget||n.fromElement)&&(fn(le)||le[hn]))break e;if((V||$)&&($=Q.window===Q?Q:($=Q.ownerDocument)?$.defaultView||$.parentWindow:window,V?(le=n.relatedTarget||n.toElement,V=P,le=le?fn(le):null,le!==null&&(ze=u(le),ge=le.tag,le!==ze||ge!==5&&ge!==27&&ge!==6)&&(le=null)):(V=null,le=P),V!==le)){if(ge=Eh,W="onMouseLeave",L="onMouseEnter",D="mouse",(e==="pointerout"||e==="pointerover")&&(ge=Ch,W="onPointerLeave",L="onPointerEnter",D="pointer"),ze=V==null?$:wr(V),q=le==null?$:wr(le),$=new ge(W,D+"leave",V,n,Q),$.target=ze,$.relatedTarget=q,W=null,fn(Q)===P&&(ge=new ge(L,D+"enter",le,n,Q),ge.target=q,ge.relatedTarget=ze,W=ge),ze=W,V&&le)t:{for(ge=hy,L=V,D=le,q=0,W=L;W;W=ge(W))q++;W=0;for(var me=D;me;me=ge(me))W++;for(;0<q-W;)L=ge(L),q--;for(;0<W-q;)D=ge(D),W--;for(;q--;){if(L===D||D!==null&&L===D.alternate){ge=L;break t}L=ge(L),D=ge(D)}ge=null}else ge=null;V!==null&&yg(Z,$,V,ge,!1),le!==null&&ze!==null&&yg(Z,ze,le,ge,!0)}}e:{if($=P?wr(P):window,V=$.nodeName&&$.nodeName.toLowerCase(),V==="select"||V==="input"&&$.type==="file")var Te=Lh;else if(Mh($))if(Bh)Te=Nv;else{Te=wv;var oe=yv}else V=$.nodeName,!V||V.toLowerCase()!=="input"||$.type!=="checkbox"&&$.type!=="radio"?P&&Ho(P.elementType)&&(Te=Lh):Te=jv;if(Te&&(Te=Te(e,P))){Uh(Z,Te,n,Q);break e}oe&&oe(e,$,P),e==="focusout"&&P&&$.type==="number"&&P.memoizedProps.value!=null&&$o($,"number",$.value)}switch(oe=P?wr(P):window,e){case"focusin":(Mh(oe)||oe.contentEditable==="true")&&(jn=oe,sc=P,Tr=null);break;case"focusout":Tr=sc=jn=null;break;case"mousedown":nc=!0;break;case"contextmenu":case"mouseup":case"dragend":nc=!1,Gh(Z,n,Q);break;case"selectionchange":if(Sv)break;case"keydown":case"keyup":Gh(Z,n,Q)}var je;if(Zo)e:{switch(e){case"compositionstart":var ke="onCompositionStart";break e;case"compositionend":ke="onCompositionEnd";break e;case"compositionupdate":ke="onCompositionUpdate";break e}ke=void 0}else wn?Oh(e,n)&&(ke="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(ke="onCompositionStart");ke&&(Ah&&n.locale!=="ko"&&(wn||ke!=="onCompositionStart"?ke==="onCompositionEnd"&&wn&&(je=_h()):(Za=Q,Fo="value"in Za?Za.value:Za.textContent,wn=!0)),oe=Al(P,ke),0<oe.length&&(ke=new kh(ke,e,null,n,Q),Z.push({event:ke,listeners:oe}),je?ke.data=je:(je=Dh(n),je!==null&&(ke.data=je)))),(je=gv?pv(e,n):xv(e,n))&&(ke=Al(P,"onBeforeInput"),0<ke.length&&(oe=new kh("onBeforeInput","beforeinput",null,n,Q),Z.push({event:oe,listeners:ke}),oe.data=je)),oy(Z,e,P,n,Q)}bg(Z,t)})}function ti(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Al(e,t){for(var n=t+"Capture",l=[];e!==null;){var d=e,f=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||f===null||(d=jr(e,n),d!=null&&l.unshift(ti(e,d,f)),d=jr(e,t),d!=null&&l.push(ti(e,d,f))),e.tag===3)return l;e=e.return}return[]}function hy(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function yg(e,t,n,l,d){for(var f=t._reactName,x=[];n!==null&&n!==l;){var j=n,A=j.alternate,P=j.stateNode;if(j=j.tag,A!==null&&A===l)break;j!==5&&j!==26&&j!==27||P===null||(A=P,d?(P=jr(n,f),P!=null&&x.unshift(ti(n,P,A))):d||(P=jr(n,f),P!=null&&x.push(ti(n,P,A)))),n=n.return}x.length!==0&&e.push({event:t,listeners:x})}var fy=/\r\n?/g,my=/\u0000|\uFFFD/g;function wg(e){return(typeof e=="string"?e:""+e).replace(fy,`
`).replace(my,"")}function jg(e,t){return t=wg(t),wg(e)===t}function Be(e,t,n,l,d,f){switch(n){case"children":typeof l=="string"?t==="body"||t==="textarea"&&l===""||bn(e,l):(typeof l=="number"||typeof l=="bigint")&&t!=="body"&&bn(e,""+l);break;case"className":Di(e,"class",l);break;case"tabIndex":Di(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Di(e,n,l);break;case"style":wh(e,l,f);break;case"data":if(t!=="object"){Di(e,"data",l);break}case"src":case"href":if(l===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(n);break}l=Ui(""+l),e.setAttribute(n,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(n==="formAction"?(t!=="input"&&Be(e,t,"name",d.name,d,null),Be(e,t,"formEncType",d.formEncType,d,null),Be(e,t,"formMethod",d.formMethod,d,null),Be(e,t,"formTarget",d.formTarget,d,null)):(Be(e,t,"encType",d.encType,d,null),Be(e,t,"method",d.method,d,null),Be(e,t,"target",d.target,d,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(n);break}l=Ui(""+l),e.setAttribute(n,l);break;case"onClick":l!=null&&(e.onclick=ka);break;case"onScroll":l!=null&&Se("scroll",e);break;case"onScrollEnd":l!=null&&Se("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(o(61));if(n=l.__html,n!=null){if(d.children!=null)throw Error(o(60));e.innerHTML=n}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}n=Ui(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(n,""+l):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":l===!0?e.setAttribute(n,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(n,l):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(n,l):e.removeAttribute(n);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(n):e.setAttribute(n,l);break;case"popover":Se("beforetoggle",e),Se("toggle",e),Oi(e,"popover",l);break;case"xlinkActuate":Ea(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Ea(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Ea(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Ea(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Ea(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Ea(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Ea(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Ea(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Ea(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Oi(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=$b.get(n)||n,Oi(e,n,l))}}function Au(e,t,n,l,d,f){switch(n){case"style":wh(e,l,f);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(o(61));if(n=l.__html,n!=null){if(d.children!=null)throw Error(o(60));e.innerHTML=n}}break;case"children":typeof l=="string"?bn(e,l):(typeof l=="number"||typeof l=="bigint")&&bn(e,""+l);break;case"onScroll":l!=null&&Se("scroll",e);break;case"onScrollEnd":l!=null&&Se("scrollend",e);break;case"onClick":l!=null&&(e.onclick=ka);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!hh.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(d=n.endsWith("Capture"),t=n.slice(2,d?n.length-7:void 0),f=e[Ct]||null,f=f!=null?f[n]:null,typeof f=="function"&&e.removeEventListener(t,f,d),typeof l=="function")){typeof f!="function"&&f!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,l,d);break e}n in e?e[n]=l:l===!0?e.setAttribute(n,""):Oi(e,n,l)}}}function pt(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Se("error",e),Se("load",e);var l=!1,d=!1,f;for(f in n)if(n.hasOwnProperty(f)){var x=n[f];if(x!=null)switch(f){case"src":l=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:Be(e,t,f,x,n,null)}}d&&Be(e,t,"srcSet",n.srcSet,n,null),l&&Be(e,t,"src",n.src,n,null);return;case"input":Se("invalid",e);var j=f=x=d=null,A=null,P=null;for(l in n)if(n.hasOwnProperty(l)){var Q=n[l];if(Q!=null)switch(l){case"name":d=Q;break;case"type":x=Q;break;case"checked":A=Q;break;case"defaultChecked":P=Q;break;case"value":f=Q;break;case"defaultValue":j=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(o(137,t));break;default:Be(e,t,l,Q,n,null)}}xh(e,f,j,A,P,x,d,!1);return;case"select":Se("invalid",e),l=x=f=null;for(d in n)if(n.hasOwnProperty(d)&&(j=n[d],j!=null))switch(d){case"value":f=j;break;case"defaultValue":x=j;break;case"multiple":l=j;default:Be(e,t,d,j,n,null)}t=f,n=x,e.multiple=!!l,t!=null?xn(e,!!l,t,!1):n!=null&&xn(e,!!l,n,!0);return;case"textarea":Se("invalid",e),f=d=l=null;for(x in n)if(n.hasOwnProperty(x)&&(j=n[x],j!=null))switch(x){case"value":l=j;break;case"defaultValue":d=j;break;case"children":f=j;break;case"dangerouslySetInnerHTML":if(j!=null)throw Error(o(91));break;default:Be(e,t,x,j,n,null)}vh(e,l,d,f);return;case"option":for(A in n)if(n.hasOwnProperty(A)&&(l=n[A],l!=null))switch(A){case"selected":e.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Be(e,t,A,l,n,null)}return;case"dialog":Se("beforetoggle",e),Se("toggle",e),Se("cancel",e),Se("close",e);break;case"iframe":case"object":Se("load",e);break;case"video":case"audio":for(l=0;l<ei.length;l++)Se(ei[l],e);break;case"image":Se("error",e),Se("load",e);break;case"details":Se("toggle",e);break;case"embed":case"source":case"link":Se("error",e),Se("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(P in n)if(n.hasOwnProperty(P)&&(l=n[P],l!=null))switch(P){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:Be(e,t,P,l,n,null)}return;default:if(Ho(t)){for(Q in n)n.hasOwnProperty(Q)&&(l=n[Q],l!==void 0&&Au(e,t,Q,l,n,void 0));return}}for(j in n)n.hasOwnProperty(j)&&(l=n[j],l!=null&&Be(e,t,j,l,n,null))}function gy(e,t,n,l){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,f=null,x=null,j=null,A=null,P=null,Q=null;for(V in n){var Z=n[V];if(n.hasOwnProperty(V)&&Z!=null)switch(V){case"checked":break;case"value":break;case"defaultValue":A=Z;default:l.hasOwnProperty(V)||Be(e,t,V,null,l,Z)}}for(var $ in l){var V=l[$];if(Z=n[$],l.hasOwnProperty($)&&(V!=null||Z!=null))switch($){case"type":f=V;break;case"name":d=V;break;case"checked":P=V;break;case"defaultChecked":Q=V;break;case"value":x=V;break;case"defaultValue":j=V;break;case"children":case"dangerouslySetInnerHTML":if(V!=null)throw Error(o(137,t));break;default:V!==Z&&Be(e,t,$,V,l,Z)}}Io(e,x,j,A,P,Q,f,d);return;case"select":V=x=j=$=null;for(f in n)if(A=n[f],n.hasOwnProperty(f)&&A!=null)switch(f){case"value":break;case"multiple":V=A;default:l.hasOwnProperty(f)||Be(e,t,f,null,l,A)}for(d in l)if(f=l[d],A=n[d],l.hasOwnProperty(d)&&(f!=null||A!=null))switch(d){case"value":$=f;break;case"defaultValue":j=f;break;case"multiple":x=f;default:f!==A&&Be(e,t,d,f,l,A)}t=j,n=x,l=V,$!=null?xn(e,!!n,$,!1):!!l!=!!n&&(t!=null?xn(e,!!n,t,!0):xn(e,!!n,n?[]:"",!1));return;case"textarea":V=$=null;for(j in n)if(d=n[j],n.hasOwnProperty(j)&&d!=null&&!l.hasOwnProperty(j))switch(j){case"value":break;case"children":break;default:Be(e,t,j,null,l,d)}for(x in l)if(d=l[x],f=n[x],l.hasOwnProperty(x)&&(d!=null||f!=null))switch(x){case"value":$=d;break;case"defaultValue":V=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(o(91));break;default:d!==f&&Be(e,t,x,d,l,f)}bh(e,$,V);return;case"option":for(var le in n)if($=n[le],n.hasOwnProperty(le)&&$!=null&&!l.hasOwnProperty(le))switch(le){case"selected":e.selected=!1;break;default:Be(e,t,le,null,l,$)}for(A in l)if($=l[A],V=n[A],l.hasOwnProperty(A)&&$!==V&&($!=null||V!=null))switch(A){case"selected":e.selected=$&&typeof $!="function"&&typeof $!="symbol";break;default:Be(e,t,A,$,l,V)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ge in n)$=n[ge],n.hasOwnProperty(ge)&&$!=null&&!l.hasOwnProperty(ge)&&Be(e,t,ge,null,l,$);for(P in l)if($=l[P],V=n[P],l.hasOwnProperty(P)&&$!==V&&($!=null||V!=null))switch(P){case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(o(137,t));break;default:Be(e,t,P,$,l,V)}return;default:if(Ho(t)){for(var ze in n)$=n[ze],n.hasOwnProperty(ze)&&$!==void 0&&!l.hasOwnProperty(ze)&&Au(e,t,ze,void 0,l,$);for(Q in l)$=l[Q],V=n[Q],!l.hasOwnProperty(Q)||$===V||$===void 0&&V===void 0||Au(e,t,Q,$,l,V);return}}for(var L in n)$=n[L],n.hasOwnProperty(L)&&$!=null&&!l.hasOwnProperty(L)&&Be(e,t,L,null,l,$);for(Z in l)$=l[Z],V=n[Z],!l.hasOwnProperty(Z)||$===V||$==null&&V==null||Be(e,t,Z,$,l,V)}function Ng(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function py(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,n=performance.getEntriesByType("resource"),l=0;l<n.length;l++){var d=n[l],f=d.transferSize,x=d.initiatorType,j=d.duration;if(f&&j&&Ng(x)){for(x=0,j=d.responseEnd,l+=1;l<n.length;l++){var A=n[l],P=A.startTime;if(P>j)break;var Q=A.transferSize,Z=A.initiatorType;Q&&Ng(Z)&&(A=A.responseEnd,x+=Q*(A<j?1:(j-P)/(A-P)))}if(--l,t+=8*(f+x)/(d.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Tu=null,Ru=null;function Tl(e){return e.nodeType===9?e:e.ownerDocument}function _g(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Sg(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Ou(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Du=null;function xy(){var e=window.event;return e&&e.type==="popstate"?e===Du?!1:(Du=e,!0):(Du=null,!1)}var Eg=typeof setTimeout=="function"?setTimeout:void 0,by=typeof clearTimeout=="function"?clearTimeout:void 0,kg=typeof Promise=="function"?Promise:void 0,vy=typeof queueMicrotask=="function"?queueMicrotask:typeof kg<"u"?function(e){return kg.resolve(null).then(e).catch(yy)}:Eg;function yy(e){setTimeout(function(){throw e})}function ps(e){return e==="head"}function Cg(e,t){var n=t,l=0;do{var d=n.nextSibling;if(e.removeChild(n),d&&d.nodeType===8)if(n=d.data,n==="/$"||n==="/&"){if(l===0){e.removeChild(d),Qn(t);return}l--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")l++;else if(n==="html")ai(e.ownerDocument.documentElement);else if(n==="head"){n=e.ownerDocument.head,ai(n);for(var f=n.firstChild;f;){var x=f.nextSibling,j=f.nodeName;f[yr]||j==="SCRIPT"||j==="STYLE"||j==="LINK"&&f.rel.toLowerCase()==="stylesheet"||n.removeChild(f),f=x}}else n==="body"&&ai(e.ownerDocument.body);n=d}while(n);Qn(t)}function Ag(e,t){var n=e;e=0;do{var l=n.nextSibling;if(n.nodeType===1?t?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(t?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),l&&l.nodeType===8)if(n=l.data,n==="/$"){if(e===0)break;e--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||e++;n=l}while(n)}function Mu(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Mu(n),qo(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function wy(e,t,n,l){for(;e.nodeType===1;){var d=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[yr])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(f=e.getAttribute("rel"),f==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(f!==d.rel||e.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||e.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||e.getAttribute("title")!==(d.title==null?null:d.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(f=e.getAttribute("src"),(f!==(d.src==null?null:d.src)||e.getAttribute("type")!==(d.type==null?null:d.type)||e.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&f&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var f=d.name==null?null:""+d.name;if(d.type==="hidden"&&e.getAttribute("name")===f)return e}else return e;if(e=ta(e.nextSibling),e===null)break}return null}function jy(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=ta(e.nextSibling),e===null))return null;return e}function Tg(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=ta(e.nextSibling),e===null))return null;return e}function Uu(e){return e.data==="$?"||e.data==="$~"}function Lu(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function Ny(e,t){var n=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||n.readyState!=="loading")t();else{var l=function(){t(),n.removeEventListener("DOMContentLoaded",l)};n.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function ta(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var Bu=null;function Rg(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"||n==="/&"){if(t===0)return ta(e.nextSibling);t--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||t++}e=e.nextSibling}return null}function Og(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(t===0)return e;t--}else n!=="/$"&&n!=="/&"||t++}e=e.previousSibling}return null}function Dg(e,t,n){switch(t=Tl(n),e){case"html":if(e=t.documentElement,!e)throw Error(o(452));return e;case"head":if(e=t.head,!e)throw Error(o(453));return e;case"body":if(e=t.body,!e)throw Error(o(454));return e;default:throw Error(o(451))}}function ai(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);qo(e)}var aa=new Map,Mg=new Set;function Rl(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Ha=Y.d;Y.d={f:_y,r:Sy,D:Ey,C:ky,L:Cy,m:Ay,X:Ry,S:Ty,M:Oy};function _y(){var e=Ha.f(),t=jl();return e||t}function Sy(e){var t=mn(e);t!==null&&t.tag===5&&t.type==="form"?Xf(t):Ha.r(e)}var Yn=typeof document>"u"?null:document;function Ug(e,t,n){var l=Yn;if(l&&typeof t=="string"&&t){var d=Ft(t);d='link[rel="'+e+'"][href="'+d+'"]',typeof n=="string"&&(d+='[crossorigin="'+n+'"]'),Mg.has(d)||(Mg.add(d),e={rel:e,crossOrigin:n,href:t},l.querySelector(d)===null&&(t=l.createElement("link"),pt(t,"link",e),ct(t),l.head.appendChild(t)))}}function Ey(e){Ha.D(e),Ug("dns-prefetch",e,null)}function ky(e,t){Ha.C(e,t),Ug("preconnect",e,t)}function Cy(e,t,n){Ha.L(e,t,n);var l=Yn;if(l&&e&&t){var d='link[rel="preload"][as="'+Ft(t)+'"]';t==="image"&&n&&n.imageSrcSet?(d+='[imagesrcset="'+Ft(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(d+='[imagesizes="'+Ft(n.imageSizes)+'"]')):d+='[href="'+Ft(e)+'"]';var f=d;switch(t){case"style":f=Kn(e);break;case"script":f=Fn(e)}aa.has(f)||(e=w({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),aa.set(f,e),l.querySelector(d)!==null||t==="style"&&l.querySelector(si(f))||t==="script"&&l.querySelector(ni(f))||(t=l.createElement("link"),pt(t,"link",e),ct(t),l.head.appendChild(t)))}}function Ay(e,t){Ha.m(e,t);var n=Yn;if(n&&e){var l=t&&typeof t.as=="string"?t.as:"script",d='link[rel="modulepreload"][as="'+Ft(l)+'"][href="'+Ft(e)+'"]',f=d;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=Fn(e)}if(!aa.has(f)&&(e=w({rel:"modulepreload",href:e},t),aa.set(f,e),n.querySelector(d)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(ni(f)))return}l=n.createElement("link"),pt(l,"link",e),ct(l),n.head.appendChild(l)}}}function Ty(e,t,n){Ha.S(e,t,n);var l=Yn;if(l&&e){var d=gn(l).hoistableStyles,f=Kn(e);t=t||"default";var x=d.get(f);if(!x){var j={loading:0,preload:null};if(x=l.querySelector(si(f)))j.loading=5;else{e=w({rel:"stylesheet",href:e,"data-precedence":t},n),(n=aa.get(f))&&zu(e,n);var A=x=l.createElement("link");ct(A),pt(A,"link",e),A._p=new Promise(function(P,Q){A.onload=P,A.onerror=Q}),A.addEventListener("load",function(){j.loading|=1}),A.addEventListener("error",function(){j.loading|=2}),j.loading|=4,Ol(x,t,l)}x={type:"stylesheet",instance:x,count:1,state:j},d.set(f,x)}}}function Ry(e,t){Ha.X(e,t);var n=Yn;if(n&&e){var l=gn(n).hoistableScripts,d=Fn(e),f=l.get(d);f||(f=n.querySelector(ni(d)),f||(e=w({src:e,async:!0},t),(t=aa.get(d))&&qu(e,t),f=n.createElement("script"),ct(f),pt(f,"link",e),n.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(d,f))}}function Oy(e,t){Ha.M(e,t);var n=Yn;if(n&&e){var l=gn(n).hoistableScripts,d=Fn(e),f=l.get(d);f||(f=n.querySelector(ni(d)),f||(e=w({src:e,async:!0,type:"module"},t),(t=aa.get(d))&&qu(e,t),f=n.createElement("script"),ct(f),pt(f,"link",e),n.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(d,f))}}function Lg(e,t,n,l){var d=(d=ie.current)?Rl(d):null;if(!d)throw Error(o(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=Kn(n.href),n=gn(d).hoistableStyles,l=n.get(t),l||(l={type:"style",instance:null,count:0,state:null},n.set(t,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=Kn(n.href);var f=gn(d).hoistableStyles,x=f.get(e);if(x||(d=d.ownerDocument||d,x={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(e,x),(f=d.querySelector(si(e)))&&!f._p&&(x.instance=f,x.state.loading=5),aa.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},aa.set(e,n),f||Dy(d,e,n,x.state))),t&&l===null)throw Error(o(528,""));return x}if(t&&l!==null)throw Error(o(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Fn(n),n=gn(d).hoistableScripts,l=n.get(t),l||(l={type:"script",instance:null,count:0,state:null},n.set(t,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,e))}}function Kn(e){return'href="'+Ft(e)+'"'}function si(e){return'link[rel="stylesheet"]['+e+"]"}function Bg(e){return w({},e,{"data-precedence":e.precedence,precedence:null})}function Dy(e,t,n,l){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?l.loading=1:(t=e.createElement("link"),l.preload=t,t.addEventListener("load",function(){return l.loading|=1}),t.addEventListener("error",function(){return l.loading|=2}),pt(t,"link",n),ct(t),e.head.appendChild(t))}function Fn(e){return'[src="'+Ft(e)+'"]'}function ni(e){return"script[async]"+e}function zg(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var l=e.querySelector('style[data-href~="'+Ft(n.href)+'"]');if(l)return t.instance=l,ct(l),l;var d=w({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),ct(l),pt(l,"style",d),Ol(l,n.precedence,e),t.instance=l;case"stylesheet":d=Kn(n.href);var f=e.querySelector(si(d));if(f)return t.state.loading|=4,t.instance=f,ct(f),f;l=Bg(n),(d=aa.get(d))&&zu(l,d),f=(e.ownerDocument||e).createElement("link"),ct(f);var x=f;return x._p=new Promise(function(j,A){x.onload=j,x.onerror=A}),pt(f,"link",l),t.state.loading|=4,Ol(f,n.precedence,e),t.instance=f;case"script":return f=Fn(n.src),(d=e.querySelector(ni(f)))?(t.instance=d,ct(d),d):(l=n,(d=aa.get(f))&&(l=w({},n),qu(l,d)),e=e.ownerDocument||e,d=e.createElement("script"),ct(d),pt(d,"link",l),e.head.appendChild(d),t.instance=d);case"void":return null;default:throw Error(o(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(l=t.instance,t.state.loading|=4,Ol(l,n.precedence,e));return t.instance}function Ol(e,t,n){for(var l=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=l.length?l[l.length-1]:null,f=d,x=0;x<l.length;x++){var j=l[x];if(j.dataset.precedence===t)f=j;else if(f!==d)break}f?f.parentNode.insertBefore(e,f.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function zu(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function qu(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Dl=null;function qg(e,t,n){if(Dl===null){var l=new Map,d=Dl=new Map;d.set(n,l)}else d=Dl,l=d.get(n),l||(l=new Map,d.set(n,l));if(l.has(e))return l;for(l.set(e,null),n=n.getElementsByTagName(e),d=0;d<n.length;d++){var f=n[d];if(!(f[yr]||f[ht]||e==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var x=f.getAttribute(t)||"";x=e+x;var j=l.get(x);j?j.push(f):l.set(x,[f])}}return l}function Pg(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function My(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Ig(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function Uy(e,t,n,l){if(n.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(n.state.loading&4)===0){if(n.instance===null){var d=Kn(l.href),f=t.querySelector(si(d));if(f){t=f._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=Ml.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=f,ct(f);return}f=t.ownerDocument||t,l=Bg(l),(d=aa.get(d))&&zu(l,d),f=f.createElement("link"),ct(f);var x=f;x._p=new Promise(function(j,A){x.onload=j,x.onerror=A}),pt(f,"link",l),n.instance=f}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&(n.state.loading&3)===0&&(e.count++,n=Ml.bind(e),t.addEventListener("load",n),t.addEventListener("error",n))}}var Pu=0;function Ly(e,t){return e.stylesheets&&e.count===0&&Ll(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var l=setTimeout(function(){if(e.stylesheets&&Ll(e,e.stylesheets),e.unsuspend){var f=e.unsuspend;e.unsuspend=null,f()}},6e4+t);0<e.imgBytes&&Pu===0&&(Pu=62500*py());var d=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Ll(e,e.stylesheets),e.unsuspend)){var f=e.unsuspend;e.unsuspend=null,f()}},(e.imgBytes>Pu?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(l),clearTimeout(d)}}:null}function Ml(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ll(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Ul=null;function Ll(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Ul=new Map,t.forEach(By,e),Ul=null,Ml.call(e))}function By(e,t){if(!(t.state.loading&4)){var n=Ul.get(e);if(n)var l=n.get(null);else{n=new Map,Ul.set(e,n);for(var d=e.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<d.length;f++){var x=d[f];(x.nodeName==="LINK"||x.getAttribute("media")!=="not all")&&(n.set(x.dataset.precedence,x),l=x)}l&&n.set(null,l)}d=t.instance,x=d.getAttribute("data-precedence"),f=n.get(x)||l,f===l&&n.set(null,d),n.set(x,d),this.count++,l=Ml.bind(this),d.addEventListener("load",l),d.addEventListener("error",l),f?f.parentNode.insertBefore(d,f.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(d,e.firstChild)),t.state.loading|=4}}var ri={$$typeof:T,Provider:null,Consumer:null,_currentValue:ne,_currentValue2:ne,_threadCount:0};function zy(e,t,n,l,d,f,x,j,A){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Uo(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Uo(0),this.hiddenUpdates=Uo(null),this.identifierPrefix=l,this.onUncaughtError=d,this.onCaughtError=f,this.onRecoverableError=x,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=A,this.incompleteTransitions=new Map}function $g(e,t,n,l,d,f,x,j,A,P,Q,Z){return e=new zy(e,t,n,x,A,P,Q,Z,j),t=1,f===!0&&(t|=24),f=Bt(3,null,null,t),e.current=f,f.stateNode=e,t=vc(),t.refCount++,e.pooledCache=t,t.refCount++,f.memoizedState={element:l,isDehydrated:n,cache:t},Nc(f),e}function Hg(e){return e?(e=Sn,e):Sn}function Vg(e,t,n,l,d,f){d=Hg(d),l.context===null?l.context=d:l.pendingContext=d,l=rs(t),l.payload={element:n},f=f===void 0?null:f,f!==null&&(l.callback=f),n=is(e,l,t),n!==null&&(Mt(n,e,t),Br(n,e,t))}function Gg(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Iu(e,t){Gg(e,t),(e=e.alternate)&&Gg(e,t)}function Yg(e){if(e.tag===13||e.tag===31){var t=Bs(e,67108864);t!==null&&Mt(t,e,67108864),Iu(e,67108864)}}function Kg(e){if(e.tag===13||e.tag===31){var t=$t();t=Lo(t);var n=Bs(e,t);n!==null&&Mt(n,e,t),Iu(e,t)}}var Bl=!0;function qy(e,t,n,l){var d=R.T;R.T=null;var f=Y.p;try{Y.p=2,$u(e,t,n,l)}finally{Y.p=f,R.T=d}}function Py(e,t,n,l){var d=R.T;R.T=null;var f=Y.p;try{Y.p=8,$u(e,t,n,l)}finally{Y.p=f,R.T=d}}function $u(e,t,n,l){if(Bl){var d=Hu(l);if(d===null)Cu(e,t,l,zl,n),Qg(e,l);else if($y(d,e,t,n,l))l.stopPropagation();else if(Qg(e,l),t&4&&-1<Iy.indexOf(e)){for(;d!==null;){var f=mn(d);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var x=Xa(f.pendingLanes);if(x!==0){var j=f;for(j.pendingLanes|=2,j.entangledLanes|=2;x;){var A=1<<31-xt(x);j.entanglements[1]|=A,x&=~A}ja(f),(Oe&6)===0&&(yl=We()+500,Zr(0))}}break;case 31:case 13:j=Bs(f,2),j!==null&&Mt(j,f,2),jl(),Iu(f,2)}if(f=Hu(l),f===null&&Cu(e,t,l,zl,n),f===d)break;d=f}d!==null&&l.stopPropagation()}else Cu(e,t,l,null,n)}}function Hu(e){return e=Go(e),Vu(e)}var zl=null;function Vu(e){if(zl=null,e=fn(e),e!==null){var t=u(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=h(t),e!==null)return e;e=null}else if(n===31){if(e=p(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return zl=e,null}function Fg(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(cn()){case un:return 2;case Et:return 8;case dn:case xr:return 32;case ki:return 268435456;default:return 32}default:return 32}}var Gu=!1,xs=null,bs=null,vs=null,ii=new Map,li=new Map,ys=[],Iy="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Qg(e,t){switch(e){case"focusin":case"focusout":xs=null;break;case"dragenter":case"dragleave":bs=null;break;case"mouseover":case"mouseout":vs=null;break;case"pointerover":case"pointerout":ii.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":li.delete(t.pointerId)}}function oi(e,t,n,l,d,f){return e===null||e.nativeEvent!==f?(e={blockedOn:t,domEventName:n,eventSystemFlags:l,nativeEvent:f,targetContainers:[d]},t!==null&&(t=mn(t),t!==null&&Yg(t)),e):(e.eventSystemFlags|=l,t=e.targetContainers,d!==null&&t.indexOf(d)===-1&&t.push(d),e)}function $y(e,t,n,l,d){switch(t){case"focusin":return xs=oi(xs,e,t,n,l,d),!0;case"dragenter":return bs=oi(bs,e,t,n,l,d),!0;case"mouseover":return vs=oi(vs,e,t,n,l,d),!0;case"pointerover":var f=d.pointerId;return ii.set(f,oi(ii.get(f)||null,e,t,n,l,d)),!0;case"gotpointercapture":return f=d.pointerId,li.set(f,oi(li.get(f)||null,e,t,n,l,d)),!0}return!1}function Jg(e){var t=fn(e.target);if(t!==null){var n=u(t);if(n!==null){if(t=n.tag,t===13){if(t=h(n),t!==null){e.blockedOn=t,ch(e.priority,function(){Kg(n)});return}}else if(t===31){if(t=p(n),t!==null){e.blockedOn=t,ch(e.priority,function(){Kg(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ql(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Hu(e.nativeEvent);if(n===null){n=e.nativeEvent;var l=new n.constructor(n.type,n);Vo=l,n.target.dispatchEvent(l),Vo=null}else return t=mn(n),t!==null&&Yg(t),e.blockedOn=n,!1;t.shift()}return!0}function Xg(e,t,n){ql(e)&&n.delete(t)}function Hy(){Gu=!1,xs!==null&&ql(xs)&&(xs=null),bs!==null&&ql(bs)&&(bs=null),vs!==null&&ql(vs)&&(vs=null),ii.forEach(Xg),li.forEach(Xg)}function Pl(e,t){e.blockedOn===t&&(e.blockedOn=null,Gu||(Gu=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Hy)))}var Il=null;function Wg(e){Il!==e&&(Il=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Il===e&&(Il=null);for(var t=0;t<e.length;t+=3){var n=e[t],l=e[t+1],d=e[t+2];if(typeof l!="function"){if(Vu(l||n)===null)continue;break}var f=mn(n);f!==null&&(e.splice(t,3),t-=3,Hc(f,{pending:!0,data:d,method:n.method,action:l},l,d))}}))}function Qn(e){function t(A){return Pl(A,e)}xs!==null&&Pl(xs,e),bs!==null&&Pl(bs,e),vs!==null&&Pl(vs,e),ii.forEach(t),li.forEach(t);for(var n=0;n<ys.length;n++){var l=ys[n];l.blockedOn===e&&(l.blockedOn=null)}for(;0<ys.length&&(n=ys[0],n.blockedOn===null);)Jg(n),n.blockedOn===null&&ys.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(l=0;l<n.length;l+=3){var d=n[l],f=n[l+1],x=d[Ct]||null;if(typeof f=="function")x||Wg(n);else if(x){var j=null;if(f&&f.hasAttribute("formAction")){if(d=f,x=f[Ct]||null)j=x.formAction;else if(Vu(d)!==null)continue}else j=x.action;typeof j=="function"?n[l+1]=j:(n.splice(l,3),l-=3),Wg(n)}}}function Zg(){function e(f){f.canIntercept&&f.info==="react-transition"&&f.intercept({handler:function(){return new Promise(function(x){return d=x})},focusReset:"manual",scroll:"manual"})}function t(){d!==null&&(d(),d=null),l||setTimeout(n,20)}function n(){if(!l&&!navigation.transition){var f=navigation.currentEntry;f&&f.url!=null&&navigation.navigate(f.url,{state:f.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,d=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(n,100),function(){l=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),d!==null&&(d(),d=null)}}}function Yu(e){this._internalRoot=e}$l.prototype.render=Yu.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(o(409));var n=t.current,l=$t();Vg(n,l,e,t,null,null)},$l.prototype.unmount=Yu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Vg(e.current,2,null,e,null,null),jl(),t[hn]=null}};function $l(e){this._internalRoot=e}$l.prototype.unstable_scheduleHydration=function(e){if(e){var t=oh();e={blockedOn:null,target:e,priority:t};for(var n=0;n<ys.length&&t!==0&&t<ys[n].priority;n++);ys.splice(n,0,e),n===0&&Jg(e)}};var ep=s.version;if(ep!=="19.2.0")throw Error(o(527,ep,"19.2.0"));Y.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(o(188)):(e=Object.keys(e).join(","),Error(o(268,e)));return e=g(t),e=e!==null?b(e):null,e=e===null?null:e.stateNode,e};var Vy={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:R,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Hl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hl.isDisabled&&Hl.supportsFiber)try{xa=Hl.inject(Vy),kt=Hl}catch{}}return ui.createRoot=function(e,t){if(!c(e))throw Error(o(299));var n=!1,l="",d=lm,f=om,x=cm;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(l=t.identifierPrefix),t.onUncaughtError!==void 0&&(d=t.onUncaughtError),t.onCaughtError!==void 0&&(f=t.onCaughtError),t.onRecoverableError!==void 0&&(x=t.onRecoverableError)),t=$g(e,1,!1,null,null,n,l,null,d,f,x,Zg),e[hn]=t.current,ku(e),new Yu(t)},ui.hydrateRoot=function(e,t,n){if(!c(e))throw Error(o(299));var l=!1,d="",f=lm,x=om,j=cm,A=null;return n!=null&&(n.unstable_strictMode===!0&&(l=!0),n.identifierPrefix!==void 0&&(d=n.identifierPrefix),n.onUncaughtError!==void 0&&(f=n.onUncaughtError),n.onCaughtError!==void 0&&(x=n.onCaughtError),n.onRecoverableError!==void 0&&(j=n.onRecoverableError),n.formState!==void 0&&(A=n.formState)),t=$g(e,1,!0,t,n??null,l,d,A,f,x,j,Zg),t.context=Hg(null),n=t.current,l=$t(),l=Lo(l),d=rs(l),d.callback=null,is(n,d,l),n=l,t.current.lanes=n,vr(t,n),ja(t),e[hn]=t.current,ku(e),new $l(t)},ui.version="19.2.0",ui}var up;function a0(){if(up)return Qu.exports;up=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(s){console.error(s)}}return r(),Qu.exports=t0(),Qu.exports}var s0=a0();const n0=Ud(s0);/**
 * react-router v7.9.5
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var dp="popstate";function r0(r={}){function s(o,c){let{pathname:u,search:h,hash:p}=o.location;return md("",{pathname:u,search:h,hash:p},c.state&&c.state.usr||null,c.state&&c.state.key||"default")}function i(o,c){return typeof c=="string"?c:bi(c)}return l0(s,i,null,r)}function Ye(r,s){if(r===!1||r===null||typeof r>"u")throw new Error(s)}function ha(r,s){if(!r){typeof console<"u"&&console.warn(s);try{throw new Error(s)}catch{}}}function i0(){return Math.random().toString(36).substring(2,10)}function hp(r,s){return{usr:r.state,key:r.key,idx:s}}function md(r,s,i=null,o){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof s=="string"?ur(s):s,state:i,key:s&&s.key||o||i0()}}function bi({pathname:r="/",search:s="",hash:i=""}){return s&&s!=="?"&&(r+=s.charAt(0)==="?"?s:"?"+s),i&&i!=="#"&&(r+=i.charAt(0)==="#"?i:"#"+i),r}function ur(r){let s={};if(r){let i=r.indexOf("#");i>=0&&(s.hash=r.substring(i),r=r.substring(0,i));let o=r.indexOf("?");o>=0&&(s.search=r.substring(o),r=r.substring(0,o)),r&&(s.pathname=r)}return s}function l0(r,s,i,o={}){let{window:c=document.defaultView,v5Compat:u=!1}=o,h=c.history,p="POP",m=null,g=b();g==null&&(g=0,h.replaceState({...h.state,idx:g},""));function b(){return(h.state||{idx:null}).idx}function w(){p="POP";let y=b(),C=y==null?null:y-g;g=y,m&&m({action:p,location:E.location,delta:C})}function N(y,C){p="PUSH";let M=md(E.location,y,C);g=b()+1;let T=hp(M,g),z=E.createHref(M);try{h.pushState(T,"",z)}catch(U){if(U instanceof DOMException&&U.name==="DataCloneError")throw U;c.location.assign(z)}u&&m&&m({action:p,location:E.location,delta:1})}function S(y,C){p="REPLACE";let M=md(E.location,y,C);g=b();let T=hp(M,g),z=E.createHref(M);h.replaceState(T,"",z),u&&m&&m({action:p,location:E.location,delta:0})}function v(y){return o0(y)}let E={get action(){return p},get location(){return r(c,h)},listen(y){if(m)throw new Error("A history only accepts one active listener");return c.addEventListener(dp,w),m=y,()=>{c.removeEventListener(dp,w),m=null}},createHref(y){return s(c,y)},createURL:v,encodeLocation(y){let C=v(y);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:N,replace:S,go(y){return h.go(y)}};return E}function o0(r,s=!1){let i="http://localhost";typeof window<"u"&&(i=window.location.origin!=="null"?window.location.origin:window.location.href),Ye(i,"No window.location.(origin|href) available to create URL");let o=typeof r=="string"?r:bi(r);return o=o.replace(/ $/,"%20"),!s&&o.startsWith("//")&&(o=i+o),new URL(o,i)}function hx(r,s,i="/"){return c0(r,s,i,!1)}function c0(r,s,i,o){let c=typeof s=="string"?ur(s):s,u=Fa(c.pathname||"/",i);if(u==null)return null;let h=fx(r);u0(h);let p=null;for(let m=0;p==null&&m<h.length;++m){let g=w0(u);p=v0(h[m],g,o)}return p}function fx(r,s=[],i=[],o="",c=!1){let u=(h,p,m=c,g)=>{let b={relativePath:g===void 0?h.path||"":g,caseSensitive:h.caseSensitive===!0,childrenIndex:p,route:h};if(b.relativePath.startsWith("/")){if(!b.relativePath.startsWith(o)&&m)return;Ye(b.relativePath.startsWith(o),`Absolute route path "${b.relativePath}" nested under path "${o}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),b.relativePath=b.relativePath.slice(o.length)}let w=Ka([o,b.relativePath]),N=i.concat(b);h.children&&h.children.length>0&&(Ye(h.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${w}".`),fx(h.children,s,N,w,m)),!(h.path==null&&!h.index)&&s.push({path:w,score:x0(w,h.index),routesMeta:N})};return r.forEach((h,p)=>{var m;if(h.path===""||!((m=h.path)!=null&&m.includes("?")))u(h,p);else for(let g of mx(h.path))u(h,p,!0,g)}),s}function mx(r){let s=r.split("/");if(s.length===0)return[];let[i,...o]=s,c=i.endsWith("?"),u=i.replace(/\?$/,"");if(o.length===0)return c?[u,""]:[u];let h=mx(o.join("/")),p=[];return p.push(...h.map(m=>m===""?u:[u,m].join("/"))),c&&p.push(...h),p.map(m=>r.startsWith("/")&&m===""?"/":m)}function u0(r){r.sort((s,i)=>s.score!==i.score?i.score-s.score:b0(s.routesMeta.map(o=>o.childrenIndex),i.routesMeta.map(o=>o.childrenIndex)))}var d0=/^:[\w-]+$/,h0=3,f0=2,m0=1,g0=10,p0=-2,fp=r=>r==="*";function x0(r,s){let i=r.split("/"),o=i.length;return i.some(fp)&&(o+=p0),s&&(o+=f0),i.filter(c=>!fp(c)).reduce((c,u)=>c+(d0.test(u)?h0:u===""?m0:g0),o)}function b0(r,s){return r.length===s.length&&r.slice(0,-1).every((o,c)=>o===s[c])?r[r.length-1]-s[s.length-1]:0}function v0(r,s,i=!1){let{routesMeta:o}=r,c={},u="/",h=[];for(let p=0;p<o.length;++p){let m=o[p],g=p===o.length-1,b=u==="/"?s:s.slice(u.length)||"/",w=co({path:m.relativePath,caseSensitive:m.caseSensitive,end:g},b),N=m.route;if(!w&&g&&i&&!o[o.length-1].route.index&&(w=co({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},b)),!w)return null;Object.assign(c,w.params),h.push({params:c,pathname:Ka([u,w.pathname]),pathnameBase:S0(Ka([u,w.pathnameBase])),route:N}),w.pathnameBase!=="/"&&(u=Ka([u,w.pathnameBase]))}return h}function co(r,s){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[i,o]=y0(r.path,r.caseSensitive,r.end),c=s.match(i);if(!c)return null;let u=c[0],h=u.replace(/(.)\/+$/,"$1"),p=c.slice(1);return{params:o.reduce((g,{paramName:b,isOptional:w},N)=>{if(b==="*"){let v=p[N]||"";h=u.slice(0,u.length-v.length).replace(/(.)\/+$/,"$1")}const S=p[N];return w&&!S?g[b]=void 0:g[b]=(S||"").replace(/%2F/g,"/"),g},{}),pathname:u,pathnameBase:h,pattern:r}}function y0(r,s=!1,i=!0){ha(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let o=[],c="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,p,m)=>(o.push({paramName:p,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return r.endsWith("*")?(o.push({paramName:"*"}),c+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):i?c+="\\/*$":r!==""&&r!=="/"&&(c+="(?:(?=\\/|$))"),[new RegExp(c,s?void 0:"i"),o]}function w0(r){try{return r.split("/").map(s=>decodeURIComponent(s).replace(/\//g,"%2F")).join("/")}catch(s){return ha(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${s}).`),r}}function Fa(r,s){if(s==="/")return r;if(!r.toLowerCase().startsWith(s.toLowerCase()))return null;let i=s.endsWith("/")?s.length-1:s.length,o=r.charAt(i);return o&&o!=="/"?null:r.slice(i)||"/"}function j0(r,s="/"){let{pathname:i,search:o="",hash:c=""}=typeof r=="string"?ur(r):r;return{pathname:i?i.startsWith("/")?i:N0(i,s):s,search:E0(o),hash:k0(c)}}function N0(r,s){let i=s.replace(/\/+$/,"").split("/");return r.split("/").forEach(c=>{c===".."?i.length>1&&i.pop():c!=="."&&i.push(c)}),i.length>1?i.join("/"):"/"}function Zu(r,s,i,o){return`Cannot include a '${r}' character in a manually specified \`to.${s}\` field [${JSON.stringify(o)}].  Please separate it out to the \`to.${i}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function _0(r){return r.filter((s,i)=>i===0||s.route.path&&s.route.path.length>0)}function Bd(r){let s=_0(r);return s.map((i,o)=>o===s.length-1?i.pathname:i.pathnameBase)}function zd(r,s,i,o=!1){let c;typeof r=="string"?c=ur(r):(c={...r},Ye(!c.pathname||!c.pathname.includes("?"),Zu("?","pathname","search",c)),Ye(!c.pathname||!c.pathname.includes("#"),Zu("#","pathname","hash",c)),Ye(!c.search||!c.search.includes("#"),Zu("#","search","hash",c)));let u=r===""||c.pathname==="",h=u?"/":c.pathname,p;if(h==null)p=i;else{let w=s.length-1;if(!o&&h.startsWith("..")){let N=h.split("/");for(;N[0]==="..";)N.shift(),w-=1;c.pathname=N.join("/")}p=w>=0?s[w]:"/"}let m=j0(c,p),g=h&&h!=="/"&&h.endsWith("/"),b=(u||h===".")&&i.endsWith("/");return!m.pathname.endsWith("/")&&(g||b)&&(m.pathname+="/"),m}var Ka=r=>r.join("/").replace(/\/\/+/g,"/"),S0=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),E0=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,k0=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function C0(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var gx=["POST","PUT","PATCH","DELETE"];new Set(gx);var A0=["GET",...gx];new Set(A0);var dr=_.createContext(null);dr.displayName="DataRouter";var _o=_.createContext(null);_o.displayName="DataRouterState";_.createContext(!1);var px=_.createContext({isTransitioning:!1});px.displayName="ViewTransition";var T0=_.createContext(new Map);T0.displayName="Fetchers";var R0=_.createContext(null);R0.displayName="Await";var fa=_.createContext(null);fa.displayName="Navigation";var Ni=_.createContext(null);Ni.displayName="Location";var ma=_.createContext({outlet:null,matches:[],isDataRoute:!1});ma.displayName="Route";var qd=_.createContext(null);qd.displayName="RouteError";function O0(r,{relative:s}={}){Ye(hr(),"useHref() may be used only in the context of a <Router> component.");let{basename:i,navigator:o}=_.useContext(fa),{hash:c,pathname:u,search:h}=_i(r,{relative:s}),p=u;return i!=="/"&&(p=u==="/"?i:Ka([i,u])),o.createHref({pathname:p,search:h,hash:c})}function hr(){return _.useContext(Ni)!=null}function Qa(){return Ye(hr(),"useLocation() may be used only in the context of a <Router> component."),_.useContext(Ni).location}var xx="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function bx(r){_.useContext(fa).static||_.useLayoutEffect(r)}function Rs(){let{isDataRoute:r}=_.useContext(ma);return r?Y0():D0()}function D0(){Ye(hr(),"useNavigate() may be used only in the context of a <Router> component.");let r=_.useContext(dr),{basename:s,navigator:i}=_.useContext(fa),{matches:o}=_.useContext(ma),{pathname:c}=Qa(),u=JSON.stringify(Bd(o)),h=_.useRef(!1);return bx(()=>{h.current=!0}),_.useCallback((m,g={})=>{if(ha(h.current,xx),!h.current)return;if(typeof m=="number"){i.go(m);return}let b=zd(m,JSON.parse(u),c,g.relative==="path");r==null&&s!=="/"&&(b.pathname=b.pathname==="/"?s:Ka([s,b.pathname])),(g.replace?i.replace:i.push)(b,g.state,g)},[s,i,u,c,r])}_.createContext(null);function M0(){let{matches:r}=_.useContext(ma),s=r[r.length-1];return s?s.params:{}}function _i(r,{relative:s}={}){let{matches:i}=_.useContext(ma),{pathname:o}=Qa(),c=JSON.stringify(Bd(i));return _.useMemo(()=>zd(r,JSON.parse(c),o,s==="path"),[r,c,o,s])}function U0(r,s){return vx(r,s)}function vx(r,s,i,o,c){var M;Ye(hr(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:u}=_.useContext(fa),{matches:h}=_.useContext(ma),p=h[h.length-1],m=p?p.params:{},g=p?p.pathname:"/",b=p?p.pathnameBase:"/",w=p&&p.route;{let T=w&&w.path||"";yx(g,!w||T.endsWith("*")||T.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${T}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${T}"> to <Route path="${T==="/"?"*":`${T}/*`}">.`)}let N=Qa(),S;if(s){let T=typeof s=="string"?ur(s):s;Ye(b==="/"||((M=T.pathname)==null?void 0:M.startsWith(b)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${b}" but pathname "${T.pathname}" was given in the \`location\` prop.`),S=T}else S=N;let v=S.pathname||"/",E=v;if(b!=="/"){let T=b.replace(/^\//,"").split("/");E="/"+v.replace(/^\//,"").split("/").slice(T.length).join("/")}let y=hx(r,{pathname:E});ha(w||y!=null,`No routes matched location "${S.pathname}${S.search}${S.hash}" `),ha(y==null||y[y.length-1].route.element!==void 0||y[y.length-1].route.Component!==void 0||y[y.length-1].route.lazy!==void 0,`Matched leaf route at location "${S.pathname}${S.search}${S.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let C=P0(y&&y.map(T=>Object.assign({},T,{params:Object.assign({},m,T.params),pathname:Ka([b,u.encodeLocation?u.encodeLocation(T.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:T.pathname]),pathnameBase:T.pathnameBase==="/"?b:Ka([b,u.encodeLocation?u.encodeLocation(T.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:T.pathnameBase])})),h,i,o,c);return s&&C?_.createElement(Ni.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...S},navigationType:"POP"}},C):C}function L0(){let r=G0(),s=C0(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),i=r instanceof Error?r.stack:null,o="rgba(200,200,200, 0.5)",c={padding:"0.5rem",backgroundColor:o},u={padding:"2px 4px",backgroundColor:o},h=null;return console.error("Error handled by React Router default ErrorBoundary:",r),h=_.createElement(_.Fragment,null,_.createElement("p",null," Hey developer "),_.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",_.createElement("code",{style:u},"ErrorBoundary")," or"," ",_.createElement("code",{style:u},"errorElement")," prop on your route.")),_.createElement(_.Fragment,null,_.createElement("h2",null,"Unexpected Application Error!"),_.createElement("h3",{style:{fontStyle:"italic"}},s),i?_.createElement("pre",{style:c},i):null,h)}var B0=_.createElement(L0,null),z0=class extends _.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,s){return s.location!==r.location||s.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:s.error,location:s.location,revalidation:r.revalidation||s.revalidation}}componentDidCatch(r,s){this.props.unstable_onError?this.props.unstable_onError(r,s):console.error("React Router caught the following error during render",r)}render(){return this.state.error!==void 0?_.createElement(ma.Provider,{value:this.props.routeContext},_.createElement(qd.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function q0({routeContext:r,match:s,children:i}){let o=_.useContext(dr);return o&&o.static&&o.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=s.route.id),_.createElement(ma.Provider,{value:r},i)}function P0(r,s=[],i=null,o=null,c=null){if(r==null){if(!i)return null;if(i.errors)r=i.matches;else if(s.length===0&&!i.initialized&&i.matches.length>0)r=i.matches;else return null}let u=r,h=i==null?void 0:i.errors;if(h!=null){let g=u.findIndex(b=>b.route.id&&(h==null?void 0:h[b.route.id])!==void 0);Ye(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(h).join(",")}`),u=u.slice(0,Math.min(u.length,g+1))}let p=!1,m=-1;if(i)for(let g=0;g<u.length;g++){let b=u[g];if((b.route.HydrateFallback||b.route.hydrateFallbackElement)&&(m=g),b.route.id){let{loaderData:w,errors:N}=i,S=b.route.loader&&!w.hasOwnProperty(b.route.id)&&(!N||N[b.route.id]===void 0);if(b.route.lazy||S){p=!0,m>=0?u=u.slice(0,m+1):u=[u[0]];break}}}return u.reduceRight((g,b,w)=>{let N,S=!1,v=null,E=null;i&&(N=h&&b.route.id?h[b.route.id]:void 0,v=b.route.errorElement||B0,p&&(m<0&&w===0?(yx("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),S=!0,E=null):m===w&&(S=!0,E=b.route.hydrateFallbackElement||null)));let y=s.concat(u.slice(0,w+1)),C=()=>{let M;return N?M=v:S?M=E:b.route.Component?M=_.createElement(b.route.Component,null):b.route.element?M=b.route.element:M=g,_.createElement(q0,{match:b,routeContext:{outlet:g,matches:y,isDataRoute:i!=null},children:M})};return i&&(b.route.ErrorBoundary||b.route.errorElement||w===0)?_.createElement(z0,{location:i.location,revalidation:i.revalidation,component:v,error:N,children:C(),routeContext:{outlet:null,matches:y,isDataRoute:!0},unstable_onError:o}):C()},null)}function Pd(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function I0(r){let s=_.useContext(dr);return Ye(s,Pd(r)),s}function $0(r){let s=_.useContext(_o);return Ye(s,Pd(r)),s}function H0(r){let s=_.useContext(ma);return Ye(s,Pd(r)),s}function Id(r){let s=H0(r),i=s.matches[s.matches.length-1];return Ye(i.route.id,`${r} can only be used on routes that contain a unique "id"`),i.route.id}function V0(){return Id("useRouteId")}function G0(){var o;let r=_.useContext(qd),s=$0("useRouteError"),i=Id("useRouteError");return r!==void 0?r:(o=s.errors)==null?void 0:o[i]}function Y0(){let{router:r}=I0("useNavigate"),s=Id("useNavigate"),i=_.useRef(!1);return bx(()=>{i.current=!0}),_.useCallback(async(c,u={})=>{ha(i.current,xx),i.current&&(typeof c=="number"?r.navigate(c):await r.navigate(c,{fromRouteId:s,...u}))},[r,s])}var mp={};function yx(r,s,i){!s&&!mp[r]&&(mp[r]=!0,ha(!1,i))}_.memo(K0);function K0({routes:r,future:s,state:i,unstable_onError:o}){return vx(r,void 0,i,o,s)}function ir({to:r,replace:s,state:i,relative:o}){Ye(hr(),"<Navigate> may be used only in the context of a <Router> component.");let{static:c}=_.useContext(fa);ha(!c,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:u}=_.useContext(ma),{pathname:h}=Qa(),p=Rs(),m=zd(r,Bd(u),h,o==="path"),g=JSON.stringify(m);return _.useEffect(()=>{p(JSON.parse(g),{replace:s,state:i,relative:o})},[p,g,o,s,i]),null}function oa(r){Ye(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function F0({basename:r="/",children:s=null,location:i,navigationType:o="POP",navigator:c,static:u=!1}){Ye(!hr(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let h=r.replace(/^\/*/,"/"),p=_.useMemo(()=>({basename:h,navigator:c,static:u,future:{}}),[h,c,u]);typeof i=="string"&&(i=ur(i));let{pathname:m="/",search:g="",hash:b="",state:w=null,key:N="default"}=i,S=_.useMemo(()=>{let v=Fa(m,h);return v==null?null:{location:{pathname:v,search:g,hash:b,state:w,key:N},navigationType:o}},[h,m,g,b,w,N,o]);return ha(S!=null,`<Router basename="${h}"> is not able to match the URL "${m}${g}${b}" because it does not start with the basename, so the <Router> won't render anything.`),S==null?null:_.createElement(fa.Provider,{value:p},_.createElement(Ni.Provider,{children:s,value:S}))}function Q0({children:r,location:s}){return U0(gd(r),s)}function gd(r,s=[]){let i=[];return _.Children.forEach(r,(o,c)=>{if(!_.isValidElement(o))return;let u=[...s,c];if(o.type===_.Fragment){i.push.apply(i,gd(o.props.children,u));return}Ye(o.type===oa,`[${typeof o.type=="string"?o.type:o.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ye(!o.props.index||!o.props.children,"An index route cannot have child routes.");let h={id:o.props.id||u.join("-"),caseSensitive:o.props.caseSensitive,element:o.props.element,Component:o.props.Component,index:o.props.index,path:o.props.path,middleware:o.props.middleware,loader:o.props.loader,action:o.props.action,hydrateFallbackElement:o.props.hydrateFallbackElement,HydrateFallback:o.props.HydrateFallback,errorElement:o.props.errorElement,ErrorBoundary:o.props.ErrorBoundary,hasErrorBoundary:o.props.hasErrorBoundary===!0||o.props.ErrorBoundary!=null||o.props.errorElement!=null,shouldRevalidate:o.props.shouldRevalidate,handle:o.props.handle,lazy:o.props.lazy};o.props.children&&(h.children=gd(o.props.children,u)),i.push(h)}),i}var ro="get",io="application/x-www-form-urlencoded";function So(r){return r!=null&&typeof r.tagName=="string"}function J0(r){return So(r)&&r.tagName.toLowerCase()==="button"}function X0(r){return So(r)&&r.tagName.toLowerCase()==="form"}function W0(r){return So(r)&&r.tagName.toLowerCase()==="input"}function Z0(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function ew(r,s){return r.button===0&&(!s||s==="_self")&&!Z0(r)}var Vl=null;function tw(){if(Vl===null)try{new FormData(document.createElement("form"),0),Vl=!1}catch{Vl=!0}return Vl}var aw=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ed(r){return r!=null&&!aw.has(r)?(ha(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${io}"`),null):r}function sw(r,s){let i,o,c,u,h;if(X0(r)){let p=r.getAttribute("action");o=p?Fa(p,s):null,i=r.getAttribute("method")||ro,c=ed(r.getAttribute("enctype"))||io,u=new FormData(r)}else if(J0(r)||W0(r)&&(r.type==="submit"||r.type==="image")){let p=r.form;if(p==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=r.getAttribute("formaction")||p.getAttribute("action");if(o=m?Fa(m,s):null,i=r.getAttribute("formmethod")||p.getAttribute("method")||ro,c=ed(r.getAttribute("formenctype"))||ed(p.getAttribute("enctype"))||io,u=new FormData(p,r),!tw()){let{name:g,type:b,value:w}=r;if(b==="image"){let N=g?`${g}.`:"";u.append(`${N}x`,"0"),u.append(`${N}y`,"0")}else g&&u.append(g,w)}}else{if(So(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');i=ro,o=null,c=io,h=r}return u&&c==="text/plain"&&(h=u,u=void 0),{action:o,method:i.toLowerCase(),encType:c,formData:u,body:h}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function $d(r,s){if(r===!1||r===null||typeof r>"u")throw new Error(s)}function nw(r,s,i){let o=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return o.pathname==="/"?o.pathname=`_root.${i}`:s&&Fa(o.pathname,s)==="/"?o.pathname=`${s.replace(/\/$/,"")}/_root.${i}`:o.pathname=`${o.pathname.replace(/\/$/,"")}.${i}`,o}async function rw(r,s){if(r.id in s)return s[r.id];try{let i=await import(r.module);return s[r.id]=i,i}catch(i){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(i),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function iw(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function lw(r,s,i){let o=await Promise.all(r.map(async c=>{let u=s.routes[c.route.id];if(u){let h=await rw(u,i);return h.links?h.links():[]}return[]}));return dw(o.flat(1).filter(iw).filter(c=>c.rel==="stylesheet"||c.rel==="preload").map(c=>c.rel==="stylesheet"?{...c,rel:"prefetch",as:"style"}:{...c,rel:"prefetch"}))}function gp(r,s,i,o,c,u){let h=(m,g)=>i[g]?m.route.id!==i[g].route.id:!0,p=(m,g)=>{var b;return i[g].pathname!==m.pathname||((b=i[g].route.path)==null?void 0:b.endsWith("*"))&&i[g].params["*"]!==m.params["*"]};return u==="assets"?s.filter((m,g)=>h(m,g)||p(m,g)):u==="data"?s.filter((m,g)=>{var w;let b=o.routes[m.route.id];if(!b||!b.hasLoader)return!1;if(h(m,g)||p(m,g))return!0;if(m.route.shouldRevalidate){let N=m.route.shouldRevalidate({currentUrl:new URL(c.pathname+c.search+c.hash,window.origin),currentParams:((w=i[0])==null?void 0:w.params)||{},nextUrl:new URL(r,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof N=="boolean")return N}return!0}):[]}function ow(r,s,{includeHydrateFallback:i}={}){return cw(r.map(o=>{let c=s.routes[o.route.id];if(!c)return[];let u=[c.module];return c.clientActionModule&&(u=u.concat(c.clientActionModule)),c.clientLoaderModule&&(u=u.concat(c.clientLoaderModule)),i&&c.hydrateFallbackModule&&(u=u.concat(c.hydrateFallbackModule)),c.imports&&(u=u.concat(c.imports)),u}).flat(1))}function cw(r){return[...new Set(r)]}function uw(r){let s={},i=Object.keys(r).sort();for(let o of i)s[o]=r[o];return s}function dw(r,s){let i=new Set;return new Set(s),r.reduce((o,c)=>{let u=JSON.stringify(uw(c));return i.has(u)||(i.add(u),o.push({key:u,link:c})),o},[])}function wx(){let r=_.useContext(dr);return $d(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function hw(){let r=_.useContext(_o);return $d(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var Hd=_.createContext(void 0);Hd.displayName="FrameworkContext";function jx(){let r=_.useContext(Hd);return $d(r,"You must render this element inside a <HydratedRouter> element"),r}function fw(r,s){let i=_.useContext(Hd),[o,c]=_.useState(!1),[u,h]=_.useState(!1),{onFocus:p,onBlur:m,onMouseEnter:g,onMouseLeave:b,onTouchStart:w}=s,N=_.useRef(null);_.useEffect(()=>{if(r==="render"&&h(!0),r==="viewport"){let E=C=>{C.forEach(M=>{h(M.isIntersecting)})},y=new IntersectionObserver(E,{threshold:.5});return N.current&&y.observe(N.current),()=>{y.disconnect()}}},[r]),_.useEffect(()=>{if(o){let E=setTimeout(()=>{h(!0)},100);return()=>{clearTimeout(E)}}},[o]);let S=()=>{c(!0)},v=()=>{c(!1),h(!1)};return i?r!=="intent"?[u,N,{}]:[u,N,{onFocus:di(p,S),onBlur:di(m,v),onMouseEnter:di(g,S),onMouseLeave:di(b,v),onTouchStart:di(w,S)}]:[!1,N,{}]}function di(r,s){return i=>{r&&r(i),i.defaultPrevented||s(i)}}function mw({page:r,...s}){let{router:i}=wx(),o=_.useMemo(()=>hx(i.routes,r,i.basename),[i.routes,r,i.basename]);return o?_.createElement(pw,{page:r,matches:o,...s}):null}function gw(r){let{manifest:s,routeModules:i}=jx(),[o,c]=_.useState([]);return _.useEffect(()=>{let u=!1;return lw(r,s,i).then(h=>{u||c(h)}),()=>{u=!0}},[r,s,i]),o}function pw({page:r,matches:s,...i}){let o=Qa(),{manifest:c,routeModules:u}=jx(),{basename:h}=wx(),{loaderData:p,matches:m}=hw(),g=_.useMemo(()=>gp(r,s,m,c,o,"data"),[r,s,m,c,o]),b=_.useMemo(()=>gp(r,s,m,c,o,"assets"),[r,s,m,c,o]),w=_.useMemo(()=>{if(r===o.pathname+o.search+o.hash)return[];let v=new Set,E=!1;if(s.forEach(C=>{var T;let M=c.routes[C.route.id];!M||!M.hasLoader||(!g.some(z=>z.route.id===C.route.id)&&C.route.id in p&&((T=u[C.route.id])!=null&&T.shouldRevalidate)||M.hasClientLoader?E=!0:v.add(C.route.id))}),v.size===0)return[];let y=nw(r,h,"data");return E&&v.size>0&&y.searchParams.set("_routes",s.filter(C=>v.has(C.route.id)).map(C=>C.route.id).join(",")),[y.pathname+y.search]},[h,p,o,c,g,s,r,u]),N=_.useMemo(()=>ow(b,c),[b,c]),S=gw(b);return _.createElement(_.Fragment,null,w.map(v=>_.createElement("link",{key:v,rel:"prefetch",as:"fetch",href:v,...i})),N.map(v=>_.createElement("link",{key:v,rel:"modulepreload",href:v,...i})),S.map(({key:v,link:E})=>_.createElement("link",{key:v,nonce:i.nonce,...E})))}function xw(...r){return s=>{r.forEach(i=>{typeof i=="function"?i(s):i!=null&&(i.current=s)})}}var Nx=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Nx&&(window.__reactRouterVersion="7.9.5")}catch{}function bw({basename:r,children:s,window:i}){let o=_.useRef();o.current==null&&(o.current=r0({window:i,v5Compat:!0}));let c=o.current,[u,h]=_.useState({action:c.action,location:c.location}),p=_.useCallback(m=>{_.startTransition(()=>h(m))},[h]);return _.useLayoutEffect(()=>c.listen(p),[c,p]),_.createElement(F0,{basename:r,children:s,location:u.location,navigationType:u.action,navigator:c})}var _x=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Sx=_.forwardRef(function({onClick:s,discover:i="render",prefetch:o="none",relative:c,reloadDocument:u,replace:h,state:p,target:m,to:g,preventScrollReset:b,viewTransition:w,...N},S){let{basename:v}=_.useContext(fa),E=typeof g=="string"&&_x.test(g),y,C=!1;if(typeof g=="string"&&E&&(y=g,Nx))try{let ee=new URL(window.location.href),te=g.startsWith("//")?new URL(ee.protocol+g):new URL(g),ce=Fa(te.pathname,v);te.origin===ee.origin&&ce!=null?g=ce+te.search+te.hash:C=!0}catch{ha(!1,`<Link to="${g}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let M=O0(g,{relative:c}),[T,z,U]=fw(o,N),X=jw(g,{replace:h,state:p,target:m,preventScrollReset:b,relative:c,viewTransition:w});function B(ee){s&&s(ee),ee.defaultPrevented||X(ee)}let se=_.createElement("a",{...N,...U,href:y||M,onClick:C||u?s:B,ref:xw(S,z),target:m,"data-discover":!E&&i==="render"?"true":void 0});return T&&!E?_.createElement(_.Fragment,null,se,_.createElement(mw,{page:M})):se});Sx.displayName="Link";var vw=_.forwardRef(function({"aria-current":s="page",caseSensitive:i=!1,className:o="",end:c=!1,style:u,to:h,viewTransition:p,children:m,...g},b){let w=_i(h,{relative:g.relative}),N=Qa(),S=_.useContext(_o),{navigator:v,basename:E}=_.useContext(fa),y=S!=null&&kw(w)&&p===!0,C=v.encodeLocation?v.encodeLocation(w).pathname:w.pathname,M=N.pathname,T=S&&S.navigation&&S.navigation.location?S.navigation.location.pathname:null;i||(M=M.toLowerCase(),T=T?T.toLowerCase():null,C=C.toLowerCase()),T&&E&&(T=Fa(T,E)||T);const z=C!=="/"&&C.endsWith("/")?C.length-1:C.length;let U=M===C||!c&&M.startsWith(C)&&M.charAt(z)==="/",X=T!=null&&(T===C||!c&&T.startsWith(C)&&T.charAt(C.length)==="/"),B={isActive:U,isPending:X,isTransitioning:y},se=U?s:void 0,ee;typeof o=="function"?ee=o(B):ee=[o,U?"active":null,X?"pending":null,y?"transitioning":null].filter(Boolean).join(" ");let te=typeof u=="function"?u(B):u;return _.createElement(Sx,{...g,"aria-current":se,className:ee,ref:b,style:te,to:h,viewTransition:p},typeof m=="function"?m(B):m)});vw.displayName="NavLink";var yw=_.forwardRef(({discover:r="render",fetcherKey:s,navigate:i,reloadDocument:o,replace:c,state:u,method:h=ro,action:p,onSubmit:m,relative:g,preventScrollReset:b,viewTransition:w,...N},S)=>{let v=Sw(),E=Ew(p,{relative:g}),y=h.toLowerCase()==="get"?"get":"post",C=typeof p=="string"&&_x.test(p),M=T=>{if(m&&m(T),T.defaultPrevented)return;T.preventDefault();let z=T.nativeEvent.submitter,U=(z==null?void 0:z.getAttribute("formmethod"))||h;v(z||T.currentTarget,{fetcherKey:s,method:U,navigate:i,replace:c,state:u,relative:g,preventScrollReset:b,viewTransition:w})};return _.createElement("form",{ref:S,method:y,action:E,onSubmit:o?m:M,...N,"data-discover":!C&&r==="render"?"true":void 0})});yw.displayName="Form";function ww(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Ex(r){let s=_.useContext(dr);return Ye(s,ww(r)),s}function jw(r,{target:s,replace:i,state:o,preventScrollReset:c,relative:u,viewTransition:h}={}){let p=Rs(),m=Qa(),g=_i(r,{relative:u});return _.useCallback(b=>{if(ew(b,s)){b.preventDefault();let w=i!==void 0?i:bi(m)===bi(g);p(r,{replace:w,state:o,preventScrollReset:c,relative:u,viewTransition:h})}},[m,p,g,i,o,s,r,c,u,h])}var Nw=0,_w=()=>`__${String(++Nw)}__`;function Sw(){let{router:r}=Ex("useSubmit"),{basename:s}=_.useContext(fa),i=V0();return _.useCallback(async(o,c={})=>{let{action:u,method:h,encType:p,formData:m,body:g}=sw(o,s);if(c.navigate===!1){let b=c.fetcherKey||_w();await r.fetch(b,i,c.action||u,{preventScrollReset:c.preventScrollReset,formData:m,body:g,formMethod:c.method||h,formEncType:c.encType||p,flushSync:c.flushSync})}else await r.navigate(c.action||u,{preventScrollReset:c.preventScrollReset,formData:m,body:g,formMethod:c.method||h,formEncType:c.encType||p,replace:c.replace,state:c.state,fromRouteId:i,flushSync:c.flushSync,viewTransition:c.viewTransition})},[r,s,i])}function Ew(r,{relative:s}={}){let{basename:i}=_.useContext(fa),o=_.useContext(ma);Ye(o,"useFormAction must be used inside a RouteContext");let[c]=o.matches.slice(-1),u={..._i(r||".",{relative:s})},h=Qa();if(r==null){u.search=h.search;let p=new URLSearchParams(u.search),m=p.getAll("index");if(m.some(b=>b==="")){p.delete("index"),m.filter(w=>w).forEach(w=>p.append("index",w));let b=p.toString();u.search=b?`?${b}`:""}}return(!r||r===".")&&c.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),i!=="/"&&(u.pathname=u.pathname==="/"?i:Ka([i,u.pathname])),bi(u)}function kw(r,{relative:s}={}){let i=_.useContext(px);Ye(i!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:o}=Ex("useViewTransitionState"),c=_i(r,{relative:s});if(!i.isTransitioning)return!1;let u=Fa(i.currentLocation.pathname,o)||i.currentLocation.pathname,h=Fa(i.nextLocation.pathname,o)||i.nextLocation.pathname;return co(c.pathname,h)!=null||co(c.pathname,u)!=null}const Cw=({className:r})=>a.jsxs("svg",{viewBox:"0 0 52 52",className:`animated-checkmark ${r}`,children:[a.jsx("circle",{className:"checkmark__circle",cx:"26",cy:"26",r:"25",fill:"none"}),a.jsx("path",{className:"checkmark__check",fill:"none",d:"M14.1 27.2l7.1 7.2 16.7-16.8"})]}),Gt=({className:r})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:r,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),kx=({className:r})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:r,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),vi=({className:r})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:r,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})}),wt=({className:r})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:r,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})}),Cx=({className:r})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:r,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h7.5"})}),Aw=({className:r})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:r,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"})}),Eo=({className:r})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:r,children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 18.75h-9a9 9 0 00-9 9v-9a9 9 0 009-9h9a9 9 0 009 9v9a9 9 0 00-9-9z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.375 21.75h-6.75a.375.375 0 01-.375-.375v-3.75c0-.207.168-.375.375-.375h6.75c.207 0 .375.168.375.375v3.75a.375.375 0 01-.375.375z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 4.5V2.25a2.25 2.25 0 00-2.25-2.25h-4.5A2.25 2.25 0 007.5 2.25V4.5m10.5 0a3.75 3.75 0 01-3.75 3.75h-3a3.75 3.75 0 01-3.75-3.75m10.5 0h-10.5"})]}),uo=({className:r})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:r,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.982 18.725A7.488 7.488 0 0012 15.75a7.488 7.488 0 00-5.982 2.975m11.963 0a9 9 0 10-11.963 0m11.963 0A8.966 8.966 0 0112 21a8.966 8.966 0 01-5.982-2.275M15 9.75a3 3 0 11-6 0 3 3 0 016 0z"})}),lr=({className:r})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:r,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 8.25h19.5M2.25 9h19.5m-16.5 5.25h6m-6 2.25h3.75m-3.75 2.25h6.75m3-12.75V17.25a2.25 2.25 0 01-2.25 2.25H4.5A2.25 2.25 0 012.25 17.25V8.25A2.25 2.25 0 014.5 6h12.75a2.25 2.25 0 012.25 2.25z"})}),Ax=({className:r})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:r,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15m3 0l3-3m0 0l-3-3m3 3H9"})}),or=({className:r})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:r,children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.432 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),Tw=({className:r})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:r,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 18L9 11.25l4.306 4.307a11.95 11.95 0 015.814-5.519l2.74-1.22m0 0l-3.75-.625m3.75.625V11.25"})}),sn=({className:r})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:r,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5"})}),pp=({className:r})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:r,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3v2.25m6.364.386l-1.591 1.591M21 12h-2.25m-.386 6.364l-1.591-1.591M12 18.75V21m-4.773-4.227l-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z"})}),xp=({className:r})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:r,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.752 15.002A9.718 9.718 0 0118 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 003 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 009.002-5.998z"})}),_t=({className:r})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:r,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75m-3-7.036A11.959 11.959 0 013.598 6 11.99 11.99 0 003 9.749c0 5.592 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.286zm0 13.036h.008v.008h-.008v-.008z"})}),ks=({className:r})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:r,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19.128a9.38 9.38 0 002.625.372 9.337 9.337 0 004.121-.952 4.125 4.125 0 00-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 018.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0111.964-4.663M5.625 13.5a6 6 0 100-3.375m-3.375 0a3 3 0 106 0 3 3 0 00-6 0"})}),Vd=({className:r})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:r,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.125 2.25h-4.5c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125v-9M10.125 2.25h.375a9 9 0 019 9v.375M10.125 2.25A3.375 3.375 0 0113.5 5.625v1.5c0 .621.504 1.125 1.125 1.125h1.5a3.375 3.375 0 013.375 3.375M9 15l2.25 2.25L15 12"})}),Tx=({className:r})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:r,children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-1.003 1.11-1.226.55-.223 1.19-.223 1.74 0 .55.223 1.02.684 1.11 1.226M13.5 21v-2.182c.54.223 1.09.333 1.62.333.53 0 1.08-.11 1.62-.333V21m-6 0v-2.182c-.54.223-1.09.333-1.62.333-.53 0-1.08-.11-1.62-.333V21m12-9.75l1.623 1.623a2.25 2.25 0 010 3.182l-1.623 1.623m0-6.806l-1.623-1.623a2.25 2.25 0 00-3.182 0l-1.623 1.623m6.806 0l-1.623 1.623m-4.5-1.623l-1.623 1.623a2.25 2.25 0 01-3.182 0l-1.623-1.623m6.806 0l-1.623 1.623"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 18.75a6.75 6.75 0 100-13.5 6.75 6.75 0 000 13.5z"})]}),Rx=({className:r})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:r,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v12m-3-2.818l.879.659c1.171.879 3.07.879 4.242 0 1.172-.879 1.172-2.303 0-3.182C13.536 12.219 12.768 12 12 12c-.725 0-1.45-.22-2.003-.659-1.106-.879-1.106-2.303 0-3.182.95-.715 2.16-1.11 3.396-1.11 1.236 0 2.445.396 3.396 1.11"})}),ko=({className:r})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:r,children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.25 14.15v4.075c0 1.313-.964 2.42-2.25 2.585-1.4.18-2.5.345-3.5.345-1 0-2.1-.165-3.5-.345-1.286-.165-2.25-1.272-2.25-2.585v-4.075a3.375 3.375 0 016 0z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 3h15A2.25 2.25 0 0121.75 5.25v9.319c0 .622-.266 1.205-.728 1.628a2.999 2.999 0 01-2.022.872 3.75 3.75 0 01-3-1.5 3.75 3.75 0 01-3 1.5 2.999 2.999 0 01-2.022-.872c-.463-.423-.728-1.006-.728-1.628V5.25A2.25 2.25 0 014.5 3z"})]}),fr=({className:r})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:r,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"})}),_a=({className:r})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:r,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"})}),Si=({className:r})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:r,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z"})}),Ya=({className:r})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:r,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"})}),Rw=({className:r})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:r,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})}),Ox=({className:r})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:r,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 5.25a3 3 0 013 3m3 0a6 6 0 01-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1121.75 8.25z"})}),Dx=({className:r})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:r,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 6.75h12M8.25 12h12m-12 5.25h12M3.75 6.75h.007v.008H3.75V6.75zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zM3.75 12h.007v.008H3.75V12zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zM3.75 17.25h.007v.008H3.75v-1.75zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z"})}),Ow=({className:r})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:r,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 012.25-2.25h13.5A2.25 2.25 0 0121 7.5v11.25m-18 0A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75m-18 0h18"})}),As=({className:r})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:r,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3"})}),Co=({className:r})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:r,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 7.5h1.5m-1.5 3h1.5m-7.5 3h7.5m-7.5 3h7.5m3-9h3.375c.621 0 1.125.504 1.125 1.125V18a2.25 2.25 0 01-2.25 2.25M16.5 7.5V18a2.25 2.25 0 002.25 2.25M16.5 7.5V4.875c0-.621-.504-1.125-1.125-1.125H4.125C3.504 3.75 3 4.254 3 4.875V18a2.25 2.25 0 002.25 2.25h13.5"})}),Ao=({className:r})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:r,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.48 3.499a.562.562 0 011.04 0l2.125 5.111a.563.563 0 00.475.31h5.418a.562.562 0 01.321.988l-4.204 3.602a.563.563 0 00-.182.557l1.528 5.348a.562.562 0 01-.82.63l-4.803-3.22a.563.563 0 00-.64 0l-4.803 3.22a.562.562 0 01-.82-.63l1.528-5.347a.563.563 0 00-.182-.557l-4.204-3.602a.562.562 0 01.321-.988h5.418a.563.563 0 00.475-.31l2.125-5.11z"})}),Sa=({className:r})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:r,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.666 3.888A2.25 2.25 0 0013.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a2.25 2.25 0 01-2.25 2.25h-1.5a2.25 2.25 0 01-2.25-2.25v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 01-2.25 2.25H6.75A2.25 2.25 0 014.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 011.927-.184"})}),Gd=({className:r})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:r,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 18v-5.25m0 0a6.01 6.01 0 001.5-.189m-1.5.189a6.01 6.01 0 01-1.5-.189m3.75 7.478a12.06 12.06 0 01-4.5 0m3.75 2.311a15.045 15.045 0 01-3.75 0M10.5 18.75v-3.375c0-1.423.895-2.684 2.182-3.223a9.041 9.041 0 011.135-.447M17.25 10.5a8.965 8.965 0 01-3.642 7.24M12 18.75a9.041 9.041 0 01-1.135-.447c-1.287-.54-2.182-1.8-2.182-3.223V15.375M12 18.75a9.043 9.043 0 01-3.642-7.24m6.5 1.649v-3.375c0-1.423-.895-2.684-2.182-3.223a9.041 9.041 0 00-1.135-.447M12 18.75a9.043 9.043 0 003.642-7.24"})}),rn=({className:r})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:r,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"})}),To=({className:r})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:r,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.625 12a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0H8.25m4.125 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0H12m4.125 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0h-.375M21 12c0 4.556-4.03 8.25-9 8.25a9.76 9.76 0 01-2.53-.388m-5.383-.948a.863.863 0 01.037.146l.695 1.453c.09.19.231.355.4.472l.45.27a.863.863 0 01.21.327c.074.16.096.335.053.502a.863.863 0 01-.33.472l-.45.27a.863.863 0 01-.4.122l-.695 1.453c-.09.19-.231.355-.4.472l-.45.27a.863.863 0 01-.21.327c-.074.16-.096.335-.053.502a.863.863 0 01.33.472l.45.27a.863.863 0 01.4.122l.695 1.453c.09.19.231.355.4.472l.45.27a.863.863 0 01.21.327c.074.16.096.335-.053.502a.863.863 0 01-.33.472l-.45.27a.863.863 0 01-.4.122l-1.39.278a.863.863 0 01-.818-.582A9.76 9.76 0 013 12c0-4.556 4.03-8.25 9-8.25s9 3.694 9 8.25z"})});var pd=function(r,s){return pd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(i[c]=o[c])},pd(r,s)};function Mx(r,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");pd(r,s);function i(){this.constructor=r}r.prototype=s===null?Object.create(s):(i.prototype=s.prototype,new i)}var ho=function(){return ho=Object.assign||function(s){for(var i,o=1,c=arguments.length;o<c;o++){i=arguments[o];for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(s[u]=i[u])}return s},ho.apply(this,arguments)};function mr(r,s){var i={};for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&s.indexOf(o)<0&&(i[o]=r[o]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(r);c<o.length;c++)s.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(r,o[c])&&(i[o[c]]=r[o[c]]);return i}function Ux(r,s,i,o){var c=arguments.length,u=c<3?s:o===null?o=Object.getOwnPropertyDescriptor(s,i):o,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(r,s,i,o);else for(var p=r.length-1;p>=0;p--)(h=r[p])&&(u=(c<3?h(u):c>3?h(s,i,u):h(s,i))||u);return c>3&&u&&Object.defineProperty(s,i,u),u}function Lx(r,s){return function(i,o){s(i,o,r)}}function Bx(r,s,i,o,c,u){function h(C){if(C!==void 0&&typeof C!="function")throw new TypeError("Function expected");return C}for(var p=o.kind,m=p==="getter"?"get":p==="setter"?"set":"value",g=!s&&r?o.static?r:r.prototype:null,b=s||(g?Object.getOwnPropertyDescriptor(g,o.name):{}),w,N=!1,S=i.length-1;S>=0;S--){var v={};for(var E in o)v[E]=E==="access"?{}:o[E];for(var E in o.access)v.access[E]=o.access[E];v.addInitializer=function(C){if(N)throw new TypeError("Cannot add initializers after decoration has completed");u.push(h(C||null))};var y=(0,i[S])(p==="accessor"?{get:b.get,set:b.set}:b[m],v);if(p==="accessor"){if(y===void 0)continue;if(y===null||typeof y!="object")throw new TypeError("Object expected");(w=h(y.get))&&(b.get=w),(w=h(y.set))&&(b.set=w),(w=h(y.init))&&c.unshift(w)}else(w=h(y))&&(p==="field"?c.unshift(w):b[m]=w)}g&&Object.defineProperty(g,o.name,b),N=!0}function zx(r,s,i){for(var o=arguments.length>2,c=0;c<s.length;c++)i=o?s[c].call(r,i):s[c].call(r);return o?i:void 0}function qx(r){return typeof r=="symbol"?r:"".concat(r)}function Px(r,s,i){return typeof s=="symbol"&&(s=s.description?"[".concat(s.description,"]"):""),Object.defineProperty(r,"name",{configurable:!0,value:i?"".concat(i," ",s):s})}function Ix(r,s){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,s)}function de(r,s,i,o){function c(u){return u instanceof i?u:new i(function(h){h(u)})}return new(i||(i=Promise))(function(u,h){function p(b){try{g(o.next(b))}catch(w){h(w)}}function m(b){try{g(o.throw(b))}catch(w){h(w)}}function g(b){b.done?u(b.value):c(b.value).then(p,m)}g((o=o.apply(r,s||[])).next())})}function $x(r,s){var i={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},o,c,u,h=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return h.next=p(0),h.throw=p(1),h.return=p(2),typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function p(g){return function(b){return m([g,b])}}function m(g){if(o)throw new TypeError("Generator is already executing.");for(;h&&(h=0,g[0]&&(i=0)),i;)try{if(o=1,c&&(u=g[0]&2?c.return:g[0]?c.throw||((u=c.return)&&u.call(c),0):c.next)&&!(u=u.call(c,g[1])).done)return u;switch(c=0,u&&(g=[g[0]&2,u.value]),g[0]){case 0:case 1:u=g;break;case 4:return i.label++,{value:g[1],done:!1};case 5:i.label++,c=g[1],g=[0];continue;case 7:g=i.ops.pop(),i.trys.pop();continue;default:if(u=i.trys,!(u=u.length>0&&u[u.length-1])&&(g[0]===6||g[0]===2)){i=0;continue}if(g[0]===3&&(!u||g[1]>u[0]&&g[1]<u[3])){i.label=g[1];break}if(g[0]===6&&i.label<u[1]){i.label=u[1],u=g;break}if(u&&i.label<u[2]){i.label=u[2],i.ops.push(g);break}u[2]&&i.ops.pop(),i.trys.pop();continue}g=s.call(r,i)}catch(b){g=[6,b],c=0}finally{o=u=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}}var Ro=Object.create?(function(r,s,i,o){o===void 0&&(o=i);var c=Object.getOwnPropertyDescriptor(s,i);(!c||("get"in c?!s.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return s[i]}}),Object.defineProperty(r,o,c)}):(function(r,s,i,o){o===void 0&&(o=i),r[o]=s[i]});function Hx(r,s){for(var i in r)i!=="default"&&!Object.prototype.hasOwnProperty.call(s,i)&&Ro(s,r,i)}function fo(r){var s=typeof Symbol=="function"&&Symbol.iterator,i=s&&r[s],o=0;if(i)return i.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&o>=r.length&&(r=void 0),{value:r&&r[o++],done:!r}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")}function Yd(r,s){var i=typeof Symbol=="function"&&r[Symbol.iterator];if(!i)return r;var o=i.call(r),c,u=[],h;try{for(;(s===void 0||s-- >0)&&!(c=o.next()).done;)u.push(c.value)}catch(p){h={error:p}}finally{try{c&&!c.done&&(i=o.return)&&i.call(o)}finally{if(h)throw h.error}}return u}function Vx(){for(var r=[],s=0;s<arguments.length;s++)r=r.concat(Yd(arguments[s]));return r}function Gx(){for(var r=0,s=0,i=arguments.length;s<i;s++)r+=arguments[s].length;for(var o=Array(r),c=0,s=0;s<i;s++)for(var u=arguments[s],h=0,p=u.length;h<p;h++,c++)o[c]=u[h];return o}function Yx(r,s,i){if(i||arguments.length===2)for(var o=0,c=s.length,u;o<c;o++)(u||!(o in s))&&(u||(u=Array.prototype.slice.call(s,0,o)),u[o]=s[o]);return r.concat(u||Array.prototype.slice.call(s))}function cr(r){return this instanceof cr?(this.v=r,this):new cr(r)}function Kx(r,s,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=i.apply(r,s||[]),c,u=[];return c=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),p("next"),p("throw"),p("return",h),c[Symbol.asyncIterator]=function(){return this},c;function h(S){return function(v){return Promise.resolve(v).then(S,w)}}function p(S,v){o[S]&&(c[S]=function(E){return new Promise(function(y,C){u.push([S,E,y,C])>1||m(S,E)})},v&&(c[S]=v(c[S])))}function m(S,v){try{g(o[S](v))}catch(E){N(u[0][3],E)}}function g(S){S.value instanceof cr?Promise.resolve(S.value.v).then(b,w):N(u[0][2],S)}function b(S){m("next",S)}function w(S){m("throw",S)}function N(S,v){S(v),u.shift(),u.length&&m(u[0][0],u[0][1])}}function Fx(r){var s,i;return s={},o("next"),o("throw",function(c){throw c}),o("return"),s[Symbol.iterator]=function(){return this},s;function o(c,u){s[c]=r[c]?function(h){return(i=!i)?{value:cr(r[c](h)),done:!1}:u?u(h):h}:u}}function Qx(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=r[Symbol.asyncIterator],i;return s?s.call(r):(r=typeof fo=="function"?fo(r):r[Symbol.iterator](),i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i);function o(u){i[u]=r[u]&&function(h){return new Promise(function(p,m){h=r[u](h),c(p,m,h.done,h.value)})}}function c(u,h,p,m){Promise.resolve(m).then(function(g){u({value:g,done:p})},h)}}function Jx(r,s){return Object.defineProperty?Object.defineProperty(r,"raw",{value:s}):r.raw=s,r}var Dw=Object.create?(function(r,s){Object.defineProperty(r,"default",{enumerable:!0,value:s})}):function(r,s){r.default=s},xd=function(r){return xd=Object.getOwnPropertyNames||function(s){var i=[];for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(i[i.length]=o);return i},xd(r)};function Xx(r){if(r&&r.__esModule)return r;var s={};if(r!=null)for(var i=xd(r),o=0;o<i.length;o++)i[o]!=="default"&&Ro(s,r,i[o]);return Dw(s,r),s}function Wx(r){return r&&r.__esModule?r:{default:r}}function Zx(r,s,i,o){if(i==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof s=="function"?r!==s||!o:!s.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?o:i==="a"?o.call(r):o?o.value:s.get(r)}function eb(r,s,i,o,c){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!c)throw new TypeError("Private accessor was defined without a setter");if(typeof s=="function"?r!==s||!c:!s.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?c.call(r,i):c?c.value=i:s.set(r,i),i}function tb(r,s){if(s===null||typeof s!="object"&&typeof s!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof r=="function"?s===r:r.has(s)}function ab(r,s,i){if(s!=null){if(typeof s!="object"&&typeof s!="function")throw new TypeError("Object expected.");var o,c;if(i){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");o=s[Symbol.asyncDispose]}if(o===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");o=s[Symbol.dispose],i&&(c=o)}if(typeof o!="function")throw new TypeError("Object not disposable.");c&&(o=function(){try{c.call(this)}catch(u){return Promise.reject(u)}}),r.stack.push({value:s,dispose:o,async:i})}else i&&r.stack.push({async:!0});return s}var Mw=typeof SuppressedError=="function"?SuppressedError:function(r,s,i){var o=new Error(i);return o.name="SuppressedError",o.error=r,o.suppressed=s,o};function sb(r){function s(u){r.error=r.hasError?new Mw(u,r.error,"An error was suppressed during disposal."):u,r.hasError=!0}var i,o=0;function c(){for(;i=r.stack.pop();)try{if(!i.async&&o===1)return o=0,r.stack.push(i),Promise.resolve().then(c);if(i.dispose){var u=i.dispose.call(i.value);if(i.async)return o|=2,Promise.resolve(u).then(c,function(h){return s(h),c()})}else o|=1}catch(h){s(h)}if(o===1)return r.hasError?Promise.reject(r.error):Promise.resolve();if(r.hasError)throw r.error}return c()}function nb(r,s){return typeof r=="string"&&/^\.\.?\//.test(r)?r.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(i,o,c,u,h){return o?s?".jsx":".js":c&&(!u||!h)?i:c+u+"."+h.toLowerCase()+"js"}):r}const Uw={__extends:Mx,__assign:ho,__rest:mr,__decorate:Ux,__param:Lx,__esDecorate:Bx,__runInitializers:zx,__propKey:qx,__setFunctionName:Px,__metadata:Ix,__awaiter:de,__generator:$x,__createBinding:Ro,__exportStar:Hx,__values:fo,__read:Yd,__spread:Vx,__spreadArrays:Gx,__spreadArray:Yx,__await:cr,__asyncGenerator:Kx,__asyncDelegator:Fx,__asyncValues:Qx,__makeTemplateObject:Jx,__importStar:Xx,__importDefault:Wx,__classPrivateFieldGet:Zx,__classPrivateFieldSet:eb,__classPrivateFieldIn:tb,__addDisposableResource:ab,__disposeResources:sb,__rewriteRelativeImportExtension:nb},Lw=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:ab,get __assign(){return ho},__asyncDelegator:Fx,__asyncGenerator:Kx,__asyncValues:Qx,__await:cr,__awaiter:de,__classPrivateFieldGet:Zx,__classPrivateFieldIn:tb,__classPrivateFieldSet:eb,__createBinding:Ro,__decorate:Ux,__disposeResources:sb,__esDecorate:Bx,__exportStar:Hx,__extends:Mx,__generator:$x,__importDefault:Wx,__importStar:Xx,__makeTemplateObject:Jx,__metadata:Ix,__param:Lx,__propKey:qx,__read:Yd,__rest:mr,__rewriteRelativeImportExtension:nb,__runInitializers:zx,__setFunctionName:Px,__spread:Vx,__spreadArray:Yx,__spreadArrays:Gx,__values:fo,default:Uw},Symbol.toStringTag,{value:"Module"})),Bw=r=>r?(...s)=>r(...s):(...s)=>fetch(...s);class Kd extends Error{constructor(s,i="FunctionsError",o){super(s),this.name=i,this.context=o}}class zw extends Kd{constructor(s){super("Failed to send a request to the Edge Function","FunctionsFetchError",s)}}class bp extends Kd{constructor(s){super("Relay Error invoking the Edge Function","FunctionsRelayError",s)}}class vp extends Kd{constructor(s){super("Edge Function returned a non-2xx status code","FunctionsHttpError",s)}}var bd;(function(r){r.Any="any",r.ApNortheast1="ap-northeast-1",r.ApNortheast2="ap-northeast-2",r.ApSouth1="ap-south-1",r.ApSoutheast1="ap-southeast-1",r.ApSoutheast2="ap-southeast-2",r.CaCentral1="ca-central-1",r.EuCentral1="eu-central-1",r.EuWest1="eu-west-1",r.EuWest2="eu-west-2",r.EuWest3="eu-west-3",r.SaEast1="sa-east-1",r.UsEast1="us-east-1",r.UsWest1="us-west-1",r.UsWest2="us-west-2"})(bd||(bd={}));class qw{constructor(s,{headers:i={},customFetch:o,region:c=bd.Any}={}){this.url=s,this.headers=i,this.region=c,this.fetch=Bw(o)}setAuth(s){this.headers.Authorization=`Bearer ${s}`}invoke(s){return de(this,arguments,void 0,function*(i,o={}){var c;let u,h;try{const{headers:p,method:m,body:g,signal:b,timeout:w}=o;let N={},{region:S}=o;S||(S=this.region);const v=new URL(`${this.url}/${i}`);S&&S!=="any"&&(N["x-region"]=S,v.searchParams.set("forceFunctionRegion",S));let E;g&&(p&&!Object.prototype.hasOwnProperty.call(p,"Content-Type")||!p)?typeof Blob<"u"&&g instanceof Blob||g instanceof ArrayBuffer?(N["Content-Type"]="application/octet-stream",E=g):typeof g=="string"?(N["Content-Type"]="text/plain",E=g):typeof FormData<"u"&&g instanceof FormData?E=g:(N["Content-Type"]="application/json",E=JSON.stringify(g)):E=g;let y=b;w&&(h=new AbortController,u=setTimeout(()=>h.abort(),w),b?(y=h.signal,b.addEventListener("abort",()=>h.abort())):y=h.signal);const C=yield this.fetch(v.toString(),{method:m||"POST",headers:Object.assign(Object.assign(Object.assign({},N),this.headers),p),body:E,signal:y}).catch(U=>{throw new zw(U)}),M=C.headers.get("x-relay-error");if(M&&M==="true")throw new bp(C);if(!C.ok)throw new vp(C);let T=((c=C.headers.get("Content-Type"))!==null&&c!==void 0?c:"text/plain").split(";")[0].trim(),z;return T==="application/json"?z=yield C.json():T==="application/octet-stream"||T==="application/pdf"?z=yield C.blob():T==="text/event-stream"?z=C:T==="multipart/form-data"?z=yield C.formData():z=yield C.text(),{data:z,error:null,response:C}}catch(p){return{data:null,error:p,response:p instanceof vp||p instanceof bp?p.context:void 0}}finally{u&&clearTimeout(u)}})}}var vt={};const gr=Ky(Lw);var Gl={},Yl={},Kl={},Fl={},Ql={},Jl={},yp;function rb(){if(yp)return Jl;yp=1,Object.defineProperty(Jl,"__esModule",{value:!0});class r extends Error{constructor(i){super(i.message),this.name="PostgrestError",this.details=i.details,this.hint=i.hint,this.code=i.code}}return Jl.default=r,Jl}var wp;function ib(){if(wp)return Ql;wp=1,Object.defineProperty(Ql,"__esModule",{value:!0});const s=gr.__importDefault(rb());class i{constructor(c){var u,h;this.shouldThrowOnError=!1,this.method=c.method,this.url=c.url,this.headers=new Headers(c.headers),this.schema=c.schema,this.body=c.body,this.shouldThrowOnError=(u=c.shouldThrowOnError)!==null&&u!==void 0?u:!1,this.signal=c.signal,this.isMaybeSingle=(h=c.isMaybeSingle)!==null&&h!==void 0?h:!1,c.fetch?this.fetch=c.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(c,u){return this.headers=new Headers(this.headers),this.headers.set(c,u),this}then(c,u){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const h=this.fetch;let p=h(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async m=>{var g,b,w,N;let S=null,v=null,E=null,y=m.status,C=m.statusText;if(m.ok){if(this.method!=="HEAD"){const U=await m.text();U===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((g=this.headers.get("Accept"))===null||g===void 0)&&g.includes("application/vnd.pgrst.plan+text"))?v=U:v=JSON.parse(U))}const T=(b=this.headers.get("Prefer"))===null||b===void 0?void 0:b.match(/count=(exact|planned|estimated)/),z=(w=m.headers.get("content-range"))===null||w===void 0?void 0:w.split("/");T&&z&&z.length>1&&(E=parseInt(z[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(v)&&(v.length>1?(S={code:"PGRST116",details:`Results contain ${v.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},v=null,E=null,y=406,C="Not Acceptable"):v.length===1?v=v[0]:v=null)}else{const T=await m.text();try{S=JSON.parse(T),Array.isArray(S)&&m.status===404&&(v=[],S=null,y=200,C="OK")}catch{m.status===404&&T===""?(y=204,C="No Content"):S={message:T}}if(S&&this.isMaybeSingle&&(!((N=S==null?void 0:S.details)===null||N===void 0)&&N.includes("0 rows"))&&(S=null,y=200,C="OK"),S&&this.shouldThrowOnError)throw new s.default(S)}return{error:S,data:v,count:E,status:y,statusText:C}});return this.shouldThrowOnError||(p=p.catch(m=>{var g,b,w;return{error:{message:`${(g=m==null?void 0:m.name)!==null&&g!==void 0?g:"FetchError"}: ${m==null?void 0:m.message}`,details:`${(b=m==null?void 0:m.stack)!==null&&b!==void 0?b:""}`,hint:"",code:`${(w=m==null?void 0:m.code)!==null&&w!==void 0?w:""}`},data:null,count:null,status:0,statusText:""}})),p.then(c,u)}returns(){return this}overrideTypes(){return this}}return Ql.default=i,Ql}var jp;function lb(){if(jp)return Fl;jp=1,Object.defineProperty(Fl,"__esModule",{value:!0});const s=gr.__importDefault(ib());class i extends s.default{select(c){let u=!1;const h=(c??"*").split("").map(p=>/\s/.test(p)&&!u?"":(p==='"'&&(u=!u),p)).join("");return this.url.searchParams.set("select",h),this.headers.append("Prefer","return=representation"),this}order(c,{ascending:u=!0,nullsFirst:h,foreignTable:p,referencedTable:m=p}={}){const g=m?`${m}.order`:"order",b=this.url.searchParams.get(g);return this.url.searchParams.set(g,`${b?`${b},`:""}${c}.${u?"asc":"desc"}${h===void 0?"":h?".nullsfirst":".nullslast"}`),this}limit(c,{foreignTable:u,referencedTable:h=u}={}){const p=typeof h>"u"?"limit":`${h}.limit`;return this.url.searchParams.set(p,`${c}`),this}range(c,u,{foreignTable:h,referencedTable:p=h}={}){const m=typeof p>"u"?"offset":`${p}.offset`,g=typeof p>"u"?"limit":`${p}.limit`;return this.url.searchParams.set(m,`${c}`),this.url.searchParams.set(g,`${u-c+1}`),this}abortSignal(c){return this.signal=c,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:c=!1,verbose:u=!1,settings:h=!1,buffers:p=!1,wal:m=!1,format:g="text"}={}){var b;const w=[c?"analyze":null,u?"verbose":null,h?"settings":null,p?"buffers":null,m?"wal":null].filter(Boolean).join("|"),N=(b=this.headers.get("Accept"))!==null&&b!==void 0?b:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${g}; for="${N}"; options=${w};`),g==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(c){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${c}`),this}}return Fl.default=i,Fl}var Np;function Fd(){if(Np)return Kl;Np=1,Object.defineProperty(Kl,"__esModule",{value:!0});const s=gr.__importDefault(lb()),i=new RegExp("[,()]");class o extends s.default{eq(u,h){return this.url.searchParams.append(u,`eq.${h}`),this}neq(u,h){return this.url.searchParams.append(u,`neq.${h}`),this}gt(u,h){return this.url.searchParams.append(u,`gt.${h}`),this}gte(u,h){return this.url.searchParams.append(u,`gte.${h}`),this}lt(u,h){return this.url.searchParams.append(u,`lt.${h}`),this}lte(u,h){return this.url.searchParams.append(u,`lte.${h}`),this}like(u,h){return this.url.searchParams.append(u,`like.${h}`),this}likeAllOf(u,h){return this.url.searchParams.append(u,`like(all).{${h.join(",")}}`),this}likeAnyOf(u,h){return this.url.searchParams.append(u,`like(any).{${h.join(",")}}`),this}ilike(u,h){return this.url.searchParams.append(u,`ilike.${h}`),this}ilikeAllOf(u,h){return this.url.searchParams.append(u,`ilike(all).{${h.join(",")}}`),this}ilikeAnyOf(u,h){return this.url.searchParams.append(u,`ilike(any).{${h.join(",")}}`),this}is(u,h){return this.url.searchParams.append(u,`is.${h}`),this}in(u,h){const p=Array.from(new Set(h)).map(m=>typeof m=="string"&&i.test(m)?`"${m}"`:`${m}`).join(",");return this.url.searchParams.append(u,`in.(${p})`),this}contains(u,h){return typeof h=="string"?this.url.searchParams.append(u,`cs.${h}`):Array.isArray(h)?this.url.searchParams.append(u,`cs.{${h.join(",")}}`):this.url.searchParams.append(u,`cs.${JSON.stringify(h)}`),this}containedBy(u,h){return typeof h=="string"?this.url.searchParams.append(u,`cd.${h}`):Array.isArray(h)?this.url.searchParams.append(u,`cd.{${h.join(",")}}`):this.url.searchParams.append(u,`cd.${JSON.stringify(h)}`),this}rangeGt(u,h){return this.url.searchParams.append(u,`sr.${h}`),this}rangeGte(u,h){return this.url.searchParams.append(u,`nxl.${h}`),this}rangeLt(u,h){return this.url.searchParams.append(u,`sl.${h}`),this}rangeLte(u,h){return this.url.searchParams.append(u,`nxr.${h}`),this}rangeAdjacent(u,h){return this.url.searchParams.append(u,`adj.${h}`),this}overlaps(u,h){return typeof h=="string"?this.url.searchParams.append(u,`ov.${h}`):this.url.searchParams.append(u,`ov.{${h.join(",")}}`),this}textSearch(u,h,{config:p,type:m}={}){let g="";m==="plain"?g="pl":m==="phrase"?g="ph":m==="websearch"&&(g="w");const b=p===void 0?"":`(${p})`;return this.url.searchParams.append(u,`${g}fts${b}.${h}`),this}match(u){return Object.entries(u).forEach(([h,p])=>{this.url.searchParams.append(h,`eq.${p}`)}),this}not(u,h,p){return this.url.searchParams.append(u,`not.${h}.${p}`),this}or(u,{foreignTable:h,referencedTable:p=h}={}){const m=p?`${p}.or`:"or";return this.url.searchParams.append(m,`(${u})`),this}filter(u,h,p){return this.url.searchParams.append(u,`${h}.${p}`),this}}return Kl.default=o,Kl}var _p;function ob(){if(_p)return Yl;_p=1,Object.defineProperty(Yl,"__esModule",{value:!0});const s=gr.__importDefault(Fd());class i{constructor(c,{headers:u={},schema:h,fetch:p}){this.url=c,this.headers=new Headers(u),this.schema=h,this.fetch=p}select(c,u){const{head:h=!1,count:p}=u??{},m=h?"HEAD":"GET";let g=!1;const b=(c??"*").split("").map(w=>/\s/.test(w)&&!g?"":(w==='"'&&(g=!g),w)).join("");return this.url.searchParams.set("select",b),p&&this.headers.append("Prefer",`count=${p}`),new s.default({method:m,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(c,{count:u,defaultToNull:h=!0}={}){var p;const m="POST";if(u&&this.headers.append("Prefer",`count=${u}`),h||this.headers.append("Prefer","missing=default"),Array.isArray(c)){const g=c.reduce((b,w)=>b.concat(Object.keys(w)),[]);if(g.length>0){const b=[...new Set(g)].map(w=>`"${w}"`);this.url.searchParams.set("columns",b.join(","))}}return new s.default({method:m,url:this.url,headers:this.headers,schema:this.schema,body:c,fetch:(p=this.fetch)!==null&&p!==void 0?p:fetch})}upsert(c,{onConflict:u,ignoreDuplicates:h=!1,count:p,defaultToNull:m=!0}={}){var g;const b="POST";if(this.headers.append("Prefer",`resolution=${h?"ignore":"merge"}-duplicates`),u!==void 0&&this.url.searchParams.set("on_conflict",u),p&&this.headers.append("Prefer",`count=${p}`),m||this.headers.append("Prefer","missing=default"),Array.isArray(c)){const w=c.reduce((N,S)=>N.concat(Object.keys(S)),[]);if(w.length>0){const N=[...new Set(w)].map(S=>`"${S}"`);this.url.searchParams.set("columns",N.join(","))}}return new s.default({method:b,url:this.url,headers:this.headers,schema:this.schema,body:c,fetch:(g=this.fetch)!==null&&g!==void 0?g:fetch})}update(c,{count:u}={}){var h;const p="PATCH";return u&&this.headers.append("Prefer",`count=${u}`),new s.default({method:p,url:this.url,headers:this.headers,schema:this.schema,body:c,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}delete({count:c}={}){var u;const h="DELETE";return c&&this.headers.append("Prefer",`count=${c}`),new s.default({method:h,url:this.url,headers:this.headers,schema:this.schema,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}}return Yl.default=i,Yl}var Sp;function Pw(){if(Sp)return Gl;Sp=1,Object.defineProperty(Gl,"__esModule",{value:!0});const r=gr,s=r.__importDefault(ob()),i=r.__importDefault(Fd());class o{constructor(u,{headers:h={},schema:p,fetch:m}={}){this.url=u,this.headers=new Headers(h),this.schemaName=p,this.fetch=m}from(u){const h=new URL(`${this.url}/${u}`);return new s.default(h,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(u){return new o(this.url,{headers:this.headers,schema:u,fetch:this.fetch})}rpc(u,h={},{head:p=!1,get:m=!1,count:g}={}){var b;let w;const N=new URL(`${this.url}/rpc/${u}`);let S;p||m?(w=p?"HEAD":"GET",Object.entries(h).filter(([E,y])=>y!==void 0).map(([E,y])=>[E,Array.isArray(y)?`{${y.join(",")}}`:`${y}`]).forEach(([E,y])=>{N.searchParams.append(E,y)})):(w="POST",S=h);const v=new Headers(this.headers);return g&&v.set("Prefer",`count=${g}`),new i.default({method:w,url:N,headers:v,schema:this.schemaName,body:S,fetch:(b=this.fetch)!==null&&b!==void 0?b:fetch})}}return Gl.default=o,Gl}var Ep;function Iw(){if(Ep)return vt;Ep=1,Object.defineProperty(vt,"__esModule",{value:!0}),vt.PostgrestError=vt.PostgrestBuilder=vt.PostgrestTransformBuilder=vt.PostgrestFilterBuilder=vt.PostgrestQueryBuilder=vt.PostgrestClient=void 0;const r=gr,s=r.__importDefault(Pw());vt.PostgrestClient=s.default;const i=r.__importDefault(ob());vt.PostgrestQueryBuilder=i.default;const o=r.__importDefault(Fd());vt.PostgrestFilterBuilder=o.default;const c=r.__importDefault(lb());vt.PostgrestTransformBuilder=c.default;const u=r.__importDefault(ib());vt.PostgrestBuilder=u.default;const h=r.__importDefault(rb());return vt.PostgrestError=h.default,vt.default={PostgrestClient:s.default,PostgrestQueryBuilder:i.default,PostgrestFilterBuilder:o.default,PostgrestTransformBuilder:c.default,PostgrestBuilder:u.default,PostgrestError:h.default},vt}var cb=Iw();const ub=Ud(cb),$w=Yy({__proto__:null,default:ub},[cb]),{PostgrestClient:Hw,PostgrestQueryBuilder:G1,PostgrestFilterBuilder:Y1,PostgrestTransformBuilder:K1,PostgrestBuilder:F1,PostgrestError:Q1}=ub||$w;class Vw{static detectEnvironment(){var s;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((s=navigator.userAgent)===null||s===void 0)&&s.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const i=process.versions;if(i&&i.node){const o=i.node,c=parseInt(o.replace(/^v/,"").split(".")[0]);return c>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${c} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${c} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const s=this.detectEnvironment();if(s.constructor)return s.constructor;let i=s.error||"WebSocket not supported in this environment.";throw s.workaround&&(i+=`

Suggested solution: ${s.workaround}`),new Error(i)}static createWebSocket(s,i){const o=this.getWebSocketConstructor();return new o(s,i)}static isWebSocketSupported(){try{const s=this.detectEnvironment();return s.type==="native"||s.type==="ws"}catch{return!1}}}const Gw="2.81.0",Yw=`realtime-js/${Gw}`,db="1.0.0",Kw="2.0.0",kp=db,vd=1e4,Fw=1e3,Qw=100;var en;(function(r){r[r.connecting=0]="connecting",r[r.open=1]="open",r[r.closing=2]="closing",r[r.closed=3]="closed"})(en||(en={}));var lt;(function(r){r.closed="closed",r.errored="errored",r.joined="joined",r.joining="joining",r.leaving="leaving"})(lt||(lt={}));var na;(function(r){r.close="phx_close",r.error="phx_error",r.join="phx_join",r.reply="phx_reply",r.leave="phx_leave",r.access_token="access_token"})(na||(na={}));var yd;(function(r){r.websocket="websocket"})(yd||(yd={}));var tn;(function(r){r.Connecting="connecting",r.Open="open",r.Closing="closing",r.Closed="closed"})(tn||(tn={}));class Jw{constructor(){this.HEADER_LENGTH=1,this.META_LENGTH=4,this.USER_BROADCAST_PUSH_META_LENGTH=5,this.KINDS={push:0,reply:1,broadcast:2,userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST="broadcast"}encode(s,i){if(this._isArrayBuffer(s.payload))return i(this._binaryEncodePush(s));if(s.event===this.BROADCAST&&!(s.payload instanceof ArrayBuffer)&&typeof s.payload.event=="string")return i(this._binaryEncodeUserBroadcastPush(s));let o=[s.join_ref,s.ref,s.topic,s.event,s.payload];return i(JSON.stringify(o))}_binaryEncodePush(s){const{join_ref:i,ref:o,event:c,topic:u,payload:h}=s,p=this.META_LENGTH+i.length+o.length+u.length+c.length,m=new ArrayBuffer(this.HEADER_LENGTH+p);let g=new DataView(m),b=0;g.setUint8(b++,this.KINDS.push),g.setUint8(b++,i.length),g.setUint8(b++,o.length),g.setUint8(b++,u.length),g.setUint8(b++,c.length),Array.from(i,N=>g.setUint8(b++,N.charCodeAt(0))),Array.from(o,N=>g.setUint8(b++,N.charCodeAt(0))),Array.from(u,N=>g.setUint8(b++,N.charCodeAt(0))),Array.from(c,N=>g.setUint8(b++,N.charCodeAt(0)));var w=new Uint8Array(m.byteLength+h.byteLength);return w.set(new Uint8Array(m),0),w.set(new Uint8Array(h),m.byteLength),w.buffer}_binaryEncodeUserBroadcastPush(s){var i;return this._isArrayBuffer((i=s.payload)===null||i===void 0?void 0:i.payload)?this._encodeBinaryUserBroadcastPush(s):this._encodeJsonUserBroadcastPush(s)}_encodeBinaryUserBroadcastPush(s){var i,o;const{join_ref:c,ref:u,topic:h}=s,p=s.payload.event,m=(o=(i=s.payload)===null||i===void 0?void 0:i.payload)!==null&&o!==void 0?o:new ArrayBuffer(0),g=this.USER_BROADCAST_PUSH_META_LENGTH+c.length+u.length+h.length+p.length,b=new ArrayBuffer(this.HEADER_LENGTH+g);let w=new DataView(b),N=0;w.setUint8(N++,this.KINDS.userBroadcastPush),w.setUint8(N++,c.length),w.setUint8(N++,u.length),w.setUint8(N++,h.length),w.setUint8(N++,p.length),w.setUint8(N++,this.BINARY_ENCODING),Array.from(c,v=>w.setUint8(N++,v.charCodeAt(0))),Array.from(u,v=>w.setUint8(N++,v.charCodeAt(0))),Array.from(h,v=>w.setUint8(N++,v.charCodeAt(0))),Array.from(p,v=>w.setUint8(N++,v.charCodeAt(0)));var S=new Uint8Array(b.byteLength+m.byteLength);return S.set(new Uint8Array(b),0),S.set(new Uint8Array(m),b.byteLength),S.buffer}_encodeJsonUserBroadcastPush(s){var i,o;const{join_ref:c,ref:u,topic:h}=s,p=s.payload.event,m=(o=(i=s.payload)===null||i===void 0?void 0:i.payload)!==null&&o!==void 0?o:{},b=new TextEncoder().encode(JSON.stringify(m)).buffer,w=this.USER_BROADCAST_PUSH_META_LENGTH+c.length+u.length+h.length+p.length,N=new ArrayBuffer(this.HEADER_LENGTH+w);let S=new DataView(N),v=0;S.setUint8(v++,this.KINDS.userBroadcastPush),S.setUint8(v++,c.length),S.setUint8(v++,u.length),S.setUint8(v++,h.length),S.setUint8(v++,p.length),S.setUint8(v++,this.JSON_ENCODING),Array.from(c,y=>S.setUint8(v++,y.charCodeAt(0))),Array.from(u,y=>S.setUint8(v++,y.charCodeAt(0))),Array.from(h,y=>S.setUint8(v++,y.charCodeAt(0))),Array.from(p,y=>S.setUint8(v++,y.charCodeAt(0)));var E=new Uint8Array(N.byteLength+b.byteLength);return E.set(new Uint8Array(N),0),E.set(new Uint8Array(b),N.byteLength),E.buffer}decode(s,i){if(this._isArrayBuffer(s)){let o=this._binaryDecode(s);return i(o)}if(typeof s=="string"){const o=JSON.parse(s),[c,u,h,p,m]=o;return i({join_ref:c,ref:u,topic:h,event:p,payload:m})}return i({})}_binaryDecode(s){const i=new DataView(s),o=i.getUint8(0),c=new TextDecoder;switch(o){case this.KINDS.push:return this._decodePush(s,i,c);case this.KINDS.reply:return this._decodeReply(s,i,c);case this.KINDS.broadcast:return this._decodeBroadcast(s,i,c);case this.KINDS.userBroadcast:return this._decodeUserBroadcast(s,i,c)}}_decodePush(s,i,o){const c=i.getUint8(1),u=i.getUint8(2),h=i.getUint8(3);let p=this.HEADER_LENGTH+this.META_LENGTH-1;const m=o.decode(s.slice(p,p+c));p=p+c;const g=o.decode(s.slice(p,p+u));p=p+u;const b=o.decode(s.slice(p,p+h));p=p+h;const w=JSON.parse(o.decode(s.slice(p,s.byteLength)));return{join_ref:m,ref:null,topic:g,event:b,payload:w}}_decodeReply(s,i,o){const c=i.getUint8(1),u=i.getUint8(2),h=i.getUint8(3),p=i.getUint8(4);let m=this.HEADER_LENGTH+this.META_LENGTH;const g=o.decode(s.slice(m,m+c));m=m+c;const b=o.decode(s.slice(m,m+u));m=m+u;const w=o.decode(s.slice(m,m+h));m=m+h;const N=o.decode(s.slice(m,m+p));m=m+p;const S=JSON.parse(o.decode(s.slice(m,s.byteLength))),v={status:N,response:S};return{join_ref:g,ref:b,topic:w,event:na.reply,payload:v}}_decodeBroadcast(s,i,o){const c=i.getUint8(1),u=i.getUint8(2);let h=this.HEADER_LENGTH+2;const p=o.decode(s.slice(h,h+c));h=h+c;const m=o.decode(s.slice(h,h+u));h=h+u;const g=JSON.parse(o.decode(s.slice(h,s.byteLength)));return{join_ref:null,ref:null,topic:p,event:m,payload:g}}_decodeUserBroadcast(s,i,o){const c=i.getUint8(1),u=i.getUint8(2),h=i.getUint8(3),p=i.getUint8(4);let m=this.HEADER_LENGTH+4;const g=o.decode(s.slice(m,m+c));m=m+c;const b=o.decode(s.slice(m,m+u));m=m+u;const w=o.decode(s.slice(m,m+h));m=m+h;const N=s.slice(m,s.byteLength),S=p===this.JSON_ENCODING?JSON.parse(o.decode(N)):N,v={type:this.BROADCAST,event:b,payload:S};return h>0&&(v.meta=JSON.parse(w)),{join_ref:null,ref:null,topic:g,event:this.BROADCAST,payload:v}}_isArrayBuffer(s){var i;return s instanceof ArrayBuffer||((i=s==null?void 0:s.constructor)===null||i===void 0?void 0:i.name)==="ArrayBuffer"}}class hb{constructor(s,i){this.callback=s,this.timerCalc=i,this.timer=void 0,this.tries=0,this.callback=s,this.timerCalc=i}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ie;(function(r){r.abstime="abstime",r.bool="bool",r.date="date",r.daterange="daterange",r.float4="float4",r.float8="float8",r.int2="int2",r.int4="int4",r.int4range="int4range",r.int8="int8",r.int8range="int8range",r.json="json",r.jsonb="jsonb",r.money="money",r.numeric="numeric",r.oid="oid",r.reltime="reltime",r.text="text",r.time="time",r.timestamp="timestamp",r.timestamptz="timestamptz",r.timetz="timetz",r.tsrange="tsrange",r.tstzrange="tstzrange"})(Ie||(Ie={}));const Cp=(r,s,i={})=>{var o;const c=(o=i.skipTypes)!==null&&o!==void 0?o:[];return s?Object.keys(s).reduce((u,h)=>(u[h]=Xw(h,r,s,c),u),{}):{}},Xw=(r,s,i,o)=>{const c=s.find(p=>p.name===r),u=c==null?void 0:c.type,h=i[r];return u&&!o.includes(u)?fb(u,h):wd(h)},fb=(r,s)=>{if(r.charAt(0)==="_"){const i=r.slice(1,r.length);return tj(s,i)}switch(r){case Ie.bool:return Ww(s);case Ie.float4:case Ie.float8:case Ie.int2:case Ie.int4:case Ie.int8:case Ie.numeric:case Ie.oid:return Zw(s);case Ie.json:case Ie.jsonb:return ej(s);case Ie.timestamp:return aj(s);case Ie.abstime:case Ie.date:case Ie.daterange:case Ie.int4range:case Ie.int8range:case Ie.money:case Ie.reltime:case Ie.text:case Ie.time:case Ie.timestamptz:case Ie.timetz:case Ie.tsrange:case Ie.tstzrange:return wd(s);default:return wd(s)}},wd=r=>r,Ww=r=>{switch(r){case"t":return!0;case"f":return!1;default:return r}},Zw=r=>{if(typeof r=="string"){const s=parseFloat(r);if(!Number.isNaN(s))return s}return r},ej=r=>{if(typeof r=="string")try{return JSON.parse(r)}catch(s){return console.log(`JSON parse error: ${s}`),r}return r},tj=(r,s)=>{if(typeof r!="string")return r;const i=r.length-1,o=r[i];if(r[0]==="{"&&o==="}"){let u;const h=r.slice(1,i);try{u=JSON.parse("["+h+"]")}catch{u=h?h.split(","):[]}return u.map(p=>fb(s,p))}return r},aj=r=>typeof r=="string"?r.replace(" ","T"):r,mb=r=>{const s=new URL(r);return s.protocol=s.protocol.replace(/^ws/i,"http"),s.pathname=s.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),s.pathname===""||s.pathname==="/"?s.pathname="/api/broadcast":s.pathname=s.pathname+"/api/broadcast",s.href};class td{constructor(s,i,o={},c=vd){this.channel=s,this.event=i,this.payload=o,this.timeout=c,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(s){this.timeout=s,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(s){this.payload=Object.assign(Object.assign({},this.payload),s)}receive(s,i){var o;return this._hasReceived(s)&&i((o=this.receivedResp)===null||o===void 0?void 0:o.response),this.recHooks.push({status:s,callback:i}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const s=i=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=i,this._matchReceive(i)};this.channel._on(this.refEvent,{},s),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(s,i){this.refEvent&&this.channel._trigger(this.refEvent,{status:s,response:i})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:s,response:i}){this.recHooks.filter(o=>o.status===s).forEach(o=>o.callback(i))}_hasReceived(s){return this.receivedResp&&this.receivedResp.status===s}}var Ap;(function(r){r.SYNC="sync",r.JOIN="join",r.LEAVE="leave"})(Ap||(Ap={}));class gi{constructor(s,i){this.channel=s,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const o=(i==null?void 0:i.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(o.state,{},c=>{const{onJoin:u,onLeave:h,onSync:p}=this.caller;this.joinRef=this.channel._joinRef(),this.state=gi.syncState(this.state,c,u,h),this.pendingDiffs.forEach(m=>{this.state=gi.syncDiff(this.state,m,u,h)}),this.pendingDiffs=[],p()}),this.channel._on(o.diff,{},c=>{const{onJoin:u,onLeave:h,onSync:p}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(c):(this.state=gi.syncDiff(this.state,c,u,h),p())}),this.onJoin((c,u,h)=>{this.channel._trigger("presence",{event:"join",key:c,currentPresences:u,newPresences:h})}),this.onLeave((c,u,h)=>{this.channel._trigger("presence",{event:"leave",key:c,currentPresences:u,leftPresences:h})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(s,i,o,c){const u=this.cloneDeep(s),h=this.transformState(i),p={},m={};return this.map(u,(g,b)=>{h[g]||(m[g]=b)}),this.map(h,(g,b)=>{const w=u[g];if(w){const N=b.map(y=>y.presence_ref),S=w.map(y=>y.presence_ref),v=b.filter(y=>S.indexOf(y.presence_ref)<0),E=w.filter(y=>N.indexOf(y.presence_ref)<0);v.length>0&&(p[g]=v),E.length>0&&(m[g]=E)}else p[g]=b}),this.syncDiff(u,{joins:p,leaves:m},o,c)}static syncDiff(s,i,o,c){const{joins:u,leaves:h}={joins:this.transformState(i.joins),leaves:this.transformState(i.leaves)};return o||(o=()=>{}),c||(c=()=>{}),this.map(u,(p,m)=>{var g;const b=(g=s[p])!==null&&g!==void 0?g:[];if(s[p]=this.cloneDeep(m),b.length>0){const w=s[p].map(S=>S.presence_ref),N=b.filter(S=>w.indexOf(S.presence_ref)<0);s[p].unshift(...N)}o(p,b,m)}),this.map(h,(p,m)=>{let g=s[p];if(!g)return;const b=m.map(w=>w.presence_ref);g=g.filter(w=>b.indexOf(w.presence_ref)<0),s[p]=g,c(p,g,m),g.length===0&&delete s[p]}),s}static map(s,i){return Object.getOwnPropertyNames(s).map(o=>i(o,s[o]))}static transformState(s){return s=this.cloneDeep(s),Object.getOwnPropertyNames(s).reduce((i,o)=>{const c=s[o];return"metas"in c?i[o]=c.metas.map(u=>(u.presence_ref=u.phx_ref,delete u.phx_ref,delete u.phx_ref_prev,u)):i[o]=c,i},{})}static cloneDeep(s){return JSON.parse(JSON.stringify(s))}onJoin(s){this.caller.onJoin=s}onLeave(s){this.caller.onLeave=s}onSync(s){this.caller.onSync=s}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Tp;(function(r){r.ALL="*",r.INSERT="INSERT",r.UPDATE="UPDATE",r.DELETE="DELETE"})(Tp||(Tp={}));var pi;(function(r){r.BROADCAST="broadcast",r.PRESENCE="presence",r.POSTGRES_CHANGES="postgres_changes",r.SYSTEM="system"})(pi||(pi={}));var Va;(function(r){r.SUBSCRIBED="SUBSCRIBED",r.TIMED_OUT="TIMED_OUT",r.CLOSED="CLOSED",r.CHANNEL_ERROR="CHANNEL_ERROR"})(Va||(Va={}));class Qd{constructor(s,i={config:{}},o){var c,u;if(this.topic=s,this.params=i,this.socket=o,this.bindings={},this.state=lt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=s.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},i.config),this.timeout=this.socket.timeout,this.joinPush=new td(this,na.join,this.params,this.timeout),this.rejoinTimer=new hb(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=lt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(h=>h.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=lt.closed,this.socket._remove(this)}),this._onError(h=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,h),this.state=lt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=lt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",h=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,h),this.state=lt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(na.reply,{},(h,p)=>{this._trigger(this._replyEventName(p),h)}),this.presence=new gi(this),this.broadcastEndpointURL=mb(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((u=(c=this.params.config)===null||c===void 0?void 0:c.broadcast)===null||u===void 0)&&u.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(s,i=this.timeout){var o,c,u;if(this.socket.isConnected()||this.socket.connect(),this.state==lt.closed){const{config:{broadcast:h,presence:p,private:m}}=this.params,g=(c=(o=this.bindings.postgres_changes)===null||o===void 0?void 0:o.map(S=>S.filter))!==null&&c!==void 0?c:[],b=!!this.bindings[pi.PRESENCE]&&this.bindings[pi.PRESENCE].length>0||((u=this.params.config.presence)===null||u===void 0?void 0:u.enabled)===!0,w={},N={broadcast:h,presence:Object.assign(Object.assign({},p),{enabled:b}),postgres_changes:g,private:m};this.socket.accessTokenValue&&(w.access_token=this.socket.accessTokenValue),this._onError(S=>s==null?void 0:s(Va.CHANNEL_ERROR,S)),this._onClose(()=>s==null?void 0:s(Va.CLOSED)),this.updateJoinPayload(Object.assign({config:N},w)),this.joinedOnce=!0,this._rejoin(i),this.joinPush.receive("ok",async({postgres_changes:S})=>{var v;if(this.socket.setAuth(),S===void 0){s==null||s(Va.SUBSCRIBED);return}else{const E=this.bindings.postgres_changes,y=(v=E==null?void 0:E.length)!==null&&v!==void 0?v:0,C=[];for(let M=0;M<y;M++){const T=E[M],{filter:{event:z,schema:U,table:X,filter:B}}=T,se=S&&S[M];if(se&&se.event===z&&se.schema===U&&se.table===X&&se.filter===B)C.push(Object.assign(Object.assign({},T),{id:se.id}));else{this.unsubscribe(),this.state=lt.errored,s==null||s(Va.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=C,s&&s(Va.SUBSCRIBED);return}}).receive("error",S=>{this.state=lt.errored,s==null||s(Va.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(S).join(", ")||"error")))}).receive("timeout",()=>{s==null||s(Va.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(s,i={}){return await this.send({type:"presence",event:"track",payload:s},i.timeout||this.timeout)}async untrack(s={}){return await this.send({type:"presence",event:"untrack"},s)}on(s,i,o){return this.state===lt.joined&&s===pi.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(s,i,o)}async httpSend(s,i,o={}){var c;const u=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(i==null)return Promise.reject("Payload is required for httpSend()");const h={method:"POST",headers:{Authorization:u,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:i,private:this.private}]})},p=await this._fetchWithTimeout(this.broadcastEndpointURL,h,(c=o.timeout)!==null&&c!==void 0?c:this.timeout);if(p.status===202)return{success:!0};let m=p.statusText;try{const g=await p.json();m=g.error||g.message||m}catch{}return Promise.reject(new Error(m))}async send(s,i={}){var o,c;if(!this._canPush()&&s.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:u,payload:h}=s,m={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:u,payload:h,private:this.private}]})};try{const g=await this._fetchWithTimeout(this.broadcastEndpointURL,m,(o=i.timeout)!==null&&o!==void 0?o:this.timeout);return await((c=g.body)===null||c===void 0?void 0:c.cancel()),g.ok?"ok":"error"}catch(g){return g.name==="AbortError"?"timed out":"error"}}else return new Promise(u=>{var h,p,m;const g=this._push(s.type,s,i.timeout||this.timeout);s.type==="broadcast"&&!(!((m=(p=(h=this.params)===null||h===void 0?void 0:h.config)===null||p===void 0?void 0:p.broadcast)===null||m===void 0)&&m.ack)&&u("ok"),g.receive("ok",()=>u("ok")),g.receive("error",()=>u("error")),g.receive("timeout",()=>u("timed out"))})}updateJoinPayload(s){this.joinPush.updatePayload(s)}unsubscribe(s=this.timeout){this.state=lt.leaving;const i=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(na.close,"leave",this._joinRef())};this.joinPush.destroy();let o=null;return new Promise(c=>{o=new td(this,na.leave,{},s),o.receive("ok",()=>{i(),c("ok")}).receive("timeout",()=>{i(),c("timed out")}).receive("error",()=>{c("error")}),o.send(),this._canPush()||o.trigger("ok",{})}).finally(()=>{o==null||o.destroy()})}teardown(){this.pushBuffer.forEach(s=>s.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=lt.closed,this.bindings={}}async _fetchWithTimeout(s,i,o){const c=new AbortController,u=setTimeout(()=>c.abort(),o),h=await this.socket.fetch(s,Object.assign(Object.assign({},i),{signal:c.signal}));return clearTimeout(u),h}_push(s,i,o=this.timeout){if(!this.joinedOnce)throw`tried to push '${s}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let c=new td(this,s,i,o);return this._canPush()?c.send():this._addToPushBuffer(c),c}_addToPushBuffer(s){if(s.startTimeout(),this.pushBuffer.push(s),this.pushBuffer.length>Qw){const i=this.pushBuffer.shift();i&&(i.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${i.event}`,i.payload))}}_onMessage(s,i,o){return i}_isMember(s){return this.topic===s}_joinRef(){return this.joinPush.ref}_trigger(s,i,o){var c,u;const h=s.toLocaleLowerCase(),{close:p,error:m,leave:g,join:b}=na;if(o&&[p,m,g,b].indexOf(h)>=0&&o!==this._joinRef())return;let N=this._onMessage(h,i,o);if(i&&!N)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(h)?(c=this.bindings.postgres_changes)===null||c===void 0||c.filter(S=>{var v,E,y;return((v=S.filter)===null||v===void 0?void 0:v.event)==="*"||((y=(E=S.filter)===null||E===void 0?void 0:E.event)===null||y===void 0?void 0:y.toLocaleLowerCase())===h}).map(S=>S.callback(N,o)):(u=this.bindings[h])===null||u===void 0||u.filter(S=>{var v,E,y,C,M,T;if(["broadcast","presence","postgres_changes"].includes(h))if("id"in S){const z=S.id,U=(v=S.filter)===null||v===void 0?void 0:v.event;return z&&((E=i.ids)===null||E===void 0?void 0:E.includes(z))&&(U==="*"||(U==null?void 0:U.toLocaleLowerCase())===((y=i.data)===null||y===void 0?void 0:y.type.toLocaleLowerCase()))}else{const z=(M=(C=S==null?void 0:S.filter)===null||C===void 0?void 0:C.event)===null||M===void 0?void 0:M.toLocaleLowerCase();return z==="*"||z===((T=i==null?void 0:i.event)===null||T===void 0?void 0:T.toLocaleLowerCase())}else return S.type.toLocaleLowerCase()===h}).map(S=>{if(typeof N=="object"&&"ids"in N){const v=N.data,{schema:E,table:y,commit_timestamp:C,type:M,errors:T}=v;N=Object.assign(Object.assign({},{schema:E,table:y,commit_timestamp:C,eventType:M,new:{},old:{},errors:T}),this._getPayloadRecords(v))}S.callback(N,o)})}_isClosed(){return this.state===lt.closed}_isJoined(){return this.state===lt.joined}_isJoining(){return this.state===lt.joining}_isLeaving(){return this.state===lt.leaving}_replyEventName(s){return`chan_reply_${s}`}_on(s,i,o){const c=s.toLocaleLowerCase(),u={type:c,filter:i,callback:o};return this.bindings[c]?this.bindings[c].push(u):this.bindings[c]=[u],this}_off(s,i){const o=s.toLocaleLowerCase();return this.bindings[o]&&(this.bindings[o]=this.bindings[o].filter(c=>{var u;return!(((u=c.type)===null||u===void 0?void 0:u.toLocaleLowerCase())===o&&Qd.isEqual(c.filter,i))})),this}static isEqual(s,i){if(Object.keys(s).length!==Object.keys(i).length)return!1;for(const o in s)if(s[o]!==i[o])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(s){this._on(na.close,{},s)}_onError(s){this._on(na.error,{},i=>s(i))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(s=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=lt.joining,this.joinPush.resend(s))}_getPayloadRecords(s){const i={new:{},old:{}};return(s.type==="INSERT"||s.type==="UPDATE")&&(i.new=Cp(s.columns,s.record)),(s.type==="UPDATE"||s.type==="DELETE")&&(i.old=Cp(s.columns,s.old_record)),i}}const ad=()=>{},Xl={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},sj=[1e3,2e3,5e3,1e4],nj=1e4,rj=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class ij{constructor(s,i){var o;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=vd,this.transport=null,this.heartbeatIntervalMs=Xl.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=ad,this.ref=0,this.reconnectTimer=null,this.vsn=kp,this.logger=ad,this.conn=null,this.sendBuffer=[],this.serializer=new Jw,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=c=>c?(...u)=>c(...u):(...u)=>fetch(...u),!(!((o=i==null?void 0:i.params)===null||o===void 0)&&o.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=i.params.apikey,this.endPoint=`${s}/${yd.websocket}`,this.httpEndpoint=mb(s),this._initializeOptions(i),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(i==null?void 0:i.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Vw.createWebSocket(this.endpointURL())}catch(s){this._setConnectionState("disconnected");const i=s.message;throw i.includes("Node.js")?new Error(`${i}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${i}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(s,i){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const o=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(o),this._setConnectionState("disconnected")},s?this.conn.close(s,i??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(s){const i=await s.unsubscribe();return this.channels.length===0&&this.disconnect(),i}async removeAllChannels(){const s=await Promise.all(this.channels.map(i=>i.unsubscribe()));return this.channels=[],this.disconnect(),s}log(s,i,o){this.logger(s,i,o)}connectionState(){switch(this.conn&&this.conn.readyState){case en.connecting:return tn.Connecting;case en.open:return tn.Open;case en.closing:return tn.Closing;default:return tn.Closed}}isConnected(){return this.connectionState()===tn.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(s,i={config:{}}){const o=`realtime:${s}`,c=this.getChannels().find(u=>u.topic===o);if(c)return c;{const u=new Qd(`realtime:${s}`,i,this);return this.channels.push(u),u}}push(s){const{topic:i,event:o,payload:c,ref:u}=s,h=()=>{this.encode(s,p=>{var m;(m=this.conn)===null||m===void 0||m.send(p)})};this.log("push",`${i} ${o} (${u})`,c),this.isConnected()?h():this.sendBuffer.push(h)}async setAuth(s=null){this._authPromise=this._performAuth(s);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var s;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(i){this.log("error","error in heartbeat callback",i)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(i){this.log("error","error in heartbeat callback",i)}this._wasManualDisconnect=!1,(s=this.conn)===null||s===void 0||s.close(Fw,"heartbeat timeout"),setTimeout(()=>{var i;this.isConnected()||(i=this.reconnectTimer)===null||i===void 0||i.scheduleTimeout()},Xl.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(i){this.log("error","error in heartbeat callback",i)}this._setAuthSafely("heartbeat")}onHeartbeat(s){this.heartbeatCallback=s}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(s=>s()),this.sendBuffer=[])}_makeRef(){let s=this.ref+1;return s===this.ref?this.ref=0:this.ref=s,this.ref.toString()}_leaveOpenTopic(s){let i=this.channels.find(o=>o.topic===s&&(o._isJoined()||o._isJoining()));i&&(this.log("transport",`leaving duplicate topic "${s}"`),i.unsubscribe())}_remove(s){this.channels=this.channels.filter(i=>i.topic!==s.topic)}_onConnMessage(s){this.decode(s.data,i=>{if(i.topic==="phoenix"&&i.event==="phx_reply")try{this.heartbeatCallback(i.payload.status==="ok"?"ok":"error")}catch(g){this.log("error","error in heartbeat callback",g)}i.ref&&i.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:o,event:c,payload:u,ref:h}=i,p=h?`(${h})`:"",m=u.status||"";this.log("receive",`${m} ${o} ${c} ${p}`.trim(),u),this.channels.filter(g=>g._isMember(o)).forEach(g=>g._trigger(c,u,h)),this._triggerStateCallbacks("message",i)})}_clearTimer(s){var i;s==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):s==="reconnect"&&((i=this.reconnectTimer)===null||i===void 0||i.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=s=>this._onConnError(s),this.conn.onmessage=s=>this._onConnMessage(s),this.conn.onclose=s=>this._onConnClose(s))}_teardownConnection(){if(this.conn){if(this.conn.readyState===en.open||this.conn.readyState===en.connecting)try{this.conn.close()}catch(s){this.log("error","Error closing connection",s)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(s=>s.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const s=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(s),this.workerRef.onerror=i=>{this.log("worker","worker error",i.message),this.workerRef.terminate()},this.workerRef.onmessage=i=>{i.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(s){var i;this._setConnectionState("disconnected"),this.log("transport","close",s),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(i=this.reconnectTimer)===null||i===void 0||i.scheduleTimeout(),this._triggerStateCallbacks("close",s)}_onConnError(s){this._setConnectionState("disconnected"),this.log("transport",`${s}`),this._triggerChanError(),this._triggerStateCallbacks("error",s)}_triggerChanError(){this.channels.forEach(s=>s._trigger(na.error))}_appendParams(s,i){if(Object.keys(i).length===0)return s;const o=s.match(/\?/)?"&":"?",c=new URLSearchParams(i);return`${s}${o}${c}`}_workerObjectUrl(s){let i;if(s)i=s;else{const o=new Blob([rj],{type:"application/javascript"});i=URL.createObjectURL(o)}return i}_setConnectionState(s,i=!1){this._connectionState=s,s==="connecting"?this._wasManualDisconnect=!1:s==="disconnecting"&&(this._wasManualDisconnect=i)}async _performAuth(s=null){let i;s?i=s:this.accessToken?i=await this.accessToken():i=this.accessTokenValue,this.accessTokenValue!=i&&(this.accessTokenValue=i,this.channels.forEach(o=>{const c={access_token:i,version:Yw};i&&o.updateJoinPayload(c),o.joinedOnce&&o._isJoined()&&o._push(na.access_token,{access_token:i})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(s="general"){this.setAuth().catch(i=>{this.log("error",`error setting auth in ${s}`,i)})}_triggerStateCallbacks(s,i){try{this.stateChangeCallbacks[s].forEach(o=>{try{o(i)}catch(c){this.log("error",`error in ${s} callback`,c)}})}catch(o){this.log("error",`error triggering ${s} callbacks`,o)}}_setupReconnectionTimer(){this.reconnectTimer=new hb(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Xl.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(s){var i,o,c,u,h,p,m,g,b,w,N,S;switch(this.transport=(i=s==null?void 0:s.transport)!==null&&i!==void 0?i:null,this.timeout=(o=s==null?void 0:s.timeout)!==null&&o!==void 0?o:vd,this.heartbeatIntervalMs=(c=s==null?void 0:s.heartbeatIntervalMs)!==null&&c!==void 0?c:Xl.HEARTBEAT_INTERVAL,this.worker=(u=s==null?void 0:s.worker)!==null&&u!==void 0?u:!1,this.accessToken=(h=s==null?void 0:s.accessToken)!==null&&h!==void 0?h:null,this.heartbeatCallback=(p=s==null?void 0:s.heartbeatCallback)!==null&&p!==void 0?p:ad,this.vsn=(m=s==null?void 0:s.vsn)!==null&&m!==void 0?m:kp,s!=null&&s.params&&(this.params=s.params),s!=null&&s.logger&&(this.logger=s.logger),(s!=null&&s.logLevel||s!=null&&s.log_level)&&(this.logLevel=s.logLevel||s.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(g=s==null?void 0:s.reconnectAfterMs)!==null&&g!==void 0?g:(v=>sj[v-1]||nj),this.vsn){case db:this.encode=(b=s==null?void 0:s.encode)!==null&&b!==void 0?b:((v,E)=>E(JSON.stringify(v))),this.decode=(w=s==null?void 0:s.decode)!==null&&w!==void 0?w:((v,E)=>E(JSON.parse(v)));break;case Kw:this.encode=(N=s==null?void 0:s.encode)!==null&&N!==void 0?N:this.serializer.encode.bind(this.serializer),this.decode=(S=s==null?void 0:s.decode)!==null&&S!==void 0?S:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=s==null?void 0:s.workerUrl}}}class Jd extends Error{constructor(s){super(s),this.__isStorageError=!0,this.name="StorageError"}}function Ke(r){return typeof r=="object"&&r!==null&&"__isStorageError"in r}class lj extends Jd{constructor(s,i,o){super(s),this.name="StorageApiError",this.status=i,this.statusCode=o}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class jd extends Jd{constructor(s,i){super(s),this.name="StorageUnknownError",this.originalError=i}}const Xd=r=>r?(...s)=>r(...s):(...s)=>fetch(...s),oj=()=>Response,Nd=r=>{if(Array.isArray(r))return r.map(i=>Nd(i));if(typeof r=="function"||r!==Object(r))return r;const s={};return Object.entries(r).forEach(([i,o])=>{const c=i.replace(/([-_][a-z])/gi,u=>u.toUpperCase().replace(/[-_]/g,""));s[c]=Nd(o)}),s},cj=r=>{if(typeof r!="object"||r===null)return!1;const s=Object.getPrototypeOf(r);return(s===null||s===Object.prototype||Object.getPrototypeOf(s)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)},sd=r=>{var s;return r.msg||r.message||r.error_description||(typeof r.error=="string"?r.error:(s=r.error)===null||s===void 0?void 0:s.message)||JSON.stringify(r)},uj=(r,s,i)=>de(void 0,void 0,void 0,function*(){const o=yield oj();r instanceof o&&!(i!=null&&i.noResolveJson)?r.json().then(c=>{const u=r.status||500,h=(c==null?void 0:c.statusCode)||u+"";s(new lj(sd(c),u,h))}).catch(c=>{s(new jd(sd(c),c))}):s(new jd(sd(r),r))}),dj=(r,s,i,o)=>{const c={method:r,headers:(s==null?void 0:s.headers)||{}};return r==="GET"||!o?c:(cj(o)?(c.headers=Object.assign({"Content-Type":"application/json"},s==null?void 0:s.headers),c.body=JSON.stringify(o)):c.body=o,s!=null&&s.duplex&&(c.duplex=s.duplex),Object.assign(Object.assign({},c),i))};function Ei(r,s,i,o,c,u){return de(this,void 0,void 0,function*(){return new Promise((h,p)=>{r(i,dj(s,o,c,u)).then(m=>{if(!m.ok)throw m;return o!=null&&o.noResolveJson?m:m.json()}).then(m=>h(m)).catch(m=>uj(m,p,o))})})}function yi(r,s,i,o){return de(this,void 0,void 0,function*(){return Ei(r,"GET",s,i,o)})}function da(r,s,i,o,c){return de(this,void 0,void 0,function*(){return Ei(r,"POST",s,o,c,i)})}function _d(r,s,i,o,c){return de(this,void 0,void 0,function*(){return Ei(r,"PUT",s,o,c,i)})}function hj(r,s,i,o){return de(this,void 0,void 0,function*(){return Ei(r,"HEAD",s,Object.assign(Object.assign({},i),{noResolveJson:!0}),o)})}function Wd(r,s,i,o,c){return de(this,void 0,void 0,function*(){return Ei(r,"DELETE",s,o,c,i)})}class fj{constructor(s,i){this.downloadFn=s,this.shouldThrowOnError=i}then(s,i){return this.execute().then(s,i)}execute(){return de(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ke(s))return{data:null,error:s};throw s}})}}var gb;class mj{constructor(s,i){this.downloadFn=s,this.shouldThrowOnError=i,this[gb]="BlobDownloadBuilder",this.promise=null}asStream(){return new fj(this.downloadFn,this.shouldThrowOnError)}then(s,i){return this.getPromise().then(s,i)}catch(s){return this.getPromise().catch(s)}finally(s){return this.getPromise().finally(s)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return de(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ke(s))return{data:null,error:s};throw s}})}}gb=Symbol.toStringTag;const gj={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Rp={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class pj{constructor(s,i={},o,c){this.shouldThrowOnError=!1,this.url=s,this.headers=i,this.bucketId=o,this.fetch=Xd(c)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(s,i,o,c){return de(this,void 0,void 0,function*(){try{let u;const h=Object.assign(Object.assign({},Rp),c);let p=Object.assign(Object.assign({},this.headers),s==="POST"&&{"x-upsert":String(h.upsert)});const m=h.metadata;typeof Blob<"u"&&o instanceof Blob?(u=new FormData,u.append("cacheControl",h.cacheControl),m&&u.append("metadata",this.encodeMetadata(m)),u.append("",o)):typeof FormData<"u"&&o instanceof FormData?(u=o,u.has("cacheControl")||u.append("cacheControl",h.cacheControl),m&&!u.has("metadata")&&u.append("metadata",this.encodeMetadata(m))):(u=o,p["cache-control"]=`max-age=${h.cacheControl}`,p["content-type"]=h.contentType,m&&(p["x-metadata"]=this.toBase64(this.encodeMetadata(m))),(typeof ReadableStream<"u"&&u instanceof ReadableStream||u&&typeof u=="object"&&"pipe"in u&&typeof u.pipe=="function")&&!h.duplex&&(h.duplex="half")),c!=null&&c.headers&&(p=Object.assign(Object.assign({},p),c.headers));const g=this._removeEmptyFolders(i),b=this._getFinalPath(g),w=yield(s=="PUT"?_d:da)(this.fetch,`${this.url}/object/${b}`,u,Object.assign({headers:p},h!=null&&h.duplex?{duplex:h.duplex}:{}));return{data:{path:g,id:w.Id,fullPath:w.Key},error:null}}catch(u){if(this.shouldThrowOnError)throw u;if(Ke(u))return{data:null,error:u};throw u}})}upload(s,i,o){return de(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",s,i,o)})}uploadToSignedUrl(s,i,o,c){return de(this,void 0,void 0,function*(){const u=this._removeEmptyFolders(s),h=this._getFinalPath(u),p=new URL(this.url+`/object/upload/sign/${h}`);p.searchParams.set("token",i);try{let m;const g=Object.assign({upsert:Rp.upsert},c),b=Object.assign(Object.assign({},this.headers),{"x-upsert":String(g.upsert)});typeof Blob<"u"&&o instanceof Blob?(m=new FormData,m.append("cacheControl",g.cacheControl),m.append("",o)):typeof FormData<"u"&&o instanceof FormData?(m=o,m.append("cacheControl",g.cacheControl)):(m=o,b["cache-control"]=`max-age=${g.cacheControl}`,b["content-type"]=g.contentType);const w=yield _d(this.fetch,p.toString(),m,{headers:b});return{data:{path:u,fullPath:w.Key},error:null}}catch(m){if(this.shouldThrowOnError)throw m;if(Ke(m))return{data:null,error:m};throw m}})}createSignedUploadUrl(s,i){return de(this,void 0,void 0,function*(){try{let o=this._getFinalPath(s);const c=Object.assign({},this.headers);i!=null&&i.upsert&&(c["x-upsert"]="true");const u=yield da(this.fetch,`${this.url}/object/upload/sign/${o}`,{},{headers:c}),h=new URL(this.url+u.url),p=h.searchParams.get("token");if(!p)throw new Jd("No token returned by API");return{data:{signedUrl:h.toString(),path:s,token:p},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ke(o))return{data:null,error:o};throw o}})}update(s,i,o){return de(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",s,i,o)})}move(s,i,o){return de(this,void 0,void 0,function*(){try{return{data:yield da(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:s,destinationKey:i,destinationBucket:o==null?void 0:o.destinationBucket},{headers:this.headers}),error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Ke(c))return{data:null,error:c};throw c}})}copy(s,i,o){return de(this,void 0,void 0,function*(){try{return{data:{path:(yield da(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:s,destinationKey:i,destinationBucket:o==null?void 0:o.destinationBucket},{headers:this.headers})).Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Ke(c))return{data:null,error:c};throw c}})}createSignedUrl(s,i,o){return de(this,void 0,void 0,function*(){try{let c=this._getFinalPath(s),u=yield da(this.fetch,`${this.url}/object/sign/${c}`,Object.assign({expiresIn:i},o!=null&&o.transform?{transform:o.transform}:{}),{headers:this.headers});const h=o!=null&&o.download?`&download=${o.download===!0?"":o.download}`:"";return u={signedUrl:encodeURI(`${this.url}${u.signedURL}${h}`)},{data:u,error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Ke(c))return{data:null,error:c};throw c}})}createSignedUrls(s,i,o){return de(this,void 0,void 0,function*(){try{const c=yield da(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:i,paths:s},{headers:this.headers}),u=o!=null&&o.download?`&download=${o.download===!0?"":o.download}`:"";return{data:c.map(h=>Object.assign(Object.assign({},h),{signedUrl:h.signedURL?encodeURI(`${this.url}${h.signedURL}${u}`):null})),error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Ke(c))return{data:null,error:c};throw c}})}download(s,i){const c=typeof(i==null?void 0:i.transform)<"u"?"render/image/authenticated":"object",u=this.transformOptsToQueryString((i==null?void 0:i.transform)||{}),h=u?`?${u}`:"",p=this._getFinalPath(s),m=()=>yi(this.fetch,`${this.url}/${c}/${p}${h}`,{headers:this.headers,noResolveJson:!0});return new mj(m,this.shouldThrowOnError)}info(s){return de(this,void 0,void 0,function*(){const i=this._getFinalPath(s);try{const o=yield yi(this.fetch,`${this.url}/object/info/${i}`,{headers:this.headers});return{data:Nd(o),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ke(o))return{data:null,error:o};throw o}})}exists(s){return de(this,void 0,void 0,function*(){const i=this._getFinalPath(s);try{return yield hj(this.fetch,`${this.url}/object/${i}`,{headers:this.headers}),{data:!0,error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ke(o)&&o instanceof jd){const c=o.originalError;if([400,404].includes(c==null?void 0:c.status))return{data:!1,error:o}}throw o}})}getPublicUrl(s,i){const o=this._getFinalPath(s),c=[],u=i!=null&&i.download?`download=${i.download===!0?"":i.download}`:"";u!==""&&c.push(u);const p=typeof(i==null?void 0:i.transform)<"u"?"render/image":"object",m=this.transformOptsToQueryString((i==null?void 0:i.transform)||{});m!==""&&c.push(m);let g=c.join("&");return g!==""&&(g=`?${g}`),{data:{publicUrl:encodeURI(`${this.url}/${p}/public/${o}${g}`)}}}remove(s){return de(this,void 0,void 0,function*(){try{return{data:yield Wd(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:s},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ke(i))return{data:null,error:i};throw i}})}list(s,i,o){return de(this,void 0,void 0,function*(){try{const c=Object.assign(Object.assign(Object.assign({},gj),i),{prefix:s||""});return{data:yield da(this.fetch,`${this.url}/object/list/${this.bucketId}`,c,{headers:this.headers},o),error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Ke(c))return{data:null,error:c};throw c}})}listV2(s,i){return de(this,void 0,void 0,function*(){try{const o=Object.assign({},s);return{data:yield da(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,o,{headers:this.headers},i),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ke(o))return{data:null,error:o};throw o}})}encodeMetadata(s){return JSON.stringify(s)}toBase64(s){return typeof Buffer<"u"?Buffer.from(s).toString("base64"):btoa(s)}_getFinalPath(s){return`${this.bucketId}/${s.replace(/^\/+/,"")}`}_removeEmptyFolders(s){return s.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(s){const i=[];return s.width&&i.push(`width=${s.width}`),s.height&&i.push(`height=${s.height}`),s.resize&&i.push(`resize=${s.resize}`),s.format&&i.push(`format=${s.format}`),s.quality&&i.push(`quality=${s.quality}`),i.join("&")}}const pb="2.81.0",xb={"X-Client-Info":`storage-js/${pb}`};class xj{constructor(s,i={},o,c){this.shouldThrowOnError=!1;const u=new URL(s);c!=null&&c.useNewHostname&&/supabase\.(co|in|red)$/.test(u.hostname)&&!u.hostname.includes("storage.supabase.")&&(u.hostname=u.hostname.replace("supabase.","storage.supabase.")),this.url=u.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},xb),i),this.fetch=Xd(o)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(s){return de(this,void 0,void 0,function*(){try{const i=this.listBucketOptionsToQueryString(s);return{data:yield yi(this.fetch,`${this.url}/bucket${i}`,{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ke(i))return{data:null,error:i};throw i}})}getBucket(s){return de(this,void 0,void 0,function*(){try{return{data:yield yi(this.fetch,`${this.url}/bucket/${s}`,{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ke(i))return{data:null,error:i};throw i}})}createBucket(s){return de(this,arguments,void 0,function*(i,o={public:!1}){try{return{data:yield da(this.fetch,`${this.url}/bucket`,{id:i,name:i,type:o.type,public:o.public,file_size_limit:o.fileSizeLimit,allowed_mime_types:o.allowedMimeTypes},{headers:this.headers}),error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Ke(c))return{data:null,error:c};throw c}})}updateBucket(s,i){return de(this,void 0,void 0,function*(){try{return{data:yield _d(this.fetch,`${this.url}/bucket/${s}`,{id:s,name:s,public:i.public,file_size_limit:i.fileSizeLimit,allowed_mime_types:i.allowedMimeTypes},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ke(o))return{data:null,error:o};throw o}})}emptyBucket(s){return de(this,void 0,void 0,function*(){try{return{data:yield da(this.fetch,`${this.url}/bucket/${s}/empty`,{},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ke(i))return{data:null,error:i};throw i}})}deleteBucket(s){return de(this,void 0,void 0,function*(){try{return{data:yield Wd(this.fetch,`${this.url}/bucket/${s}`,{},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ke(i))return{data:null,error:i};throw i}})}listBucketOptionsToQueryString(s){const i={};return s&&("limit"in s&&(i.limit=String(s.limit)),"offset"in s&&(i.offset=String(s.offset)),s.search&&(i.search=s.search),s.sortColumn&&(i.sortColumn=s.sortColumn),s.sortOrder&&(i.sortOrder=s.sortOrder)),Object.keys(i).length>0?"?"+new URLSearchParams(i).toString():""}}class bj{constructor(s,i={},o){this.shouldThrowOnError=!1,this.url=s.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},xb),i),this.fetch=Xd(o)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(s){return de(this,void 0,void 0,function*(){try{return{data:yield da(this.fetch,`${this.url}/bucket`,{name:s},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ke(i))return{data:null,error:i};throw i}})}listBuckets(s){return de(this,void 0,void 0,function*(){try{const i=new URLSearchParams;(s==null?void 0:s.limit)!==void 0&&i.set("limit",s.limit.toString()),(s==null?void 0:s.offset)!==void 0&&i.set("offset",s.offset.toString()),s!=null&&s.sortColumn&&i.set("sortColumn",s.sortColumn),s!=null&&s.sortOrder&&i.set("sortOrder",s.sortOrder),s!=null&&s.search&&i.set("search",s.search);const o=i.toString(),c=o?`${this.url}/bucket?${o}`:`${this.url}/bucket`;return{data:yield yi(this.fetch,c,{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ke(i))return{data:null,error:i};throw i}})}deleteBucket(s){return de(this,void 0,void 0,function*(){try{return{data:yield Wd(this.fetch,`${this.url}/bucket/${s}`,{},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ke(i))return{data:null,error:i};throw i}})}}const Zd={"X-Client-Info":`storage-js/${pb}`,"Content-Type":"application/json"};class bb extends Error{constructor(s){super(s),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function Ht(r){return typeof r=="object"&&r!==null&&"__isStorageVectorsError"in r}class nd extends bb{constructor(s,i,o){super(s),this.name="StorageVectorsApiError",this.status=i,this.statusCode=o}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class vj extends bb{constructor(s,i){super(s),this.name="StorageVectorsUnknownError",this.originalError=i}}var Op;(function(r){r.InternalError="InternalError",r.S3VectorConflictException="S3VectorConflictException",r.S3VectorNotFoundException="S3VectorNotFoundException",r.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",r.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",r.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(Op||(Op={}));const eh=r=>r?(...s)=>r(...s):(...s)=>fetch(...s),yj=r=>{if(typeof r!="object"||r===null)return!1;const s=Object.getPrototypeOf(r);return(s===null||s===Object.prototype||Object.getPrototypeOf(s)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)},Dp=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),wj=(r,s,i)=>de(void 0,void 0,void 0,function*(){if(r&&typeof r=="object"&&"status"in r&&"ok"in r&&typeof r.status=="number"&&!(i!=null&&i.noResolveJson)){const c=r.status||500,u=r;if(typeof u.json=="function")u.json().then(h=>{const p=(h==null?void 0:h.statusCode)||(h==null?void 0:h.code)||c+"";s(new nd(Dp(h),c,p))}).catch(()=>{const h=c+"",p=u.statusText||`HTTP ${c} error`;s(new nd(p,c,h))});else{const h=c+"",p=u.statusText||`HTTP ${c} error`;s(new nd(p,c,h))}}else s(new vj(Dp(r),r))}),jj=(r,s,i,o)=>{const c={method:r,headers:(s==null?void 0:s.headers)||{}};return o?(yj(o)?(c.headers=Object.assign({"Content-Type":"application/json"},s==null?void 0:s.headers),c.body=JSON.stringify(o)):c.body=o,Object.assign(Object.assign({},c),i)):c};function Nj(r,s,i,o,c,u){return de(this,void 0,void 0,function*(){return new Promise((h,p)=>{r(i,jj(s,o,c,u)).then(m=>{if(!m.ok)throw m;if(o!=null&&o.noResolveJson)return m;const g=m.headers.get("content-type");return!g||!g.includes("application/json")?{}:m.json()}).then(m=>h(m)).catch(m=>wj(m,p,o))})})}function Vt(r,s,i,o,c){return de(this,void 0,void 0,function*(){return Nj(r,"POST",s,o,c,i)})}class _j{constructor(s,i={},o){this.shouldThrowOnError=!1,this.url=s.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Zd),i),this.fetch=eh(o)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(s){return de(this,void 0,void 0,function*(){try{return{data:(yield Vt(this.fetch,`${this.url}/CreateIndex`,s,{headers:this.headers}))||{},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ht(i))return{data:null,error:i};throw i}})}getIndex(s,i){return de(this,void 0,void 0,function*(){try{return{data:yield Vt(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:s,indexName:i},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ht(o))return{data:null,error:o};throw o}})}listIndexes(s){return de(this,void 0,void 0,function*(){try{return{data:yield Vt(this.fetch,`${this.url}/ListIndexes`,s,{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ht(i))return{data:null,error:i};throw i}})}deleteIndex(s,i){return de(this,void 0,void 0,function*(){try{return{data:(yield Vt(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:s,indexName:i},{headers:this.headers}))||{},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ht(o))return{data:null,error:o};throw o}})}}class Sj{constructor(s,i={},o){this.shouldThrowOnError=!1,this.url=s.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Zd),i),this.fetch=eh(o)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(s){return de(this,void 0,void 0,function*(){try{if(s.vectors.length<1||s.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Vt(this.fetch,`${this.url}/PutVectors`,s,{headers:this.headers}))||{},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ht(i))return{data:null,error:i};throw i}})}getVectors(s){return de(this,void 0,void 0,function*(){try{return{data:yield Vt(this.fetch,`${this.url}/GetVectors`,s,{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ht(i))return{data:null,error:i};throw i}})}listVectors(s){return de(this,void 0,void 0,function*(){try{if(s.segmentCount!==void 0){if(s.segmentCount<1||s.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(s.segmentIndex!==void 0&&(s.segmentIndex<0||s.segmentIndex>=s.segmentCount))throw new Error(`segmentIndex must be between 0 and ${s.segmentCount-1}`)}return{data:yield Vt(this.fetch,`${this.url}/ListVectors`,s,{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ht(i))return{data:null,error:i};throw i}})}queryVectors(s){return de(this,void 0,void 0,function*(){try{return{data:yield Vt(this.fetch,`${this.url}/QueryVectors`,s,{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ht(i))return{data:null,error:i};throw i}})}deleteVectors(s){return de(this,void 0,void 0,function*(){try{if(s.keys.length<1||s.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Vt(this.fetch,`${this.url}/DeleteVectors`,s,{headers:this.headers}))||{},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ht(i))return{data:null,error:i};throw i}})}}class Ej{constructor(s,i={},o){this.shouldThrowOnError=!1,this.url=s.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Zd),i),this.fetch=eh(o)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(s){return de(this,void 0,void 0,function*(){try{return{data:(yield Vt(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:s},{headers:this.headers}))||{},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ht(i))return{data:null,error:i};throw i}})}getBucket(s){return de(this,void 0,void 0,function*(){try{return{data:yield Vt(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:s},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ht(i))return{data:null,error:i};throw i}})}listBuckets(){return de(this,arguments,void 0,function*(s={}){try{return{data:yield Vt(this.fetch,`${this.url}/ListVectorBuckets`,s,{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ht(i))return{data:null,error:i};throw i}})}deleteBucket(s){return de(this,void 0,void 0,function*(){try{return{data:(yield Vt(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:s},{headers:this.headers}))||{},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ht(i))return{data:null,error:i};throw i}})}}class kj extends Ej{constructor(s,i={}){super(s,i.headers||{},i.fetch)}from(s){return new Cj(this.url,this.headers,s,this.fetch)}}class Cj extends _j{constructor(s,i,o,c){super(s,i,c),this.vectorBucketName=o}createIndex(s){const i=Object.create(null,{createIndex:{get:()=>super.createIndex}});return de(this,void 0,void 0,function*(){return i.createIndex.call(this,Object.assign(Object.assign({},s),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const s=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return de(this,arguments,void 0,function*(i={}){return s.listIndexes.call(this,Object.assign(Object.assign({},i),{vectorBucketName:this.vectorBucketName}))})}getIndex(s){const i=Object.create(null,{getIndex:{get:()=>super.getIndex}});return de(this,void 0,void 0,function*(){return i.getIndex.call(this,this.vectorBucketName,s)})}deleteIndex(s){const i=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return de(this,void 0,void 0,function*(){return i.deleteIndex.call(this,this.vectorBucketName,s)})}index(s){return new Aj(this.url,this.headers,this.vectorBucketName,s,this.fetch)}}class Aj extends Sj{constructor(s,i,o,c,u){super(s,i,u),this.vectorBucketName=o,this.indexName=c}putVectors(s){const i=Object.create(null,{putVectors:{get:()=>super.putVectors}});return de(this,void 0,void 0,function*(){return i.putVectors.call(this,Object.assign(Object.assign({},s),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(s){const i=Object.create(null,{getVectors:{get:()=>super.getVectors}});return de(this,void 0,void 0,function*(){return i.getVectors.call(this,Object.assign(Object.assign({},s),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const s=Object.create(null,{listVectors:{get:()=>super.listVectors}});return de(this,arguments,void 0,function*(i={}){return s.listVectors.call(this,Object.assign(Object.assign({},i),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(s){const i=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return de(this,void 0,void 0,function*(){return i.queryVectors.call(this,Object.assign(Object.assign({},s),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(s){const i=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return de(this,void 0,void 0,function*(){return i.deleteVectors.call(this,Object.assign(Object.assign({},s),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class Tj extends xj{constructor(s,i={},o,c){super(s,i,o,c)}from(s){return new pj(this.url,this.headers,s,this.fetch)}get vectors(){return new kj(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new bj(this.url+"/iceberg",this.headers,this.fetch)}}const Rj="2.81.0";let mi="";typeof Deno<"u"?mi="deno":typeof document<"u"?mi="web":typeof navigator<"u"&&navigator.product==="ReactNative"?mi="react-native":mi="node";const Oj={"X-Client-Info":`supabase-js-${mi}/${Rj}`},Dj={headers:Oj},Mj={schema:"public"},Uj={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Lj={},Bj=r=>r?(...s)=>r(...s):(...s)=>fetch(...s),zj=()=>Headers,qj=(r,s,i)=>{const o=Bj(i),c=zj();return async(u,h)=>{var p;const m=(p=await s())!==null&&p!==void 0?p:r;let g=new c(h==null?void 0:h.headers);return g.has("apikey")||g.set("apikey",r),g.has("Authorization")||g.set("Authorization",`Bearer ${m}`),o(u,Object.assign(Object.assign({},h),{headers:g}))}};function Pj(r){return r.endsWith("/")?r:r+"/"}function Ij(r,s){var i,o;const{db:c,auth:u,realtime:h,global:p}=r,{db:m,auth:g,realtime:b,global:w}=s,N={db:Object.assign(Object.assign({},m),c),auth:Object.assign(Object.assign({},g),u),realtime:Object.assign(Object.assign({},b),h),storage:{},global:Object.assign(Object.assign(Object.assign({},w),p),{headers:Object.assign(Object.assign({},(i=w==null?void 0:w.headers)!==null&&i!==void 0?i:{}),(o=p==null?void 0:p.headers)!==null&&o!==void 0?o:{})}),accessToken:async()=>""};return r.accessToken?N.accessToken=r.accessToken:delete N.accessToken,N}function $j(r){const s=r==null?void 0:r.trim();if(!s)throw new Error("supabaseUrl is required.");if(!s.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Pj(s))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const vb="2.81.0",ar=30*1e3,Sd=3,rd=Sd*ar,Hj="http://localhost:9999",Vj="supabase.auth.token",Gj={"X-Client-Info":`gotrue-js/${vb}`},Ed="X-Supabase-Api-Version",yb={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Yj=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Kj=600*1e3;class wi extends Error{constructor(s,i,o){super(s),this.__isAuthError=!0,this.name="AuthError",this.status=i,this.code=o}}function he(r){return typeof r=="object"&&r!==null&&"__isAuthError"in r}class Fj extends wi{constructor(s,i,o){super(s,i,o),this.name="AuthApiError",this.status=i,this.code=o}}function Qj(r){return he(r)&&r.name==="AuthApiError"}class an extends wi{constructor(s,i){super(s),this.name="AuthUnknownError",this.originalError=i}}class Os extends wi{constructor(s,i,o,c){super(s,o,c),this.name=i,this.status=o}}class ca extends Os{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Jj(r){return he(r)&&r.name==="AuthSessionMissingError"}class Jn extends Os{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Wl extends Os{constructor(s){super(s,"AuthInvalidCredentialsError",400,void 0)}}class Zl extends Os{constructor(s,i=null){super(s,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=i}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Xj(r){return he(r)&&r.name==="AuthImplicitGrantRedirectError"}class Mp extends Os{constructor(s,i=null){super(s,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=i}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class kd extends Os{constructor(s,i){super(s,"AuthRetryableFetchError",i,void 0)}}function id(r){return he(r)&&r.name==="AuthRetryableFetchError"}class Up extends Os{constructor(s,i,o){super(s,"AuthWeakPasswordError",i,"weak_password"),this.reasons=o}}class Cd extends Os{constructor(s){super(s,"AuthInvalidJwtError",400,"invalid_jwt")}}const mo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Lp=` 	
\r=`.split(""),Wj=(()=>{const r=new Array(128);for(let s=0;s<r.length;s+=1)r[s]=-1;for(let s=0;s<Lp.length;s+=1)r[Lp[s].charCodeAt(0)]=-2;for(let s=0;s<mo.length;s+=1)r[mo[s].charCodeAt(0)]=s;return r})();function Bp(r,s,i){if(r!==null)for(s.queue=s.queue<<8|r,s.queuedBits+=8;s.queuedBits>=6;){const o=s.queue>>s.queuedBits-6&63;i(mo[o]),s.queuedBits-=6}else if(s.queuedBits>0)for(s.queue=s.queue<<6-s.queuedBits,s.queuedBits=6;s.queuedBits>=6;){const o=s.queue>>s.queuedBits-6&63;i(mo[o]),s.queuedBits-=6}}function wb(r,s,i){const o=Wj[r];if(o>-1)for(s.queue=s.queue<<6|o,s.queuedBits+=6;s.queuedBits>=8;)i(s.queue>>s.queuedBits-8&255),s.queuedBits-=8;else{if(o===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(r)}"`)}}function zp(r){const s=[],i=h=>{s.push(String.fromCodePoint(h))},o={utf8seq:0,codepoint:0},c={queue:0,queuedBits:0},u=h=>{t2(h,o,i)};for(let h=0;h<r.length;h+=1)wb(r.charCodeAt(h),c,u);return s.join("")}function Zj(r,s){if(r<=127){s(r);return}else if(r<=2047){s(192|r>>6),s(128|r&63);return}else if(r<=65535){s(224|r>>12),s(128|r>>6&63),s(128|r&63);return}else if(r<=1114111){s(240|r>>18),s(128|r>>12&63),s(128|r>>6&63),s(128|r&63);return}throw new Error(`Unrecognized Unicode codepoint: ${r.toString(16)}`)}function e2(r,s){for(let i=0;i<r.length;i+=1){let o=r.charCodeAt(i);if(o>55295&&o<=56319){const c=(o-55296)*1024&65535;o=(r.charCodeAt(i+1)-56320&65535|c)+65536,i+=1}Zj(o,s)}}function t2(r,s,i){if(s.utf8seq===0){if(r<=127){i(r);return}for(let o=1;o<6;o+=1)if((r>>7-o&1)===0){s.utf8seq=o;break}if(s.utf8seq===2)s.codepoint=r&31;else if(s.utf8seq===3)s.codepoint=r&15;else if(s.utf8seq===4)s.codepoint=r&7;else throw new Error("Invalid UTF-8 sequence");s.utf8seq-=1}else if(s.utf8seq>0){if(r<=127)throw new Error("Invalid UTF-8 sequence");s.codepoint=s.codepoint<<6|r&63,s.utf8seq-=1,s.utf8seq===0&&i(s.codepoint)}}function rr(r){const s=[],i={queue:0,queuedBits:0},o=c=>{s.push(c)};for(let c=0;c<r.length;c+=1)wb(r.charCodeAt(c),i,o);return new Uint8Array(s)}function a2(r){const s=[];return e2(r,i=>s.push(i)),new Uint8Array(s)}function nn(r){const s=[],i={queue:0,queuedBits:0},o=c=>{s.push(c)};return r.forEach(c=>Bp(c,i,o)),Bp(null,i,o),s.join("")}function s2(r){return Math.round(Date.now()/1e3)+r}function n2(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){const s=Math.random()*16|0;return(r=="x"?s:s&3|8).toString(16)})}const yt=()=>typeof window<"u"&&typeof document<"u",Js={tested:!1,writable:!1},jb=()=>{if(!yt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Js.tested)return Js.writable;const r=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(r,r),globalThis.localStorage.removeItem(r),Js.tested=!0,Js.writable=!0}catch{Js.tested=!0,Js.writable=!1}return Js.writable};function r2(r){const s={},i=new URL(r);if(i.hash&&i.hash[0]==="#")try{new URLSearchParams(i.hash.substring(1)).forEach((c,u)=>{s[u]=c})}catch{}return i.searchParams.forEach((o,c)=>{s[c]=o}),s}const Nb=r=>r?(...s)=>r(...s):(...s)=>fetch(...s),i2=r=>typeof r=="object"&&r!==null&&"status"in r&&"ok"in r&&"json"in r&&typeof r.json=="function",sr=async(r,s,i)=>{await r.setItem(s,JSON.stringify(i))},Xs=async(r,s)=>{const i=await r.getItem(s);if(!i)return null;try{return JSON.parse(i)}catch{return i}},js=async(r,s)=>{await r.removeItem(s)};class Oo{constructor(){this.promise=new Oo.promiseConstructor((s,i)=>{this.resolve=s,this.reject=i})}}Oo.promiseConstructor=Promise;function ld(r){const s=r.split(".");if(s.length!==3)throw new Cd("Invalid JWT structure");for(let o=0;o<s.length;o++)if(!Yj.test(s[o]))throw new Cd("JWT not in base64url format");return{header:JSON.parse(zp(s[0])),payload:JSON.parse(zp(s[1])),signature:rr(s[2]),raw:{header:s[0],payload:s[1]}}}async function l2(r){return await new Promise(s=>{setTimeout(()=>s(null),r)})}function o2(r,s){return new Promise((o,c)=>{(async()=>{for(let u=0;u<1/0;u++)try{const h=await r(u);if(!s(u,null,h)){o(h);return}}catch(h){if(!s(u,h)){c(h);return}}})()})}function c2(r){return("0"+r.toString(16)).substr(-2)}function u2(){const s=new Uint32Array(56);if(typeof crypto>"u"){const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",o=i.length;let c="";for(let u=0;u<56;u++)c+=i.charAt(Math.floor(Math.random()*o));return c}return crypto.getRandomValues(s),Array.from(s,c2).join("")}async function d2(r){const i=new TextEncoder().encode(r),o=await crypto.subtle.digest("SHA-256",i),c=new Uint8Array(o);return Array.from(c).map(u=>String.fromCharCode(u)).join("")}async function h2(r){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),r;const i=await d2(r);return btoa(i).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Xn(r,s,i=!1){const o=u2();let c=o;i&&(c+="/PASSWORD_RECOVERY"),await sr(r,`${s}-code-verifier`,c);const u=await h2(o);return[u,o===u?"plain":"s256"]}const f2=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function m2(r){const s=r.headers.get(Ed);if(!s||!s.match(f2))return null;try{return new Date(`${s}T00:00:00.0Z`)}catch{return null}}function g2(r){if(!r)throw new Error("Missing exp claim");const s=Math.floor(Date.now()/1e3);if(r<=s)throw new Error("JWT has expired")}function p2(r){switch(r){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const x2=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Wn(r){if(!x2.test(r))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function od(){const r={};return new Proxy(r,{get:(s,i)=>{if(i==="__isUserNotAvailableProxy")return!0;if(typeof i=="symbol"){const o=i.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${i}" property of the session object is not supported. Please use getUser() instead.`)},set:(s,i)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${i}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(s,i)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${i}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function b2(r,s){return new Proxy(r,{get:(i,o,c)=>{if(o==="__isInsecureUserWarningProxy")return!0;if(typeof o=="symbol"){const u=o.toString();if(u==="Symbol(Symbol.toPrimitive)"||u==="Symbol(Symbol.toStringTag)"||u==="Symbol(util.inspect.custom)"||u==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(i,o,c)}return!s.value&&typeof o=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),s.value=!0),Reflect.get(i,o,c)}})}function qp(r){return JSON.parse(JSON.stringify(r))}const Zs=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),v2=[502,503,504];async function Pp(r){var s;if(!i2(r))throw new kd(Zs(r),0);if(v2.includes(r.status))throw new kd(Zs(r),r.status);let i;try{i=await r.json()}catch(u){throw new an(Zs(u),u)}let o;const c=m2(r);if(c&&c.getTime()>=yb["2024-01-01"].timestamp&&typeof i=="object"&&i&&typeof i.code=="string"?o=i.code:typeof i=="object"&&i&&typeof i.error_code=="string"&&(o=i.error_code),o){if(o==="weak_password")throw new Up(Zs(i),r.status,((s=i.weak_password)===null||s===void 0?void 0:s.reasons)||[]);if(o==="session_not_found")throw new ca}else if(typeof i=="object"&&i&&typeof i.weak_password=="object"&&i.weak_password&&Array.isArray(i.weak_password.reasons)&&i.weak_password.reasons.length&&i.weak_password.reasons.reduce((u,h)=>u&&typeof h=="string",!0))throw new Up(Zs(i),r.status,i.weak_password.reasons);throw new Fj(Zs(i),r.status||500,o)}const y2=(r,s,i,o)=>{const c={method:r,headers:(s==null?void 0:s.headers)||{}};return r==="GET"?c:(c.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},s==null?void 0:s.headers),c.body=JSON.stringify(o),Object.assign(Object.assign({},c),i))};async function pe(r,s,i,o){var c;const u=Object.assign({},o==null?void 0:o.headers);u[Ed]||(u[Ed]=yb["2024-01-01"].name),o!=null&&o.jwt&&(u.Authorization=`Bearer ${o.jwt}`);const h=(c=o==null?void 0:o.query)!==null&&c!==void 0?c:{};o!=null&&o.redirectTo&&(h.redirect_to=o.redirectTo);const p=Object.keys(h).length?"?"+new URLSearchParams(h).toString():"",m=await w2(r,s,i+p,{headers:u,noResolveJson:o==null?void 0:o.noResolveJson},{},o==null?void 0:o.body);return o!=null&&o.xform?o==null?void 0:o.xform(m):{data:Object.assign({},m),error:null}}async function w2(r,s,i,o,c,u){const h=y2(s,o,c,u);let p;try{p=await r(i,Object.assign({},h))}catch(m){throw console.error(m),new kd(Zs(m),0)}if(p.ok||await Pp(p),o!=null&&o.noResolveJson)return p;try{return await p.json()}catch(m){await Pp(m)}}function ua(r){var s;let i=null;_2(r)&&(i=Object.assign({},r),r.expires_at||(i.expires_at=s2(r.expires_in)));const o=(s=r.user)!==null&&s!==void 0?s:r;return{data:{session:i,user:o},error:null}}function Ip(r){const s=ua(r);return!s.error&&r.weak_password&&typeof r.weak_password=="object"&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.message&&typeof r.weak_password.message=="string"&&r.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0)&&(s.data.weak_password=r.weak_password),s}function Es(r){var s;return{data:{user:(s=r.user)!==null&&s!==void 0?s:r},error:null}}function j2(r){return{data:r,error:null}}function N2(r){const{action_link:s,email_otp:i,hashed_token:o,redirect_to:c,verification_type:u}=r,h=mr(r,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),p={action_link:s,email_otp:i,hashed_token:o,redirect_to:c,verification_type:u},m=Object.assign({},h);return{data:{properties:p,user:m},error:null}}function $p(r){return r}function _2(r){return r.access_token&&r.refresh_token&&r.expires_in}const cd=["global","local","others"];class S2{constructor({url:s="",headers:i={},fetch:o}){this.url=s,this.headers=i,this.fetch=Nb(o),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(s,i=cd[0]){if(cd.indexOf(i)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${cd.join(", ")}`);try{return await pe(this.fetch,"POST",`${this.url}/logout?scope=${i}`,{headers:this.headers,jwt:s,noResolveJson:!0}),{data:null,error:null}}catch(o){if(he(o))return{data:null,error:o};throw o}}async inviteUserByEmail(s,i={}){try{return await pe(this.fetch,"POST",`${this.url}/invite`,{body:{email:s,data:i.data},headers:this.headers,redirectTo:i.redirectTo,xform:Es})}catch(o){if(he(o))return{data:{user:null},error:o};throw o}}async generateLink(s){try{const{options:i}=s,o=mr(s,["options"]),c=Object.assign(Object.assign({},o),i);return"newEmail"in o&&(c.new_email=o==null?void 0:o.newEmail,delete c.newEmail),await pe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:c,headers:this.headers,xform:N2,redirectTo:i==null?void 0:i.redirectTo})}catch(i){if(he(i))return{data:{properties:null,user:null},error:i};throw i}}async createUser(s){try{return await pe(this.fetch,"POST",`${this.url}/admin/users`,{body:s,headers:this.headers,xform:Es})}catch(i){if(he(i))return{data:{user:null},error:i};throw i}}async listUsers(s){var i,o,c,u,h,p,m;try{const g={nextPage:null,lastPage:0,total:0},b=await pe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(o=(i=s==null?void 0:s.page)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:"",per_page:(u=(c=s==null?void 0:s.perPage)===null||c===void 0?void 0:c.toString())!==null&&u!==void 0?u:""},xform:$p});if(b.error)throw b.error;const w=await b.json(),N=(h=b.headers.get("x-total-count"))!==null&&h!==void 0?h:0,S=(m=(p=b.headers.get("link"))===null||p===void 0?void 0:p.split(","))!==null&&m!==void 0?m:[];return S.length>0&&(S.forEach(v=>{const E=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(v.split(";")[1].split("=")[1]);g[`${y}Page`]=E}),g.total=parseInt(N)),{data:Object.assign(Object.assign({},w),g),error:null}}catch(g){if(he(g))return{data:{users:[]},error:g};throw g}}async getUserById(s){Wn(s);try{return await pe(this.fetch,"GET",`${this.url}/admin/users/${s}`,{headers:this.headers,xform:Es})}catch(i){if(he(i))return{data:{user:null},error:i};throw i}}async updateUserById(s,i){Wn(s);try{return await pe(this.fetch,"PUT",`${this.url}/admin/users/${s}`,{body:i,headers:this.headers,xform:Es})}catch(o){if(he(o))return{data:{user:null},error:o};throw o}}async deleteUser(s,i=!1){Wn(s);try{return await pe(this.fetch,"DELETE",`${this.url}/admin/users/${s}`,{headers:this.headers,body:{should_soft_delete:i},xform:Es})}catch(o){if(he(o))return{data:{user:null},error:o};throw o}}async _listFactors(s){Wn(s.userId);try{const{data:i,error:o}=await pe(this.fetch,"GET",`${this.url}/admin/users/${s.userId}/factors`,{headers:this.headers,xform:c=>({data:{factors:c},error:null})});return{data:i,error:o}}catch(i){if(he(i))return{data:null,error:i};throw i}}async _deleteFactor(s){Wn(s.userId),Wn(s.id);try{return{data:await pe(this.fetch,"DELETE",`${this.url}/admin/users/${s.userId}/factors/${s.id}`,{headers:this.headers}),error:null}}catch(i){if(he(i))return{data:null,error:i};throw i}}async _listOAuthClients(s){var i,o,c,u,h,p,m;try{const g={nextPage:null,lastPage:0,total:0},b=await pe(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(o=(i=s==null?void 0:s.page)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:"",per_page:(u=(c=s==null?void 0:s.perPage)===null||c===void 0?void 0:c.toString())!==null&&u!==void 0?u:""},xform:$p});if(b.error)throw b.error;const w=await b.json(),N=(h=b.headers.get("x-total-count"))!==null&&h!==void 0?h:0,S=(m=(p=b.headers.get("link"))===null||p===void 0?void 0:p.split(","))!==null&&m!==void 0?m:[];return S.length>0&&(S.forEach(v=>{const E=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(v.split(";")[1].split("=")[1]);g[`${y}Page`]=E}),g.total=parseInt(N)),{data:Object.assign(Object.assign({},w),g),error:null}}catch(g){if(he(g))return{data:{clients:[]},error:g};throw g}}async _createOAuthClient(s){try{return await pe(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:s,headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(he(i))return{data:null,error:i};throw i}}async _getOAuthClient(s){try{return await pe(this.fetch,"GET",`${this.url}/admin/oauth/clients/${s}`,{headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(he(i))return{data:null,error:i};throw i}}async _updateOAuthClient(s,i){try{return await pe(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${s}`,{body:i,headers:this.headers,xform:o=>({data:o,error:null})})}catch(o){if(he(o))return{data:null,error:o};throw o}}async _deleteOAuthClient(s){try{return await pe(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${s}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(i){if(he(i))return{data:null,error:i};throw i}}async _regenerateOAuthClientSecret(s){try{return await pe(this.fetch,"POST",`${this.url}/admin/oauth/clients/${s}/regenerate_secret`,{headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(he(i))return{data:null,error:i};throw i}}}function Hp(r={}){return{getItem:s=>r[s]||null,setItem:(s,i)=>{r[s]=i},removeItem:s=>{delete r[s]}}}const Zn={debug:!!(globalThis&&jb()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class _b extends Error{constructor(s){super(s),this.isAcquireTimeout=!0}}class E2 extends _b{}async function k2(r,s,i){Zn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",r,s);const o=new globalThis.AbortController;return s>0&&setTimeout(()=>{o.abort(),Zn.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",r)},s),await Promise.resolve().then(()=>globalThis.navigator.locks.request(r,s===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:o.signal},async c=>{if(c){Zn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",r,c.name);try{return await i()}finally{Zn.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",r,c.name)}}else{if(s===0)throw Zn.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",r),new E2(`Acquiring an exclusive Navigator LockManager lock "${r}" immediately failed`);if(Zn.debug)try{const u=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(u,null,"  "))}catch(u){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",u)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await i()}}))}function C2(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Sb(r){if(!/^0x[a-fA-F0-9]{40}$/.test(r))throw new Error(`@supabase/auth-js: Address "${r}" is invalid.`);return r.toLowerCase()}function A2(r){return parseInt(r,16)}function T2(r){const s=new TextEncoder().encode(r);return"0x"+Array.from(s,o=>o.toString(16).padStart(2,"0")).join("")}function R2(r){var s;const{chainId:i,domain:o,expirationTime:c,issuedAt:u=new Date,nonce:h,notBefore:p,requestId:m,resources:g,scheme:b,uri:w,version:N}=r;{if(!Number.isInteger(i))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${i}`);if(!o)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(h&&h.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${h}`);if(!w)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(N!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${N}`);if(!((s=r.statement)===null||s===void 0)&&s.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${r.statement}`)}const S=Sb(r.address),v=b?`${b}://${o}`:o,E=r.statement?`${r.statement}
`:"",y=`${v} wants you to sign in with your Ethereum account:
${S}

${E}`;let C=`URI: ${w}
Version: ${N}
Chain ID: ${i}${h?`
Nonce: ${h}`:""}
Issued At: ${u.toISOString()}`;if(c&&(C+=`
Expiration Time: ${c.toISOString()}`),p&&(C+=`
Not Before: ${p.toISOString()}`),m&&(C+=`
Request ID: ${m}`),g){let M=`
Resources:`;for(const T of g){if(!T||typeof T!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${T}`);M+=`
- ${T}`}C+=M}return`${y}
${C}`}class st extends Error{constructor({message:s,code:i,cause:o,name:c}){var u;super(s,{cause:o}),this.__isWebAuthnError=!0,this.name=(u=c??(o instanceof Error?o.name:void 0))!==null&&u!==void 0?u:"Unknown Error",this.code=i}}class go extends st{constructor(s,i){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i,message:s}),this.name="WebAuthnUnknownError",this.originalError=i}}function O2({error:r,options:s}){var i,o,c;const{publicKey:u}=s;if(!u)throw Error("options was missing required publicKey property");if(r.name==="AbortError"){if(s.signal instanceof AbortSignal)return new st({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:r})}else if(r.name==="ConstraintError"){if(((i=u.authenticatorSelection)===null||i===void 0?void 0:i.requireResidentKey)===!0)return new st({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:r});if(s.mediation==="conditional"&&((o=u.authenticatorSelection)===null||o===void 0?void 0:o.userVerification)==="required")return new st({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:r});if(((c=u.authenticatorSelection)===null||c===void 0?void 0:c.userVerification)==="required")return new st({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:r})}else{if(r.name==="InvalidStateError")return new st({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:r});if(r.name==="NotAllowedError")return new st({message:r.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r});if(r.name==="NotSupportedError")return u.pubKeyCredParams.filter(p=>p.type==="public-key").length===0?new st({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:r}):new st({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:r});if(r.name==="SecurityError"){const h=window.location.hostname;if(Eb(h)){if(u.rp.id!==h)return new st({message:`The RP ID "${u.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:r})}else return new st({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:r})}else if(r.name==="TypeError"){if(u.user.id.byteLength<1||u.user.id.byteLength>64)return new st({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:r})}else if(r.name==="UnknownError")return new st({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:r})}return new st({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r})}function D2({error:r,options:s}){const{publicKey:i}=s;if(!i)throw Error("options was missing required publicKey property");if(r.name==="AbortError"){if(s.signal instanceof AbortSignal)return new st({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:r})}else{if(r.name==="NotAllowedError")return new st({message:r.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r});if(r.name==="SecurityError"){const o=window.location.hostname;if(Eb(o)){if(i.rpId!==o)return new st({message:`The RP ID "${i.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:r})}else return new st({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:r})}else if(r.name==="UnknownError")return new st({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:r})}return new st({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r})}class M2{createNewAbortSignal(){if(this.controller){const i=new Error("Cancelling existing WebAuthn API call for new one");i.name="AbortError",this.controller.abort(i)}const s=new AbortController;return this.controller=s,s.signal}cancelCeremony(){if(this.controller){const s=new Error("Manually cancelling existing WebAuthn API call");s.name="AbortError",this.controller.abort(s),this.controller=void 0}}}const U2=new M2;function L2(r){if(!r)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(r);const{challenge:s,user:i,excludeCredentials:o}=r,c=mr(r,["challenge","user","excludeCredentials"]),u=rr(s).buffer,h=Object.assign(Object.assign({},i),{id:rr(i.id).buffer}),p=Object.assign(Object.assign({},c),{challenge:u,user:h});if(o&&o.length>0){p.excludeCredentials=new Array(o.length);for(let m=0;m<o.length;m++){const g=o[m];p.excludeCredentials[m]=Object.assign(Object.assign({},g),{id:rr(g.id).buffer,type:g.type||"public-key",transports:g.transports})}}return p}function B2(r){if(!r)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(r);const{challenge:s,allowCredentials:i}=r,o=mr(r,["challenge","allowCredentials"]),c=rr(s).buffer,u=Object.assign(Object.assign({},o),{challenge:c});if(i&&i.length>0){u.allowCredentials=new Array(i.length);for(let h=0;h<i.length;h++){const p=i[h];u.allowCredentials[h]=Object.assign(Object.assign({},p),{id:rr(p.id).buffer,type:p.type||"public-key",transports:p.transports})}}return u}function z2(r){var s;if("toJSON"in r&&typeof r.toJSON=="function")return r.toJSON();const i=r;return{id:r.id,rawId:r.id,response:{attestationObject:nn(new Uint8Array(r.response.attestationObject)),clientDataJSON:nn(new Uint8Array(r.response.clientDataJSON))},type:"public-key",clientExtensionResults:r.getClientExtensionResults(),authenticatorAttachment:(s=i.authenticatorAttachment)!==null&&s!==void 0?s:void 0}}function q2(r){var s;if("toJSON"in r&&typeof r.toJSON=="function")return r.toJSON();const i=r,o=r.getClientExtensionResults(),c=r.response;return{id:r.id,rawId:r.id,response:{authenticatorData:nn(new Uint8Array(c.authenticatorData)),clientDataJSON:nn(new Uint8Array(c.clientDataJSON)),signature:nn(new Uint8Array(c.signature)),userHandle:c.userHandle?nn(new Uint8Array(c.userHandle)):void 0},type:"public-key",clientExtensionResults:o,authenticatorAttachment:(s=i.authenticatorAttachment)!==null&&s!==void 0?s:void 0}}function Eb(r){return r==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(r)}function Vp(){var r,s;return!!(yt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((r=navigator==null?void 0:navigator.credentials)===null||r===void 0?void 0:r.create)=="function"&&typeof((s=navigator==null?void 0:navigator.credentials)===null||s===void 0?void 0:s.get)=="function")}async function P2(r){try{const s=await navigator.credentials.create(r);return s?s instanceof PublicKeyCredential?{data:s,error:null}:{data:null,error:new go("Browser returned unexpected credential type",s)}:{data:null,error:new go("Empty credential response",s)}}catch(s){return{data:null,error:O2({error:s,options:r})}}}async function I2(r){try{const s=await navigator.credentials.get(r);return s?s instanceof PublicKeyCredential?{data:s,error:null}:{data:null,error:new go("Browser returned unexpected credential type",s)}:{data:null,error:new go("Empty credential response",s)}}catch(s){return{data:null,error:D2({error:s,options:r})}}}const $2={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},H2={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function po(...r){const s=c=>c!==null&&typeof c=="object"&&!Array.isArray(c),i=c=>c instanceof ArrayBuffer||ArrayBuffer.isView(c),o={};for(const c of r)if(c)for(const u in c){const h=c[u];if(h!==void 0)if(Array.isArray(h))o[u]=h;else if(i(h))o[u]=h;else if(s(h)){const p=o[u];s(p)?o[u]=po(p,h):o[u]=po(h)}else o[u]=h}return o}function V2(r,s){return po($2,r,s||{})}function G2(r,s){return po(H2,r,s||{})}class Y2{constructor(s){this.client=s,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(s){return this.client.mfa.enroll(Object.assign(Object.assign({},s),{factorType:"webauthn"}))}async _challenge({factorId:s,webauthn:i,friendlyName:o,signal:c},u){try{const{data:h,error:p}=await this.client.mfa.challenge({factorId:s,webauthn:i});if(!h)return{data:null,error:p};const m=c??U2.createNewAbortSignal();if(h.webauthn.type==="create"){const{user:g}=h.webauthn.credential_options.publicKey;g.name||(g.name=`${g.id}:${o}`),g.displayName||(g.displayName=g.name)}switch(h.webauthn.type){case"create":{const g=V2(h.webauthn.credential_options.publicKey,u==null?void 0:u.create),{data:b,error:w}=await P2({publicKey:g,signal:m});return b?{data:{factorId:s,challengeId:h.id,webauthn:{type:h.webauthn.type,credential_response:b}},error:null}:{data:null,error:w}}case"request":{const g=G2(h.webauthn.credential_options.publicKey,u==null?void 0:u.request),{data:b,error:w}=await I2(Object.assign(Object.assign({},h.webauthn.credential_options),{publicKey:g,signal:m}));return b?{data:{factorId:s,challengeId:h.id,webauthn:{type:h.webauthn.type,credential_response:b}},error:null}:{data:null,error:w}}}}catch(h){return he(h)?{data:null,error:h}:{data:null,error:new an("Unexpected error in challenge",h)}}}async _verify({challengeId:s,factorId:i,webauthn:o}){return this.client.mfa.verify({factorId:i,challengeId:s,webauthn:o})}async _authenticate({factorId:s,webauthn:{rpId:i=typeof window<"u"?window.location.hostname:void 0,rpOrigins:o=typeof window<"u"?[window.location.origin]:void 0,signal:c}={}},u){if(!i)return{data:null,error:new wi("rpId is required for WebAuthn authentication")};try{if(!Vp())return{data:null,error:new an("Browser does not support WebAuthn",null)};const{data:h,error:p}=await this.challenge({factorId:s,webauthn:{rpId:i,rpOrigins:o},signal:c},{request:u});if(!h)return{data:null,error:p};const{webauthn:m}=h;return this._verify({factorId:s,challengeId:h.challengeId,webauthn:{type:m.type,rpId:i,rpOrigins:o,credential_response:m.credential_response}})}catch(h){return he(h)?{data:null,error:h}:{data:null,error:new an("Unexpected error in authenticate",h)}}}async _register({friendlyName:s,webauthn:{rpId:i=typeof window<"u"?window.location.hostname:void 0,rpOrigins:o=typeof window<"u"?[window.location.origin]:void 0,signal:c}={}},u){if(!i)return{data:null,error:new wi("rpId is required for WebAuthn registration")};try{if(!Vp())return{data:null,error:new an("Browser does not support WebAuthn",null)};const{data:h,error:p}=await this._enroll({friendlyName:s});if(!h)return await this.client.mfa.listFactors().then(b=>{var w;return(w=b.data)===null||w===void 0?void 0:w.all.find(N=>N.factor_type==="webauthn"&&N.friendly_name===s&&N.status!=="unverified")}).then(b=>b?this.client.mfa.unenroll({factorId:b==null?void 0:b.id}):void 0),{data:null,error:p};const{data:m,error:g}=await this._challenge({factorId:h.id,friendlyName:h.friendly_name,webauthn:{rpId:i,rpOrigins:o},signal:c},{create:u});return m?this._verify({factorId:h.id,challengeId:m.challengeId,webauthn:{rpId:i,rpOrigins:o,type:m.webauthn.type,credential_response:m.webauthn.credential_response}}):{data:null,error:g}}catch(h){return he(h)?{data:null,error:h}:{data:null,error:new an("Unexpected error in register",h)}}}}C2();const K2={url:Hj,storageKey:Vj,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Gj,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function Gp(r,s,i){return await i()}const er={};class ji{get jwks(){var s,i;return(i=(s=er[this.storageKey])===null||s===void 0?void 0:s.jwks)!==null&&i!==void 0?i:{keys:[]}}set jwks(s){er[this.storageKey]=Object.assign(Object.assign({},er[this.storageKey]),{jwks:s})}get jwks_cached_at(){var s,i;return(i=(s=er[this.storageKey])===null||s===void 0?void 0:s.cachedAt)!==null&&i!==void 0?i:Number.MIN_SAFE_INTEGER}set jwks_cached_at(s){er[this.storageKey]=Object.assign(Object.assign({},er[this.storageKey]),{cachedAt:s})}constructor(s){var i,o,c;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const u=Object.assign(Object.assign({},K2),s);if(this.storageKey=u.storageKey,this.instanceID=(i=ji.nextInstanceID[this.storageKey])!==null&&i!==void 0?i:0,ji.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!u.debug,typeof u.debug=="function"&&(this.logger=u.debug),this.instanceID>0&&yt()){const h=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(h),this.logDebugMessages&&console.trace(h)}if(this.persistSession=u.persistSession,this.autoRefreshToken=u.autoRefreshToken,this.admin=new S2({url:u.url,headers:u.headers,fetch:u.fetch}),this.url=u.url,this.headers=u.headers,this.fetch=Nb(u.fetch),this.lock=u.lock||Gp,this.detectSessionInUrl=u.detectSessionInUrl,this.flowType=u.flowType,this.hasCustomAuthorizationHeader=u.hasCustomAuthorizationHeader,this.throwOnError=u.throwOnError,u.lock?this.lock=u.lock:yt()&&(!((o=globalThis==null?void 0:globalThis.navigator)===null||o===void 0)&&o.locks)?this.lock=k2:this.lock=Gp,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Y2(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this)},this.persistSession?(u.storage?this.storage=u.storage:jb()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Hp(this.memoryStorage)),u.userStorage&&(this.userStorage=u.userStorage)):(this.memoryStorage={},this.storage=Hp(this.memoryStorage)),yt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(h){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",h)}(c=this.broadcastChannel)===null||c===void 0||c.addEventListener("message",async h=>{this._debug("received broadcast notification from other tab or client",h),await this._notifyAllSubscribers(h.data.event,h.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(s){if(this.throwOnError&&s&&s.error)throw s.error;return s}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${vb}) ${new Date().toISOString()}`}_debug(...s){return this.logDebugMessages&&this.logger(this._logPrefix(),...s),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var s;try{let i={},o="none";if(yt()&&(i=r2(window.location.href),this._isImplicitGrantCallback(i)?o="implicit":await this._isPKCECallback(i)&&(o="pkce")),yt()&&this.detectSessionInUrl&&o!=="none"){const{data:c,error:u}=await this._getSessionFromURL(i,o);if(u){if(this._debug("#_initialize()","error detecting session from URL",u),Xj(u)){const m=(s=u.details)===null||s===void 0?void 0:s.code;if(m==="identity_already_exists"||m==="identity_not_found"||m==="single_identity_not_deletable")return{error:u}}return await this._removeSession(),{error:u}}const{session:h,redirectType:p}=c;return this._debug("#_initialize()","detected session in URL",h,"redirect type",p),await this._saveSession(h),setTimeout(async()=>{p==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",h):await this._notifyAllSubscribers("SIGNED_IN",h)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(i){return he(i)?this._returnResult({error:i}):this._returnResult({error:new an("Unexpected error during initialization",i)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(s){var i,o,c;try{const u=await pe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(o=(i=s==null?void 0:s.options)===null||i===void 0?void 0:i.data)!==null&&o!==void 0?o:{},gotrue_meta_security:{captcha_token:(c=s==null?void 0:s.options)===null||c===void 0?void 0:c.captchaToken}},xform:ua}),{data:h,error:p}=u;if(p||!h)return this._returnResult({data:{user:null,session:null},error:p});const m=h.session,g=h.user;return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",m)),this._returnResult({data:{user:g,session:m},error:null})}catch(u){if(he(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}}async signUp(s){var i,o,c;try{let u;if("email"in s){const{email:b,password:w,options:N}=s;let S=null,v=null;this.flowType==="pkce"&&([S,v]=await Xn(this.storage,this.storageKey)),u=await pe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:N==null?void 0:N.emailRedirectTo,body:{email:b,password:w,data:(i=N==null?void 0:N.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:N==null?void 0:N.captchaToken},code_challenge:S,code_challenge_method:v},xform:ua})}else if("phone"in s){const{phone:b,password:w,options:N}=s;u=await pe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:b,password:w,data:(o=N==null?void 0:N.data)!==null&&o!==void 0?o:{},channel:(c=N==null?void 0:N.channel)!==null&&c!==void 0?c:"sms",gotrue_meta_security:{captcha_token:N==null?void 0:N.captchaToken}},xform:ua})}else throw new Wl("You must provide either an email or phone number and a password");const{data:h,error:p}=u;if(p||!h)return this._returnResult({data:{user:null,session:null},error:p});const m=h.session,g=h.user;return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",m)),this._returnResult({data:{user:g,session:m},error:null})}catch(u){if(he(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}}async signInWithPassword(s){try{let i;if("email"in s){const{email:u,password:h,options:p}=s;i=await pe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:u,password:h,gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken}},xform:Ip})}else if("phone"in s){const{phone:u,password:h,options:p}=s;i=await pe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:u,password:h,gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken}},xform:Ip})}else throw new Wl("You must provide either an email or phone number and a password");const{data:o,error:c}=i;if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!o||!o.session||!o.user){const u=new Jn;return this._returnResult({data:{user:null,session:null},error:u})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:Object.assign({user:o.user,session:o.session},o.weak_password?{weakPassword:o.weak_password}:null),error:c})}catch(i){if(he(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithOAuth(s){var i,o,c,u;return await this._handleProviderSignIn(s.provider,{redirectTo:(i=s.options)===null||i===void 0?void 0:i.redirectTo,scopes:(o=s.options)===null||o===void 0?void 0:o.scopes,queryParams:(c=s.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:(u=s.options)===null||u===void 0?void 0:u.skipBrowserRedirect})}async exchangeCodeForSession(s){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(s))}async signInWithWeb3(s){const{chain:i}=s;switch(i){case"ethereum":return await this.signInWithEthereum(s);case"solana":return await this.signInWithSolana(s);default:throw new Error(`@supabase/auth-js: Unsupported chain "${i}"`)}}async signInWithEthereum(s){var i,o,c,u,h,p,m,g,b,w,N;let S,v;if("message"in s)S=s.message,v=s.signature;else{const{chain:E,wallet:y,statement:C,options:M}=s;let T;if(yt())if(typeof y=="object")T=y;else{const ee=window;if("ethereum"in ee&&typeof ee.ethereum=="object"&&"request"in ee.ethereum&&typeof ee.ethereum.request=="function")T=ee.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!(M!=null&&M.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");T=y}const z=new URL((i=M==null?void 0:M.url)!==null&&i!==void 0?i:window.location.href),U=await T.request({method:"eth_requestAccounts"}).then(ee=>ee).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!U||U.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const X=Sb(U[0]);let B=(o=M==null?void 0:M.signInWithEthereum)===null||o===void 0?void 0:o.chainId;if(!B){const ee=await T.request({method:"eth_chainId"});B=A2(ee)}const se={domain:z.host,address:X,statement:C,uri:z.href,version:"1",chainId:B,nonce:(c=M==null?void 0:M.signInWithEthereum)===null||c===void 0?void 0:c.nonce,issuedAt:(h=(u=M==null?void 0:M.signInWithEthereum)===null||u===void 0?void 0:u.issuedAt)!==null&&h!==void 0?h:new Date,expirationTime:(p=M==null?void 0:M.signInWithEthereum)===null||p===void 0?void 0:p.expirationTime,notBefore:(m=M==null?void 0:M.signInWithEthereum)===null||m===void 0?void 0:m.notBefore,requestId:(g=M==null?void 0:M.signInWithEthereum)===null||g===void 0?void 0:g.requestId,resources:(b=M==null?void 0:M.signInWithEthereum)===null||b===void 0?void 0:b.resources};S=R2(se),v=await T.request({method:"personal_sign",params:[T2(S),X]})}try{const{data:E,error:y}=await pe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:S,signature:v},!((w=s.options)===null||w===void 0)&&w.captchaToken?{gotrue_meta_security:{captcha_token:(N=s.options)===null||N===void 0?void 0:N.captchaToken}}:null),xform:ua});if(y)throw y;if(!E||!E.session||!E.user){const C=new Jn;return this._returnResult({data:{user:null,session:null},error:C})}return E.session&&(await this._saveSession(E.session),await this._notifyAllSubscribers("SIGNED_IN",E.session)),this._returnResult({data:Object.assign({},E),error:y})}catch(E){if(he(E))return this._returnResult({data:{user:null,session:null},error:E});throw E}}async signInWithSolana(s){var i,o,c,u,h,p,m,g,b,w,N,S;let v,E;if("message"in s)v=s.message,E=s.signature;else{const{chain:y,wallet:C,statement:M,options:T}=s;let z;if(yt())if(typeof C=="object")z=C;else{const X=window;if("solana"in X&&typeof X.solana=="object"&&("signIn"in X.solana&&typeof X.solana.signIn=="function"||"signMessage"in X.solana&&typeof X.solana.signMessage=="function"))z=X.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof C!="object"||!(T!=null&&T.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");z=C}const U=new URL((i=T==null?void 0:T.url)!==null&&i!==void 0?i:window.location.href);if("signIn"in z&&z.signIn){const X=await z.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},T==null?void 0:T.signInWithSolana),{version:"1",domain:U.host,uri:U.href}),M?{statement:M}:null));let B;if(Array.isArray(X)&&X[0]&&typeof X[0]=="object")B=X[0];else if(X&&typeof X=="object"&&"signedMessage"in X&&"signature"in X)B=X;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in B&&"signature"in B&&(typeof B.signedMessage=="string"||B.signedMessage instanceof Uint8Array)&&B.signature instanceof Uint8Array)v=typeof B.signedMessage=="string"?B.signedMessage:new TextDecoder().decode(B.signedMessage),E=B.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in z)||typeof z.signMessage!="function"||!("publicKey"in z)||typeof z!="object"||!z.publicKey||!("toBase58"in z.publicKey)||typeof z.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");v=[`${U.host} wants you to sign in with your Solana account:`,z.publicKey.toBase58(),...M?["",M,""]:[""],"Version: 1",`URI: ${U.href}`,`Issued At: ${(c=(o=T==null?void 0:T.signInWithSolana)===null||o===void 0?void 0:o.issuedAt)!==null&&c!==void 0?c:new Date().toISOString()}`,...!((u=T==null?void 0:T.signInWithSolana)===null||u===void 0)&&u.notBefore?[`Not Before: ${T.signInWithSolana.notBefore}`]:[],...!((h=T==null?void 0:T.signInWithSolana)===null||h===void 0)&&h.expirationTime?[`Expiration Time: ${T.signInWithSolana.expirationTime}`]:[],...!((p=T==null?void 0:T.signInWithSolana)===null||p===void 0)&&p.chainId?[`Chain ID: ${T.signInWithSolana.chainId}`]:[],...!((m=T==null?void 0:T.signInWithSolana)===null||m===void 0)&&m.nonce?[`Nonce: ${T.signInWithSolana.nonce}`]:[],...!((g=T==null?void 0:T.signInWithSolana)===null||g===void 0)&&g.requestId?[`Request ID: ${T.signInWithSolana.requestId}`]:[],...!((w=(b=T==null?void 0:T.signInWithSolana)===null||b===void 0?void 0:b.resources)===null||w===void 0)&&w.length?["Resources",...T.signInWithSolana.resources.map(B=>`- ${B}`)]:[]].join(`
`);const X=await z.signMessage(new TextEncoder().encode(v),"utf8");if(!X||!(X instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");E=X}}try{const{data:y,error:C}=await pe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:v,signature:nn(E)},!((N=s.options)===null||N===void 0)&&N.captchaToken?{gotrue_meta_security:{captcha_token:(S=s.options)===null||S===void 0?void 0:S.captchaToken}}:null),xform:ua});if(C)throw C;if(!y||!y.session||!y.user){const M=new Jn;return this._returnResult({data:{user:null,session:null},error:M})}return y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),this._returnResult({data:Object.assign({},y),error:C})}catch(y){if(he(y))return this._returnResult({data:{user:null,session:null},error:y});throw y}}async _exchangeCodeForSession(s){const i=await Xs(this.storage,`${this.storageKey}-code-verifier`),[o,c]=(i??"").split("/");try{const{data:u,error:h}=await pe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:s,code_verifier:o},xform:ua});if(await js(this.storage,`${this.storageKey}-code-verifier`),h)throw h;if(!u||!u.session||!u.user){const p=new Jn;return this._returnResult({data:{user:null,session:null,redirectType:null},error:p})}return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),this._returnResult({data:Object.assign(Object.assign({},u),{redirectType:c??null}),error:h})}catch(u){if(he(u))return this._returnResult({data:{user:null,session:null,redirectType:null},error:u});throw u}}async signInWithIdToken(s){try{const{options:i,provider:o,token:c,access_token:u,nonce:h}=s,p=await pe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:o,id_token:c,access_token:u,nonce:h,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},xform:ua}),{data:m,error:g}=p;if(g)return this._returnResult({data:{user:null,session:null},error:g});if(!m||!m.session||!m.user){const b=new Jn;return this._returnResult({data:{user:null,session:null},error:b})}return m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",m.session)),this._returnResult({data:m,error:g})}catch(i){if(he(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithOtp(s){var i,o,c,u,h;try{if("email"in s){const{email:p,options:m}=s;let g=null,b=null;this.flowType==="pkce"&&([g,b]=await Xn(this.storage,this.storageKey));const{error:w}=await pe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:p,data:(i=m==null?void 0:m.data)!==null&&i!==void 0?i:{},create_user:(o=m==null?void 0:m.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:g,code_challenge_method:b},redirectTo:m==null?void 0:m.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:w})}if("phone"in s){const{phone:p,options:m}=s,{data:g,error:b}=await pe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:p,data:(c=m==null?void 0:m.data)!==null&&c!==void 0?c:{},create_user:(u=m==null?void 0:m.shouldCreateUser)!==null&&u!==void 0?u:!0,gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},channel:(h=m==null?void 0:m.channel)!==null&&h!==void 0?h:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:g==null?void 0:g.message_id},error:b})}throw new Wl("You must provide either an email or phone number.")}catch(p){if(he(p))return this._returnResult({data:{user:null,session:null},error:p});throw p}}async verifyOtp(s){var i,o;try{let c,u;"options"in s&&(c=(i=s.options)===null||i===void 0?void 0:i.redirectTo,u=(o=s.options)===null||o===void 0?void 0:o.captchaToken);const{data:h,error:p}=await pe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},s),{gotrue_meta_security:{captcha_token:u}}),redirectTo:c,xform:ua});if(p)throw p;if(!h)throw new Error("An error occurred on token verification.");const m=h.session,g=h.user;return m!=null&&m.access_token&&(await this._saveSession(m),await this._notifyAllSubscribers(s.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",m)),this._returnResult({data:{user:g,session:m},error:null})}catch(c){if(he(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async signInWithSSO(s){var i,o,c;try{let u=null,h=null;this.flowType==="pkce"&&([u,h]=await Xn(this.storage,this.storageKey));const p=await pe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in s?{provider_id:s.providerId}:null),"domain"in s?{domain:s.domain}:null),{redirect_to:(o=(i=s.options)===null||i===void 0?void 0:i.redirectTo)!==null&&o!==void 0?o:void 0}),!((c=s==null?void 0:s.options)===null||c===void 0)&&c.captchaToken?{gotrue_meta_security:{captcha_token:s.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:u,code_challenge_method:h}),headers:this.headers,xform:j2});return this._returnResult(p)}catch(u){if(he(u))return this._returnResult({data:null,error:u});throw u}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async s=>{const{data:{session:i},error:o}=s;if(o)throw o;if(!i)throw new ca;const{error:c}=await pe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:i.access_token});return this._returnResult({data:{user:null,session:null},error:c})})}catch(s){if(he(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async resend(s){try{const i=`${this.url}/resend`;if("email"in s){const{email:o,type:c,options:u}=s,{error:h}=await pe(this.fetch,"POST",i,{headers:this.headers,body:{email:o,type:c,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},redirectTo:u==null?void 0:u.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}else if("phone"in s){const{phone:o,type:c,options:u}=s,{data:h,error:p}=await pe(this.fetch,"POST",i,{headers:this.headers,body:{phone:o,type:c,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:h==null?void 0:h.message_id},error:p})}throw new Wl("You must provide either an email or phone number and a type")}catch(i){if(he(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async i=>i))}async _acquireLock(s,i){this._debug("#_acquireLock","begin",s);try{if(this.lockAcquired){const o=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),c=(async()=>(await o,await i()))();return this.pendingInLock.push((async()=>{try{await c}catch{}})()),c}return await this.lock(`lock:${this.storageKey}`,s,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const o=i();for(this.pendingInLock.push((async()=>{try{await o}catch{}})()),await o;this.pendingInLock.length;){const c=[...this.pendingInLock];await Promise.all(c),this.pendingInLock.splice(0,c.length)}return await o}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(s){this._debug("#_useSession","begin");try{const i=await this.__loadSession();return await s(i)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let s=null;const i=await Xs(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",i),i!==null&&(this._isValidSession(i)?s=i:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!s)return{data:{session:null},error:null};const o=s.expires_at?s.expires_at*1e3-Date.now()<rd:!1;if(this._debug("#__loadSession()",`session has${o?"":" not"} expired`,"expires_at",s.expires_at),!o){if(this.userStorage){const h=await Xs(this.userStorage,this.storageKey+"-user");h!=null&&h.user?s.user=h.user:s.user=od()}if(this.storage.isServer&&s.user&&!s.user.__isUserNotAvailableProxy){const h={value:this.suppressGetSessionWarning};s.user=b2(s.user,h),h.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:s},error:null}}const{data:c,error:u}=await this._callRefreshToken(s.refresh_token);return u?this._returnResult({data:{session:null},error:u}):this._returnResult({data:{session:c},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(s){return s?await this._getUser(s):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(s){try{return s?await pe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:s,xform:Es}):await this._useSession(async i=>{var o,c,u;const{data:h,error:p}=i;if(p)throw p;return!(!((o=h.session)===null||o===void 0)&&o.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ca}:await pe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(u=(c=h.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0,xform:Es})})}catch(i){if(he(i))return Jj(i)&&(await this._removeSession(),await js(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:i});throw i}}async updateUser(s,i={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(s,i))}async _updateUser(s,i={}){try{return await this._useSession(async o=>{const{data:c,error:u}=o;if(u)throw u;if(!c.session)throw new ca;const h=c.session;let p=null,m=null;this.flowType==="pkce"&&s.email!=null&&([p,m]=await Xn(this.storage,this.storageKey));const{data:g,error:b}=await pe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:i==null?void 0:i.emailRedirectTo,body:Object.assign(Object.assign({},s),{code_challenge:p,code_challenge_method:m}),jwt:h.access_token,xform:Es});if(b)throw b;return h.user=g.user,await this._saveSession(h),await this._notifyAllSubscribers("USER_UPDATED",h),this._returnResult({data:{user:h.user},error:null})})}catch(o){if(he(o))return this._returnResult({data:{user:null},error:o});throw o}}async setSession(s){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(s))}async _setSession(s){try{if(!s.access_token||!s.refresh_token)throw new ca;const i=Date.now()/1e3;let o=i,c=!0,u=null;const{payload:h}=ld(s.access_token);if(h.exp&&(o=h.exp,c=o<=i),c){const{data:p,error:m}=await this._callRefreshToken(s.refresh_token);if(m)return this._returnResult({data:{user:null,session:null},error:m});if(!p)return{data:{user:null,session:null},error:null};u=p}else{const{data:p,error:m}=await this._getUser(s.access_token);if(m)throw m;u={access_token:s.access_token,refresh_token:s.refresh_token,user:p.user,token_type:"bearer",expires_in:o-i,expires_at:o},await this._saveSession(u),await this._notifyAllSubscribers("SIGNED_IN",u)}return this._returnResult({data:{user:u.user,session:u},error:null})}catch(i){if(he(i))return this._returnResult({data:{session:null,user:null},error:i});throw i}}async refreshSession(s){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(s))}async _refreshSession(s){try{return await this._useSession(async i=>{var o;if(!s){const{data:h,error:p}=i;if(p)throw p;s=(o=h.session)!==null&&o!==void 0?o:void 0}if(!(s!=null&&s.refresh_token))throw new ca;const{data:c,error:u}=await this._callRefreshToken(s.refresh_token);return u?this._returnResult({data:{user:null,session:null},error:u}):c?this._returnResult({data:{user:c.user,session:c},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(i){if(he(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async _getSessionFromURL(s,i){try{if(!yt())throw new Zl("No browser detected.");if(s.error||s.error_description||s.error_code)throw new Zl(s.error_description||"Error in URL with unspecified error_description",{error:s.error||"unspecified_error",code:s.error_code||"unspecified_code"});switch(i){case"implicit":if(this.flowType==="pkce")throw new Mp("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Zl("Not a valid implicit grant flow url.");break;default:}if(i==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!s.code)throw new Mp("No code detected.");const{data:M,error:T}=await this._exchangeCodeForSession(s.code);if(T)throw T;const z=new URL(window.location.href);return z.searchParams.delete("code"),window.history.replaceState(window.history.state,"",z.toString()),{data:{session:M.session,redirectType:null},error:null}}const{provider_token:o,provider_refresh_token:c,access_token:u,refresh_token:h,expires_in:p,expires_at:m,token_type:g}=s;if(!u||!p||!h||!g)throw new Zl("No session defined in URL");const b=Math.round(Date.now()/1e3),w=parseInt(p);let N=b+w;m&&(N=parseInt(m));const S=N-b;S*1e3<=ar&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${S}s, should have been closer to ${w}s`);const v=N-w;b-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,N,b):b-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,N,b);const{data:E,error:y}=await this._getUser(u);if(y)throw y;const C={provider_token:o,provider_refresh_token:c,access_token:u,expires_in:w,expires_at:N,refresh_token:h,token_type:g,user:E.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:C,redirectType:s.type},error:null})}catch(o){if(he(o))return this._returnResult({data:{session:null,redirectType:null},error:o});throw o}}_isImplicitGrantCallback(s){return!!(s.access_token||s.error_description)}async _isPKCECallback(s){const i=await Xs(this.storage,`${this.storageKey}-code-verifier`);return!!(s.code&&i)}async signOut(s={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(s))}async _signOut({scope:s}={scope:"global"}){return await this._useSession(async i=>{var o;const{data:c,error:u}=i;if(u)return this._returnResult({error:u});const h=(o=c.session)===null||o===void 0?void 0:o.access_token;if(h){const{error:p}=await this.admin.signOut(h,s);if(p&&!(Qj(p)&&(p.status===404||p.status===401||p.status===403)))return this._returnResult({error:p})}return s!=="others"&&(await this._removeSession(),await js(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(s){const i=n2(),o={id:i,callback:s,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",i),this.stateChangeEmitters.delete(i)}};return this._debug("#onAuthStateChange()","registered callback with id",i),this.stateChangeEmitters.set(i,o),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(i)})))(),{data:{subscription:o}}}async _emitInitialSession(s){return await this._useSession(async i=>{var o,c;try{const{data:{session:u},error:h}=i;if(h)throw h;await((o=this.stateChangeEmitters.get(s))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",u)),this._debug("INITIAL_SESSION","callback id",s,"session",u)}catch(u){await((c=this.stateChangeEmitters.get(s))===null||c===void 0?void 0:c.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",s,"error",u),console.error(u)}})}async resetPasswordForEmail(s,i={}){let o=null,c=null;this.flowType==="pkce"&&([o,c]=await Xn(this.storage,this.storageKey,!0));try{return await pe(this.fetch,"POST",`${this.url}/recover`,{body:{email:s,code_challenge:o,code_challenge_method:c,gotrue_meta_security:{captcha_token:i.captchaToken}},headers:this.headers,redirectTo:i.redirectTo})}catch(u){if(he(u))return this._returnResult({data:null,error:u});throw u}}async getUserIdentities(){var s;try{const{data:i,error:o}=await this.getUser();if(o)throw o;return this._returnResult({data:{identities:(s=i.user.identities)!==null&&s!==void 0?s:[]},error:null})}catch(i){if(he(i))return this._returnResult({data:null,error:i});throw i}}async linkIdentity(s){return"token"in s?this.linkIdentityIdToken(s):this.linkIdentityOAuth(s)}async linkIdentityOAuth(s){var i;try{const{data:o,error:c}=await this._useSession(async u=>{var h,p,m,g,b;const{data:w,error:N}=u;if(N)throw N;const S=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,s.provider,{redirectTo:(h=s.options)===null||h===void 0?void 0:h.redirectTo,scopes:(p=s.options)===null||p===void 0?void 0:p.scopes,queryParams:(m=s.options)===null||m===void 0?void 0:m.queryParams,skipBrowserRedirect:!0});return await pe(this.fetch,"GET",S,{headers:this.headers,jwt:(b=(g=w.session)===null||g===void 0?void 0:g.access_token)!==null&&b!==void 0?b:void 0})});if(c)throw c;return yt()&&!(!((i=s.options)===null||i===void 0)&&i.skipBrowserRedirect)&&window.location.assign(o==null?void 0:o.url),this._returnResult({data:{provider:s.provider,url:o==null?void 0:o.url},error:null})}catch(o){if(he(o))return this._returnResult({data:{provider:s.provider,url:null},error:o});throw o}}async linkIdentityIdToken(s){return await this._useSession(async i=>{var o;try{const{error:c,data:{session:u}}=i;if(c)throw c;const{options:h,provider:p,token:m,access_token:g,nonce:b}=s,w=await pe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(o=u==null?void 0:u.access_token)!==null&&o!==void 0?o:void 0,body:{provider:p,id_token:m,access_token:g,nonce:b,link_identity:!0,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:ua}),{data:N,error:S}=w;return S?this._returnResult({data:{user:null,session:null},error:S}):!N||!N.session||!N.user?this._returnResult({data:{user:null,session:null},error:new Jn}):(N.session&&(await this._saveSession(N.session),await this._notifyAllSubscribers("USER_UPDATED",N.session)),this._returnResult({data:N,error:S}))}catch(c){if(he(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}})}async unlinkIdentity(s){try{return await this._useSession(async i=>{var o,c;const{data:u,error:h}=i;if(h)throw h;return await pe(this.fetch,"DELETE",`${this.url}/user/identities/${s.identity_id}`,{headers:this.headers,jwt:(c=(o=u.session)===null||o===void 0?void 0:o.access_token)!==null&&c!==void 0?c:void 0})})}catch(i){if(he(i))return this._returnResult({data:null,error:i});throw i}}async _refreshAccessToken(s){const i=`#_refreshAccessToken(${s.substring(0,5)}...)`;this._debug(i,"begin");try{const o=Date.now();return await o2(async c=>(c>0&&await l2(200*Math.pow(2,c-1)),this._debug(i,"refreshing attempt",c),await pe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:s},headers:this.headers,xform:ua})),(c,u)=>{const h=200*Math.pow(2,c);return u&&id(u)&&Date.now()+h-o<ar})}catch(o){if(this._debug(i,"error",o),he(o))return this._returnResult({data:{session:null,user:null},error:o});throw o}finally{this._debug(i,"end")}}_isValidSession(s){return typeof s=="object"&&s!==null&&"access_token"in s&&"refresh_token"in s&&"expires_at"in s}async _handleProviderSignIn(s,i){const o=await this._getUrlForProvider(`${this.url}/authorize`,s,{redirectTo:i.redirectTo,scopes:i.scopes,queryParams:i.queryParams});return this._debug("#_handleProviderSignIn()","provider",s,"options",i,"url",o),yt()&&!i.skipBrowserRedirect&&window.location.assign(o),{data:{provider:s,url:o},error:null}}async _recoverAndRefresh(){var s,i;const o="#_recoverAndRefresh()";this._debug(o,"begin");try{const c=await Xs(this.storage,this.storageKey);if(c&&this.userStorage){let h=await Xs(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!h&&(h={user:c.user},await sr(this.userStorage,this.storageKey+"-user",h)),c.user=(s=h==null?void 0:h.user)!==null&&s!==void 0?s:od()}else if(c&&!c.user&&!c.user){const h=await Xs(this.storage,this.storageKey+"-user");h&&(h!=null&&h.user)?(c.user=h.user,await js(this.storage,this.storageKey+"-user"),await sr(this.storage,this.storageKey,c)):c.user=od()}if(this._debug(o,"session from storage",c),!this._isValidSession(c)){this._debug(o,"session is not valid"),c!==null&&await this._removeSession();return}const u=((i=c.expires_at)!==null&&i!==void 0?i:1/0)*1e3-Date.now()<rd;if(this._debug(o,`session has${u?"":" not"} expired with margin of ${rd}s`),u){if(this.autoRefreshToken&&c.refresh_token){const{error:h}=await this._callRefreshToken(c.refresh_token);h&&(console.error(h),id(h)||(this._debug(o,"refresh failed with a non-retryable error, removing the session",h),await this._removeSession()))}}else if(c.user&&c.user.__isUserNotAvailableProxy===!0)try{const{data:h,error:p}=await this._getUser(c.access_token);!p&&(h!=null&&h.user)?(c.user=h.user,await this._saveSession(c),await this._notifyAllSubscribers("SIGNED_IN",c)):this._debug(o,"could not get user data, skipping SIGNED_IN notification")}catch(h){console.error("Error getting user data:",h),this._debug(o,"error getting user data, skipping SIGNED_IN notification",h)}else await this._notifyAllSubscribers("SIGNED_IN",c)}catch(c){this._debug(o,"error",c),console.error(c);return}finally{this._debug(o,"end")}}async _callRefreshToken(s){var i,o;if(!s)throw new ca;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const c=`#_callRefreshToken(${s.substring(0,5)}...)`;this._debug(c,"begin");try{this.refreshingDeferred=new Oo;const{data:u,error:h}=await this._refreshAccessToken(s);if(h)throw h;if(!u.session)throw new ca;await this._saveSession(u.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",u.session);const p={data:u.session,error:null};return this.refreshingDeferred.resolve(p),p}catch(u){if(this._debug(c,"error",u),he(u)){const h={data:null,error:u};return id(u)||await this._removeSession(),(i=this.refreshingDeferred)===null||i===void 0||i.resolve(h),h}throw(o=this.refreshingDeferred)===null||o===void 0||o.reject(u),u}finally{this.refreshingDeferred=null,this._debug(c,"end")}}async _notifyAllSubscribers(s,i,o=!0){const c=`#_notifyAllSubscribers(${s})`;this._debug(c,"begin",i,`broadcast = ${o}`);try{this.broadcastChannel&&o&&this.broadcastChannel.postMessage({event:s,session:i});const u=[],h=Array.from(this.stateChangeEmitters.values()).map(async p=>{try{await p.callback(s,i)}catch(m){u.push(m)}});if(await Promise.all(h),u.length>0){for(let p=0;p<u.length;p+=1)console.error(u[p]);throw u[0]}}finally{this._debug(c,"end")}}async _saveSession(s){this._debug("#_saveSession()",s),this.suppressGetSessionWarning=!0;const i=Object.assign({},s),o=i.user&&i.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!o&&i.user&&await sr(this.userStorage,this.storageKey+"-user",{user:i.user});const c=Object.assign({},i);delete c.user;const u=qp(c);await sr(this.storage,this.storageKey,u)}else{const c=qp(i);await sr(this.storage,this.storageKey,c)}}async _removeSession(){this._debug("#_removeSession()"),await js(this.storage,this.storageKey),await js(this.storage,this.storageKey+"-code-verifier"),await js(this.storage,this.storageKey+"-user"),this.userStorage&&await js(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const s=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{s&&yt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",s)}catch(i){console.error("removing visibilitychange callback failed",i)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const s=setInterval(()=>this._autoRefreshTokenTick(),ar);this.autoRefreshTicker=s,s&&typeof s=="object"&&typeof s.unref=="function"?s.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(s),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const s=this.autoRefreshTicker;this.autoRefreshTicker=null,s&&clearInterval(s)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const s=Date.now();try{return await this._useSession(async i=>{const{data:{session:o}}=i;if(!o||!o.refresh_token||!o.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const c=Math.floor((o.expires_at*1e3-s)/ar);this._debug("#_autoRefreshTokenTick()",`access token expires in ${c} ticks, a tick lasts ${ar}ms, refresh threshold is ${Sd} ticks`),c<=Sd&&await this._callRefreshToken(o.refresh_token)})}catch(i){console.error("Auto refresh tick failed with error. This is likely a transient error.",i)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(s){if(s.isAcquireTimeout||s instanceof _b)this._debug("auto refresh token tick lock not available");else throw s}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!yt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(s){console.error("_handleVisibilityChange",s)}}async _onVisibilityChanged(s){const i=`#_onVisibilityChanged(${s})`;this._debug(i,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),s||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(i,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(s,i,o){const c=[`provider=${encodeURIComponent(i)}`];if(o!=null&&o.redirectTo&&c.push(`redirect_to=${encodeURIComponent(o.redirectTo)}`),o!=null&&o.scopes&&c.push(`scopes=${encodeURIComponent(o.scopes)}`),this.flowType==="pkce"){const[u,h]=await Xn(this.storage,this.storageKey),p=new URLSearchParams({code_challenge:`${encodeURIComponent(u)}`,code_challenge_method:`${encodeURIComponent(h)}`});c.push(p.toString())}if(o!=null&&o.queryParams){const u=new URLSearchParams(o.queryParams);c.push(u.toString())}return o!=null&&o.skipBrowserRedirect&&c.push(`skip_http_redirect=${o.skipBrowserRedirect}`),`${s}?${c.join("&")}`}async _unenroll(s){try{return await this._useSession(async i=>{var o;const{data:c,error:u}=i;return u?this._returnResult({data:null,error:u}):await pe(this.fetch,"DELETE",`${this.url}/factors/${s.factorId}`,{headers:this.headers,jwt:(o=c==null?void 0:c.session)===null||o===void 0?void 0:o.access_token})})}catch(i){if(he(i))return this._returnResult({data:null,error:i});throw i}}async _enroll(s){try{return await this._useSession(async i=>{var o,c;const{data:u,error:h}=i;if(h)return this._returnResult({data:null,error:h});const p=Object.assign({friendly_name:s.friendlyName,factor_type:s.factorType},s.factorType==="phone"?{phone:s.phone}:s.factorType==="totp"?{issuer:s.issuer}:{}),{data:m,error:g}=await pe(this.fetch,"POST",`${this.url}/factors`,{body:p,headers:this.headers,jwt:(o=u==null?void 0:u.session)===null||o===void 0?void 0:o.access_token});return g?this._returnResult({data:null,error:g}):(s.factorType==="totp"&&m.type==="totp"&&(!((c=m==null?void 0:m.totp)===null||c===void 0)&&c.qr_code)&&(m.totp.qr_code=`data:image/svg+xml;utf-8,${m.totp.qr_code}`),this._returnResult({data:m,error:null}))})}catch(i){if(he(i))return this._returnResult({data:null,error:i});throw i}}async _verify(s){return this._acquireLock(-1,async()=>{try{return await this._useSession(async i=>{var o;const{data:c,error:u}=i;if(u)return this._returnResult({data:null,error:u});const h=Object.assign({challenge_id:s.challengeId},"webauthn"in s?{webauthn:Object.assign(Object.assign({},s.webauthn),{credential_response:s.webauthn.type==="create"?z2(s.webauthn.credential_response):q2(s.webauthn.credential_response)})}:{code:s.code}),{data:p,error:m}=await pe(this.fetch,"POST",`${this.url}/factors/${s.factorId}/verify`,{body:h,headers:this.headers,jwt:(o=c==null?void 0:c.session)===null||o===void 0?void 0:o.access_token});return m?this._returnResult({data:null,error:m}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+p.expires_in},p)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",p),this._returnResult({data:p,error:m}))})}catch(i){if(he(i))return this._returnResult({data:null,error:i});throw i}})}async _challenge(s){return this._acquireLock(-1,async()=>{try{return await this._useSession(async i=>{var o;const{data:c,error:u}=i;if(u)return this._returnResult({data:null,error:u});const h=await pe(this.fetch,"POST",`${this.url}/factors/${s.factorId}/challenge`,{body:s,headers:this.headers,jwt:(o=c==null?void 0:c.session)===null||o===void 0?void 0:o.access_token});if(h.error)return h;const{data:p}=h;if(p.type!=="webauthn")return{data:p,error:null};switch(p.webauthn.type){case"create":return{data:Object.assign(Object.assign({},p),{webauthn:Object.assign(Object.assign({},p.webauthn),{credential_options:Object.assign(Object.assign({},p.webauthn.credential_options),{publicKey:L2(p.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},p),{webauthn:Object.assign(Object.assign({},p.webauthn),{credential_options:Object.assign(Object.assign({},p.webauthn.credential_options),{publicKey:B2(p.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(i){if(he(i))return this._returnResult({data:null,error:i});throw i}})}async _challengeAndVerify(s){const{data:i,error:o}=await this._challenge({factorId:s.factorId});return o?this._returnResult({data:null,error:o}):await this._verify({factorId:s.factorId,challengeId:i.id,code:s.code})}async _listFactors(){var s;const{data:{user:i},error:o}=await this.getUser();if(o)return{data:null,error:o};const c={all:[],phone:[],totp:[],webauthn:[]};for(const u of(s=i==null?void 0:i.factors)!==null&&s!==void 0?s:[])c.all.push(u),u.status==="verified"&&c[u.factor_type].push(u);return{data:c,error:null}}async _getAuthenticatorAssuranceLevel(){var s,i;const{data:{session:o},error:c}=await this.getSession();if(c)return this._returnResult({data:null,error:c});if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:u}=ld(o.access_token);let h=null;u.aal&&(h=u.aal);let p=h;((i=(s=o.user.factors)===null||s===void 0?void 0:s.filter(b=>b.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(p="aal2");const g=u.amr||[];return{data:{currentLevel:h,nextLevel:p,currentAuthenticationMethods:g},error:null}}async _getAuthorizationDetails(s){try{return await this._useSession(async i=>{const{data:{session:o},error:c}=i;return c?this._returnResult({data:null,error:c}):o?await pe(this.fetch,"GET",`${this.url}/oauth/authorizations/${s}`,{headers:this.headers,jwt:o.access_token,xform:u=>({data:u,error:null})}):this._returnResult({data:null,error:new ca})})}catch(i){if(he(i))return this._returnResult({data:null,error:i});throw i}}async _approveAuthorization(s,i){try{return await this._useSession(async o=>{const{data:{session:c},error:u}=o;if(u)return this._returnResult({data:null,error:u});if(!c)return this._returnResult({data:null,error:new ca});const h=await pe(this.fetch,"POST",`${this.url}/oauth/authorizations/${s}/consent`,{headers:this.headers,jwt:c.access_token,body:{action:"approve"},xform:p=>({data:p,error:null})});return h.data&&h.data.redirect_url&&yt()&&!(i!=null&&i.skipBrowserRedirect)&&window.location.assign(h.data.redirect_url),h})}catch(o){if(he(o))return this._returnResult({data:null,error:o});throw o}}async _denyAuthorization(s,i){try{return await this._useSession(async o=>{const{data:{session:c},error:u}=o;if(u)return this._returnResult({data:null,error:u});if(!c)return this._returnResult({data:null,error:new ca});const h=await pe(this.fetch,"POST",`${this.url}/oauth/authorizations/${s}/consent`,{headers:this.headers,jwt:c.access_token,body:{action:"deny"},xform:p=>({data:p,error:null})});return h.data&&h.data.redirect_url&&yt()&&!(i!=null&&i.skipBrowserRedirect)&&window.location.assign(h.data.redirect_url),h})}catch(o){if(he(o))return this._returnResult({data:null,error:o});throw o}}async fetchJwk(s,i={keys:[]}){let o=i.keys.find(p=>p.kid===s);if(o)return o;const c=Date.now();if(o=this.jwks.keys.find(p=>p.kid===s),o&&this.jwks_cached_at+Kj>c)return o;const{data:u,error:h}=await pe(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(h)throw h;return!u.keys||u.keys.length===0||(this.jwks=u,this.jwks_cached_at=c,o=u.keys.find(p=>p.kid===s),!o)?null:o}async getClaims(s,i={}){try{let o=s;if(!o){const{data:S,error:v}=await this.getSession();if(v||!S.session)return this._returnResult({data:null,error:v});o=S.session.access_token}const{header:c,payload:u,signature:h,raw:{header:p,payload:m}}=ld(o);i!=null&&i.allowExpired||g2(u.exp);const g=!c.alg||c.alg.startsWith("HS")||!c.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(c.kid,i!=null&&i.keys?{keys:i.keys}:i==null?void 0:i.jwks);if(!g){const{error:S}=await this.getUser(o);if(S)throw S;return{data:{claims:u,header:c,signature:h},error:null}}const b=p2(c.alg),w=await crypto.subtle.importKey("jwk",g,b,!0,["verify"]);if(!await crypto.subtle.verify(b,w,h,a2(`${p}.${m}`)))throw new Cd("Invalid JWT signature");return{data:{claims:u,header:c,signature:h},error:null}}catch(o){if(he(o))return this._returnResult({data:null,error:o});throw o}}}ji.nextInstanceID={};const F2=ji;class Q2 extends F2{constructor(s){super(s)}}class J2{constructor(s,i,o){var c,u,h;this.supabaseUrl=s,this.supabaseKey=i;const p=$j(s);if(!i)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",p),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",p),this.storageUrl=new URL("storage/v1",p),this.functionsUrl=new URL("functions/v1",p);const m=`sb-${p.hostname.split(".")[0]}-auth-token`,g={db:Mj,realtime:Lj,auth:Object.assign(Object.assign({},Uj),{storageKey:m}),global:Dj},b=Ij(o??{},g);this.storageKey=(c=b.auth.storageKey)!==null&&c!==void 0?c:"",this.headers=(u=b.global.headers)!==null&&u!==void 0?u:{},b.accessToken?(this.accessToken=b.accessToken,this.auth=new Proxy({},{get:(w,N)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(N)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((h=b.auth)!==null&&h!==void 0?h:{},this.headers,b.global.fetch),this.fetch=qj(i,this._getAccessToken.bind(this),b.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},b.realtime)),this.rest=new Hw(new URL("rest/v1",p).href,{headers:this.headers,schema:b.db.schema,fetch:this.fetch}),this.storage=new Tj(this.storageUrl.href,this.headers,this.fetch,o==null?void 0:o.storage),b.accessToken||this._listenForAuthEvents()}get functions(){return new qw(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(s){return this.rest.from(s)}schema(s){return this.rest.schema(s)}rpc(s,i={},o={head:!1,get:!1,count:void 0}){return this.rest.rpc(s,i,o)}channel(s,i={config:{}}){return this.realtime.channel(s,i)}getChannels(){return this.realtime.getChannels()}removeChannel(s){return this.realtime.removeChannel(s)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var s,i;if(this.accessToken)return await this.accessToken();const{data:o}=await this.auth.getSession();return(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:s,persistSession:i,detectSessionInUrl:o,storage:c,userStorage:u,storageKey:h,flowType:p,lock:m,debug:g,throwOnError:b},w,N){const S={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Q2({url:this.authUrl.href,headers:Object.assign(Object.assign({},S),w),storageKey:h,autoRefreshToken:s,persistSession:i,detectSessionInUrl:o,storage:c,userStorage:u,flowType:p,lock:m,debug:g,throwOnError:b,fetch:N,hasCustomAuthorizationHeader:Object.keys(this.headers).some(v=>v.toLowerCase()==="authorization")})}_initRealtimeClient(s){return new ij(this.realtimeUrl.href,Object.assign(Object.assign({},s),{params:Object.assign({apikey:this.supabaseKey},s==null?void 0:s.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((i,o)=>{this._handleTokenChanged(i,"CLIENT",o==null?void 0:o.access_token)})}_handleTokenChanged(s,i,o){(s==="TOKEN_REFRESHED"||s==="SIGNED_IN")&&this.changedAccessToken!==o?(this.changedAccessToken=o,this.realtime.setAuth(o)):s==="SIGNED_OUT"&&(this.realtime.setAuth(),i=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const X2=(r,s,i)=>new J2(r,s,i);function W2(){if(typeof window<"u"||typeof process>"u")return!1;const r=process.version;if(r==null)return!1;const s=r.match(/^v(\d+)\./);return s?parseInt(s[1],10)<=18:!1}W2()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const th=void 0,Z2=void 0;console.log("[Supabase config]",{supabaseUrl:JSON.stringify(th),anonKeyLength:0});console.error(" Missing Supabase env vars",{supabaseUrl:th,supabaseAnonKeyPresent:!1});const be=X2(th,Z2),eN=["Bronze","Silver","Gold","Founding Member","Platinum"],tN=r=>r!=null&&eN.includes(r),aN=r=>{if(!r)return;const s=new Date(r);if(!Number.isNaN(s.getTime()))return s.toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"})},sN=(r,s)=>{var h,p,m,g,b,w;if(!s.membership_tier&&!s.next_billing_date)return r;const i=tN(s.membership_tier)?s.membership_tier:((h=r.plan)==null?void 0:h.name)??r.package,o=aN(s.next_billing_date)??((p=r.plan)==null?void 0:p.renewalDate)??((g=(m=r.billing)==null?void 0:m.subscription)==null?void 0:g.renewalDate),c=r.plan?{...r.plan,name:i,renewalDate:o??r.plan.renewalDate}:{name:i,billingCycle:"Billed monthly",price:((b=r.plan)==null?void 0:b.price)??"$0/month",renewalDate:o??"",rating:((w=r.plan)==null?void 0:w.rating)??"A+"},u=r.billing?{...r.billing,subscription:{...r.billing.subscription,planName:i,renewalDate:o??r.billing.subscription.renewalDate}}:r.billing;return{...r,package:i,plan:c,billing:u}},nN=()=>{if(!(typeof window>"u"))return window.location.origin},kb=_.createContext(void 0),rN=[{title:"SEO Blog Posts",description:"Professionally written articles to boost your site's search engine ranking.",icon:"NewspaperIcon",quota:2,used:1},{title:"Quarterly Website Review",description:"Our experts will review your site for SEO and conversion improvements.",icon:"ChartBarIcon",nextDate:"August 15, 2024"},{title:"Trust Badge & Network Listing",description:"Display your verified status and get listed in our trusted network.",icon:"ShieldCheckIcon",status:"Active"},{title:"Priority Support",description:"Get faster response times from our dedicated member support team.",icon:"ChatBubbleOvalLeftEllipsisIcon",isIncluded:!0}],ud=(r,s,i)=>{var h;const o=r.user.email??"",c=((h=r.user.user_metadata)==null?void 0:h.full_name)||o||"Member",u=i&&i.email===o?i:null;return{id:(u==null?void 0:u.id)??Date.now(),name:c,email:o,role:s,package:(u==null?void 0:u.package)??"Gold",profile:(u==null?void 0:u.profile)??{contactNumber:"",address:"",description:"",dbaName:"",yearsInBusiness:void 0,websiteUrl:"",logoUrl:"",serviceAreas:[],specialties:[],socialLinks:{}},usage:(u==null?void 0:u.usage)??{blogPostsUsed:1,blogPostsTotal:2},plan:(u==null?void 0:u.plan)??{name:"Gold",billingCycle:"Billed annually",price:"$229/month",renewalDate:"Mar 15, 2025",rating:"A+"},benefits:(u==null?void 0:u.benefits)??rN.map(p=>({...p})),billing:(u==null?void 0:u.billing)??{subscription:{planName:"Gold",price:"$229 / month",billingCycle:"Monthly",status:"Active",renewalDate:"Mar 15, 2025",startedAt:"Oct 1, 2024"},paymentMethod:{brand:"Visa",last4:"4242",expiry:"04 / 27",cardholder:c},invoices:[]},account:(u==null?void 0:u.account)??{ownerName:c,ownerEmail:o,role:s==="admin"?"Administrator":"Owner",companyName:""},notifications:(u==null?void 0:u.notifications)??{documentStatus:!0,verificationStatus:!0,requestUpdates:!0,benefitDelivery:!0,billingUpdates:!0,communityUpdates:!0,emailFrequency:"real-time"}}},nt=()=>{const r=_.useContext(kb);if(!r)throw new Error("useAuth must be used within an AuthProvider");return r},iN=({children:r})=>{const[s,i]=_.useState({session:null,user:null,isAdmin:!1,loading:!0}),[o,c]=_.useState(null),{session:u,user:h,isAdmin:p,loading:m}=s;_.useEffect(()=>{let v=!0;(async()=>{const{data:C,error:M}=await be.auth.getSession();if(v){if(M){console.error("Failed to fetch Supabase session",M),i({session:null,user:null,isAdmin:!1,loading:!1});return}i(T=>{var z;return{...T,session:C.session??null,user:((z=C.session)==null?void 0:z.user)??null,loading:!!C.session}})}})().catch(C=>{v&&(console.error("Unexpected Supabase session error",C),i({session:null,user:null,isAdmin:!1,loading:!1}))});const{data:y}=be.auth.onAuthStateChange((C,M)=>{v&&i({session:M??null,user:(M==null?void 0:M.user)??null,isAdmin:!1,loading:M!==null})});return()=>{v=!1,y.subscription.unsubscribe()}},[]),_.useEffect(()=>{if(!u||!h){c(null),i(y=>({...y,isAdmin:!1,loading:!1}));return}let v=!0;return i(y=>({...y,loading:!0})),(async()=>{try{const{data:y,error:C}=await be.from("admin_profiles").select("id").eq("id",h.id).eq("is_active",!0).maybeSingle();if(!v)return;C&&C.code!=="PGRST116"&&console.error("Failed to determine admin status",C);const M=!!y;let T=null;const{data:z,error:U}=await be.from("profiles").select("membership_tier, next_billing_date").eq("id",h.id).maybeSingle();if(!v)return;U&&U.code!=="PGRST116"?console.error("Failed to load profile membership data",U):z&&(T=z),i(X=>({...X,isAdmin:M,loading:!1})),c(X=>{const B=ud(u,M?"admin":"member",X);return T?sN(B,T):B})}catch(y){if(!v)return;console.error("Unexpected error determining admin status",y),i(C=>({...C,isAdmin:!1,loading:!1})),c(C=>ud(u,"member",C))}})().catch(y=>{v&&(console.error("Unexpected admin status resolution error",y),i(C=>({...C,isAdmin:!1,loading:!1})),c(C=>ud(u,"member",C)))}),()=>{v=!1}},[u,h]);const g=_.useCallback(async v=>{const E=nN(),{error:y}=await be.auth.signInWithOtp({email:v,options:{shouldCreateUser:!1,emailRedirectTo:E||`${window.location.origin}/member`}});if(y)throw new Error("We couldn't find a member with that email. Please use the email you joined with.")},[]),b=_.useCallback(async(v,E)=>{try{const{data:y,error:C}=await be.auth.signInWithPassword({email:v,password:E});if(C||!y.user)return{success:!1,error:"Invalid email or password"};const{data:M,error:T}=await be.from("admin_profiles").select("id, role, is_active").eq("id",y.user.id).eq("is_active",!0).maybeSingle();return T&&T.code!=="PGRST116"?(await be.auth.signOut(),{success:!1,error:"Access verification failed"}):M?{success:!0}:(await be.auth.signOut(),{success:!1,error:"Access denied. You do not have admin privileges."})}catch(y){return console.error("Admin login error:",y),{success:!1,error:"An unexpected error occurred"}}},[]),w=_.useCallback(async()=>{const{error:v}=await be.auth.signOut();v&&console.error("Failed to sign out from Supabase",v),i({session:null,user:null,isAdmin:!1,loading:!1}),c(null)},[]),N=_.useCallback(v=>{c(v)},[]),S=_.useMemo(()=>({session:u,user:h,isAdmin:p,loading:m,isLoading:m,currentUser:o,login:g,adminLogin:b,logout:w,updateUser:N}),[u,h,p,m,o,g,b,w,N]);return a.jsx(kb.Provider,{value:S,children:r})},Yp=({isOpen:r,onClose:s,onSubmit:i,title:o,message:c,confirmButtonText:u="Confirm",confirmButtonClass:h="bg-error text-white hover:bg-red-600"})=>r?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md p-8 relative",children:[a.jsx("button",{onClick:s,className:"absolute top-4 right-4 text-gray hover:text-charcoal",children:a.jsx(wt,{className:"w-7 h-7"})}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 mb-4",children:a.jsx("span",{className:"text-2xl",children:""})}),a.jsx("h2",{className:"font-sora text-2xl font-bold text-charcoal",children:o}),a.jsx("p",{className:"text-gray mt-2",children:c})]}),a.jsxs("div",{className:"mt-8 flex justify-center gap-4",children:[a.jsx("button",{onClick:s,className:"py-2.5 px-6 bg-gray-light text-charcoal font-semibold rounded-lg shadow-sm border border-gray-border hover:bg-gray-200 transition-colors",children:"Cancel"}),a.jsx("button",{onClick:i,className:`py-2.5 px-6 font-bold rounded-lg shadow-lg transition-colors ${h}`,children:u})]})]})}):null,Ns={totalMembers:128,activeMembers:112,pendingVerifications:9,openRequests:14,mrr:12450,monthlyChurnRate:2.3},lN=[{id:5,businessName:"All-State Clean Up",tier:"Founding Member",badgeRating:"B+",issue:"Docs missing"},{id:12,businessName:"Evergreen Environmental",tier:"Silver",badgeRating:"A",issue:"Past due"},{id:23,businessName:"Coastal Recovery Inc.",tier:"Gold",badgeRating:"A+",issue:"High churn risk"},{id:8,businessName:"Pioneer Restoration",tier:"Bronze",badgeRating:"A",issue:"Docs missing"},{id:15,businessName:"Metro Damage Control",tier:"Silver",badgeRating:"A+",issue:"Past due"}],oN=[{id:"REQ-1023",date:"Jul 28",businessName:"Acme Restoration",requestType:"Badge support",status:"Open",assignedTo:"Admin"},{id:"REQ-1024",date:"Jul 27",businessName:"Summit Clean & Dry",requestType:"SEO post",status:"In progress",assignedTo:"C. Team"},{id:"REQ-1025",date:"Jul 27",businessName:"Pioneer Restoration",requestType:"Spotlight article",status:"Open",assignedTo:"Unassigned"},{id:"REQ-1026",date:"Jul 26",businessName:"Metro Damage Control",requestType:"SEO post",status:"In progress",assignedTo:"C. Team"},{id:"REQ-1027",date:"Jul 25",businessName:"Coastal Recovery Inc.",requestType:"Badge support",status:"Open",assignedTo:"Admin"}],Ad=[{id:"mem_001",businessName:"Acme Restoration",city:"Dallas, TX",email:"owner@acmerestoration.com",tier:"Gold",rating:"A+",status:"Active",renewalDate:"2025-03-15",joinDate:"2024-01-10",mrr:497,pendingDocs:0,openRequests:2,documents:[{name:"Contractor License",status:"Approved"},{name:"Liability Insurance",status:"Approved"}],activityLog:[{event:'Request "Badge Support" created',date:"2024-07-28"},{event:"Plan changed to Gold",date:"2024-03-15"}],billingInfo:{stripeId:"cus_abc123",lastPayment:"2024-07-15",plan:"Gold Monthly"},stats:{profileViews:132,badgeClicks:24},badge:{status:"ACTIVE",badgeLabel:"Gold  A+",imageLightUrl:"https://example.com/acme-gold-a-plus-light.svg",imageDarkUrl:"https://example.com/acme-gold-a-plus-dark.svg",profileUrl:"https://restorationexpertise.com/profile/acme-restoration"}},{id:"mem_002",businessName:"Summit Clean & Dry",city:"Denver, CO",email:"contact@summitclean.com",tier:"Silver",rating:"A",status:"Active",renewalDate:"2025-08-20",joinDate:"2024-02-20",mrr:229,pendingDocs:0,openRequests:1,documents:[{name:"Contractor License",status:"Approved"},{name:"Liability Insurance",status:"Approved"}],activityLog:[{event:'Request "SEO Post" created',date:"2024-07-27"},{event:"Initial verification approved",date:"2024-02-22"}],billingInfo:{stripeId:"cus_def456",lastPayment:"2024-07-20",plan:"Silver Monthly"},stats:{profileViews:88,badgeClicks:12},badge:{status:"ACTIVE",badgeLabel:"Silver  A",imageLightUrl:"https://restorationexpertise.com/wp-content/uploads/2025/11/restorationexpertise_badge_3d_layingtra_shadow.webp",profileUrl:"https://restorationexpertise.com/profile/summit-clean-and-dry"}},{id:"mem_003",businessName:"Coastal Recovery Inc.",city:"Miami, FL",email:"dispatch@coastalrecovery.net",tier:"Gold",rating:"A+",status:"Suspended",renewalDate:"2025-06-01",joinDate:"2023-06-01",mrr:497,pendingDocs:1,openRequests:0,documents:[{name:"Contractor License",status:"Approved"},{name:"Liability Insurance",status:"Rejected"}],activityLog:[{event:"Account suspended due to failed payment.",date:"2024-07-25"}],billingInfo:{stripeId:"cus_ghi789",lastPayment:"2024-06-01",plan:"Gold Monthly"},stats:{profileViews:250,badgeClicks:45},badge:{status:"REVOKED",badgeLabel:"Gold  A+",imageLightUrl:"https://restorationexpertise.com/wp-content/uploads/2025/11/restorationexpertise_badge_3d_layingtra_shadow.webp",profileUrl:"https://restorationexpertise.com/profile/coastal-recovery-inc"}},{id:"mem_004",businessName:"Pioneer Restoration",city:"Austin, TX",email:"info@pioneertx.com",tier:"Bronze",rating:"B+",status:"Active",renewalDate:"2025-09-12",joinDate:"2024-03-12",mrr:159,pendingDocs:0,openRequests:0,documents:[{name:"Contractor License",status:"Approved"},{name:"Liability Insurance",status:"Approved"}],activityLog:[{event:"Profile updated",date:"2024-06-15"}],billingInfo:{stripeId:"cus_jkl012",lastPayment:"2024-07-12",plan:"Bronze Monthly"},stats:{profileViews:45,badgeClicks:5}},{id:"mem_005",businessName:"Evergreen Environmental",city:"Seattle, WA",email:"support@evergreenenv.com",tier:"Founding Member",rating:"A+",status:"Pending",renewalDate:"2025-01-30",joinDate:"2024-07-28",mrr:199,pendingDocs:2,openRequests:0,documents:[{name:"Contractor License",status:"Pending"},{name:"Liability Insurance",status:"Pending"}],activityLog:[{event:"Account created",date:"2024-07-28"}],billingInfo:{stripeId:"cus_mno345",lastPayment:"2024-07-28",plan:"Founding Monthly"},stats:{profileViews:0,badgeClicks:0},badge:{status:"PENDING",badgeLabel:"Founding Member  A+",imageLightUrl:"https://restorationexpertise.com/wp-content/uploads/2025/11/restorationexpertise_badge_3d_layingtra_shadow.webp",profileUrl:"https://restorationexpertise.com/profile/evergreen-environmental"}},{id:"mem_006",businessName:"Midwest Damage Repair",city:"Chicago, IL",email:"claims@midwestdr.com",tier:"Silver",rating:"A",status:"Canceled",renewalDate:"2024-07-31",joinDate:"2023-08-01",mrr:0,pendingDocs:0,openRequests:0,documents:[{name:"Contractor License",status:"Approved"},{name:"Liability Insurance",status:"Approved"}],activityLog:[{event:"Subscription canceled by user",date:"2024-07-10"}],billingInfo:{stripeId:"cus_pqr678",lastPayment:"2024-06-30",plan:"Silver Monthly"},stats:{profileViews:60,badgeClicks:8}}],Td=new Date;Td.setDate(Td.getDate()+29);const Rd=new Date;Rd.setDate(Rd.getDate()-60);Td.toISOString().split("T")[0],Rd.toISOString().split("T")[0];const Ts=new Date,xo=new Date(Ts);xo.setDate(xo.getDate()-1);const Od=new Date(Ts);Od.setDate(Od.getDate()-5);const bo=new Date(Ts);bo.setDate(bo.getDate()+7);const Dd=new Date(Ts);Dd.setDate(Dd.getDate()+14);bo.toISOString().split("T")[0],xo.toISOString().split("T")[0],bo.toISOString().split("T")[0],`${xo.toISOString().split("T")[0]}`,Ts.toISOString().split("T")[0],Dd.toISOString().split("T")[0],`${Ts.toISOString().split("T")[0]}`,Od.toISOString().split("T")[0];const cN=Ts.getMonth(),uN=Ts.getFullYear();Math.round(2500/12),new Date(uN,cN,2).toISOString().split("T")[0];const dN=[{id:"admin_001",name:"Max Bauer",email:"max@restorationexpertise.com",role:"Superadmin",status:"Active",lastLogin:"2025-02-20 14:32"},{id:"admin_002",name:"Sarah Lee",email:"sarah@restorationexpertise.com",role:"Support",status:"Active",lastLogin:"2025-02-19 09:12"},{id:"admin_003",name:"Alex King",email:"alex@restorationexpertise.com",role:"Content",status:"Suspended",lastLogin:"2025-01-31 17:45"}],hN=[{id:1,title:"Get your legal basics in place",level:"Foundation",chapter:"Business Setup",status:"completed",effort:"Deep work",details:{why:"Ensures your business is compliant from day one, protecting you from legal risks.",checklist:[{text:"Register business name"},{text:"Apply for EIN"},{text:"Open a business bank account"}]}},{id:2,title:"Define your service area",level:"Foundation",chapter:"Business Setup",status:"in_progress",effort:"Quick win",details:{why:"Focuses your marketing efforts and operational logistics, preventing overextension.",checklist:[{text:"Map primary 30-mile radius"},{text:"List target zip codes"}]}},{id:3,title:"Set up core software stack",level:"Foundation",chapter:"Operations",status:"completed",effort:"Deep work",details:{why:"The right software streamlines everything from job management to billing, saving you time and reducing errors.",checklist:[{text:"Choose a CRM"},{text:"Set up accounting software (e.g., QuickBooks)"},{text:"Establish file sharing (e.g., Google Drive)"}]}},{id:4,title:"Create initial pricing structure",level:"Foundation",chapter:"Finance",status:"not_started",effort:"Deep work",details:{why:"Clear pricing ensures profitability and simplifies the quoting process for your team and customers.",checklist:[{text:"Research competitor rates"},{text:"Create a price book for common services"}]}},{id:5,title:"Establish your brand identity",level:"Foundation",chapter:"Marketing",status:"completed",effort:"Quick win",details:{why:"A strong brand builds recognition and trust with potential customers.",checklist:[{text:"Design a professional logo"},{text:"Define brand colors and fonts"}]}},{id:6,title:"Launch your professional website",level:"Acceleration",chapter:"Marketing",status:"in_progress",effort:"Deep work",details:{why:"Your website is your digital storefront. It's often the first impression a customer has of your business.",checklist:[{text:"Buy a domain name"},{text:"Build essential pages (Home, About, Services, Contact)"},{text:"Ensure it is mobile-friendly"}]}},{id:7,title:"Optimize your Google Business Profile",level:"Acceleration",chapter:"Marketing",status:"not_started",effort:"Quick win",details:{why:"This is the most important tool for local SEO, driving phone calls and website visits from nearby customers.",checklist:[{text:"Fill out all sections completely"},{text:"Add high-quality photos"},{text:"Get your first 5 reviews"}]}},{id:8,title:"Implement a customer review system",level:"Acceleration",chapter:"Marketing",status:"not_started",effort:"Quick win",details:{why:"Consistent, positive reviews build social proof and are a major factor in customer decision-making.",checklist:[{text:"Choose a review request tool"},{text:"Create an email/SMS template"}]}},{id:9,title:"Start your first local SEO campaign",level:"Acceleration",chapter:"Marketing",status:"not_started",effort:"Deep work",details:{why:"SEO is a long-term investment that generates high-quality leads for free once it's established.",checklist:[{text:"Identify 10 primary keywords"},{text:"Optimize website service pages"}]}},{id:10,title:"Hire your first technician",level:"Acceleration",chapter:"Team",status:"not_started",effort:"Deep work",details:{why:"Hiring allows you to scale your operations and step away from doing all the hands-on work yourself.",checklist:[{text:"Write a detailed job description"},{text:"Post on relevant job boards"},{text:"Develop an onboarding plan"}]}},{id:11,title:"Develop a franchise model",level:"Empire & Legacy",chapter:"Scaling",status:"not_started",effort:"Deep work",details:{why:"Franchising allows for rapid expansion using other people's capital and management.",checklist:[{text:"Create a Franchise Disclosure Document (FDD)"},{text:"Systemize all operations into a playbook"}]}},{id:12,title:"Build a leadership team",level:"Empire & Legacy",chapter:"Team",status:"not_started",effort:"Deep work",details:{why:"A strong leadership team enables you to work ON the business, not IN it.",checklist:[{text:"Define key roles (Ops Manager, Sales Manager)"},{text:"Create a compensation and incentive plan"}]}},{id:13,title:"Expand to a second location",level:"Empire & Legacy",chapter:"Scaling",status:"not_started",effort:"Deep work",details:{why:"Expansion into new markets is a direct path to significant revenue growth.",checklist:[{text:"Conduct market research on a new territory"},{text:"Develop a launch plan and budget"}]}}];new Date(Date.now()-2880*60*1e3).toISOString(),new Date(Date.now()-7200*60*1e3).toISOString(),new Date(Date.now()-3600*1e3).toISOString();const fN=(r=1024)=>{const[s,i]=_.useState(window.innerWidth<r);return _.useEffect(()=>{const o=()=>{i(window.innerWidth<r)};return window.addEventListener("resize",o),()=>window.removeEventListener("resize",o)},[r]),s},vo=({children:r,className:s="",onClick:i})=>a.jsx("div",{onClick:i,className:`bg-[var(--bg-card)] p-6 rounded-2xl shadow-lg border border-[var(--border-subtle)] ${s} ${i?"cursor-pointer transition-transform duration-200 hover:-translatey-1":""}`,children:r}),Kp=99,Fp=({completedCount:r})=>{const s=Math.round(r/Kp*100),[i,o]=_.useState(0);_.useEffect(()=>{const u=setTimeout(()=>o(s),100);return()=>clearTimeout(u)},[s]);const c=()=>s===100?"Blueprint Master":s>=75?"Restoration Leader":s>=50?"Trusted Operator":s>=25?"Emerging Pro":"Getting Organized";return a.jsxs(vo,{children:[a.jsxs("div",{className:"flex flex-col md:flex-row justify-between md:items-center gap-4",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"font-playfair text-xl font-bold text-[var(--text-main)]",children:"Your Progress"}),a.jsxs("p",{className:"text-lg text-[var(--text-main)]",children:[a.jsxs("span",{className:"font-bold",children:[r," of ",Kp]})," steps completed  ",s,"%"]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-sm font-semibold text-[var(--text-muted)]",children:"Mastery Level"}),a.jsx("p",{className:"font-bold text-lg text-[var(--accent-dark)]",children:c()})]})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-4 mt-4",children:a.jsx("div",{className:"bg-[var(--accent)] h-4 rounded-full transition-all duration-1000 ease-out",style:{width:`${i}%`}})}),a.jsx("div",{className:"mt-4 flex flex-wrap items-center gap-x-4 gap-y-2 text-sm",children:a.jsxs("p",{children:["This week: ",a.jsx("span",{className:"font-bold",children:"3"})," steps completed (demo)"]})})]})},Qp=({groupedSteps:r,steps:s,selectedStepId:i,onSelectStep:o})=>{const[c,u]=_.useState({Foundation:!0}),h=g=>{u(b=>({...b,[g]:!b[g]}))},p={not_started:"bg-gray-200 text-gray-dark",in_progress:"bg-info/20 text-blue-800",completed:"bg-success/20 text-green-800"},m={"Quick win":"border-gold text-gold-dark","Deep work":"border-charcoal text-charcoal"};return a.jsx("div",{className:"space-y-6",children:Object.entries(r).map(([g,b])=>{const w=s.filter(v=>v.level===g),N=w.filter(v=>v.status==="completed").length,S=w.length>0?N/w.length*100:0;return a.jsxs(vo,{className:"p-0 overflow-hidden",children:[a.jsxs("button",{onClick:()=>h(g),className:"w-full p-4 flex justify-between items-center text-left",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-playfair text-xl font-bold text-[var(--text-main)]",children:g}),a.jsxs("p",{className:"text-sm text-[var(--text-muted)]",children:[N," of ",w.length," steps completed"]})]}),a.jsx(rn,{className:`w-6 h-6 text-[var(--text-muted)] transition-transform ${c[g]?"rotate-180":""}`})]}),c[g]&&a.jsxs("div",{className:"px-4 pb-4 animate-fade-in",children:[a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1.5 mb-4",children:a.jsx("div",{className:"bg-[var(--accent)] h-1.5 rounded-full",style:{width:`${S}%`}})}),Object.entries(b).map(([v,E])=>a.jsxs("div",{className:"mb-4",children:[a.jsx("h4",{className:"font-bold text-sm uppercase text-[var(--text-muted)] tracking-wider pb-1 mb-2 border-b border-[var(--border-subtle)]",children:v}),a.jsx("div",{className:"space-y-2",children:E.map(y=>a.jsxs("div",{onClick:()=>o(y.id),className:`p-3 rounded-lg cursor-pointer transition-all duration-200 flex items-start gap-3 ${i===y.id?"bg-[var(--accent-bg-subtle)] shadow-inner":"hover:bg-[var(--bg-subtle)]"}`,children:[a.jsx("div",{className:`w-6 h-6 rounded-full shrink-0 flex items-center justify-center font-bold text-xs mt-0.5 ${y.status==="completed"?"bg-[var(--accent)] text-[var(--accent-text)]":"bg-gray-200 text-gray-dark"}`,children:y.status==="completed"?a.jsx(vi,{className:"w-4 h-4"}):y.id}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-[var(--text-main)] leading-tight",children:y.title}),a.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[a.jsx("span",{className:`px-2 py-0.5 text-[10px] font-bold rounded-full ${p[y.status]}`,children:y.status.replace("_"," ")}),a.jsx("span",{className:`px-2 py-0.5 text-[10px] font-bold rounded-full border ${m[y.effort]}`,children:y.effort})]})]})]},y.id))})]},v))]})]},g)})})},Jp=({step:r,onUpdateStep:s})=>{const[i,o]=_.useState(""),[c,u]=_.useState({});if(_.useEffect(()=>{if(r){o("");const p=r.details.checklist.reduce((m,g)=>({...m,[g.text]:!1}),{});u(p)}},[r]),!r)return a.jsx(vo,{className:"flex items-center justify-center min-h-[400px]",children:a.jsxs("div",{className:"text-center",children:[a.jsx(Vd,{className:"w-16 h-16 mx-auto text-gray-300"}),a.jsx("h3",{className:"mt-2 text-xl font-bold text-[var(--text-main)]",children:"Select a step"}),a.jsx("p",{className:"mt-1 text-[var(--text-muted)]",children:"Choose a step from the list to see details and track your progress."})]})});const h=["not_started","in_progress","completed"];return a.jsxs(vo,{children:[a.jsxs("p",{className:"text-sm font-bold text-[var(--accent-dark)]",children:[r.level," / ",r.chapter]}),a.jsxs("h2",{className:"font-playfair text-3xl font-bold text-[var(--text-main)] mt-1",children:["Step ",r.id,": ",r.title]}),a.jsxs("div",{className:"mt-6",children:[a.jsx("p",{className:"text-sm font-semibold text-[var(--text-muted)] mb-2",children:"Set status:"}),a.jsx("div",{className:"flex bg-[var(--bg-subtle)] p-1 rounded-lg",children:h.map(p=>a.jsx("button",{onClick:()=>s(r.id,p),className:`flex-1 py-2 text-sm font-bold rounded-md transition-all ${r.status===p?"bg-[var(--accent)] text-[var(--accent-text)] shadow-sm":"text-[var(--text-muted)] hover:bg-white/50"}`,children:p.replace("_"," ")},p))})]}),a.jsxs("div",{className:"mt-6 pt-6 border-t border-[var(--border-subtle)]",children:[a.jsx("h4",{className:"font-bold text-[var(--text-main)] mb-2",children:"Why this matters"}),a.jsx("p",{className:"text-[var(--text-muted)] text-sm",children:r.details.why})]}),a.jsxs("div",{className:"mt-6 pt-6 border-t border-[var(--border-subtle)]",children:[a.jsx("h4",{className:"font-bold text-[var(--text-main)] mb-2",children:"Checklist"}),a.jsx("div",{className:"space-y-2",children:r.details.checklist.map(p=>a.jsxs("label",{className:"flex items-center gap-3 p-2 rounded-md hover:bg-[var(--bg-subtle)]",children:[a.jsx("input",{type:"checkbox",checked:c[p.text]||!1,onChange:m=>u({...c,[p.text]:m.target.checked}),className:"h-5 w-5 rounded border-gray-300 text-[var(--accent)] focus:ring-[var(--accent)]"}),a.jsx("span",{className:`text-sm ${c[p.text]?"line-through text-[var(--text-muted)]":"text-[var(--text-main)]"}`,children:p.text})]},p.text))})]}),a.jsxs("div",{className:"mt-6 pt-6 border-t border-[var(--border-subtle)]",children:[a.jsx("h4",{className:"font-bold text-[var(--text-main)] mb-2",children:"My notes for this step"}),a.jsx("textarea",{value:i,onChange:p=>o(p.target.value),rows:4,className:"w-full p-2 border border-[var(--border-subtle)] rounded-lg bg-[var(--bg-input)] focus:ring-[var(--accent)] focus:border-[var(--accent)]",placeholder:"Add any personal notes, reminders, or links here..."}),a.jsx("div",{className:"text-right mt-2",children:a.jsx("button",{className:"py-2 px-4 bg-[var(--accent)] text-[var(--accent-text)] font-bold text-sm rounded-lg shadow-sm",children:"Save Note"})})]})]})},mN=({isOpen:r,onClose:s,children:i})=>(_.useEffect(()=>(r?document.body.style.overflow="hidden":document.body.style.overflow="auto",()=>{document.body.style.overflow="auto"}),[r]),r?a.jsxs("div",{className:"fixed inset-0 z-50 flex flex-col items-end",role:"dialog","aria-modal":"true",children:[a.jsx("div",{className:"absolute inset-0 bg-[var(--bg-overlay)] animate-fade-in",onClick:s}),a.jsxs("div",{className:"relative w-full bg-[var(--bg-main)] rounded-t-2xl shadow-2xl h-[85vh] flex flex-col animate-slide-up-drawer",children:[a.jsxs("div",{className:"shrink-0 p-4 border-b border-[var(--border-subtle)] bg-[var(--bg-card)] rounded-t-2xl",children:[a.jsx("div",{className:"w-12 h-1.5 bg-[var(--border-subtle)] rounded-full mx-auto mb-2"}),a.jsx("button",{onClick:s,className:"absolute top-3 right-3 p-1 text-[var(--text-muted)] hover:text-[var(--text-main)]",children:a.jsx(wt,{className:"w-7 h-7"})})]}),a.jsx("div",{className:"flex-grow overflow-y-auto p-4",children:i})]})]}):null),gN=({onNavigate:r})=>{const s=fN(),[i,o]=_.useState(hN),[c,u]=_.useState(null),h=_.useMemo(()=>i.filter(S=>S.status==="completed").length,[i]),p=_.useMemo(()=>i.reduce((S,v)=>(S[v.level]||(S[v.level]={}),S[v.level][v.chapter]||(S[v.level][v.chapter]=[]),S[v.level][v.chapter].push(v),S),{}),[i]),m=(S,v)=>{o(E=>E.map(y=>y.id===S?{...y,status:v}:y))},g=S=>{u(S)},b=()=>{u(null)},w=_.useMemo(()=>i.find(S=>S.id===c)||null,[i,c]),N=s&&c!==null;return a.jsxs("div",{className:"animate-fade-in",children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("h1",{className:"font-playfair text-4xl font-bold text-[var(--text-main)]",children:"99 Steps Blueprint"}),a.jsx("p",{className:"mt-2 text-lg text-[var(--text-muted)]",children:"Your step-by-step roadmap to building a dominant restoration business."})]}),s?a.jsxs(a.Fragment,{children:[a.jsx(Qp,{groupedSteps:p,steps:i,selectedStepId:c,onSelectStep:g}),a.jsx("div",{className:"mt-8",children:a.jsx(Fp,{completedCount:h})}),a.jsx(mN,{isOpen:N,onClose:b,children:a.jsx(Jp,{step:w,onUpdateStep:m})})]}):a.jsxs(a.Fragment,{children:[a.jsx(Fp,{completedCount:h}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 items-start mt-8",children:[a.jsx("div",{className:"lg:col-span-1",children:a.jsx(Qp,{groupedSteps:p,steps:i,selectedStepId:c,onSelectStep:g})}),a.jsx("div",{className:"lg:col-span-2 sticky top-8",children:a.jsx(Jp,{step:w,onUpdateStep:m})})]})]})]})},Cb=_.createContext(null),pN=()=>{if(typeof window<"u"){const r=window.localStorage.getItem("re_theme");if(r==="light"||r==="dark")return r;if(window.matchMedia("(prefers-color-scheme: dark)").matches)return"dark"}return"light"},xN=({children:r})=>{const[s,i]=_.useState(pN);_.useEffect(()=>{document.documentElement.setAttribute("data-theme",s),localStorage.setItem("re_theme",s)},[s]);const o=_.useMemo(()=>({theme:s,setTheme:i}),[s]);return a.jsx(Cb.Provider,{value:o,children:r})},bN=()=>{const r=_.useContext(Cb);if(!r)throw new Error("useTheme must be used within a ThemeProvider");return r},yo=({variant:r})=>{const{theme:s,setTheme:i}=bN(),o=()=>{i(s==="light"?"dark":"light")};return r==="icon"?a.jsx("button",{onClick:o,className:"p-2 rounded-full text-[var(--text-muted)] hover:bg-[var(--bg-subtle)]","aria-label":s==="light"?"Switch to dark mode":"Switch to light mode",children:s==="light"?a.jsx(xp,{className:"w-5 h-5"}):a.jsx(pp,{className:"w-5 h-5"})}):r==="row"?a.jsxs("div",{className:"px-4",children:[a.jsx("p",{className:"text-xs font-semibold text-[var(--text-muted)] mb-2",children:"Appearance"}),a.jsxs("div",{className:"flex bg-[var(--bg-subtle)] p-1 rounded-lg",children:[a.jsxs("button",{onClick:()=>i("light"),className:`flex-1 py-1.5 text-sm font-semibold rounded-md flex items-center justify-center gap-2 transition-colors ${s==="light"?"bg-[var(--bg-card)] text-[var(--text-main)] shadow-sm":"text-[var(--text-muted)]"}`,children:[a.jsx(pp,{className:"w-4 h-4"})," Light"]}),a.jsxs("button",{onClick:()=>i("dark"),className:`flex-1 py-1.5 text-sm font-semibold rounded-md flex items-center justify-center gap-2 transition-colors ${s==="dark"?"bg-[var(--bg-card)] text-[var(--text-main)] shadow-sm":"text-[var(--text-muted)]"}`,children:[a.jsx(xp,{className:"w-4 h-4"})," Dark"]})]})]}):null},Na=({icon:r,label:s,isActive:i,onClick:o,attention:c})=>a.jsxs("button",{onClick:o,className:`flex items-center w-full px-4 py-3 rounded-lg text-left transition-colors duration-200 relative ${i?"bg-[var(--accent-bg-subtle)] text-[var(--accent-dark)] font-bold":"text-[var(--text-muted)] hover:bg-[var(--bg-subtle)] hover:text-[var(--text-main)]"}`,children:[i&&a.jsx("div",{className:"absolute left-0 top-0 h-full w-1 bg-[var(--accent)] rounded-r-full"}),a.jsx("div",{className:`ml-2 ${i?"text-[var(--accent-dark)]":""}`,children:r}),a.jsx("span",{className:"ml-3",children:s}),c&&a.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 w-2 h-2 bg-error rounded-full animate-pulse"})]}),ve=({children:r,className:s="",onClick:i})=>a.jsx("div",{onClick:i,className:`bg-[var(--bg-card)] p-6 rounded-2xl shadow-lg border border-[var(--border-subtle)] ${s} ${i?"cursor-pointer transition-transform duration-200 hover:-translate-y-1":""}`,children:r}),vN={NewspaperIcon:Co,MagnifyingGlassIcon:fr,ShieldCheckIcon:_t,ArrowDownTrayIcon:As,ArrowTrendingUpIcon:Tw,StarIcon:Ao,CreditCardIcon:lr,CheckCircleIcon:Gt,ClockIcon:Si,ExclamationTriangleIcon:_a,ChartBarIcon:kx,ChatBubbleOvalLeftEllipsisIcon:To,ClipboardIcon:Sa,LightBulbIcon:Gd,BriefcaseIcon:ko,KeyIcon:Ox},eo=r=>{if(!r)return null;if(typeof r=="object")return r;if(typeof r=="string")try{return JSON.parse(r)}catch(s){return console.warn("Failed to parse JSON payload",s),null}return null},Cs=r=>{if(!r)return null;const s=new Date(r);return Number.isNaN(s.getTime())?r:s.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},lo=r=>{if(!r)return null;const s=new Date(r);return Number.isNaN(s.getTime())?r:s.toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit"})},to=r=>{if(!r)return"Just now";const s=new Date(r);if(Number.isNaN(s.getTime()))return r;const i=Date.now()-s.getTime(),o=Math.floor(i/(1e3*60));if(o<1)return"Just now";if(o<60)return`${o} minute${o===1?"":"s"} ago`;const c=Math.floor(o/60);if(c<24)return`${c} hour${c===1?"":"s"} ago`;const u=Math.floor(c/24);return u<7?`${u} day${u===1?"":"s"} ago`:Cs(r)??r},yN=r=>{if(r==null)return null;if(typeof r=="number")return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(r);const s=Number(r);return Number.isNaN(s)?r:new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(s)},ah=r=>{if(r==null)return null;if(typeof r=="string"){const c=Number(r);return Number.isNaN(c)?r:ah(c)}if(r===0)return"0 B";const s=["B","KB","MB","GB"],i=Math.min(Math.floor(Math.log(r)/Math.log(1024)),s.length-1),o=r/1024**i;return`${o.toFixed(o>=10?0:1)} ${s[i]}`},Xp=r=>!!(r&&typeof r=="object"&&"code"in r),Wp={business_license:"Business License",license:"Business License",liability_insurance:"Proof of Liability Insurance",insurance:"Proof of Liability Insurance",w9:"W-9 Form",other:"Supporting Document"},wN=r=>{if(!r)return"Document";const s=r.toLowerCase();return Wp[s]?Wp[s]:r.replace(/[-_]+/g," ").replace(/\b\w/g,i=>i.toUpperCase())},Zp=r=>{const s=r==null?void 0:r.toLowerCase();return s?s.includes("active")||s.includes("verified")?"active":s.includes("action")||s.includes("needs")?"actionRequired":"pending":"pending"},jN=r=>{const s=r==null?void 0:r.toLowerCase();return s?s.includes("approve")||s.includes("valid")?"approved":s.includes("review")||s.includes("pending")?"underReview":s.includes("reject")||s.includes("declin")?"rejected":s.includes("replace")||s.includes("expire")||s.includes("update")?"needsReplacement":"notUploaded":"notUploaded"},Ab=r=>{const s=(r==null?void 0:r.toLowerCase())??"";return s.includes("progress")?"in_progress":s.includes("complete")||s.includes("done")?"completed":s.includes("cancel")?"canceled":"open"},Tb=r=>{const s=(r==null?void 0:r.toLowerCase())??"";return s.includes("high")?"high":s.includes("low")?"low":"medium"},Ss={open:"Open",in_progress:"In progress",completed:"Completed",canceled:"Canceled"},wo={low:"Low",medium:"Medium",high:"High"},NN=r=>{const s=Ab(r);return Ss[s]},hi=r=>r?vN[r]??_t:_t,jo=r=>{if(!r)return Sa;const s=r.toLowerCase();return s.includes("blog")?Co:s.includes("spotlight")?Ao:s.includes("review")?fr:s.includes("badge")?_t:s.includes("consult")?To:Sa},_N=r=>{const s=r.uploaded_at??r.created_at??r.updated_at??null,i=r.doc_type??r.document_type??null,o=r.document_name??wN(i??void 0),c=r.file_url??null,u=r.file_name??(c?c.split("/").pop()??null:null);return{id:r.id,name:o,docType:i,docTypeLabel:o,status:jN(r.status),uploadDate:Cs(s),adminNote:r.admin_note??null,fileName:u??o,fileSize:ah(r.file_size),uploadTimestamp:lo(s),rawTimestamp:s,fileUrl:c,storagePath:c,createdAt:r.created_at??null,updatedAt:r.updated_at??null,statusText:r.status??null}},SN=r=>{const s=Tb(r.priority);return{id:String(r.id),service:r.request_type??r.service??"Service Request",title:r.title??"Untitled Request",status:NN(r.status),createdAt:r.created_at??r.updated_at??null,priority:wo[s]}},EN=r=>({id:String(r.id),profileId:r.profile_id??"",requestType:r.request_type??r.service??"Service Request",title:r.title??"Untitled Request",description:r.description??null,priority:Tb(r.priority),status:Ab(r.status),adminNotes:r.admin_notes??null,assignedAdminId:r.assigned_admin_id!==null&&r.assigned_admin_id!==void 0?String(r.assigned_admin_id):null,createdAt:r.created_at??new Date().toISOString(),updatedAt:r.updated_at??null}),kN=r=>({id:String(r.id),serviceRequestId:String(r.service_request_id??""),actorUserId:r.actor_user_id??null,action:r.action??null,description:r.description??null,createdAt:r.created_at??new Date().toISOString(),actorName:r.actor_name??null}),nr={open:"bg-gray-200 text-gray-800",in_progress:"bg-info/20 text-blue-800",completed:"bg-success/20 text-green-800",canceled:"bg-gray-200 text-gray-500"},Md={low:"bg-gray-100 text-gray-700",medium:"bg-gray-200 text-gray-800",high:"bg-error/20 text-error"},CN=({status:r,verificationValidUntil:s,verificationRating:i,onNavigate:o})=>{const h={active:{title:"Verified Restoration Expertise Member",text:"Your badge is live and visible to homeowners.",subtext:[s?`Valid until: ${s}`:null,i?`Rating: ${i}`:null].filter(Boolean).join("  ")||null,buttonText:"View Badge",buttonAction:()=>o("badge"),Icon:Gt,color:"success"},pending:{title:"Verification in Progress",text:"We are reviewing your documents. This typically takes 1 to 3 business days.",subtext:null,buttonText:"View Documents",buttonAction:()=>o("documents"),Icon:Si,color:"warning"},actionRequired:{title:"Action required to get verified",text:"Some documents or profile details are missing.",subtext:null,buttonText:"Complete Profile",buttonAction:()=>o("profile"),Icon:_a,color:"error"}}[r],m={success:{bg:"bg-success/5",border:"border-success/20",text:"text-success",iconBg:"bg-success/10"},warning:{bg:"bg-warning/5",border:"border-warning/20",text:"text-warning",iconBg:"bg-warning/10"},error:{bg:"bg-error/5",border:"border-error/20",text:"text-error",iconBg:"bg-error/10"}}[h.color];return a.jsxs("div",{className:`p-6 rounded-2xl shadow-md border ${m.bg} ${m.border} flex flex-col sm:flex-row items-start sm:items-center gap-4 sm:gap-6`,children:[a.jsx("div",{className:`p-3 rounded-full ${m.iconBg} ${m.text}`,children:a.jsx(h.Icon,{className:"w-8 h-8"})}),a.jsxs("div",{className:"flex-grow",children:[a.jsx("h2",{className:"font-playfair text-xl sm:text-2xl font-bold text-[var(--text-main)]",children:h.title}),a.jsx("p",{className:"text-[var(--text-muted)] mt-1",children:h.text}),h.subtext&&a.jsx("p",{className:"text-sm text-[var(--text-muted)] mt-2",children:h.subtext})]}),a.jsx("button",{onClick:h.buttonAction,className:"w-full sm:w-auto mt-2 sm:mt-0 py-2.5 px-6 bg-[var(--accent)] text-[var(--accent-text)] font-bold rounded-lg shadow-md hover:bg-[var(--accent-light)] transition-transform transform hover:scale-105",children:h.buttonText})]})},ao=({icon:r,title:s,value:i,label:o})=>a.jsxs(ve,{className:"transition-transform transform hover:-translate-y-1",children:[a.jsxs("div",{className:"flex items-center text-[var(--accent-dark)] mb-2",children:[r,a.jsx("h3",{className:"ml-2 text-sm font-semibold uppercase tracking-wide text-[var(--text-muted)]",children:s})]}),a.jsx("p",{className:"font-playfair text-3xl sm:text-4xl font-bold text-[var(--text-main)]",children:i}),o&&a.jsx("p",{className:"text-sm text-[var(--text-muted)]",children:o})]}),AN=({data:r,onNavigate:s,onNewRequest:i})=>{const o=({icon:h,label:p,onClick:m})=>a.jsxs("button",{onClick:m,className:"bg-[var(--accent)] text-[var(--accent-text)] font-bold rounded-lg p-4 flex flex-col items-center justify-center text-center transition-colors hover:bg-[var(--accent-dark)] h-28",children:[a.jsx(h,{className:"w-8 h-8 mb-2"}),a.jsx("span",{className:"text-sm",children:p})]}),c=r??{status:"pending",verificationValidUntil:null,verificationRating:null,stats:{profileViewsValue:null,profileViewsPeriod:null,badgeClicksValue:null,badgeClicksPeriod:null,planName:null,planPrice:null,nextRenewal:null},benefits:{description:null,items:[]},activityLog:[]},u=h=>h==null?"0":typeof h=="number"?h.toLocaleString():h;return a.jsxs("div",{className:"space-y-8 animate-fade-in",children:[a.jsx(CN,{status:c.status,verificationValidUntil:c.verificationValidUntil,verificationRating:c.verificationRating,onNavigate:s}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[a.jsx(ao,{icon:a.jsx(or,{className:"w-5 h-5"}),title:"Profile Views",value:u(c.stats.profileViewsValue),label:c.stats.profileViewsPeriod??"Last 30 days"}),a.jsx(ao,{icon:a.jsx(Eo,{className:"w-5 h-5"}),title:"Badge Clicks",value:u(c.stats.badgeClicksValue),label:c.stats.badgeClicksPeriod??"Last 30 days"}),a.jsx(ao,{icon:a.jsx(lr,{className:"w-5 h-5"}),title:"Current Plan",value:c.stats.planName??"",label:c.stats.planPrice??""}),a.jsx(ao,{icon:a.jsx(Ow,{className:"w-5 h-5"}),title:"Next Renewal",value:c.stats.nextRenewal??""})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[a.jsxs(ve,{className:"lg:col-span-2",children:[a.jsx("h2",{className:"font-playfair text-2xl font-bold text-[var(--text-main)] mb-1",children:"Your Benefits"}),a.jsx("p",{className:"text-[var(--text-muted)] mb-6",children:c.benefits.description??"Your current plan gives you access to premium features to boost your online presence and credibility."}),a.jsxs("ul",{className:"space-y-4",children:[c.benefits.items.map((h,p)=>{const m=h.Icon??_t;return a.jsxs("li",{className:"flex items-center",children:[a.jsx("div",{className:"bg-[var(--accent-bg-subtle)] text-[var(--accent-dark)] p-2 rounded-full mr-4",children:a.jsx(m,{className:"w-5 h-5"})}),a.jsxs("div",{className:"flex-grow",children:[a.jsx("p",{className:"font-semibold text-[var(--text-main)]",children:h.name}),h.progress&&a.jsx("p",{className:"text-sm text-[var(--text-muted)]",children:h.progress})]})]},p)}),c.benefits.items.length===0&&a.jsx("li",{className:"text-[var(--text-muted)]",children:"No benefits found for your membership yet."})]}),a.jsx("div",{className:"text-right mt-6",children:a.jsx("button",{onClick:()=>s("benefits"),className:"font-semibold text-[var(--accent-dark)] hover:underline",children:"View full benefits "})})]}),a.jsxs(ve,{children:[a.jsx("h2",{className:"font-playfair text-2xl font-bold text-[var(--text-main)] mb-6",children:"Quick Actions"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsx(o,{icon:As,label:"Download Badge",onClick:()=>s("badge")}),a.jsx(o,{icon:Ya,label:"Edit Profile",onClick:()=>s("profile")}),a.jsx(o,{icon:lr,label:"Manage Billing",onClick:()=>s("billing")}),a.jsx(o,{icon:Rw,label:"Request Service",onClick:i})]})]})]}),a.jsxs(ve,{children:[a.jsx("h2",{className:"font-playfair text-2xl font-bold text-[var(--text-main)] mb-4",children:"Recent Activity"}),a.jsxs("ul",{className:"divide-y divide-[var(--border-subtle)]",children:[c.activityLog.map((h,p)=>{const m=h.Icon??Sa;return a.jsxs("li",{className:"py-4 flex items-center",children:[a.jsx("div",{className:"bg-[var(--bg-subtle)] p-3 rounded-full mr-4 text-[var(--text-muted)]",children:a.jsx(m,{className:"w-5 h-5"})}),a.jsx("div",{className:"flex-grow",children:a.jsx("p",{className:"text-[var(--text-main)]",children:h.description})}),a.jsx("p",{className:"text-sm text-[var(--text-muted)] ml-4 text-right whitespace-nowrap",children:h.timestamp})]},p)}),c.activityLog.length===0&&a.jsx("li",{className:"py-4 text-[var(--text-muted)]",children:"No recent activity yet. Start by submitting a service request or uploading documents."})]})]})]})},TN=({onNewRequest:r,showToast:s,refreshKey:i})=>{var I;const{session:o}=nt(),[c,u]=_.useState([]),[h,p]=_.useState({}),[m,g]=_.useState(!1),[b,w]=_.useState(null),[N,S]=_.useState(""),[v,E]=_.useState("all"),[y,C]=_.useState("All"),[M,T]=_.useState(null),z=[{value:"all",label:"All statuses"},{value:"open",label:Ss.open},{value:"in_progress",label:Ss.in_progress},{value:"completed",label:Ss.completed},{value:"canceled",label:Ss.canceled}],U=_.useMemo(()=>{const k=new Set;return c.forEach(F=>{F.requestType&&k.add(F.requestType)}),["All",...Array.from(k)]},[c]),X=_.useMemo(()=>c.reduce((k,F)=>(k[F.status]=(k[F.status]??0)+1,k),{open:0,in_progress:0,completed:0,canceled:0}),[c]),B=_.useMemo(()=>{const k=N.trim().toLowerCase();return c.filter(F=>{const R=k.length===0||F.title.toLowerCase().includes(k)||F.id.toLowerCase().includes(k),Y=v==="all"||F.status===v,ne=y==="All"||F.requestType===y;return R&&Y&&ne})},[c,N,v,y]),se=_.useMemo(()=>M?c.find(k=>k.id===M)??null:null,[c,M]),ee=se?h[se.id]??[]:[],te=_.useCallback(async()=>{var k;if(!((k=o==null?void 0:o.user)!=null&&k.id)){u([]),p({});return}g(!0);try{const{data:F,error:R}=await be.from("service_requests").select("id, profile_id, request_type, service, title, description, priority, status, admin_notes, assigned_admin_id, created_at, updated_at").eq("profile_id",o.user.id).order("created_at",{ascending:!1});if(R)throw R;const Y=F??[],ne=Array.from(new Set(Y.map(K=>K.assigned_admin_id).filter(K=>K!=null))).map(K=>String(K));let re=[];if(ne.length>0){const{data:K,error:ae}=await be.from("admin_profiles").select("id, user_id, display_name, email").in("id",ne);ae?console.error("Failed to load assigned admin details",ae):re=K??[]}const xe=new Map(re.map(K=>[String(K.id),K.display_name??K.email??String(K.id)])),O=new Map(re.filter(K=>!!K.user_id).map(K=>[K.user_id,K.display_name??K.email??K.user_id])),H=Y.map(K=>{const ae=EN(K);return{...ae,assignedAdminName:ae.assignedAdminId?xe.get(String(ae.assignedAdminId))??null:null}});u(H);const G=Y.map(K=>K.id).filter(K=>K!=null);if(G.length>0){const{data:K,error:ae}=await be.from("service_request_activity").select("*").in("service_request_id",G).order("created_at",{ascending:!1});if(ae)console.error("Failed to load service request activity",ae),p({});else{const ie=K??[],ue=new Set;if(ie.forEach(De=>{const Ve=De.actor_user_id;Ve&&!O.has(Ve)&&ue.add(Ve)}),ue.size>0){const{data:De,error:Ve}=await be.from("admin_profiles").select("user_id, display_name, email").in("user_id",Array.from(ue));Ve?console.error("Failed to load activity actor details",Ve):(De??[]).forEach(Yt=>{Yt.user_id&&O.set(Yt.user_id,Yt.display_name??Yt.email??Yt.user_id)})}const Ae={};ie.forEach(De=>{const Ve=kN(De);if(!Ve.actorName&&Ve.actorUserId){const ga=O.get(Ve.actorUserId);ga&&(Ve.actorName=ga)}Ve.serviceRequestId&&(Ae[Ve.serviceRequestId]||(Ae[Ve.serviceRequestId]=[]),Ae[Ve.serviceRequestId].push(Ve))}),p(Ae)}}else p({});w(null)}catch(F){console.error("Failed to load service requests",F),w("We were unable to load your service requests. Please try again."),u([]),p({})}finally{g(!1)}},[(I=o==null?void 0:o.user)==null?void 0:I.id]);_.useEffect(()=>{te()},[te,i]);const ce=k=>{(k==="all"||k==="open"||k==="in_progress"||k==="completed"||k==="canceled")&&E(k)},J=()=>{te()};return a.jsxs(a.Fragment,{children:[se&&a.jsx(FN,{request:se,activities:ee,onClose:()=>T(null)}),a.jsxs("div",{className:"animate-fade-in space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"font-playfair text-4xl font-bold text-[var(--text-main)]",children:"My Service Requests"}),a.jsx("p",{className:"mt-2 text-lg text-[var(--text-muted)]",children:"Track every request you have submitted and see updates from our team in one place."})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 w-full sm:w-auto",children:[a.jsx("button",{onClick:J,className:"py-2.5 px-6 bg-[var(--bg-card)] border border-[var(--border-subtle)] rounded-lg font-semibold text-[var(--text-main)] hover:bg-[var(--bg-subtle)]",children:"Refresh"}),a.jsx("button",{onClick:r,className:"py-2.5 px-6 bg-[var(--accent)] text-[var(--accent-text)] font-bold rounded-lg shadow-md hover:bg-[var(--accent-light)] whitespace-nowrap",children:"New Request"})]})]}),a.jsxs("div",{className:"bg-[var(--bg-card)] p-3 rounded-xl shadow-md border border-[var(--border-subtle)] flex flex-wrap items-center justify-center sm:justify-start gap-x-6 gap-y-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-[var(--text-muted)]",children:"Open:"}),a.jsx("span",{className:`px-2.5 py-1 text-sm font-bold rounded-full ${nr.open}`,children:X.open})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-[var(--text-muted)]",children:"In Progress:"}),a.jsx("span",{className:`px-2.5 py-1 text-sm font-bold rounded-full ${nr.in_progress}`,children:X.in_progress})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-[var(--text-muted)]",children:"Completed:"}),a.jsx("span",{className:`px-2.5 py-1 text-sm font-bold rounded-full ${nr.completed}`,children:X.completed})]})]}),a.jsxs(ve,{className:"p-4 space-y-4",children:[b&&a.jsx("div",{className:"rounded-lg border border-error/40 bg-error/10 px-4 py-3 text-sm text-error",children:b}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"relative md:col-span-1",children:[a.jsx(fr,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-[var(--text-muted)]"}),a.jsx("input",{type:"text",placeholder:"Search by title or request ID...",value:N,onChange:k=>S(k.target.value),className:"w-full pl-10 pr-4 py-2 border border-[var(--border-subtle)] rounded-lg bg-[var(--bg-subtle)] focus:ring-[var(--accent)] focus:border-[var(--accent)]"})]}),a.jsxs("div",{className:"md:col-span-2 grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsx("select",{value:v,onChange:k=>ce(k.target.value),className:"w-full p-2 border border-[var(--border-subtle)] rounded-lg bg-[var(--bg-subtle)] focus:ring-[var(--accent)] focus:border-[var(--accent)]",children:z.map(k=>a.jsx("option",{value:k.value,children:k.label},k.value))}),a.jsx("select",{value:y,onChange:k=>C(k.target.value),className:"w-full p-2 border border-[var(--border-subtle)] rounded-lg bg-[var(--bg-subtle)] focus:ring-[var(--accent)] focus:border-[var(--accent)]",children:U.map(k=>a.jsx("option",{value:k,children:k},k))})]})]})]}),m&&c.length===0?a.jsx(ve,{children:a.jsxs("div",{className:"flex items-center justify-center gap-3 py-12 text-[var(--text-muted)]",children:[a.jsx("span",{className:"h-3 w-3 animate-pulse rounded-full bg-[var(--accent)]"}),"Loading your service requests..."]})}):B.length>0?a.jsxs(ve,{className:"p-0 overflow-hidden",children:[a.jsx("div",{className:"overflow-x-auto hidden md:block",children:a.jsxs("table",{className:"min-w-full",children:[a.jsx("thead",{className:"bg-[var(--bg-subtle)]",children:a.jsxs("tr",{className:"border-b border-[var(--border-subtle)]",children:[a.jsx("th",{className:"py-3 px-4 text-left text-sm font-semibold text-[var(--text-muted)]",children:"Created"}),a.jsx("th",{className:"py-3 px-4 text-left text-sm font-semibold text-[var(--text-muted)]",children:"Request"}),a.jsx("th",{className:"py-3 px-4 text-left text-sm font-semibold text-[var(--text-muted)]",children:"Status"}),a.jsx("th",{className:"py-3 px-4 text-left text-sm font-semibold text-[var(--text-muted)]",children:"Priority"}),a.jsx("th",{className:"py-3 px-4 text-left text-sm font-semibold text-[var(--text-muted)]",children:"Admin Notes"}),a.jsx("th",{className:"py-3 px-4 text-right text-sm font-semibold text-[var(--text-muted)]",children:"Actions"})]})}),a.jsx("tbody",{className:"divide-y divide-[var(--border-subtle)]",children:B.map(k=>{const F=jo(k.requestType);return a.jsxs("tr",{className:"cursor-pointer hover:bg-[var(--bg-subtle)]",onClick:()=>T(k.id),children:[a.jsx("td",{className:"py-3 px-4 text-[var(--text-main)] whitespace-nowrap",children:Cs(k.createdAt)??""}),a.jsx("td",{className:"py-3 px-4 text-[var(--text-main)]",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(F,{className:"w-5 h-5 text-[var(--text-muted)]"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:k.title}),a.jsx("p",{className:"text-xs text-[var(--text-muted)]",children:k.requestType})]})]})}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:`px-3 py-1 text-xs font-bold rounded-full ${nr[k.status]}`,children:Ss[k.status]})}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:`px-3 py-1 text-xs font-semibold rounded-full ${Md[k.priority]}`,children:wo[k.priority]})}),a.jsx("td",{className:"py-3 px-4 text-sm text-[var(--text-muted)] max-w-xs truncate",children:k.adminNotes??""}),a.jsx("td",{className:"py-3 px-4 text-right",children:a.jsx("button",{onClick:R=>{R.stopPropagation(),T(k.id)},className:"p-2 text-[var(--text-muted)] hover:text-[var(--accent-dark)]",children:a.jsx(or,{className:"w-5 h-5"})})})]},k.id)})})]})}),a.jsx("div",{className:"md:hidden divide-y divide-[var(--border-subtle)]",children:B.map(k=>{const F=jo(k.requestType);return a.jsxs("div",{className:"p-4 space-y-3",onClick:()=>T(k.id),children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-[var(--text-main)]",children:[a.jsx(F,{className:"w-5 h-5 text-[var(--text-muted)]"}),k.requestType]}),a.jsx("p",{className:"mt-2 font-bold text-lg text-[var(--text-main)]",children:k.title})]}),a.jsx("span",{className:`px-3 py-1 text-xs font-bold rounded-full ${nr[k.status]}`,children:Ss[k.status]})]}),a.jsx("p",{className:"text-sm text-[var(--text-muted)]",children:Cs(k.createdAt)??""}),a.jsx("p",{className:"text-sm text-[var(--text-muted)] line-clamp-2",children:k.adminNotes??"No admin notes yet."}),a.jsxs("div",{className:"flex justify-between items-center text-sm text-[var(--text-muted)]",children:[a.jsx("span",{className:`px-2 py-1 rounded-full ${Md[k.priority]} font-semibold`,children:wo[k.priority]}),a.jsx("button",{className:"font-semibold text-[var(--accent-dark)] hover:underline",children:"View details "})]})]},k.id)})})]}):a.jsx(ve,{children:a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Sa,{className:"w-16 h-16 mx-auto text-gray-300"}),a.jsx("h3",{className:"mt-4 text-xl font-bold text-[var(--text-main)]",children:"No requests yet"}),a.jsx("p",{className:"mt-1 text-[var(--text-muted)]",children:N||v!=="all"||y!=="All"?"Try adjusting your filters to see more results.":"Submit your first request to get help from our team."}),a.jsx("button",{onClick:r,className:"mt-6 py-2.5 px-6 bg-[var(--accent)] text-[var(--accent-text)] font-bold rounded-lg shadow-md hover:bg-[var(--accent-light)]",children:"Create a request"})]})})]})]})},RN=({showToast:r})=>{const{currentUser:s,updateUser:i}=nt(),o=_.useRef(null);if(!s)return null;const c=(v,E)=>{const y={...s};E&&(y.name=E),y.profile={...s.profile,...v},i(y),r("Changes saved successfully.","success")},u=_.useMemo(()=>{const v=[s.name,s.profile.contactNumber,s.profile.address,s.profile.logoUrl,s.profile.description,s.profile.yearsInBusiness,s.profile.serviceAreas,s.profile.specialties],E=v.filter(y=>Array.isArray(y)?y.length>0:!!y).length;return Math.round(E/v.length*100)},[s]),h=["Water Damage","Fire Restoration","Mold Remediation","Storm Damage","Reconstruction","Biohazard Cleanup"],p=({value:v})=>a.jsxs(ve,{className:"mb-8",children:[a.jsxs("h2",{className:"font-playfair text-xl font-bold text-[var(--text-main)] mb-2",children:["Profile Completeness: ",v,"%"]}),a.jsx("div",{className:"w-full bg-[var(--bg-subtle)] rounded-full h-2.5",children:a.jsx("div",{className:"bg-[var(--accent)] h-2.5 rounded-full",style:{width:`${v}%`}})}),a.jsx("p",{className:"text-sm text-[var(--text-muted)] mt-2",children:"Complete your profile to increase your visibility in our network."})]}),m=()=>{const[v,E]=_.useState(!1),[y,C]=_.useState({name:s.name,dbaName:s.profile.dbaName||"",yearsInBusiness:s.profile.yearsInBusiness||1,description:s.profile.description||""}),M=()=>{const{name:z,...U}=y;c(U,z),E(!1)},T=()=>{C({name:s.name,dbaName:s.profile.dbaName||"",yearsInBusiness:s.profile.yearsInBusiness||1,description:s.profile.description||""}),E(!1)};return a.jsxs(ve,{children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-playfair text-2xl font-bold text-[var(--text-main)]",children:"Business Information"}),a.jsx("p",{className:"text-sm text-[var(--text-muted)]",children:"This information appears on your public profile and badge."})]}),!v&&a.jsxs("button",{onClick:()=>E(!0),className:"flex items-center gap-2 py-2 px-4 bg-[var(--bg-card)] border border-[var(--border-subtle)] rounded-lg shadow-sm font-semibold text-[var(--text-main)] hover:bg-[var(--bg-subtle)] text-sm",children:[a.jsx(Ya,{className:"w-4 h-4"})," Edit"]})]}),v?a.jsxs("div",{className:"space-y-4 animate-fade-in",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-[var(--text-muted)]",children:"Business Name"}),a.jsx("input",{type:"text",value:y.name,onChange:z=>C({...y,name:z.target.value}),className:"mt-1 block w-full p-2 border border-[var(--border-subtle)] rounded-lg bg-[var(--bg-input)]"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-[var(--text-muted)]",children:"DBA / Brand Name (optional)"}),a.jsx("input",{type:"text",value:y.dbaName,onChange:z=>C({...y,dbaName:z.target.value}),className:"mt-1 block w-full p-2 border border-[var(--border-subtle)] rounded-lg bg-[var(--bg-input)]"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-[var(--text-muted)]",children:"Years in Business"}),a.jsx("input",{type:"number",value:y.yearsInBusiness,onChange:z=>C({...y,yearsInBusiness:parseInt(z.target.value)||0}),className:"mt-1 block w-full p-2 border border-[var(--border-subtle)] rounded-lg bg-[var(--bg-input)]"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-[var(--text-muted)]",children:"Description"}),a.jsx("textarea",{value:y.description,onChange:z=>C({...y,description:z.target.value}),rows:4,className:"mt-1 block w-full p-2 border border-[var(--border-subtle)] rounded-lg bg-[var(--bg-input)]"})]}),a.jsxs("div",{className:"flex justify-end gap-4 pt-2",children:[a.jsx("button",{onClick:T,className:"py-2 px-5 bg-[var(--bg-subtle)] border border-[var(--border-subtle)] rounded-lg font-semibold",children:"Cancel"}),a.jsx("button",{onClick:M,className:"py-2 px-5 bg-[var(--accent)] text-[var(--accent-text)] rounded-lg font-bold",children:"Save Changes"})]})]}):a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-[var(--text-muted)]",children:"Business Name"}),a.jsx("p",{className:"font-semibold text-[var(--text-main)]",children:s.name})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-[var(--text-muted)]",children:"DBA / Brand Name"}),a.jsx("p",{className:"font-semibold text-[var(--text-main)]",children:s.profile.dbaName||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-[var(--text-muted)]",children:"Years in Business"}),a.jsx("p",{className:"font-semibold text-[var(--text-main)]",children:s.profile.yearsInBusiness||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-[var(--text-muted)]",children:"Description"}),a.jsx("p",{className:"text-[var(--text-main)] whitespace-pre-wrap",children:s.profile.description||"N/A"})]})]})]})},g=()=>{const[v,E]=_.useState(!1),[y,C]=_.useState({contactNumber:s.profile.contactNumber||"",address:s.profile.address||"",websiteUrl:s.profile.websiteUrl||""}),[M,T]=_.useState({}),z=()=>{const X={};return y.contactNumber||(X.contactNumber="Phone number is required."),y.address||(X.address="Address is required."),y.websiteUrl&&!/^https?:\/\//.test(y.websiteUrl)&&(X.websiteUrl="Please enter a valid URL (e.g., https://...)."),T(X),Object.keys(X).length===0},U=()=>{z()?(c(y),E(!1)):r("Please complete required fields.","error")};return a.jsxs(ve,{children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsx("div",{children:a.jsx("h3",{className:"font-playfair text-2xl font-bold text-[var(--text-main)]",children:"Contact Details"})}),!v&&a.jsxs("button",{onClick:()=>E(!0),className:"flex items-center gap-2 py-2 px-4 bg-[var(--bg-card)] border border-[var(--border-subtle)] rounded-lg shadow-sm font-semibold text-[var(--text-main)] hover:bg-[var(--bg-subtle)] text-sm",children:[a.jsx(Ya,{className:"w-4 h-4"})," Edit"]})]}),v?a.jsxs("div",{className:"space-y-4 animate-fade-in",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-[var(--text-muted)]",children:"Email (read-only)"}),a.jsx("p",{className:"mt-1 block w-full p-2 bg-[var(--bg-subtle)] border border-[var(--border-subtle)] rounded-lg text-[var(--text-muted)]",children:s.email})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-[var(--text-muted)]",children:"Phone"}),a.jsx("input",{type:"tel",value:y.contactNumber,onChange:X=>C({...y,contactNumber:X.target.value}),className:`mt-1 block w-full p-2 border rounded-lg bg-[var(--bg-input)] ${M.contactNumber?"border-error":"border-[var(--border-subtle)]"}`}),M.contactNumber&&a.jsx("p",{className:"text-xs text-error mt-1",children:M.contactNumber})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-[var(--text-muted)]",children:"Address"}),a.jsx("input",{type:"text",value:y.address,onChange:X=>C({...y,address:X.target.value}),className:`mt-1 block w-full p-2 border rounded-lg bg-[var(--bg-input)] ${M.address?"border-error":"border-[var(--border-subtle)]"}`}),M.address&&a.jsx("p",{className:"text-xs text-error mt-1",children:M.address})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-[var(--text-muted)]",children:"Website URL"}),a.jsx("input",{type:"url",value:y.websiteUrl,onChange:X=>C({...y,websiteUrl:X.target.value}),className:`mt-1 block w-full p-2 border rounded-lg bg-[var(--bg-input)] ${M.websiteUrl?"border-error":"border-[var(--border-subtle)]"}`}),M.websiteUrl&&a.jsx("p",{className:"text-xs text-error mt-1",children:M.websiteUrl})]}),a.jsxs("div",{className:"flex justify-end gap-4 pt-2",children:[a.jsx("button",{onClick:()=>E(!1),className:"py-2 px-5 bg-[var(--bg-subtle)] border border-[var(--border-subtle)] rounded-lg font-semibold",children:"Cancel"}),a.jsx("button",{onClick:U,className:"py-2 px-5 bg-[var(--accent)] text-[var(--accent-text)] rounded-lg font-bold",children:"Save Changes"})]})]}):a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-[var(--text-muted)]",children:"Email"}),a.jsx("p",{className:"font-semibold text-[var(--text-main)]",children:s.email})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-[var(--text-muted)]",children:"Phone"}),a.jsx("p",{className:"font-semibold text-[var(--text-main)]",children:s.profile.contactNumber||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-[var(--text-muted)]",children:"Address"}),a.jsx("p",{className:"font-semibold text-[var(--text-main)]",children:s.profile.address||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-[var(--text-muted)]",children:"Website URL"}),a.jsx("p",{className:"font-semibold text-[var(--accent-dark)] hover:underline cursor-pointer",children:s.profile.websiteUrl||"N/A"})]})]})]})},b=()=>{var B,se;const[v,E]=_.useState(!1),[y,C]=_.useState({serviceAreas:s.profile.serviceAreas||[],specialties:s.profile.specialties||[]}),[M,T]=_.useState(""),z=()=>{M&&!y.serviceAreas.includes(M)&&(C(ee=>({...ee,serviceAreas:[...ee.serviceAreas,M]})),T(""))},U=ee=>{C(te=>({...te,serviceAreas:te.serviceAreas.filter(ce=>ce!==ee)}))},X=ee=>{C(te=>({...te,specialties:te.specialties.includes(ee)?te.specialties.filter(ce=>ce!==ee):[...te.specialties,ee]}))};return a.jsxs(ve,{children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsx("div",{children:a.jsx("h3",{className:"font-playfair text-2xl font-bold text-[var(--text-main)]",children:"Service Areas & Specialties"})}),!v&&a.jsxs("button",{onClick:()=>E(!0),className:"flex items-center gap-2 py-2 px-4 bg-[var(--bg-card)] border border-[var(--border-subtle)] rounded-lg shadow-sm font-semibold text-[var(--text-main)] hover:bg-[var(--bg-subtle)] text-sm",children:[a.jsx(Ya,{className:"w-4 h-4"})," Edit"]})]}),v?a.jsxs("div",{className:"space-y-6 animate-fade-in",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-[var(--text-muted)]",children:"Service Areas"}),a.jsxs("div",{className:"flex gap-2 mt-1",children:[a.jsx("input",{type:"text",value:M,onChange:ee=>T(ee.target.value),placeholder:"e.g., Dallas",className:"flex-grow p-2 border border-[var(--border-subtle)] rounded-lg bg-[var(--bg-input)]"}),a.jsx("button",{onClick:z,className:"py-2 px-4 bg-[var(--accent)] text-[var(--accent-text)] rounded-lg font-bold",children:"Add"})]}),a.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:y.serviceAreas.map(ee=>a.jsxs("div",{className:"bg-gray-200 text-charcoal px-3 py-1 rounded-full flex items-center gap-2 text-sm",children:[ee,a.jsx("button",{onClick:()=>U(ee),children:a.jsx(wt,{className:"w-4 h-4"})})]},ee))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-[var(--text-muted)]",children:"Specialties"}),a.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:h.map(ee=>a.jsx("button",{onClick:()=>X(ee),className:`px-4 py-2 rounded-full font-semibold transition-colors text-sm ${y.specialties.includes(ee)?"bg-[var(--accent)] text-[var(--accent-text)]":"bg-gray-200 text-gray-dark"}`,children:ee},ee))})]}),a.jsxs("div",{className:"flex justify-end gap-4 pt-2",children:[a.jsx("button",{onClick:()=>E(!1),className:"py-2 px-5 bg-[var(--bg-subtle)] border border-[var(--border-subtle)] rounded-lg font-semibold",children:"Cancel"}),a.jsx("button",{onClick:()=>{c(y),E(!1)},className:"py-2 px-5 bg-[var(--accent)] text-[var(--accent-text)] rounded-lg font-bold",children:"Save Changes"})]})]}):a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-[var(--text-muted)]",children:"Service Areas"}),a.jsx("div",{className:"flex flex-wrap gap-2 mt-1",children:((B=s.profile.serviceAreas)==null?void 0:B.map(ee=>a.jsx("span",{className:"bg-[var(--bg-subtle)] px-3 py-1 rounded-full text-sm font-medium",children:ee},ee)))||a.jsx("p",{className:"text-[var(--text-main)]",children:"N/A"})})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-[var(--text-muted)]",children:"Specialties"}),a.jsx("div",{className:"flex flex-wrap gap-2 mt-1",children:((se=s.profile.specialties)==null?void 0:se.map(ee=>a.jsx("span",{className:"bg-gold/20 text-gold-dark px-3 py-1 rounded-full text-sm font-bold",children:ee},ee)))||a.jsx("p",{className:"text-[var(--text-main)]",children:"N/A"})})]})]}),a.jsx("p",{className:"text-xs text-[var(--text-muted)] mt-4",children:"These will appear on your public profile and affect homeowner search results."})]})},w=()=>{var z,U,X,B,se;const[v,E]=_.useState(!1),[y,C]=_.useState({logoUrl:s.profile.logoUrl||"",socialLinks:s.profile.socialLinks||{}}),M=ee=>{const{name:te,value:ce}=ee.target;C(J=>({...J,socialLinks:{...J.socialLinks,[te]:ce}}))},T=({icon:ee,name:te,value:ce})=>a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center font-bold text-gray-dark text-sm shrink-0",children:ee}),a.jsx("input",{type:"url",placeholder:"https://...",name:te,value:ce,onChange:M,className:"mt-1 block w-full p-2 border border-[var(--border-subtle)] rounded-lg bg-[var(--bg-input)]"})]});return a.jsxs(ve,{children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsx("div",{children:a.jsx("h3",{className:"font-playfair text-2xl font-bold text-[var(--text-main)]",children:"Branding & Social Links"})}),!v&&a.jsxs("button",{onClick:()=>E(!0),className:"flex items-center gap-2 py-2 px-4 bg-[var(--bg-card)] border border-[var(--border-subtle)] rounded-lg shadow-sm font-semibold text-[var(--text-main)] hover:bg-[var(--bg-subtle)] text-sm",children:[a.jsx(Ya,{className:"w-4 h-4"})," Edit"]})]}),v?a.jsxs("div",{className:"space-y-6 animate-fade-in",children:[a.jsxs("div",{className:"flex flex-col items-center text-center",children:[a.jsx("img",{src:s.profile.logoUrl||"https://via.placeholder.com/150",alt:"Business Logo",className:"w-32 h-32 rounded-full object-cover mb-4 border-4 border-white shadow-md"}),a.jsx("input",{type:"file",ref:o,className:"hidden",accept:"image/png, image/jpeg"}),a.jsx("button",{onClick:()=>{var ee;return(ee=o.current)==null?void 0:ee.click()},className:"py-2 px-5 bg-[var(--bg-card)] border border-[var(--border-subtle)] rounded-lg font-semibold shadow-sm",children:"Upload new logo"}),a.jsx("p",{className:"text-xs text-[var(--text-muted)] mt-2",children:"Recommended: 400x400 PNG with transparent background."})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx(T,{icon:"G",name:"google",value:((z=y.socialLinks)==null?void 0:z.google)||""}),a.jsx(T,{icon:"f",name:"facebook",value:((U=y.socialLinks)==null?void 0:U.facebook)||""}),a.jsx(T,{icon:"ig",name:"instagram",value:((X=y.socialLinks)==null?void 0:X.instagram)||""}),a.jsx(T,{icon:"in",name:"linkedin",value:((B=y.socialLinks)==null?void 0:B.linkedin)||""}),a.jsx(T,{icon:"Y",name:"yelp",value:((se=y.socialLinks)==null?void 0:se.yelp)||""})]}),a.jsxs("div",{className:"flex justify-end gap-4 pt-2",children:[a.jsx("button",{onClick:()=>E(!1),className:"py-2 px-5 bg-[var(--bg-subtle)] border border-[var(--border-subtle)] rounded-lg font-semibold",children:"Cancel"}),a.jsx("button",{onClick:()=>{c(y),E(!1)},className:"py-2 px-5 bg-[var(--accent)] text-[var(--accent-text)] rounded-lg font-bold",children:"Save Changes"})]})]}):a.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-8",children:[a.jsx("img",{src:s.profile.logoUrl||"https://via.placeholder.com/150",alt:"Business Logo",className:"w-32 h-32 rounded-full object-cover border-4 border-white shadow-lg shrink-0"}),a.jsxs("div",{className:"w-full",children:[a.jsx("h4",{className:"font-bold mb-2",children:"Social Links"}),Object.entries(s.profile.socialLinks||{}).map(([ee,te])=>te?a.jsxs("p",{className:"text-sm truncate",children:[a.jsxs("span",{className:"font-semibold capitalize",children:[ee,":"]})," ",a.jsx("a",{href:te,className:"text-[var(--accent-dark)] hover:underline",children:te})]},ee):null)]})]})]})},N=()=>{var v,E,y;return a.jsxs(ve,{children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h2",{className:"font-playfair text-2xl font-bold text-[var(--text-main)]",children:"Public Profile Preview"}),a.jsx("a",{href:"#",className:"font-semibold text-[var(--accent-dark)] hover:underline text-sm",children:"View live profile "})]}),a.jsxs("div",{className:"bg-[var(--bg-subtle)] p-6 rounded-xl border border-[var(--border-subtle)]",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row items-start gap-6",children:[a.jsx("img",{src:s.profile.logoUrl||"https://via.placeholder.com/150",alt:"Logo",className:"w-24 h-24 rounded-full object-cover border-4 border-white shadow-md shrink-0"}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("h3",{className:"text-2xl font-bold text-[var(--text-main)]",children:s.name}),a.jsx("span",{className:"bg-success text-white px-3 py-1 text-xs font-bold rounded-full",children:((v=s.plan)==null?void 0:v.rating)??"A+"})]}),a.jsxs("p",{className:"text-[var(--text-muted)] font-medium",children:[s.profile.address,"  ",s.profile.yearsInBusiness," years in business"]})]})]}),a.jsxs("div",{className:"mt-4 pt-4 border-t border-[var(--border-subtle)]",children:[a.jsxs("p",{className:"font-semibold text-[var(--text-main)]",children:["Serving: ",a.jsx("span",{className:"font-normal text-[var(--text-muted)]",children:(E=s.profile.serviceAreas)==null?void 0:E.join("  ")})]}),a.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:(y=s.profile.specialties)==null?void 0:y.map(C=>a.jsx("span",{className:"bg-gold/20 text-gold-dark px-3 py-1 rounded-full text-xs font-bold",children:C},C))})]}),a.jsx("p",{className:"mt-4 text-[var(--text-main)]",children:s.profile.description}),a.jsxs("div",{className:"mt-6 flex items-center gap-2 text-sm font-semibold text-[var(--text-muted)]",children:[a.jsx(_t,{className:"w-5 h-5 text-success"}),"Verified by Restoration Expertise"]})]})]})},S=()=>{var ce,J,I,k;const[v,E]=_.useState("light"),[y,C]=_.useState("medium"),[M,T]=_.useState(!0),z=!!s.profile.logoUrl&&!!s.profile.address,U=()=>{r("Download will be available in the full version.","success")},X=()=>{const F=s.name.toLowerCase().replace(/\s+/g,"-"),R=`<a href="https://restorationexpertise.com/profile/${F}" target="_blank" rel="noopener noreferrer">
  <img src="https://restorationexpertise.com/cards/${F}.png" alt="Restoration Expertise Verified Member - ${s.name}" />
</a>`;navigator.clipboard.writeText(R),r("Embed code copied!","success")},B=((ce=s.profile.address)==null?void 0:ce.split(",").slice(1).join(",").trim())||"",se=((J=s.profile.description)==null?void 0:J.substring(0,80))+(s.profile.description&&s.profile.description.length>80?"...":""),ee={small:"scale-90",medium:"scale-100",large:"scale-110"},te=()=>a.jsx("div",{className:`w-12 h-12 p-0.5 rounded-md grid grid-cols-5 grid-rows-5 gap-px ${v==="light"?"bg-gray-200":"bg-gray-dark"}`,children:Array.from({length:25}).map((F,R)=>a.jsx("div",{className:`${Math.random()>.5?v==="light"?"bg-charcoal":"bg-white":""}`},R))});return a.jsxs(ve,{className:"mt-8",children:[a.jsx("h2",{className:"font-playfair text-2xl font-bold text-[var(--text-main)]",children:"Public Profile Card"}),a.jsx("p",{className:"mt-1 text-[var(--text-muted)]",children:"Generate a shareable card for your website, proposals or social media."}),z?a.jsxs("div",{className:"mt-6 grid grid-cols-1 lg:grid-cols-2 gap-8 items-center",children:[a.jsx("div",{className:"flex justify-center items-center min-h-[280px]",children:a.jsx("div",{className:`origin-center transition-transform duration-300 ${ee[y]}`,children:a.jsxs("div",{className:`w-[350px] h-[200px] rounded-xl shadow-2xl p-4 flex flex-col justify-between transition-colors ${v==="light"?"bg-white":"bg-charcoal-dark"}`,children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("img",{src:s.profile.logoUrl,alt:"Logo",className:"w-12 h-12 rounded-full object-cover border-2 border-white/50"}),a.jsxs("div",{children:[a.jsx("p",{className:`font-bold text-lg leading-tight ${v==="light"?"text-charcoal":"text-white"}`,children:s.name}),a.jsxs("p",{className:`text-xs font-semibold ${v==="light"?"text-gold-dark":"text-gold-light"}`,children:["Verified  ",((I=s.plan)==null?void 0:I.name)??"Member","  ",((k=s.plan)==null?void 0:k.rating)??"A+"]})]})]}),M&&a.jsxs("div",{className:"text-center",children:[a.jsx(te,{}),a.jsx("p",{className:`text-[8px] mt-1 ${v==="light"?"text-gray-dark":"text-gray"}`,children:"Scans to your public profile"})]})]}),a.jsxs("div",{className:"pr-16",children:[a.jsx("p",{className:`text-sm truncate ${v==="light"?"text-gray-dark":"text-gray"}`,children:se}),a.jsx("p",{className:`text-xs font-semibold mt-1 ${v==="light"?"text-charcoal":"text-white"}`,children:B})]}),a.jsxs("div",{className:"flex items-center gap-1.5 text-xs",children:[a.jsx(_t,{className:`w-4 h-4 ${v==="light"?"text-success":"text-gold"}`}),a.jsxs("p",{className:`font-semibold ${v==="light"?"text-gray-dark":"text-gray"}`,children:["Verified by ",a.jsx("span",{className:"font-bold",children:"Restoration Expertise"})]})]})]})})}),a.jsxs("div",{children:[a.jsxs("div",{className:"space-y-4 p-4 border border-[var(--border-subtle)] rounded-lg bg-[var(--bg-card)]",children:[a.jsx("h4",{className:"font-bold text-[var(--text-main)]",children:"Options"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-[var(--text-muted)] mb-1",children:"Theme"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>E("light"),className:`px-3 py-1.5 rounded-md text-sm font-semibold flex-1 ${v==="light"?"bg-[var(--accent)] text-[var(--accent-text)]":"bg-[var(--bg-card)] border hover:bg-[var(--bg-subtle)]"}`,children:"Light"}),a.jsx("button",{onClick:()=>E("dark"),className:`px-3 py-1.5 rounded-md text-sm font-semibold flex-1 ${v==="dark"?"bg-[var(--accent)] text-[var(--accent-text)]":"bg-charcoal text-white border border-charcoal-light hover:bg-charcoal"}`,children:"Dark"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-[var(--text-muted)]",htmlFor:"card-size",children:"Preview Size"}),a.jsxs("select",{id:"card-size",value:y,onChange:F=>C(F.target.value),className:"w-full mt-1 p-2 border border-[var(--border-subtle)] rounded-lg text-sm bg-[var(--bg-card)] focus:ring-[var(--accent)] focus:border-[var(--accent)]",children:[a.jsx("option",{value:"small",children:"Small"}),a.jsx("option",{value:"medium",children:"Medium"}),a.jsx("option",{value:"large",children:"Large"})]})]}),a.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-[var(--text-muted)] cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:M,onChange:F=>T(F.target.checked),className:"h-4 w-4 rounded border-[var(--border-subtle)] text-[var(--accent)] focus:ring-[var(--accent)]"}),"Show QR code"]})]}),a.jsxs("div",{className:"mt-6 space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("button",{onClick:U,className:"py-2 px-4 bg-[var(--bg-card)] text-[var(--text-main)] font-bold rounded-lg shadow-md border border-[var(--border-subtle)] hover:bg-[var(--bg-subtle)] flex items-center justify-center gap-2",children:[a.jsx(As,{className:"w-5 h-5"})," PNG"]}),a.jsxs("button",{onClick:U,className:"py-2 px-4 bg-[var(--bg-card)] text-[var(--text-main)] font-bold rounded-lg shadow-md border border-[var(--border-subtle)] hover:bg-[var(--bg-subtle)] flex items-center justify-center gap-2",children:[a.jsx(As,{className:"w-5 h-5"})," PDF"]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-[var(--text-muted)]",children:"Embed snippet"}),a.jsxs("div",{className:"relative mt-1",children:[a.jsx("pre",{className:"bg-charcoal-dark p-4 rounded-lg text-gray-light text-xs whitespace-pre-wrap overflow-x-auto",children:a.jsx("code",{children:`<a href="https://restorationexpertise.com/profile/${s.name.toLowerCase().replace(/\s+/g,"-")}"...`})}),a.jsx("button",{onClick:X,className:"absolute top-2 right-2 p-1.5 bg-gray-dark rounded-md text-gray-light hover:bg-gray-dark/50",title:"Copy code",children:a.jsx(Sa,{className:"w-5 h-5"})})]})]})]})]})]}):a.jsxs("div",{className:"mt-6 p-4 bg-warning/10 border border-warning/20 rounded-lg flex items-center gap-3",children:[a.jsx(_a,{className:"w-6 h-6 text-warning"}),a.jsx("p",{className:"font-semibold text-yellow-800",children:"To generate a complete profile card, please fill out your logo and address in the sections above."})]})]})};return a.jsxs("div",{className:"animate-fade-in max-w-4xl mx-auto",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"font-playfair text-4xl font-bold text-[var(--text-main)]",children:"Business Profile"}),a.jsx("p",{className:"mt-2 text-lg text-[var(--text-muted)]",children:"Keep your business details accurate to build trust and speed up verification."})]}),a.jsxs("div",{className:"mt-8 space-y-8",children:[a.jsx(p,{value:u}),a.jsx(m,{}),a.jsx(g,{}),a.jsx(b,{}),a.jsx(w,{}),a.jsx(N,{}),a.jsx(S,{})]})]})},ON=({onNavigate:r,showToast:s})=>{const{currentUser:i}=nt(),o=Ad.find(v=>v.email===(i==null?void 0:i.email))||Ad[0],{badge:c}=o,[u,h]=_.useState("light"),[p,m]=_.useState(!1);if(!c||c.status==="NONE")return a.jsxs("div",{className:"animate-fade-in space-y-8",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"font-playfair text-4xl font-bold text-[var(--text-main)]",children:"Your Restoration Expertise Badge"}),a.jsx("p",{className:"mt-2 text-lg text-[var(--text-muted)]",children:"Add this badge to your website and profiles so homeowners instantly know youre verified."})]}),a.jsx(ve,{children:a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Si,{className:"w-16 h-16 mx-auto text-gray-300"}),a.jsx("h3",{className:"mt-4 text-xl font-bold text-[var(--text-main)]",children:"Your badge is not ready yet."}),a.jsx("p",{className:"mt-1 text-[var(--text-muted)]",children:"Once our team approves your documents, it will appear here."})]})})]});if(c.status==="PENDING")return a.jsxs("div",{className:"animate-fade-in space-y-8",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"font-playfair text-4xl font-bold text-[var(--text-main)]",children:"Your Restoration Expertise Badge"}),a.jsx("p",{className:"mt-2 text-lg text-[var(--text-muted)]",children:"Add this badge to your website and profiles so homeowners instantly know youre verified."})]}),a.jsx(ve,{children:a.jsxs("div",{className:"text-center py-12",children:[a.jsx(fr,{className:"w-16 h-16 mx-auto text-gray-300"}),a.jsx("h3",{className:"mt-4 text-xl font-bold text-[var(--text-main)]",children:"Your business is eligible and under review."}),a.jsx("p",{className:"mt-1 text-[var(--text-muted)]",children:"Were preparing your badge design."})]})})]});const g=u==="dark"&&c.imageDarkUrl||c.imageLightUrl,b=`<a href="${c.profileUrl}" target="_blank" rel="noopener noreferrer">
    <img src="${c.imageLightUrl}"
         alt="Restoration Expertise Verified Member  ${c.badgeLabel}"
         style="max-width:180px;height:auto;" />
  </a>`,w=()=>{navigator.clipboard.writeText(b),m(!0),setTimeout(()=>m(!1),2e3),s("Code copied to clipboard!","success")},S={ACTIVE:{chipText:"Active",chipColor:"bg-success text-white"},PENDING:{chipText:"Pending",chipColor:"bg-warning text-charcoal"},REVOKED:{chipText:"Revoked",chipColor:"bg-error text-white"}}[c.status];return a.jsxs("div",{className:"animate-fade-in space-y-8",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"font-playfair text-4xl font-bold text-[var(--text-main)]",children:"Your Restoration Expertise Badge"}),a.jsx("p",{className:"mt-2 text-lg text-[var(--text-muted)]",children:"Add this badge to your website and profiles so homeowners instantly know youre verified."})]}),a.jsxs("div",{className:"mt-6 bg-gold/10 border border-gold/20 text-[var(--text-main)] p-3 sm:p-4 rounded-xl flex flex-col sm:flex-row justify-between items-start sm:items-center gap-2",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(_t,{className:"w-6 h-6 text-gold-dark mr-3 shrink-0"}),a.jsxs("p",{className:"text-sm sm:text-base font-semibold",children:["Verified Member  ",o.tier," Plan  Rating: ",o.rating]})]}),a.jsx("button",{onClick:()=>r("billing"),className:"font-bold text-sm bg-gold/20 text-gold-dark py-1.5 px-3 rounded-md hover:bg-gold/30 transition-colors whitespace-nowrap self-end sm:self-center",children:"Manage plan "})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-8 items-start",children:[a.jsxs("div",{className:"lg:col-span-3",children:[a.jsxs("div",{className:"flex space-x-2 mb-4",children:[a.jsx("button",{onClick:()=>h("light"),className:`px-4 py-2 rounded-lg font-semibold text-sm transition-all ${u==="light"?"bg-[var(--accent)] text-[var(--accent-text)] shadow-md":"bg-[var(--bg-card)] border border-[var(--border-subtle)]"}`,children:"Light background"}),a.jsx("button",{onClick:()=>h("dark"),className:`px-4 py-2 rounded-lg font-semibold text-sm transition-all ${u==="dark"?"bg-[var(--accent)] text-[var(--accent-text)] shadow-md":"bg-[var(--bg-card)] border border-[var(--border-subtle)]"}`,children:"Dark background"})]}),a.jsxs("div",{className:`relative p-8 rounded-2xl shadow-lg border border-[var(--border-subtle)] flex items-center justify-center min-h-[350px] transition-colors ${u==="light"?"bg-[var(--bg-subtle)]":"bg-charcoal-dark"}`,children:[S&&a.jsx("span",{className:`absolute top-4 right-4 text-xs font-bold px-3 py-1 rounded-full ${S.chipColor}`,children:S.chipText}),a.jsx("img",{src:g,alt:c.badgeLabel,className:"max-w-xs h-auto"})]}),a.jsxs("p",{className:"text-sm text-[var(--text-muted)] mt-4 text-center lg:text-left px-2",children:["This badge reflects your current plan (",o.tier,") and rating (",o.rating,"). Any future upgrades or renewals will automatically update your badge."]})]}),a.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[a.jsxs(ve,{children:[a.jsx("h3",{className:"font-playfair text-xl font-bold text-[var(--text-main)] mb-4",children:"Download & Embed"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[a.jsx("a",{href:g,download:`${o.businessName.toLowerCase().replace(/ /g,"-")}-badge.png`,children:a.jsxs("button",{className:"w-full py-3 px-4 bg-[var(--bg-card)] text-[var(--text-main)] font-bold rounded-lg shadow-md border border-[var(--border-subtle)] hover:bg-[var(--bg-subtle)] transition-all flex items-center justify-center gap-2",children:[a.jsx(As,{className:"w-5 h-5"})," PNG"]})}),a.jsx("a",{href:g,download:`${o.businessName.toLowerCase().replace(/ /g,"-")}-badge.svg`,children:a.jsxs("button",{className:"w-full py-3 px-4 bg-[var(--bg-card)] text-[var(--text-main)] font-bold rounded-lg shadow-md border border-[var(--border-subtle)] hover:bg-[var(--bg-subtle)] transition-all flex items-center justify-center gap-2",children:[a.jsx(As,{className:"w-5 h-5"})," SVG"]})})]}),a.jsxs("div",{className:"relative bg-charcoal-dark p-4 rounded-lg",children:[a.jsx("button",{onClick:w,className:"absolute top-2 right-2 p-1.5 bg-gray-dark rounded-md text-gray-light hover:bg-gray-dark/50",title:"Copy code",children:p?a.jsx(vi,{className:"w-5 h-5 text-success"}):a.jsx(Sa,{className:"w-5 h-5"})}),a.jsx("pre",{children:a.jsx("code",{className:"text-gray-light text-sm whitespace-pre-wrap select-all",children:b})})]}),a.jsxs("div",{className:"mt-4 pt-4 border-t border-[var(--border-subtle)] flex flex-col sm:flex-row justify-between items-start sm:items-center gap-2 text-xs",children:[a.jsx("p",{className:"text-[var(--text-muted)]",children:"Current plan limit: 1 badge per company website"}),a.jsx("button",{onClick:()=>r("benefits"),className:"font-semibold text-[var(--accent-dark)] hover:underline self-end sm:self-center",children:"View benefits "})]})]}),a.jsxs(ve,{children:[a.jsxs("div",{className:"flex items-center mb-4",children:[a.jsx("div",{className:"bg-gold/10 text-gold-dark p-2 rounded-full mr-3",children:a.jsx(Gd,{className:"w-5 h-5"})}),a.jsx("h3",{className:"font-playfair text-xl font-bold text-[var(--text-main)]",children:"Where to place your badge"})]}),a.jsxs("ul",{className:"space-y-2 list-disc list-inside text-[var(--text-muted)]",children:[a.jsx("li",{children:"Place above the fold on your homepage near your main call to action."}),a.jsx("li",{children:"Add it to your About and Reviews pages."}),a.jsx("li",{children:"Include it in your email signature or proposal PDFs."})]})]})]})]})]})},DN=[{value:"license",label:"Business License"},{value:"insurance",label:"Proof of Liability Insurance"}],MN=({documents:r,onNavigate:s,onRefreshDocuments:i})=>{const[o,c]=_.useState(!1),[u,h]=_.useState(!1),[p,m]=_.useState(""),[g,b]=_.useState(null),[w,N]=_.useState(null),[S,v]=_.useState(null),E=_.useRef(null),{session:y}=nt(),{approvedCount:C,underReviewCount:M,needsAttentionCount:T,docsNeedingAttention:z}=_.useMemo(()=>{const R=r.filter(re=>re.status==="approved"),Y=r.filter(re=>re.status==="underReview"),ne=r.filter(re=>["notUploaded","needsReplacement","rejected"].includes(re.status));return{approvedCount:R.length,underReviewCount:Y.length,needsAttentionCount:ne.length,docsNeedingAttention:ne}},[r]),U=r.length,X=U>0?C/U*100:0,B={approved:{icon:Gt,color:"text-success",label:"Approved",pill:"bg-success/10 text-success"},underReview:{icon:Si,color:"text-warning",label:"Under review",pill:"bg-warning/10 text-yellow-800"},rejected:{icon:wt,color:"text-error",label:"Rejected",pill:"bg-error/10 text-error"},needsReplacement:{icon:_a,color:"text-warning",label:"Needs replacement",pill:"bg-warning/10 text-yellow-800"},notUploaded:{icon:wt,color:"text-error",label:"Not uploaded",pill:"bg-gray-200 text-gray-dark"}},se=r.filter(R=>R.status!=="notUploaded"),ee=()=>{N(null),v(null)},te=R=>{var ne;const Y=((ne=R.target.files)==null?void 0:ne[0])??null;b(Y),ee()},ce=R=>{m(R.target.value),ee()},J=()=>{var R;(R=E.current)==null||R.click()},I=async R=>{var ne;if(R.preventDefault(),ee(),!((ne=y==null?void 0:y.user)!=null&&ne.id)){N("You must be signed in to upload documents.");return}if(!p||!g){N("Select a document type and file to upload.");return}c(!0);const Y=`${y.user.id}/${p}-${Date.now()}-${g.name}`;try{const{error:re}=await be.storage.from("member-documents").upload(Y,g,{cacheControl:"3600",upsert:!1});if(re)throw re;const{error:xe}=await be.from("member_documents").insert({profile_id:y.user.id,doc_type:p,file_url:Y,status:"pending"});if(xe)throw await be.storage.from("member-documents").remove([Y]),xe;v("Document uploaded successfully. We will review it shortly."),b(null),m(""),E.current&&(E.current.value="");try{await i()}catch(O){console.error("Failed to refresh documents after upload",O),N("Document uploaded successfully, but we could not refresh the list. Please refresh the page.")}}catch(re){console.error("Failed to upload document",re),N("Unable to upload your document right now. Please try again.")}finally{c(!1)}},k=()=>{const R=()=>T===0?"border-success":C===0&&T>0?"border-error":"border-warning";return a.jsxs("div",{className:"relative group w-full bg-[var(--bg-card)] p-4 rounded-xl shadow-md border-l-4 transition-all",style:{borderColor:R().split("-")[1]},children:[a.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:a.jsxs("div",{children:[a.jsx("p",{className:"font-bold text-[var(--text-main)]",children:U>0?`Verification Progress: ${C} / ${U} documents approved`:"No documents uploaded yet"}),U>0&&a.jsxs("p",{className:"text-sm text-[var(--text-muted)]",children:[a.jsx("span",{className:"font-semibold",children:"Under review:"})," ",M,"  ",a.jsx("span",{className:"font-semibold",children:"Needs attention:"})," ",T]})]})}),a.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 w-max px-3 py-1.5 bg-charcoal text-white text-xs font-semibold rounded-md opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none",children:["Approved: ",C,"  Under review: ",M,"  Needs attention: ",T,a.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 w-0 h-0 border-x-4 border-x-transparent border-t-4 border-t-charcoal"})]})]})},F=()=>{const R=Y=>{switch(Y){case"notUploaded":return"(missing)";case"needsReplacement":return"(policy expired)";case"rejected":return"(rejected, see note)";default:return""}};return U===0?a.jsx(ve,{className:"bg-gold/10 border-gold/20",children:a.jsxs("div",{className:"flex flex-col sm:flex-row items-start gap-4",children:[a.jsx("div",{className:"bg-gold/20 text-gold-dark p-3 rounded-full shrink-0",children:a.jsx(sn,{className:"w-6 h-6"})}),a.jsxs("div",{className:"flex-grow",children:[a.jsx("h2",{className:"font-playfair text-2xl font-bold text-charcoal",children:"Start your verification"}),a.jsx("p",{className:"mt-2 text-gray-dark",children:"Upload your first document to begin the verification process."})]})]})}):a.jsx(ve,{className:"bg-gold/10 border-gold/20",children:a.jsxs("div",{className:"flex flex-col sm:flex-row items-start gap-4",children:[a.jsx("div",{className:"bg-gold/20 text-gold-dark p-3 rounded-full shrink-0",children:z.length>0?a.jsx(Gd,{className:"w-6 h-6"}):a.jsx(Gt,{className:"w-6 h-6"})}),a.jsx("div",{className:"flex-grow",children:z.length>0?a.jsxs(a.Fragment,{children:[a.jsx("h2",{className:"font-playfair text-2xl font-bold text-charcoal",children:"Next Steps to Get Verified"}),a.jsx("p",{className:"mt-2 text-gray-dark",children:"To complete your verification, please take care of the items below:"}),a.jsx("ul",{className:"mt-4 space-y-2 list-disc list-inside text-charcoal font-semibold",children:z.map(Y=>a.jsxs("li",{children:[Y.status==="notUploaded"?"Upload":"Replace"," ",Y.name," ",a.jsx("span",{className:"font-normal text-gray-dark",children:R(Y.status)})]},String(Y.id)))}),a.jsx("p",{className:"mt-4 text-xs text-text-muted italic",children:"Once these are uploaded, our team typically reviews within 23 business days."})]}):a.jsxs(a.Fragment,{children:[a.jsx("h2",{className:"font-playfair text-2xl font-bold text-charcoal",children:"Youre all set for now"}),a.jsx("p",{className:"mt-2 text-gray-dark",children:"All submitted documents are either approved or under review. Well notify you if we need anything else."})]})})]})})};return a.jsxs("div",{className:"animate-fade-in space-y-8",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"font-playfair text-4xl font-bold text-[var(--text-main)]",children:"Verification Documents"}),a.jsx("p",{className:"mt-2 text-lg text-[var(--text-muted)]",children:"Upload and manage the documents we need to verify your business."})]}),a.jsx(k,{}),a.jsxs(ve,{className:"p-0",children:[a.jsx("div",{className:"p-6 border-b border-[var(--border-subtle)]",children:a.jsx("h2",{className:"font-playfair text-2xl font-bold text-[var(--text-main)]",children:"Document Checklist"})}),a.jsx("ul",{className:"divide-y divide-[var(--border-subtle)]",children:r.length===0?a.jsx("li",{className:"p-6 text-sm text-[var(--text-muted)]",children:"No documents uploaded yet. Use the form below to submit your first document."}):r.map(R=>{const{icon:Y,color:ne,label:re}=B[R.status];return a.jsx("li",{className:"p-6 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:a.jsxs("div",{className:"flex items-start flex-grow",children:[a.jsx(Y,{className:`w-7 h-7 mr-4 mt-1 shrink-0 ${ne}`}),a.jsxs("div",{children:[a.jsx("p",{className:"font-bold text-lg text-[var(--text-main)]",children:R.docTypeLabel}),a.jsxs("p",{className:`text-sm font-semibold ${ne}`,children:[re,R.uploadDate&&a.jsxs("span",{className:"text-[var(--text-muted)] font-normal ml-2",children:[" Uploaded: ",R.uploadDate]})]}),R.fileName&&a.jsxs("p",{className:"text-xs text-[var(--text-muted)] mt-1",children:["File: ",R.fileName,R.fileSize?`  ${R.fileSize}`:""]}),R.adminNote&&a.jsxs("p",{className:"text-xs text-[var(--text-muted)] italic mt-1",children:["Note: ",R.adminNote]})]})]})},R.id)})}),a.jsxs("div",{className:"p-6 bg-[var(--bg-subtle)] rounded-b-2xl",children:[a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[a.jsx("p",{className:"text-sm font-semibold text-[var(--text-main)]",children:"Overall Progress"}),a.jsx("p",{className:"text-sm font-bold text-[var(--text-main)]",children:U>0?`${C} of ${U} documents approved`:"Upload your first document to begin verification"})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:a.jsx("div",{className:"bg-[var(--accent)] h-2.5 rounded-full transition-all duration-500",style:{width:`${X}%`}})})]})]}),a.jsxs(ve,{children:[a.jsx("h2",{className:"font-playfair text-2xl font-bold text-[var(--text-main)] mb-4",children:"Upload Documents"}),a.jsxs("form",{onSubmit:I,className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"document-type",className:"block text-sm font-semibold text-[var(--text-main)] mb-2",children:"Document type"}),a.jsxs("select",{id:"document-type",value:p,onChange:ce,className:"w-full rounded-lg border border-[var(--border-subtle)] bg-[var(--bg-card)] px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-[var(--accent)]",children:[a.jsx("option",{value:"",children:"Select a document type"}),DN.map(R=>a.jsx("option",{value:R.value,children:R.label},R.value))]})]}),a.jsxs("div",{className:"relative flex flex-col items-center justify-center p-10 border-2 border-dashed rounded-xl bg-[var(--bg-subtle)] border-[var(--border-subtle)]",children:[a.jsx(sn,{className:"w-12 h-12 text-[var(--text-muted)]"}),g?a.jsxs(a.Fragment,{children:[a.jsx("p",{className:"mt-4 text-lg font-semibold text-[var(--text-main)]",children:g.name}),a.jsx("p",{className:"text-sm text-[var(--text-muted)]",children:ah(g.size)??`${g.size} bytes`})]}):a.jsx("p",{className:"mt-4 text-lg font-semibold text-[var(--text-main)]",children:"Select a file to upload"}),a.jsx("p",{className:"text-sm text-[var(--text-muted)] mt-2",children:"Accepted: PDF, JPG, PNG (max 10MB each)"}),a.jsx("input",{ref:E,type:"file",className:"hidden",onChange:te,accept:".pdf,.jpg,.jpeg,.png"}),a.jsx("button",{type:"button",onClick:J,className:"mt-6 py-2.5 px-6 bg-[var(--bg-card)] border border-[var(--border-subtle)] rounded-lg font-semibold text-[var(--text-main)] hover:bg-[var(--bg-subtle)] shadow-sm",children:"Choose file"})]}),(w||S)&&a.jsxs("div",{className:"space-y-2",children:[w&&a.jsx("p",{className:"text-sm text-error",children:w}),S&&a.jsx("p",{className:"text-sm text-success",children:S})]}),a.jsx("div",{className:"flex justify-end",children:a.jsx("button",{type:"submit",disabled:!p||!g||o,className:"py-2.5 px-8 bg-gold text-charcoal font-bold rounded-lg shadow-lg hover:bg-gold-light transition-all transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:scale-100",children:o?"Uploading...":"Submit for Verification"})})]})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsx("h2",{className:"font-playfair text-2xl font-bold text-[var(--text-main)]",children:"Uploaded Documents"}),se.length===0?a.jsx(ve,{className:"text-sm text-[var(--text-muted)]",children:"No documents have been uploaded yet."}):se.map(R=>a.jsx(ve,{className:"flex flex-col gap-3",children:a.jsx("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("p",{className:"font-bold text-[var(--text-main)]",children:R.fileName}),a.jsx("span",{className:`px-2 py-0.5 text-xs font-semibold rounded-full ${B[R.status].pill}`,children:B[R.status].label})]}),a.jsxs("p",{className:"text-sm text-[var(--text-muted)] mt-1",children:[R.uploadTimestamp??"Pending timestamp",R.fileSize?`  ${R.fileSize}`:""]}),R.adminNote&&a.jsxs("p",{className:"text-xs text-[var(--text-muted)] italic mt-2",children:["Admin Note: ",R.adminNote]})]})})},R.id))]}),a.jsx(F,{}),a.jsxs(ve,{children:[a.jsxs("button",{onClick:()=>h(!u),className:"w-full flex justify-between items-center text-left",children:[a.jsx("h2",{className:"font-playfair text-2xl font-bold text-[var(--text-main)]",children:"Document Upload Guidelines"}),a.jsx(rn,{className:`w-6 h-6 text-[var(--text-muted)] transition-transform ${u?"rotate-180":""}`})]}),u&&a.jsxs("div",{className:"mt-4 pt-4 border-t border-[var(--border-subtle)] animate-fade-in",children:[a.jsxs("ul",{className:"space-y-2 list-disc list-inside text-[var(--text-muted)]",children:[a.jsx("li",{children:"Documents must be current and not expired."}),a.jsx("li",{children:"Text must be clearly readable, no blurry photos."}),a.jsx("li",{children:"Upload all pages, front and back if applicable."}),a.jsx("li",{children:"Information must match your business name and details."})]}),a.jsxs("div",{className:"mt-6 pt-6 border-t border-[var(--border-subtle)] flex flex-col sm:flex-row justify-between items-start sm:items-center gap-2",children:[a.jsx("p",{className:"text-[var(--text-main)] font-semibold",children:"Need help with your documents?"}),a.jsx("a",{href:"mailto:documents@restorationexpertise.com",className:"font-bold text-[var(--accent-dark)] hover:underline",children:"Contact Support "})]})]})]})]})},UN=({benefit:r,onClose:s,onRequest:i})=>{const o=r.quota&&r.used?r.used/r.quota*100:0,c=r.quota!==void 0&&r.used!==void 0&&r.used<r.quota;return a.jsx("div",{className:"fixed inset-0 bg-[var(--bg-overlay)] flex items-center justify-center z-50 p-4 animate-fade-in",onClick:s,children:a.jsxs("div",{className:"bg-[var(--bg-card)] rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto relative animate-slide-up",onClick:u=>u.stopPropagation(),children:[a.jsxs("div",{className:"p-6 sm:p-8",children:[a.jsx("button",{onClick:s,className:"absolute top-4 right-4 text-[var(--text-muted)] hover:text-[var(--text-main)]",children:a.jsx(wt,{className:"w-8 h-8"})}),a.jsx("h2",{className:"font-playfair text-3xl font-bold text-[var(--text-main)] mb-2",children:r.title}),a.jsx("p",{className:"text-[var(--text-muted)] text-lg",children:r.description}),r.quota!==void 0&&r.used!==void 0&&a.jsxs("div",{className:"mt-6",children:[a.jsx("h3",{className:"font-semibold text-[var(--text-main)] mb-2",children:"Current Usage"}),a.jsxs("div",{className:"flex justify-between text-sm font-medium text-[var(--text-muted)] mb-1",children:[a.jsx("span",{children:"Usage"}),a.jsxs("span",{children:[r.used," of ",r.quota," used this year"]})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:a.jsx("div",{className:"bg-[var(--accent)] h-2.5 rounded-full",style:{width:`${o}%`}})})]}),a.jsxs("div",{className:"mt-8 pt-6 border-t border-[var(--border-subtle)] space-y-3",children:[a.jsx("h3",{className:"font-semibold text-[var(--text-main)]",children:"History (Example)"}),a.jsxs("ul",{className:"text-sm text-[var(--text-muted)] space-y-2",children:[a.jsxs("li",{className:"flex justify-between",children:[a.jsx("span",{children:"Request for 'Basement Mold Prevention'"})," ",a.jsx("span",{children:"Jul 15, 2024"})]}),a.jsxs("li",{className:"flex justify-between",children:[a.jsx("span",{children:"Request for 'Post-Fire Cleanup Guide'"})," ",a.jsx("span",{children:"Jan 20, 2024"})]})]})]})]}),a.jsxs("div",{className:"p-6 bg-[var(--bg-subtle)] sticky bottom-0 rounded-b-2xl flex flex-col sm:flex-row justify-end items-center gap-4",children:[a.jsx("button",{onClick:s,className:"w-full sm:w-auto py-2.5 px-6 bg-[var(--bg-card)] border border-[var(--border-subtle)] rounded-lg font-semibold shadow-sm hover:bg-[var(--bg-subtle)]",children:"Close"}),c&&a.jsx("button",{onClick:()=>i(r.title),className:"w-full sm:w-auto py-2.5 px-6 bg-[var(--accent)] text-[var(--accent-text)] font-bold rounded-lg shadow-md hover:bg-[var(--accent-light)]",children:"Request new post"})]})]})})},LN=({benefits:r})=>{const{totalUsed:s,totalQuota:i,usagePercent:o,readableBenefits:c}=_.useMemo(()=>{const m=r.filter(N=>N.quota!==void 0&&N.used!==void 0),g=m.reduce((N,S)=>N+(S.used||0),0),b=m.reduce((N,S)=>N+(S.quota||0),0),w=b>0?g/b*100:0;return{totalUsed:g,totalQuota:b,usagePercent:w,readableBenefits:m}},[r]),u=60,h=2*Math.PI*u,p=h-o/100*h;return a.jsxs(ve,{children:[a.jsx("h2",{className:"font-playfair text-2xl font-bold text-[var(--text-main)] mb-4",children:"Usage Overview"}),a.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-8",children:[a.jsxs("div",{className:"relative w-40 h-40 shrink-0",children:[a.jsxs("svg",{className:"w-full h-full",viewBox:"0 0 140 140",children:[a.jsx("circle",{className:"text-gray-200",strokeWidth:"12",stroke:"currentColor",fill:"transparent",r:u,cx:"70",cy:"70"}),a.jsx("circle",{className:"text-[var(--accent)]",strokeWidth:"12",strokeDasharray:h,strokeDashoffset:p,strokeLinecap:"round",stroke:"currentColor",fill:"transparent",r:u,cx:"70",cy:"70",style:{transform:"rotate(-90deg)",transformOrigin:"50% 50%",transition:"stroke-dashoffset 0.5s ease-out"}})]}),a.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center font-bold text-[var(--text-main)]",children:[a.jsx("span",{className:"font-playfair text-3xl",children:s}),a.jsxs("span",{className:"text-lg text-[var(--text-muted)]",children:["/ ",i," Used"]})]})]}),a.jsx("div",{className:"w-full",children:a.jsx("ul",{className:"space-y-2",children:c.map(m=>a.jsxs("li",{className:"text-sm",children:[a.jsxs("div",{className:"flex justify-between font-medium",children:[a.jsx("span",{children:m.title}),a.jsxs("span",{className:"text-[var(--text-muted)]",children:[m.used,"/",m.quota]})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1.5 mt-1",children:a.jsx("div",{className:"bg-[var(--accent)] h-1.5 rounded-full",style:{width:`${m.used/m.quota*100}%`}})})]},m.title))})})]})]})},BN=({showToast:r})=>{const{currentUser:s,updateUser:i}=nt(),[o,c]=_.useState((s==null?void 0:s.benefits)||[]),[u,h]=_.useState(null);if(_.useEffect(()=>{c((s==null?void 0:s.benefits)||[])},[s==null?void 0:s.benefits]),!s||!s.plan)return null;const{plan:p}=s,m={Gold:"bg-gold text-charcoal",Silver:"bg-gray-300 text-charcoal",Bronze:"bg-yellow-700 text-white","Founding Member":"bg-charcoal text-gold",Platinum:"bg-gray-800 text-white"},g={NewspaperIcon:Co,ChartBarIcon:kx,ShieldCheckIcon:_t,ChatBubbleOvalLeftEllipsisIcon:To},b=N=>{const S=o.map(v=>v.title===N&&v.used!==void 0&&v.quota!==void 0&&v.used<v.quota?{...v,used:v.used+1}:v);c(S),i({...s,benefits:S}),r(" Request submitted! Our team will reach out within 23 business days.","success"),h(null)},w=({benefit:N,onClick:S})=>{const v=g[N.icon],E=N.quota&&N.used?N.used/N.quota*100:0;return a.jsxs(ve,{onClick:S,className:"flex flex-col",children:[a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx("div",{className:"bg-[var(--accent-bg-subtle)] text-[var(--accent-dark)] p-3 rounded-full",children:v&&a.jsx(v,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-playfair text-xl font-bold text-[var(--text-main)]",children:N.title}),a.jsx("p",{className:"text-sm text-[var(--text-muted)] mt-1",children:N.description})]})]}),a.jsxs("div",{className:"mt-4 pt-4 border-t border-[var(--border-subtle)] flex-grow",children:[N.quota!==void 0&&N.used!==void 0&&a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between text-sm font-medium text-[var(--text-muted)] mb-1",children:[a.jsx("span",{children:"Usage"}),a.jsxs("span",{children:[N.used," of ",N.quota," used"]})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:a.jsx("div",{className:"bg-[var(--accent)] h-2.5 rounded-full",style:{width:`${E}%`}})})]}),N.nextDate&&a.jsxs("p",{className:"text-sm font-semibold text-[var(--text-main)]",children:["Next scheduled: ",a.jsx("span",{className:"font-normal",children:N.nextDate})]}),N.status&&a.jsxs("p",{className:"text-sm font-semibold text-[var(--text-main)]",children:["Status: ",a.jsx("span",{className:"font-normal text-success",children:N.status})]}),N.isIncluded&&a.jsxs("p",{className:"text-sm font-semibold text-success flex items-center gap-1",children:[a.jsx(Gt,{className:"w-4 h-4"})," Included in your plan"]})]}),N.quota!==void 0&&a.jsx("div",{className:"mt-4 text-right",children:a.jsx("button",{onClick:y=>{y.stopPropagation(),S()},className:"py-2 px-4 bg-[var(--accent)] text-[var(--accent-text)] font-bold text-sm rounded-lg shadow-sm hover:bg-[var(--accent-light)]",children:"Request Now"})})]})};return a.jsxs("div",{className:"animate-fade-in space-y-8",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"font-playfair text-4xl font-bold text-[var(--text-main)]",children:"Your Membership Benefits"}),a.jsx("p",{className:"mt-2 text-lg text-[var(--text-muted)]",children:"See whats included in your plan and how to make the most of your membership."})]}),a.jsx(ve,{children:a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"font-playfair text-2xl font-bold text-[var(--text-main)]",children:"Your Current Plan"}),a.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[a.jsx("span",{className:`px-4 py-1 text-sm font-bold rounded-full ${m[p.name]||"bg-gray-200"}`,children:p.name}),a.jsx("span",{className:"font-semibold text-[var(--text-main)]",children:p.rating})]}),a.jsxs("p",{className:"text-sm text-[var(--text-muted)] mt-2",children:[p.billingCycle,"  Renews on ",p.renewalDate]})]}),a.jsxs("div",{className:"flex gap-3 self-end md:self-center",children:[a.jsx("button",{onClick:()=>r("Coming soon","success"),className:"py-2.5 px-5 bg-[var(--bg-card)] border border-[var(--border-subtle)] rounded-lg font-semibold shadow-sm hover:bg-[var(--bg-subtle)]",children:"View Invoice"}),a.jsx("button",{onClick:()=>r("Coming soon","success"),className:"py-2.5 px-5 bg-[var(--accent)] text-[var(--accent-text)] font-bold rounded-lg shadow-md hover:bg-[var(--accent-light)]",children:"Upgrade Plan"})]})]})}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:o.map((N,S)=>a.jsx(w,{benefit:N,onClick:()=>h(N)},S))}),a.jsx(LN,{benefits:o}),a.jsxs("div",{className:"bg-gradient-to-r from-gold to-gold-dark text-charcoal p-8 rounded-2xl shadow-lg flex flex-col md:flex-row justify-between items-center gap-6",children:[a.jsxs("div",{className:"text-center md:text-left",children:[a.jsx("h2",{className:"font-playfair text-2xl font-bold",children:"Ready to grow faster?"}),a.jsx("p",{className:"mt-1",children:"Upgrade to Platinum and unlock unlimited SEO posts, faster reviews, and exclusive member promotions."})]}),a.jsx("button",{onClick:()=>r("Coming soon","success"),className:"py-3 px-8 bg-charcoal text-white font-bold rounded-lg shadow-md hover:bg-charcoal-light transition-colors whitespace-nowrap",children:"Compare Plans"})]}),u&&a.jsx(UN,{benefit:o.find(N=>N.title===u.title)||u,onClose:()=>h(null),onRequest:b})]})},zN=({isOpen:r,onClose:s,onConfirm:i})=>r?a.jsx("div",{className:"fixed inset-0 bg-[var(--bg-overlay)] flex items-center justify-center z-50 p-4 animate-fade-in",onClick:s,children:a.jsxs("div",{className:"bg-[var(--bg-card)] rounded-2xl shadow-2xl w-full max-w-md max-h-[90vh] overflow-y-auto relative animate-slide-up",onClick:o=>o.stopPropagation(),children:[a.jsxs("div",{className:"p-6 sm:p-8",children:[a.jsx("h2",{className:"font-playfair text-2xl font-bold text-[var(--text-main)] mb-4",children:"Pause Billing"}),a.jsx("p",{className:"text-[var(--text-muted)] mb-6",children:"Your subscription will be paused from your next renewal date. You will not be billed and your benefits will be temporarily suspended."}),a.jsxs("fieldset",{className:"space-y-3",children:[a.jsx("legend",{className:"font-semibold text-[var(--text-main)]",children:"Pause duration (dummy):"}),a.jsxs("label",{className:"flex items-center gap-3 p-3 border rounded-lg",children:[a.jsx("input",{type:"radio",name:"pause-duration",className:"h-4 w-4 text-[var(--accent)] focus:ring-[var(--accent)]"})," 1 Month"]}),a.jsxs("label",{className:"flex items-center gap-3 p-3 border rounded-lg",children:[a.jsx("input",{type:"radio",name:"pause-duration",className:"h-4 w-4 text-[var(--accent)] focus:ring-[var(--accent)]"})," 3 Months"]})]})]}),a.jsxs("div",{className:"p-6 bg-[var(--bg-subtle)] sticky bottom-0 rounded-b-2xl flex flex-col sm:flex-row justify-end items-center gap-4",children:[a.jsx("button",{onClick:s,className:"w-full sm:w-auto py-2.5 px-6 bg-[var(--bg-card)] border border-[var(--border-subtle)] rounded-lg font-semibold shadow-sm hover:bg-[var(--bg-subtle)]",children:"Cancel"}),a.jsx("button",{onClick:i,className:"w-full sm:w-auto py-2.5 px-6 bg-[var(--accent)] text-[var(--accent-text)] font-bold rounded-lg shadow-md hover:bg-[var(--accent-light)]",children:"Confirm Pause"})]})]})}):null,qN=({isOpen:r,onClose:s,onConfirm:i})=>r?a.jsx("div",{className:"fixed inset-0 bg-[var(--bg-overlay)] flex items-center justify-center z-50 p-4 animate-fade-in",onClick:s,children:a.jsxs("div",{className:"bg-[var(--bg-card)] rounded-2xl shadow-2xl w-full max-w-lg max-h-[90vh] overflow-y-auto relative animate-slide-up",onClick:o=>o.stopPropagation(),children:[a.jsxs("div",{className:"p-6 sm:p-8 text-center",children:[a.jsx("div",{className:"mx-auto w-16 h-16 flex items-center justify-center rounded-full bg-error/10 text-error mb-4",children:a.jsx(_a,{className:"w-8 h-8"})}),a.jsx("h2",{className:"font-playfair text-3xl font-bold text-[var(--text-main)] mb-4",children:"Are you sure you want to cancel?"}),a.jsx("p",{className:"text-[var(--text-muted)] text-lg",children:"Canceling will remove your active badge and network listing at the end of your current period. You will lose access to all your membership benefits."})]}),a.jsxs("div",{className:"p-6 bg-[var(--bg-subtle)] sticky bottom-0 rounded-b-2xl flex flex-col-reverse sm:flex-row justify-center items-center gap-4",children:[a.jsx("button",{onClick:i,className:"w-full sm:w-auto py-2.5 px-6 bg-error text-white font-bold rounded-lg shadow-md hover:bg-red-600",children:"Cancel at end of period"}),a.jsx("button",{onClick:s,className:"w-full sm:w-auto py-2.5 px-6 bg-[var(--accent)] text-[var(--accent-text)] font-bold rounded-lg shadow-md hover:bg-[var(--accent-light)]",children:"Keep my subscription"})]})]})}):null,PN=({showToast:r,billingData:s,invoices:i=[]})=>{var y;const{session:o}=nt(),[c,u]=_.useState(!1),[h,p]=_.useState(!1),m=()=>{p(!1),r("Your subscription is scheduled for cancellation.","success")};if(!s)return a.jsx(ve,{children:a.jsx("p",{children:"Billing information is not available."})});const g={plan:s.plan_name||"Unknown Plan",status:s.subscription_status||"Unknown",renewalDate:s.next_renewal_date,price:s.plan_price||"$0"},b={brand:s.payment_method_brand||"Unknown",last4:s.payment_method_last4||"****",expiry:s.payment_method_expiry||"",cardholder:s.cardholder_name||((y=o==null?void 0:o.user)==null?void 0:y.email)||"Unknown"},N={Active:{text:"Active",color:"bg-success/20 text-success"},"Past due":{text:"Past Due",color:"bg-warning/20 text-yellow-800"},Canceled:{text:"Ends on "+g.renewalDate,color:"bg-gray-200 text-gray-dark"}}[g.status],S=C=>C.toLowerCase()==="visa"?a.jsx("div",{className:"font-bold text-blue-800 italic text-2xl",children:"VISA"}):C.toLowerCase()==="mastercard"?a.jsx("div",{className:"font-bold text-red-600",children:"Mastercard"}):a.jsx(lr,{className:"w-8 h-8 text-gray-dark"}),v=C=>({Paid:"bg-success/20 text-success",Failed:"bg-error/20 text-error",Pending:"bg-warning/20 text-yellow-800"})[C],E=()=>g.status==="Past due"?a.jsxs("div",{className:"p-4 rounded-xl bg-warning/10 border border-warning/20 flex items-center gap-4",children:[a.jsx(_a,{className:"w-6 h-6 text-warning shrink-0"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-bold text-yellow-900",children:"Your last payment failed."}),a.jsx("p",{className:"text-sm text-yellow-800",children:"Please update your payment method to avoid interruption."})]})]}):g.status==="Canceled"?a.jsxs("div",{className:"p-4 rounded-xl bg-[var(--bg-subtle)] border border-[var(--border-subtle)] flex items-center gap-4",children:[a.jsx(_a,{className:"w-6 h-6 text-[var(--text-muted)] shrink-0"}),a.jsxs("div",{children:[a.jsxs("p",{className:"font-bold text-[var(--text-main)]",children:["Your subscription is scheduled to end on ",g.renewalDate,"."]}),a.jsx("p",{className:"text-sm text-[var(--text-muted)]",children:"Your badge and benefits will become inactive after that date."})]})]}):a.jsxs("div",{className:"p-4 rounded-xl bg-[var(--bg-subtle)] border border-[var(--border-subtle)] flex items-center gap-4",children:[a.jsx(lr,{className:"w-6 h-6 text-[var(--text-muted)] shrink-0"}),a.jsxs("p",{className:"text-[var(--text-main)] sm:text-lg",children:["Next payment: ",a.jsxs("span",{className:"font-bold",children:[g.price.split(" ")[0]," on ",g.renewalDate]}),"  ",g.planName," plan  Billed ",g.billingCycle]})]});return a.jsxs(a.Fragment,{children:[a.jsx(zN,{isOpen:c,onClose:()=>u(!1),onConfirm:()=>{r("Your subscription will be paused starting from the next billing cycle.","success"),u(!1)}}),a.jsx(qN,{isOpen:h,onClose:()=>p(!1),onConfirm:m}),a.jsxs("div",{className:"animate-fade-in space-y-8",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"font-playfair text-4xl font-bold text-[var(--text-main)]",children:"Billing & Subscription"}),a.jsx("p",{className:"mt-2 text-lg text-[var(--text-muted)]",children:"Manage your Restoration Expertise membership, payment details, and invoices."})]}),a.jsx(E,{}),a.jsx(ve,{children:a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start gap-4",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"font-playfair text-2xl font-bold text-[var(--text-main)]",children:"Current Subscription"}),a.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[a.jsxs("p",{className:"text-xl font-semibold text-[var(--text-main)]",children:[g.planName,"  ",g.price]}),a.jsx("span",{className:`px-3 py-1 text-xs font-bold rounded-full ${N.color}`,children:N.text})]}),a.jsxs("p",{className:"text-sm text-[var(--text-muted)] mt-2",children:[g.status==="Canceled"?"Access ends":"Next charge",": ",g.renewalDate,"  Member since: ",g.startedAt]})]}),a.jsxs("div",{className:"flex gap-3 self-end md:self-auto shrink-0",children:[a.jsx("button",{onClick:()=>r("This will be connected to Stripe later.","success"),className:"py-2.5 px-5 bg-[var(--bg-card)] border border-[var(--border-subtle)] rounded-lg font-semibold shadow-sm hover:bg-[var(--bg-subtle)]",children:"Change plan"}),a.jsx("button",{onClick:()=>r("This will be connected to Stripe later.","success"),className:"py-2.5 px-5 bg-[var(--accent)] text-[var(--accent-text)] font-bold rounded-lg shadow-md hover:bg-[var(--accent-light)]",children:"Open customer portal"})]})]})}),a.jsxs(ve,{className:g.status==="Past due"?"border-2 border-warning":"",children:[a.jsx("h2",{className:"font-playfair text-2xl font-bold text-[var(--text-main)] mb-4",children:"Payment Method"}),a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start gap-4",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-16 h-10 bg-gray-200 rounded-md flex items-center justify-center",children:S(b.brand)}),a.jsxs("div",{children:[a.jsxs("p",{className:"font-semibold text-[var(--text-main)]",children:[b.brand," ending in ",b.last4]}),a.jsxs("p",{className:"text-sm text-[var(--text-muted)]",children:["Expires ",b.expiry]}),a.jsxs("p",{className:"text-sm text-[var(--text-muted)] mt-1",children:["Cardholder: ",b.cardholder]})]})]}),a.jsxs("div",{className:"flex gap-3 self-end md:self-auto shrink-0",children:[a.jsx("button",{onClick:()=>r("Card update flow will be handled by Stripe in the live version.","success"),className:"py-2.5 px-5 bg-[var(--bg-card)] border border-[var(--border-subtle)] rounded-lg font-semibold shadow-sm hover:bg-[var(--bg-subtle)]",children:"Update card"}),a.jsx("button",{disabled:!0,className:"py-2.5 px-5 bg-[var(--bg-card)] border border-[var(--border-subtle)] rounded-lg font-semibold shadow-sm disabled:opacity-50 disabled:cursor-not-allowed",children:"Remove"})]})]})]}),a.jsxs(ve,{children:[a.jsx("h2",{className:"font-playfair text-2xl font-bold text-[var(--text-main)] mb-4",children:"Invoice History"}),a.jsx("div",{className:"overflow-x-auto hidden md:block",children:a.jsxs("table",{className:"min-w-full",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b border-[var(--border-subtle)]",children:[a.jsx("th",{className:"py-3 px-4 text-left text-sm font-semibold text-[var(--text-muted)]",children:"Invoice #"}),a.jsx("th",{className:"py-3 px-4 text-left text-sm font-semibold text-[var(--text-muted)]",children:"Date"}),a.jsx("th",{className:"py-3 px-4 text-left text-sm font-semibold text-[var(--text-muted)]",children:"Amount"}),a.jsx("th",{className:"py-3 px-4 text-left text-sm font-semibold text-[var(--text-muted)]",children:"Status"}),a.jsx("th",{className:"py-3 px-4 text-right text-sm font-semibold text-[var(--text-muted)]",children:"Actions"})]})}),a.jsx("tbody",{children:i==null?void 0:i.map(C=>a.jsxs("tr",{className:"border-b border-[var(--border-subtle)] last:border-0 hover:bg-[var(--bg-subtle)]",children:[a.jsx("td",{className:"py-3 px-4 text-[var(--text-main)] font-semibold",children:C.id}),a.jsx("td",{className:"py-3 px-4 text-[var(--text-main)]",children:C.date}),a.jsx("td",{className:"py-3 px-4 text-[var(--text-main)]",children:C.amount}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:`px-3 py-1 text-xs font-semibold rounded-full ${v(C.status)}`,children:C.status})}),a.jsx("td",{className:"py-3 px-4 text-right",children:a.jsx("button",{onClick:()=>r("Download will be available in the live version.","success"),className:"p-2 text-[var(--text-muted)] hover:text-[var(--accent-dark)]",children:a.jsx(As,{className:"w-5 h-5"})})})]},C.id))})]})}),a.jsx("div",{className:"space-y-4 md:hidden",children:i==null?void 0:i.map(C=>a.jsxs("div",{className:"p-4 border border-[var(--border-subtle)] rounded-lg",children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-bold text-[var(--text-main)]",children:C.id}),a.jsx("p",{className:"text-sm text-[var(--text-muted)]",children:C.date})]}),a.jsx("span",{className:`px-3 py-1 text-xs font-semibold rounded-full ${v(C.status)}`,children:C.status})]}),a.jsxs("div",{className:"flex justify-between items-center mt-3 pt-3 border-t border-[var(--border-subtle)]",children:[a.jsx("p",{className:"font-semibold text-[var(--text-main)]",children:C.amount}),a.jsxs("button",{onClick:()=>r("Download will be available in the live version.","success"),className:"flex items-center gap-2 py-1 px-3 bg-[var(--bg-card)] border border-[var(--border-subtle)] rounded-lg text-sm font-semibold",children:[a.jsx(As,{className:"w-4 h-4"})," PDF"]})]})]},C.id))})]}),a.jsxs(ve,{children:[a.jsx("h2",{className:"font-playfair text-2xl font-bold text-[var(--text-main)] mb-2",children:"Manage Subscription"}),a.jsx("p",{className:"text-[var(--text-muted)] mb-6",children:"Control your membership status. Changes here will affect your access to benefits and your badge."}),g.status==="Canceled"?a.jsx("div",{className:"p-4 bg-[var(--bg-subtle)] rounded-lg text-center text-[var(--text-muted)] font-medium",children:"Subscription already scheduled for cancellation."}):a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[a.jsx("button",{onClick:()=>u(!0),className:"py-3 px-4 bg-[var(--bg-card)] border border-[var(--border-subtle)] rounded-lg font-semibold shadow-sm hover:bg-[var(--bg-subtle)]",children:"Pause billing"}),a.jsx("button",{onClick:()=>p(!0),className:"py-3 px-4 bg-[var(--bg-card)] border border-[var(--border-subtle)] rounded-lg font-semibold shadow-sm text-error hover:bg-error/5",children:"Cancel subscription"}),a.jsx("button",{onClick:()=>r("Use the payment method section above to update your card.","success"),className:"py-3 px-4 bg-[var(--bg-card)] border border-[var(--border-subtle)] rounded-lg font-semibold shadow-sm hover:bg-[var(--bg-subtle)]",children:"Update billing details"})]})]})]})]})},IN=[{title:"Monthly Owner Roundtable",date:"March 5, 2025  3:00 PM CST",type:"Zoom Call",tier:null},{title:"Website & SEO Hotseat",date:"March 18, 2025  2:00 PM CST",type:"Workshop",tier:"Gold+"},{title:"Badge Optimization Workshop",date:"April 2, 2025  4:00 PM CST",type:"Workshop",tier:null}],$N=[{title:"Start Here: Onboarding Post",description:"New to the group? Introduce yourself and get the lay of the land.",icon:Ao,link:"#"},{title:"Monthly Wins Thread",description:"Share your recent victories, big or small. Let's celebrate together.",icon:Eo,link:"#"},{title:"Website & SEO Review Thread",description:"Get feedback on your site from the community and our team.",icon:fr,link:"#"},{title:"Hiring & Operations Thread",description:"Discuss challenges and solutions for finding and managing great people.",icon:ko,link:"#"}],HN=({onNavigate:r})=>{var b;const{currentUser:s}=nt(),i=_.useRef(null),[o,c]=_.useState(!1),[u,h]=_.useState(!1),p=()=>{var w;(w=i.current)==null||w.scrollIntoView({behavior:"smooth"})},m=[{title:"Case study: How XYZ Restoration added $40k/mo with SEO + reviews.",snippet:"John from XYZ breaks down the exact steps he took to dominate local search results, from optimizing his Google Business Profile to implementing a simple, effective review generation system.",link:"#"},{title:"Discussion: Should you niche into water only or stay full service?",snippet:"A lively debate on the pros and cons of specializing vs. being a one-stop-shop. See what other successful owners are doing and why.",link:"#"},{title:"Win: Member landed a $15k fire job from a website badge visitor.",snippet:"Sarah shares how a homeowner found her through the Restoration Expertise network and specifically mentioned the verification badge as the deciding factor.",link:"#"}],g=["Real talk from other owners, not theory.","Feedback on your website, offers and systems.","First access to new tools, templates and calls.","Priority answers from the Restoration Expertise team."];return a.jsxs("div",{className:"animate-fade-in space-y-8",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"font-playfair text-4xl font-bold text-[var(--text-main)]",children:"Community Hub"}),a.jsx("p",{className:"mt-2 text-lg text-[var(--text-muted)]",children:"Connect with other restoration owners, share wins, and get support from our team."})]}),a.jsx(ve,{className:"!p-0 overflow-hidden",children:a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3",children:[a.jsxs("div",{className:"lg:col-span-2 p-8 bg-[var(--accent-bg-subtle)]",children:[a.jsx("h2",{className:"font-playfair text-3xl font-bold text-[var(--text-main)] mb-4",children:"Join the Restoration Expertise Community"}),a.jsx("p",{className:"text-[var(--text-muted)] mb-6 max-w-xl",children:"Ask questions, share best practices, and learn from other verified restoration companies in our private, members-only group."}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[a.jsx("a",{href:"https://facebook.com/groups/restorationexpertise",target:"_blank",rel:"noopener noreferrer",className:"py-3 px-6 bg-[var(--accent)] text-[var(--accent-text)] font-bold rounded-lg shadow-md hover:bg-[var(--accent-light)] text-center",children:"Join Private Facebook Group"}),a.jsx("button",{onClick:p,className:"py-3 px-6 bg-[var(--bg-card)] border border-[var(--border-subtle)] rounded-lg font-semibold text-[var(--text-main)] shadow-sm hover:bg-[var(--bg-subtle)]",children:"Community Guidelines"})]})]}),a.jsxs("div",{className:"lg:col-span-1 bg-[var(--accent-bg-subtle)] p-8 flex flex-col justify-center",children:[a.jsx("h3",{className:"font-semibold text-[var(--text-main)] mb-4",children:"Community Stats"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(ks,{className:"w-6 h-6 text-[var(--accent-dark)]"}),a.jsxs("p",{className:"text-[var(--text-main)]",children:[a.jsx("span",{className:"font-bold text-xl",children:"134"})," members"]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(To,{className:"w-6 h-6 text-[var(--accent-dark)]"}),a.jsxs("p",{className:"text-[var(--text-main)]",children:[a.jsx("span",{className:"font-bold text-xl",children:"18"})," posts, ",a.jsx("span",{className:"font-bold text-xl",children:"42"})," comments this week"]})]})]})]})]})}),a.jsxs(ve,{children:[a.jsx("h2",{className:"font-playfair text-2xl font-bold text-[var(--text-main)] mb-4",children:"Why join?"}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:g.map((w,N)=>a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"bg-success/10 text-success p-1.5 rounded-full mt-1",children:a.jsx(vi,{className:"w-4 h-4"})}),a.jsx("p",{className:"text-[var(--text-main)]",children:w})]},N))})]}),a.jsxs(ve,{children:[a.jsx("h2",{className:"font-playfair text-2xl font-bold text-[var(--text-main)] mb-4",children:"Community Highlights"}),a.jsx("div",{className:"space-y-6",children:m.map((w,N)=>a.jsxs("div",{className:"pb-6 border-b border-[var(--border-subtle)] last:border-b-0 last:pb-0",children:[a.jsx("h3",{className:"font-bold text-lg text-[var(--text-main)] mb-2",children:w.title}),a.jsx("p",{className:"text-[var(--text-muted)] mb-3",children:w.snippet}),a.jsx("a",{href:w.link,target:"_blank",rel:"noopener noreferrer",className:"font-semibold text-[var(--accent-dark)] hover:underline",children:"View in group "})]},N))})]}),a.jsx("div",{ref:i,className:"scroll-mt-20",children:a.jsxs(ve,{children:[a.jsxs("button",{onClick:()=>c(!o),className:"w-full flex justify-between items-center text-left",children:[a.jsx("h2",{className:"font-playfair text-2xl font-bold text-[var(--text-main)]",children:"Community Guidelines"}),a.jsx(rn,{className:`w-6 h-6 text-[var(--text-muted)] transition-transform ${o?"rotate-180":""}`})]}),o&&a.jsxs("div",{className:"mt-4 pt-4 border-t border-[var(--border-subtle)] animate-fade-in",children:[a.jsxs("ul",{className:"list-disc list-inside space-y-2 text-[var(--text-muted)]",children:[a.jsx("li",{children:"Respect confidentiality. No sharing sensitive client details."}),a.jsx("li",{children:"No spam or cold pitching other members."}),a.jsx("li",{children:"Keep discussions focused on restoration and business growth."}),a.jsx("li",{children:"Constructive feedback only; no drama."}),a.jsx("li",{children:"One promo post per month in the designated thread."}),a.jsx("li",{children:"Violation may lead to temporary or permanent removal."})]}),a.jsxs("div",{className:"mt-6 pt-4 border-t border-[var(--border-subtle)]",children:[a.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:u,onChange:w=>h(w.target.checked),className:"h-5 w-5 rounded border-[var(--border-subtle)] text-[var(--accent)] focus:ring-[var(--accent)]"}),a.jsx("span",{className:"font-semibold text-[var(--text-main)]",children:"Ive read and agree to the community guidelines"})]}),u&&a.jsx("p",{className:"mt-3 text-sm text-success font-semibold bg-success/10 p-2 rounded-md animate-fade-in",children:"Nice. Youre good to go  see you inside the group."})]})]})]})}),a.jsxs(ve,{children:[a.jsx("h2",{className:"font-playfair text-2xl font-bold text-[var(--text-main)] mb-4",children:"Upcoming Calls & Events"}),a.jsx("div",{className:"space-y-4",children:IN.map((w,N)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3 p-4 bg-[var(--bg-subtle)] rounded-lg border border-[var(--border-subtle)]",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("h3",{className:"font-bold text-lg text-[var(--text-main)]",children:w.title}),w.tier&&a.jsxs("span",{className:"text-xs font-bold px-2 py-0.5 bg-gold/20 text-gold-dark rounded-full",children:[w.tier," members"]})]}),a.jsxs("p",{className:"text-sm text-[var(--text-muted)] mt-1",children:[w.date,"  ",w.type]})]}),a.jsx("button",{className:"py-2 px-4 bg-[var(--bg-card)] border border-[var(--border-subtle)] rounded-lg font-semibold text-[var(--text-main)] shadow-sm hover:bg-[var(--bg-subtle)] text-sm whitespace-nowrap self-end sm:self-center",children:"Add to calendar"})]},N))})]}),a.jsxs(ve,{children:[a.jsx("h2",{className:"font-playfair text-2xl font-bold text-[var(--text-main)] mb-4",children:"Community Resources"}),a.jsx("div",{className:"space-y-4",children:$N.map((w,N)=>{const S=w.icon;return a.jsxs("a",{href:w.link,target:"_blank",rel:"noopener noreferrer",className:"flex items-start gap-4 p-4 rounded-lg hover:bg-[var(--bg-subtle)] border border-transparent hover:border-[var(--border-subtle)] transition-colors group",children:[a.jsx("div",{className:"bg-gold/10 text-gold-dark p-3 rounded-full mt-1",children:a.jsx(S,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-lg text-[var(--text-main)]",children:w.title}),a.jsx("p",{className:"text-sm text-[var(--text-muted)]",children:w.description}),a.jsx("span",{className:"mt-2 inline-block font-semibold text-gold-dark text-sm group-hover:underline",children:"Open in group "})]})]},N)})})]}),((b=s==null?void 0:s.plan)==null?void 0:b.name)==="Bronze"&&a.jsxs("div",{className:"mt-8 p-6 bg-gradient-to-r from-charcoal to-charcoal-dark text-white rounded-2xl shadow-lg flex flex-col sm:flex-row justify-between items-center gap-4",children:[a.jsxs("div",{className:"text-center sm:text-left",children:[a.jsx("h3",{className:"font-playfair text-xl font-bold",children:"Unlock Full Community Access"}),a.jsx("p",{className:"text-gray-light mt-1",children:"Some community calls are reserved for Gold members. Upgrade in Billing to unlock full access."})]}),a.jsx("button",{onClick:()=>r("billing"),className:"py-2.5 px-6 bg-gold text-charcoal font-bold rounded-lg shadow-md hover:bg-gold-light whitespace-nowrap",children:"Upgrade in Billing"})]})]})},VN=({isOpen:r,onClose:s,onConfirm:i,companyName:o})=>{const[c,u]=_.useState(""),h=c===o;return r?a.jsx("div",{className:"fixed inset-0 bg-[var(--bg-overlay)] flex items-center justify-center z-50 p-4 animate-fade-in",onClick:s,children:a.jsxs("div",{className:"bg-[var(--bg-card)] rounded-2xl shadow-2xl w-full max-w-lg overflow-hidden relative animate-slide-up",onClick:p=>p.stopPropagation(),children:[a.jsxs("div",{className:"p-6 sm:p-8",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"mx-auto w-16 h-16 flex items-center justify-center rounded-full bg-error/10 text-error mb-4",children:a.jsx(_a,{className:"w-8 h-8"})}),a.jsx("h2",{className:"font-playfair text-3xl font-bold text-[var(--text-main)]",children:"Delete Account"})]}),a.jsxs("p",{className:"text-[var(--text-muted)] text-center mt-4 text-lg",children:["Deleting your account will remove your badge, listings, and access to the Member Hub.",a.jsx("br",{}),a.jsx("span",{className:"font-bold text-error",children:"This action is permanent and cannot be undone."})]}),a.jsxs("div",{className:"mt-6",children:[a.jsxs("label",{htmlFor:"company-name-confirm",className:"block text-sm font-medium text-[var(--text-muted)]",children:['To confirm, please type "',a.jsx("span",{className:"font-bold text-[var(--text-main)]",children:o}),'" below:']}),a.jsx("input",{id:"company-name-confirm",type:"text",value:c,onChange:p=>u(p.target.value),className:"mt-1 block w-full p-3 border border-[var(--border-subtle)] rounded-lg shadow-sm focus:ring-[var(--accent)] focus:border-[var(--accent)] bg-[var(--bg-input)]"})]})]}),a.jsxs("div",{className:"p-6 bg-[var(--bg-subtle)] flex flex-col sm:flex-row justify-end items-center gap-4",children:[a.jsx("button",{onClick:s,className:"w-full sm:w-auto py-2.5 px-6 bg-[var(--bg-card)] border border-[var(--border-subtle)] rounded-lg font-semibold shadow-sm hover:bg-[var(--bg-subtle)]",children:"Cancel"}),a.jsx("button",{onClick:i,disabled:!h,className:"w-full sm:w-auto py-2.5 px-6 bg-error text-white font-bold rounded-lg shadow-md hover:bg-red-600 disabled:opacity-50 disabled:cursor-not-allowed",children:"Confirm Delete"})]})]})}):null},GN=({showToast:r,onNavigate:s})=>{var J,I;const{currentUser:i,updateUser:o}=nt(),[c,u]=_.useState(!1),[h,p]=_.useState({ownerName:((J=i==null?void 0:i.account)==null?void 0:J.ownerName)||(i==null?void 0:i.name)||"",ownerEmail:((I=i==null?void 0:i.account)==null?void 0:I.ownerEmail)||(i==null?void 0:i.email)||""}),[m,g]=_.useState(!0),[b,w]=_.useState(!1),[N,S]=_.useState({timezone:"US/Central",dateFormat:"MM/DD/YYYY"}),[v,E]=_.useState((i==null?void 0:i.notifications)||{documentStatus:!0,verificationStatus:!0,requestUpdates:!0,benefitDelivery:!1,billingUpdates:!0,communityUpdates:!0,emailFrequency:"real-time"}),[y,C]=_.useState(!1),[M,T]=_.useState(!1);if(_.useEffect(()=>{var k,F;i&&(p({ownerName:((k=i.account)==null?void 0:k.ownerName)||i.name,ownerEmail:((F=i.account)==null?void 0:F.ownerEmail)||i.email}),i.notifications&&E(i.notifications))},[i]),!i||!i.account)return null;const z=()=>{if(!i)return;const k={...i,account:{...i.account,...h}};o(k),u(!1),r("Account info updated.","success")},U=()=>{var k,F;p({ownerName:((k=i.account)==null?void 0:k.ownerName)||"",ownerEmail:((F=i.account)==null?void 0:F.ownerEmail)||""}),u(!1)},X=()=>{w(!1),r("All active sessions have been cleared (dummy state).","success")},B=()=>{console.log("Preferences saved:",N),r("Preferences saved.","success")},se=()=>{if(!i)return;const k={...i,notifications:v};o(k),r("Notification settings saved.","success")},ee=()=>{C(!1),r("Data export will be available in the full version.","success")},te=()=>{T(!1),r("Account deletion will be handled by support in the live version.","success")},ce=({label:k,checked:F,onChange:R})=>a.jsxs("label",{className:"flex justify-between items-center cursor-pointer p-3 hover:bg-[var(--bg-subtle)] rounded-lg",children:[a.jsx("span",{className:"font-medium text-[var(--text-main)]",children:k}),a.jsx("input",{type:"checkbox",className:"toggle-checkbox",checked:F,onChange:Y=>R(Y.target.checked)})]});return a.jsxs("div",{className:"animate-fade-in max-w-4xl mx-auto",children:[a.jsx("style",{children:`
                .toggle-checkbox { -webkit-appearance: none; -moz-appearance: none; appearance: none; width: 3rem; height: 1.5rem; background-color: #E5E7EB; border-radius: 9999px; position: relative; cursor: pointer; transition: background-color 0.2s ease-in-out; }
                html[data-theme='dark'] .toggle-checkbox { background-color: #4A4A4A; }
                .toggle-checkbox::before { content: ''; position: absolute; width: 1.25rem; height: 1.25rem; border-radius: 9999px; background-color: white; top: 2px; left: 2px; transition: transform 0.2s ease-in-out; }
                .toggle-checkbox:checked { background-color: var(--accent); }
                .toggle-checkbox:checked::before { transform: translateX(1.5rem); }
            `}),a.jsx(Yp,{isOpen:b,onClose:()=>w(!1),onSubmit:X,title:"Log out of all devices?",message:"This will sign you out of all other active sessions. Your current session will remain active.",confirmButtonText:"Yes, Log Out All",confirmButtonClass:"bg-error text-white hover:bg-red-600"}),a.jsx(Yp,{isOpen:y,onClose:()=>C(!1),onSubmit:ee,title:"Export Account Data",message:"Well prepare an export of your profile, documents metadata and billing records.",confirmButtonText:"Start Export",confirmButtonClass:"bg-gold text-charcoal hover:bg-gold-light"}),a.jsx(VN,{isOpen:M,onClose:()=>T(!1),onConfirm:te,companyName:i.account.companyName}),a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"font-playfair text-4xl font-bold text-[var(--text-main)]",children:"Settings"}),a.jsx("p",{className:"mt-2 text-lg text-[var(--text-muted)]",children:"Manage your account details, sign-in preferences, and basic settings."})]}),a.jsxs(ve,{children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsx("div",{children:a.jsx("h2",{className:"font-playfair text-2xl font-bold text-[var(--text-main)]",children:"Account Information"})}),!c&&a.jsxs("button",{onClick:()=>u(!0),className:"flex items-center gap-2 py-2 px-4 bg-[var(--bg-card)] border border-[var(--border-subtle)] rounded-lg shadow-sm font-semibold text-[var(--text-main)] hover:bg-[var(--bg-subtle)] text-sm",children:[a.jsx(Ya,{className:"w-4 h-4"})," Edit"]})]}),c?a.jsxs("div",{className:"space-y-4 animate-fade-in",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-[var(--text-muted)]",children:"Account Owner Name"}),a.jsx("input",{type:"text",value:h.ownerName,onChange:k=>p({...h,ownerName:k.target.value}),className:"mt-1 block w-full p-2 border border-[var(--border-subtle)] rounded-lg bg-[var(--bg-input)]"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-[var(--text-muted)]",children:"Account Email"}),a.jsx("input",{type:"email",value:h.ownerEmail,onChange:k=>p({...h,ownerEmail:k.target.value}),className:"mt-1 block w-full p-2 border border-[var(--border-subtle)] rounded-lg bg-[var(--bg-input)]"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-[var(--text-muted)]",children:"Role"}),a.jsx("p",{className:"font-semibold text-[var(--text-muted)] bg-[var(--bg-subtle)] p-3 rounded-lg",children:i.account.role})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-[var(--text-muted)]",children:"Company Name"}),a.jsx("p",{className:"font-semibold text-[var(--text-muted)] bg-[var(--bg-subtle)] p-3 rounded-lg",children:i.account.companyName})]}),a.jsxs("div",{className:"flex justify-end gap-4 pt-2",children:[a.jsx("button",{onClick:U,className:"py-2 px-5 bg-[var(--bg-subtle)] border border-[var(--border-subtle)] rounded-lg font-semibold",children:"Cancel"}),a.jsx("button",{onClick:z,className:"py-2 px-5 bg-[var(--accent)] text-[var(--accent-text)] rounded-lg font-bold",children:"Save Changes"})]})]}):a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-[var(--text-muted)]",children:"Account Owner Name"}),a.jsx("p",{className:"font-semibold text-[var(--text-main)]",children:h.ownerName})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-[var(--text-muted)]",children:"Account Email"}),a.jsx("p",{className:"font-semibold text-[var(--text-main)]",children:h.ownerEmail})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-[var(--text-muted)]",children:"Role"}),a.jsx("p",{className:"font-semibold text-[var(--text-main)]",children:i.account.role})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-[var(--text-muted)]",children:"Company Name"}),a.jsx("button",{onClick:()=>s("profile"),className:"font-semibold text-[var(--accent-dark)] hover:underline",children:i.account.companyName})]})]})]}),a.jsxs(ve,{children:[a.jsx("div",{className:"flex justify-between items-start mb-4",children:a.jsx("h2",{className:"font-playfair text-2xl font-bold text-[var(--text-main)]",children:"Sign-in & Security"})}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center p-3 bg-[var(--bg-subtle)] rounded-lg",children:[a.jsx("span",{className:"font-medium text-[var(--text-main)]",children:"Login method"}),a.jsx("span",{className:"font-semibold text-[var(--text-muted)]",children:"Email magic link"})]}),a.jsxs("label",{className:"flex justify-between items-center cursor-pointer",children:[a.jsx("span",{className:"font-medium text-[var(--text-main)] max-w-xs sm:max-w-none",children:"Require confirmation for new logins from unknown devices"}),a.jsx("input",{type:"checkbox",className:"toggle-checkbox",checked:m,onChange:k=>g(k.target.checked)})]}),a.jsxs("div",{className:"pt-4 border-t border-[var(--border-subtle)] flex flex-col sm:flex-row gap-4",children:[a.jsx("button",{onClick:()=>w(!0),className:"py-2.5 px-5 bg-[var(--bg-card)] border border-[var(--border-subtle)] rounded-lg font-semibold shadow-sm hover:bg-[var(--bg-subtle)]",children:"Log out of all devices"}),a.jsx("button",{onClick:()=>r("Verification email resent.","success"),className:"py-2.5 px-5 bg-[var(--bg-card)] border border-[var(--border-subtle)] rounded-lg font-semibold shadow-sm hover:bg-[var(--bg-subtle)]",children:"Resend verification email"})]}),a.jsx("p",{className:"text-xs text-[var(--text-muted)]",children:"Security features like 2FA and device history will be added in the full version."})]})]}),a.jsxs(ve,{children:[a.jsx("div",{className:"flex justify-between items-start mb-4",children:a.jsx("h2",{className:"font-playfair text-2xl font-bold text-[var(--text-main)]",children:"Preferences"})}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-[var(--text-muted)] mb-1",children:"Timezone"}),a.jsxs("select",{value:N.timezone,onChange:k=>S({...N,timezone:k.target.value}),className:"w-full p-3 border border-[var(--border-subtle)] rounded-lg bg-[var(--bg-card)] focus:ring-[var(--accent)] focus:border-[var(--accent)]",children:[a.jsx("option",{children:"US/Pacific"}),a.jsx("option",{children:"US/Mountain"}),a.jsx("option",{children:"US/Central"}),a.jsx("option",{children:"US/Eastern"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-[var(--text-muted)] mb-2",children:"Date Format"}),a.jsxs("div",{className:"flex gap-4",children:[a.jsxs("label",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"radio",name:"date-format",value:"MM/DD/YYYY",checked:N.dateFormat==="MM/DD/YYYY",onChange:k=>S({...N,dateFormat:k.target.value}),className:"h-4 w-4 text-[var(--accent)] focus:ring-[var(--accent)]"})," MM/DD/YYYY"]}),a.jsxs("label",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"radio",name:"date-format",value:"DD/MM/YYYY",checked:N.dateFormat==="DD/MM/YYYY",onChange:k=>S({...N,dateFormat:k.target.value}),className:"h-4 w-4 text-[var(--accent)] focus:ring-[var(--accent)]"})," DD/MM/YYYY"]})]})]}),a.jsxs("div",{className:"flex justify-between items-center p-3 bg-[var(--bg-subtle)] rounded-lg",children:[a.jsx("span",{className:"font-medium text-[var(--text-main)]",children:"Currency"}),a.jsx("span",{className:"font-semibold text-[var(--text-muted)]",children:"USD (United States Dollar)"})]})]}),a.jsx("div",{className:"mt-6 pt-6 border-t border-[var(--border-subtle)] text-right",children:a.jsx("button",{onClick:B,className:"py-2 px-5 bg-[var(--accent)] text-[var(--accent-text)] rounded-lg font-bold",children:"Save Preferences"})})]}),a.jsxs(ve,{children:[a.jsx("h2",{className:"font-playfair text-2xl font-bold text-[var(--text-main)] mb-4",children:"Notification Preferences"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-[var(--text-muted)] mb-2",children:"Documents & Verification"}),a.jsx(ce,{label:"Email me when a document is approved or rejected",checked:v.documentStatus,onChange:k=>E(F=>({...F,documentStatus:k}))}),a.jsx(ce,{label:"Email me when my verification status changes",checked:v.verificationStatus,onChange:k=>E(F=>({...F,verificationStatus:k}))})]}),a.jsxs("div",{className:"pt-4 border-t border-[var(--border-subtle)]",children:[a.jsx("h3",{className:"font-semibold text-[var(--text-muted)] mb-2",children:"Benefits & Requests"}),a.jsx(ce,{label:"Email me when a new request is created or updated",checked:v.requestUpdates,onChange:k=>E(F=>({...F,requestUpdates:k}))}),a.jsx(ce,{label:"Email me when a benefit (e.g. SEO post) is delivered",checked:v.benefitDelivery,onChange:k=>E(F=>({...F,benefitDelivery:k}))})]}),a.jsxs("div",{className:"pt-4 border-t border-[var(--border-subtle)]",children:[a.jsx("h3",{className:"font-semibold text-[var(--text-muted)] mb-2",children:"Billing"}),a.jsx(ce,{label:"Email me about upcoming renewals and failed payments",checked:v.billingUpdates,onChange:k=>E(F=>({...F,billingUpdates:k}))})]}),a.jsxs("div",{className:"pt-4 border-t border-[var(--border-subtle)]",children:[a.jsx("h3",{className:"font-semibold text-[var(--text-muted)] mb-2",children:"Community"}),a.jsx(ce,{label:"Email me about new events and important announcements",checked:v.communityUpdates,onChange:k=>E(F=>({...F,communityUpdates:k}))})]})]})]}),a.jsxs(ve,{children:[a.jsx("h2",{className:"font-playfair text-2xl font-bold text-[var(--text-main)] mb-4",children:"Email Frequency"}),a.jsxs("fieldset",{className:"space-y-3",children:[a.jsxs("label",{className:"flex items-center gap-3",children:[a.jsx("input",{type:"radio",name:"email-frequency",value:"real-time",checked:v.emailFrequency==="real-time",onChange:k=>E(F=>({...F,emailFrequency:k.target.value})),className:"h-4 w-4 text-[var(--accent)] focus:ring-[var(--accent)]"})," Real-time (recommended)"]}),a.jsxs("label",{className:"flex items-center gap-3",children:[a.jsx("input",{type:"radio",name:"email-frequency",value:"daily",checked:v.emailFrequency==="daily",onChange:k=>E(F=>({...F,emailFrequency:k.target.value})),className:"h-4 w-4 text-[var(--accent)] focus:ring-[var(--accent)]"})," Daily summary"]}),a.jsxs("label",{className:"flex items-center gap-3",children:[a.jsx("input",{type:"radio",name:"email-frequency",value:"weekly",checked:v.emailFrequency==="weekly",onChange:k=>E(F=>({...F,emailFrequency:k.target.value})),className:"h-4 w-4 text-[var(--accent)] focus:ring-[var(--accent)]"})," Weekly summary"]})]}),a.jsx("p",{className:"text-sm text-[var(--text-muted)] mt-4",children:"Well include documents, requests and community highlights in your summary emails."}),a.jsx("div",{className:"mt-6 pt-6 border-t border-[var(--border-subtle)] text-right",children:a.jsx("button",{onClick:se,className:"py-2 px-5 bg-[var(--accent)] text-[var(--accent-text)] rounded-lg font-bold",children:"Save Notification Settings"})})]}),a.jsxs(ve,{className:"border-error",children:[a.jsx("h2",{className:"font-playfair text-2xl font-bold text-error",children:"Danger Zone"}),a.jsxs("div",{className:"mt-6 space-y-4",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center p-4 bg-[var(--bg-subtle)] rounded-lg",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-[var(--text-main)]",children:"Export account data"}),a.jsx("p",{className:"text-sm text-[var(--text-muted)]",children:"Download your profile, documents metadata, and billing records."})]}),a.jsx("button",{onClick:()=>C(!0),className:"py-2 px-4 mt-2 sm:mt-0 bg-[var(--bg-card)] border border-[var(--border-subtle)] rounded-lg font-semibold text-[var(--text-main)] shadow-sm hover:bg-[var(--bg-subtle)] whitespace-nowrap",children:"Export Data"})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center p-4 bg-error/5 rounded-lg",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-error",children:"Delete account"}),a.jsx("p",{className:"text-sm text-red-800",children:"Permanently remove your account and all associated data."})]}),a.jsx("button",{onClick:()=>T(!0),className:"py-2 px-4 mt-2 sm:mt-0 bg-error text-white font-bold rounded-lg shadow-sm hover:bg-red-600 whitespace-nowrap",children:"Delete Account"})]})]})]})]})]})},YN={overview:"Overview","my-requests":"My Service Requests",profile:"Business Profile",badge:"My Badge",documents:"Verification Documents",benefits:"Your Membership Benefits",billing:"Billing & Subscription",community:"Community Hub",blueprint:"99 Steps Blueprint",settings:"Settings"},KN=()=>{var Yt,pr,pa,ln,on;const{currentUser:r,logout:s,session:i}=nt(),[o,c]=_.useState("overview"),[u,h]=_.useState(!1),[p,m]=_.useState(!1),g=_.useRef(null),[b,w]=_.useState(null),[N,S]=_.useState(!1),[v,E]=_.useState(0),[y,C]=_.useState(null),[M,T]=_.useState(null),[z,U]=_.useState(null),[X,B]=_.useState([]),[se,ee]=_.useState([]),[te,ce]=_.useState(null),[J,I]=_.useState([]),[k,F]=_.useState(null),[R,Y]=_.useState([]),[ne,re]=_.useState(!1),[xe,O]=_.useState(null),H=_.useCallback(async()=>{var St;if(!((St=i==null?void 0:i.user)!=null&&St.id))return B([]),[];const{data:Ne,error:Pe}=await be.from("member_documents").select("*").eq("profile_id",i.user.id).order("created_at",{ascending:!1});if(Pe)throw console.error("Failed to load member documents",Pe),Pe;const jt=(Ne??[]).map(_N);return B(jt),jt},[(Yt=i==null?void 0:i.user)==null?void 0:Yt.id]),G=_.useCallback(async()=>{var ot;if(!((ot=i==null?void 0:i.user)!=null&&ot.id)){ce(null);return}const{data:Ne,error:Pe}=await be.from("v_member_overview").select("*").eq("profile_id",i.user.id).maybeSingle();Pe?console.error("Failed to load overview data:",Pe):ce(Ne)},[(pr=i==null?void 0:i.user)==null?void 0:pr.id]),K=_.useCallback(async()=>{var ot;if(!((ot=i==null?void 0:i.user)!=null&&ot.id)){I([]);return}const[Ne,Pe]=await Promise.allSettled([be.from("service_requests").select("*").eq("profile_id",i.user.id).order("created_at",{ascending:!1}),be.from("service_request_activity").select("*").eq("profile_id",i.user.id).order("created_at",{ascending:!1})]);if(Ne.status==="fulfilled"&&!Ne.value.error){const jt=Ne.value.data||[];let St=[];Pe.status==="fulfilled"&&!Pe.value.error&&(St=Pe.value.data||[]);const Ja=jt.map(Ut=>({...Ut,activity:St.filter(We=>We.request_id===Ut.id)}));I(Ja)}else console.error("Failed to load service requests:",Ne.status==="fulfilled"?Ne.value.error:"Promise rejected")},[(pa=i==null?void 0:i.user)==null?void 0:pa.id]),ae=_.useCallback(async()=>{var ot;if(!((ot=i==null?void 0:i.user)!=null&&ot.id)){F(null),Y([]);return}const[Ne,Pe]=await Promise.allSettled([be.from("v_member_billing").select("*").eq("profile_id",i.user.id).maybeSingle(),be.from("invoices").select("*").eq("profile_id",i.user.id).order("invoice_date",{ascending:!1})]);Ne.status==="fulfilled"&&!Ne.value.error?F(Ne.value.data):console.error("Failed to load billing data:",Ne.status==="fulfilled"?Ne.value.error:"Promise rejected"),Pe.status==="fulfilled"&&!Pe.value.error?Y(Pe.value.data||[]):console.error("Failed to load invoices:",Pe.status==="fulfilled"?Pe.value.error:"Promise rejected")},[(ln=i==null?void 0:i.user)==null?void 0:ln.id]);_.useEffect(()=>{if(b){const Ne=setTimeout(()=>w(null),3e3);return()=>clearTimeout(Ne)}},[b]);const ie=(Ne,Pe)=>{w({message:Ne,type:Pe})};_.useEffect(()=>{const Ne=Pe=>{g.current&&!g.current.contains(Pe.target)&&m(!1)};return document.addEventListener("mousedown",Ne),()=>document.removeEventListener("mousedown",Ne)},[]),_.useEffect(()=>{var ot;if(!((ot=i==null?void 0:i.user)!=null&&ot.id)){C(null),T(null),U(null),B([]),ee([]);return}let Ne=!0;return re(!0),O(null),(async()=>{try{await Promise.all([G(),K(),ae(),H()]);const[jt,St,Ja,Ut]=await Promise.all([be.from("profiles").select("*").eq("id",i.user.id).maybeSingle(),be.from("memberships").select("*").eq("profile_id",i.user.id).order("created_at",{ascending:!1}).limit(1).maybeSingle(),be.from("subscriptions").select("*").eq("profile_id",i.user.id).order("created_at",{ascending:!1}).limit(1).maybeSingle(),be.from("service_requests").select("*").eq("profile_id",i.user.id).order("created_at",{ascending:!1}).limit(5)]);if(!Ne)return;let We=null;try{await H()}catch(Et){console.error("Failed to load member documents",Et),We=Xp(Et)?Et:null}const cn=[jt.error,St.error,Ja.error,Ut.error,We].filter(Et=>Xp(Et)&&Et.code!=="PGRST116");cn.length>0?(cn.forEach(Et=>{Et&&console.error("Failed to load dashboard data",Et)}),O("Some dashboard data failed to load. Please refresh to try again.")):O(null),C(jt.data??null),T(St.data??null),U(Ja.data??null);const un=Ut.data??[];ee(un.map(SN))}catch(jt){if(!Ne)return;console.error("Unexpected error loading dashboard data",jt),O("Unable to load your dashboard right now. Please try again later."),C(null),T(null),U(null),B([]),ee([])}finally{Ne&&re(!1)}})(),()=>{Ne=!1}},[(on=i==null?void 0:i.user)==null?void 0:on.id,H]);const ue=Ne=>{c(Ne),h(!1)},Ae=_.useMemo(()=>{var xt,Ci,Ai,Ti;if(te)return{status:Zp(te.member_status),verificationValidUntil:Cs(te.verification_valid_until),verificationRating:te.verification_rating,stats:{profileViewsValue:te.profile_views_value,profileViewsPeriod:te.profile_views_period||"Last 30 days",badgeClicksValue:te.badge_clicks_value,badgeClicksPeriod:te.badge_clicks_period||"Last 30 days",planName:te.plan_name,planPrice:te.plan_price,nextRenewal:Cs(te.next_renewal)},benefits:{description:te.benefits_description,items:((xt=eo(te.benefits))==null?void 0:xt.map(fe=>({name:fe.name??"Benefit",progress:fe.progress??null,Icon:hi(fe.icon??void 0)})))||[]},activityLog:((Ci=eo(te.activity_log))==null?void 0:Ci.map(fe=>({description:fe.description??"Account activity",timestamp:fe.timestamp?to(fe.timestamp):"Recently",Icon:hi(fe.icon??void 0)})))||[]};const Ne=(y==null?void 0:y.member_status)??(y==null?void 0:y.verification_status)??(M==null?void 0:M.status)??(z==null?void 0:z.status),Pe=Zp(Ne??void 0),ot=(y==null?void 0:y.verification_valid_until)??(M==null?void 0:M.verification_valid_until)??(M==null?void 0:M.renewal_date)??null,jt=Cs(ot)??null,St=(y==null?void 0:y.verification_rating)??(M==null?void 0:M.badge_rating)??(y==null?void 0:y.badge_rating)??((Ai=r==null?void 0:r.plan)==null?void 0:Ai.rating)??null,Ja=(M==null?void 0:M.tier)??(z==null?void 0:z.tier)??(y==null?void 0:y.membership_tier)??null;let Ut=null;if((z==null?void 0:z.unit_amount_cents)!==null&&(z==null?void 0:z.unit_amount_cents)!==void 0){const fe=z.unit_amount_cents/100,rt=yN(fe);if(rt){const dt=(Ti=z.billing_cycle)==null?void 0:Ti.toLowerCase();dt!=null&&dt.includes("year")?Ut=`${rt}/year`:dt!=null&&dt.includes("month")?Ut=`${rt}/month`:dt?Ut=`${rt}/${dt}`:Ut=rt}}const We=Cs((z==null?void 0:z.current_period_end)??(y==null?void 0:y.next_billing_date)??null)??null,cn=(y==null?void 0:y.profile_views_value)??(y==null?void 0:y.profile_views)??null,un=(y==null?void 0:y.profile_views_period)??"Last 30 days",Et=(y==null?void 0:y.badge_clicks_value)??(y==null?void 0:y.badge_clicks)??null,dn=(y==null?void 0:y.badge_clicks_period)??"Last 30 days",xr=eo((M==null?void 0:M.benefits)??(y==null?void 0:y.benefits)),ki=(M==null?void 0:M.benefits_description)??(y==null?void 0:y.benefits_description)??null,Do=((r==null?void 0:r.benefits)??[]).map(fe=>({name:fe.title,progress:fe.quota!==void 0&&fe.used!==void 0?`${fe.used} of ${fe.quota} used`:fe.status??fe.nextDate??(fe.isIncluded?"Included":null),Icon:hi(fe.icon)})),Mo=xr&&xr.length>0?xr.map(fe=>({name:fe.name??"Benefit",progress:fe.progress??null,Icon:hi(fe.icon??void 0)})):Do,xa=[];(eo(y==null?void 0:y.activity_log)??[]).forEach(fe=>{const rt=fe.timestamp??null;xa.push({description:fe.description??"Account activity",timestamp:fe.timestamp?to(fe.timestamp):"Recently",Icon:hi(fe.icon??void 0),createdAt:rt})}),se.forEach(fe=>{xa.push({description:`${fe.service}: ${fe.title}`,timestamp:fe.createdAt?to(fe.createdAt):"Recently",Icon:jo(fe.service),createdAt:fe.createdAt})}),X.forEach(fe=>{if(!fe.rawTimestamp)return;const rt=fe.status==="approved"?"approved":fe.status==="underReview"?"submitted for review":"needs attention",dt=fe.status==="approved"?Gt:fe.status==="underReview"?Si:_a;xa.push({description:`${fe.name} ${rt}`,timestamp:to(fe.rawTimestamp),Icon:dt,createdAt:fe.rawTimestamp})});const ba=xa.sort((fe,rt)=>{const dt=fe.createdAt?new Date(fe.createdAt).getTime():0;return(rt.createdAt?new Date(rt.createdAt).getTime():0)-dt}).slice(0,5).map(({createdAt:fe,...rt})=>rt);return{status:Pe,verificationValidUntil:jt,verificationRating:St,stats:{profileViewsValue:cn,profileViewsPeriod:un,badgeClicksValue:Et,badgeClicksPeriod:dn,planName:Ja,planPrice:Ut,nextRenewal:We},benefits:{description:ki,items:Mo},activityLog:ba}},[te,y,M,z,X,se,r]),De=X.some(Ne=>["notUploaded","needsReplacement","rejected"].includes(Ne.status)),Ve=()=>{switch(o){case"overview":return a.jsx(AN,{data:Ae,onNavigate:c,onNewRequest:()=>S(!0)});case"my-requests":return a.jsx(TN,{onNewRequest:()=>S(!0),showToast:ie,refreshKey:v});case"profile":return a.jsx(RN,{showToast:ie});case"badge":return a.jsx(ON,{onNavigate:c,showToast:ie});case"documents":return a.jsx(MN,{documents:X,onNavigate:c,onRefreshDocuments:H});case"benefits":return a.jsx(BN,{showToast:ie});case"billing":return a.jsx(PN,{showToast:ie,billingData:k,invoices:R});case"community":return a.jsx(HN,{onNavigate:c});case"blueprint":return a.jsx(gN,{onNavigate:c});case"settings":return a.jsx(GN,{showToast:ie,onNavigate:c});default:return null}},ga=a.jsxs(a.Fragment,{children:[a.jsx(Na,{icon:a.jsx(Cx,{className:"w-6 h-6"}),label:"Overview",isActive:o==="overview",onClick:()=>ue("overview")}),a.jsx(Na,{icon:a.jsx(Dx,{className:"w-6 h-6"}),label:"My Requests",isActive:o==="my-requests",onClick:()=>ue("my-requests")}),a.jsx(Na,{icon:a.jsx(uo,{className:"w-6 h-6"}),label:"Profile",isActive:o==="profile",onClick:()=>ue("profile")}),a.jsx(Na,{icon:a.jsx(Eo,{className:"w-6 h-6"}),label:"Badge",isActive:o==="badge",onClick:()=>ue("badge")}),a.jsx(Na,{icon:a.jsx(Aw,{className:"w-6 h-6"}),label:"Documents",isActive:o==="documents",onClick:()=>ue("documents"),attention:De}),a.jsx(Na,{icon:a.jsx(Ao,{className:"w-6 h-6"}),label:"Benefits",isActive:o==="benefits",onClick:()=>ue("benefits")}),a.jsx(Na,{icon:a.jsx(lr,{className:"w-6 h-6"}),label:"Billing",isActive:o==="billing",onClick:()=>ue("billing")}),a.jsx(Na,{icon:a.jsx(ks,{className:"w-6 h-6"}),label:"Community",isActive:o==="community",onClick:()=>ue("community")}),a.jsx(Na,{icon:a.jsx(Vd,{className:"w-6 h-6"}),label:"99 Steps Blueprint",isActive:o==="blueprint",onClick:()=>ue("blueprint")}),a.jsx(Na,{icon:a.jsx(Tx,{className:"w-6 h-6"}),label:"Settings",isActive:o==="settings",onClick:()=>ue("settings")})]});return a.jsxs("div",{className:"flex h-screen bg-[var(--bg-main)] text-[var(--text-main)] font-inter",children:[b&&a.jsx("div",{className:`fixed top-20 right-8 z-[100] py-3 px-5 rounded-lg shadow-lg text-white animate-slide-in-right ${b.type==="success"?"bg-success":"bg-error"}`,children:b.message}),N&&a.jsx(QN,{onClose:()=>S(!1),showToast:ie,onCreated:()=>E(Ne=>Ne+1)}),a.jsx("div",{className:`fixed inset-0 z-40 bg-black/50 transition-opacity md:hidden ${u?"opacity-100":"opacity-0 pointer-events-none"}`,onClick:()=>h(!1)}),a.jsxs("aside",{className:`fixed md:relative top-0 left-0 h-full z-50 w-64 bg-[var(--bg-card)] border-r border-[var(--border-subtle)] flex flex-col transition-transform duration-300 ease-in-out ${u?"translate-x-0":"-translate-x-full md:translate-x-0"}`,children:[a.jsxs("div",{className:"px-6 py-4 flex items-center border-b border-[var(--border-subtle)] h-16 shrink-0",children:[a.jsx("img",{src:"https://restorationexpertise.com/wp-content/uploads/2025/11/Restorationexpertise_ig_profilepic_2_small.webp",alt:"Logo",className:"w-8 h-8 mr-2"}),a.jsx("h1",{className:"font-playfair text-xl font-bold text-[var(--text-main)]",children:"Member Hub"})]}),a.jsx("nav",{className:"flex-grow p-4 space-y-1 overflow-y-auto",children:ga}),a.jsxs("div",{className:"p-4 border-t border-[var(--border-subtle)] space-y-4",children:[a.jsx(yo,{variant:"row"}),a.jsxs("button",{onClick:()=>void s(),className:"flex items-center w-full px-4 py-3 rounded-lg text-left text-[var(--text-muted)] hover:bg-red-500/10 hover:text-error transition-colors",children:[a.jsx(Ax,{className:"w-6 h-6"}),a.jsx("span",{className:"ml-3 font-semibold",children:"Logout"})]})]})]}),a.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[a.jsxs("header",{className:"sticky top-0 z-30 bg-[var(--bg-card)] shadow-sm border-b border-[var(--border-subtle)] h-16 flex items-center justify-between px-4 md:px-6 shrink-0",children:[a.jsx("button",{onClick:()=>h(!0),className:"text-[var(--text-main)] md:hidden",children:a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})})}),a.jsx("h1",{className:"font-playfair text-xl md:text-2xl font-bold text-[var(--text-main)]",children:YN[o]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(yo,{variant:"icon"}),a.jsxs("div",{className:"relative",ref:g,children:[a.jsxs("button",{onClick:()=>m(!p),className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-9 h-9 bg-[var(--accent-bg-subtle)] rounded-full flex items-center justify-center",children:a.jsx(uo,{className:"w-6 h-6 text-[var(--accent-dark)]"})}),a.jsx("span",{className:"hidden sm:inline font-semibold text-sm",children:r==null?void 0:r.name})]}),p&&a.jsxs("div",{className:"absolute right-0 mt-2 w-56 bg-[var(--bg-card)] rounded-lg shadow-xl border border-[var(--border-subtle)] z-50 animate-fade-in",children:[a.jsx("a",{href:"#",className:"block px-4 py-2 text-sm text-[var(--text-main)] hover:bg-[var(--bg-subtle)]",children:"View Public Profile"}),a.jsx("a",{href:"#",className:"block px-4 py-2 text-sm text-[var(--text-main)] hover:bg-[var(--bg-subtle)]",children:"Account Settings"}),a.jsx("a",{href:"#",className:"block px-4 py-2 text-sm text-[var(--text-main)] hover:bg-[var(--bg-subtle)]",children:"Billing"}),a.jsx("a",{href:"#",className:"block px-4 py-2 text-sm text-[var(--text-main)] hover:bg-[var(--bg-subtle)]",children:"Help & Support"}),a.jsx("div",{className:"border-t border-[var(--border-subtle)] my-1"}),a.jsx("button",{onClick:()=>void s(),className:"w-full text-left px-4 py-2 text-sm text-error hover:bg-[var(--bg-subtle)]",children:"Logout"})]})]})]})]}),a.jsx("main",{className:"flex-1 overflow-x-hidden overflow-y-auto",children:a.jsxs("div",{className:"relative max-w-7xl mx-auto p-4 sm:p-6 lg:p-8",children:[xe&&a.jsx("div",{className:"mb-6 rounded-xl border border-error/20 bg-error/10 px-4 py-3 text-error font-semibold",children:xe}),Ve(),ne&&a.jsx("div",{className:"absolute inset-0 z-20 flex items-center justify-center rounded-2xl bg-[var(--bg-main)]/70 backdrop-blur-sm",children:a.jsx("div",{className:"rounded-xl border border-[var(--border-subtle)] bg-[var(--bg-card)] px-6 py-4 text-[var(--text-main)] font-semibold shadow-lg",children:"Loading your dashboard..."})})]})})]})]})},FN=({request:r,activities:s,onClose:i})=>{const o=jo(r.requestType),[c,u]=_.useState(!0);return a.jsx("div",{className:"fixed inset-0 bg-[var(--bg-overlay)] flex items-center justify-center z-50 p-4 animate-fade-in",onClick:i,children:a.jsxs("div",{className:"bg-[var(--bg-card)] rounded-2xl shadow-2xl w-full max-w-3xl md:max-h-[90vh] flex flex-col h-full md:h-auto",onClick:h=>h.stopPropagation(),children:[a.jsxs("header",{className:"p-6 border-b border-[var(--border-subtle)] flex justify-between items-start gap-4",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-3 text-sm text-[var(--text-muted)] mb-2",children:[a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full bg-[var(--bg-subtle)] font-semibold text-[var(--text-main)]",children:[a.jsx(o,{className:"w-4 h-4 text-[var(--text-muted)]"}),r.requestType]}),a.jsx("span",{children:""}),a.jsx("span",{children:r.id})]}),a.jsx("h2",{className:"font-playfair text-2xl md:text-3xl font-bold text-[var(--text-main)]",children:r.title}),a.jsxs("p",{className:"text-sm text-[var(--text-muted)] mt-2",children:["Created ",lo(r.createdAt)??"",r.updatedAt?`  Updated ${lo(r.updatedAt)??""}`:""]})]}),a.jsx("button",{onClick:i,className:"text-[var(--text-muted)] hover:text-[var(--text-main)]",children:a.jsx(wt,{className:"w-7 h-7"})})]}),a.jsxs("div",{className:"p-6 overflow-y-auto flex-grow space-y-8",children:[a.jsxs("section",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-semibold text-[var(--text-muted)] uppercase tracking-wide",children:"Status"}),a.jsx("span",{className:`inline-flex items-center px-3 py-1 mt-2 text-xs font-bold rounded-full ${nr[r.status]}`,children:Ss[r.status]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-semibold text-[var(--text-muted)] uppercase tracking-wide",children:"Priority"}),a.jsx("span",{className:`inline-flex items-center px-3 py-1 mt-2 text-xs font-semibold rounded-full ${Md[r.priority]}`,children:wo[r.priority]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-semibold text-[var(--text-muted)] uppercase tracking-wide",children:"Assigned Admin"}),a.jsx("p",{className:"text-[var(--text-main)] font-medium mt-1",children:r.assignedAdminName??r.assignedAdminId??"Unassigned"})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-semibold text-[var(--text-muted)] uppercase tracking-wide",children:"Admin Notes"}),a.jsx("p",{className:"text-[var(--text-main)] mt-2 whitespace-pre-wrap",children:r.adminNotes??"No notes added yet."})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-semibold text-[var(--text-muted)] uppercase tracking-wide",children:"Profile ID"}),a.jsx("p",{className:"text-[var(--text-main)] mt-2 font-mono text-sm",children:r.profileId})]})]})]}),a.jsxs("section",{children:[a.jsx("h3",{className:"font-semibold text-[var(--text-main)] mb-2",children:"Description"}),a.jsx("p",{className:"text-[var(--text-muted)] whitespace-pre-wrap bg-[var(--bg-subtle)] border border-[var(--border-subtle)] rounded-lg p-4",children:r.description||"No description was provided with this request."})]}),a.jsxs("section",{className:"border border-[var(--border-subtle)] rounded-xl overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>u(h=>!h),className:"w-full flex items-center justify-between px-4 py-3 bg-[var(--bg-subtle)] text-[var(--text-main)] font-semibold",children:[a.jsxs("span",{children:["Activity (",s.length,")"]}),a.jsx(rn,{className:`w-5 h-5 transition-transform ${c?"rotate-180":""}`})]}),c&&a.jsx("div",{className:"max-h-80 overflow-y-auto",children:s.length===0?a.jsx("p",{className:"px-4 py-6 text-sm text-[var(--text-muted)]",children:"No updates have been recorded yet."}):a.jsx("ul",{className:"divide-y divide-[var(--border-subtle)]",children:s.map(h=>a.jsx("li",{className:"px-4 py-3 text-sm",children:a.jsxs("div",{className:"flex items-start justify-between gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-[var(--text-main)]",children:h.description??h.action??"Activity recorded"}),(h.actorName||h.actorUserId)&&a.jsxs("p",{className:"text-xs text-[var(--text-muted)] mt-1",children:["by ",h.actorName??h.actorUserId]})]}),a.jsx("span",{className:"text-xs text-[var(--text-muted)]",children:lo(h.createdAt)??""})]})},h.id))})})]})]})]})})},QN=({onClose:r,showToast:s,onCreated:i})=>{const{currentUser:o,session:c}=nt(),[u,h]=_.useState("SEO Blog Post"),[p,m]=_.useState(""),[g,b]=_.useState(""),[w,N]=_.useState("medium"),[S,v]=_.useState(!1),[E,y]=_.useState(null),C={low:"Low",medium:"Medium",high:"High"},M=["SEO Blog Post","Spotlight Article","Website Review","Badge Support","Other"],T=_.useMemo(()=>{if(!(o!=null&&o.benefits))return"";if(u==="SEO Blog Post"){const U=o.benefits.find(X=>X.title==="SEO Blog Posts");if(U&&U.quota!==void 0&&U.used!==void 0)return`You have ${Math.max(U.quota-U.used,0)} of ${U.quota} SEO blog posts remaining this year.`}return u==="Website Review"?"Your plan includes quarterly website reviews.":""},[o==null?void 0:o.benefits,u]),z=async U=>{var X;if(U.preventDefault(),y(null),!((X=c==null?void 0:c.user)!=null&&X.id)){y("You need to be logged in to create a request.");return}if(!p.trim()||!g.trim()){y("Title and description are required.");return}v(!0);try{const{error:B}=await be.from("service_requests").insert({profile_id:c.user.id,request_type:u,title:p.trim(),description:g.trim(),priority:w,status:"open"});if(B)throw B;s("Request created! Our team will review it within 12 business days.","success"),i(),r()}catch(B){console.error("Failed to create service request",B),s("We could not submit your request. Please try again.","error"),y("Unable to submit the request.")}finally{v(!1)}};return a.jsx("div",{className:"fixed inset-0 bg-[var(--bg-overlay)] flex items-center justify-center z-50 p-4 animate-fade-in",onClick:r,children:a.jsxs("form",{onSubmit:z,className:"bg-[var(--bg-card)] rounded-2xl shadow-2xl w-full max-w-2xl md:max-h-[90vh] flex flex-col h-full md:h-auto",onClick:U=>U.stopPropagation(),children:[a.jsxs("header",{className:"p-6 border-b border-[var(--border-subtle)] flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"font-playfair text-3xl font-bold text-[var(--text-main)]",children:"New Service Request"}),a.jsx("p",{className:"text-sm text-[var(--text-muted)] mt-1",children:"Fill out the details below and our team will get started right away."})]}),a.jsx("button",{type:"button",onClick:r,className:"text-[var(--text-muted)] hover:text-[var(--text-main)]",children:a.jsx(wt,{className:"w-7 h-7"})})]}),a.jsxs("div",{className:"p-6 flex-grow overflow-y-auto space-y-6",children:[E&&a.jsx("div",{className:"rounded-lg border border-error/40 bg-error/10 px-4 py-3 text-sm text-error",children:E}),a.jsx("p",{className:"p-3 bg-[var(--bg-subtle)] rounded-lg text-sm text-[var(--text-main)] border border-[var(--border-subtle)]",children:"Requests that are part of your plan (e.g. SEO posts, website reviews) will be counted against your benefits."}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"service-type",className:"block text-sm font-medium text-[var(--text-muted)] mb-1",children:"Service Type"}),a.jsx("select",{id:"service-type",value:u,onChange:U=>h(U.target.value),className:"w-full p-3 border border-[var(--border-subtle)] rounded-lg bg-[var(--bg-input)] focus:ring-[var(--accent)] focus:border-[var(--accent)]",children:M.map(U=>a.jsx("option",{value:U,children:U},U))}),T&&a.jsx("p",{className:"mt-2 text-sm text-info font-medium",children:T})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"request-title",className:"block text-sm font-medium text-[var(--text-muted)] mb-1",children:"Request Title"}),a.jsx("input",{type:"text",id:"request-title",value:p,onChange:U=>m(U.target.value),placeholder:"e.g., Article on Emergency Fire Restoration",className:"w-full p-3 border border-[var(--border-subtle)] rounded-lg bg-[var(--bg-input)] focus:ring-[var(--accent)] focus:border-[var(--accent)]"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-[var(--text-muted)] mb-1",children:"Description / Brief"}),a.jsx("textarea",{id:"description",value:g,onChange:U=>b(U.target.value),rows:5,placeholder:"Please provide as much detail as possible, including any target keywords, desired tone, or specific instructions.",className:"w-full p-3 border border-[var(--border-subtle)] rounded-lg bg-[var(--bg-input)] focus:ring-[var(--accent)] focus:border-[var(--accent)]"})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"priority",className:"block text-sm font-medium text-[var(--text-muted)] mb-1",children:"Priority"}),a.jsx("select",{id:"priority",value:w,onChange:U=>N(U.target.value),className:"w-full p-3 border border-[var(--border-subtle)] rounded-lg bg-[var(--bg-input)] focus:ring-[var(--accent)] focus:border-[var(--accent)]",children:Object.keys(C).map(U=>a.jsx("option",{value:U,children:C[U]},U))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-[var(--text-muted)] mb-1",children:"Attachments (optional)"}),a.jsxs("div",{className:"flex items-center justify-center w-full p-3 border-2 border-dashed border-[var(--border-subtle)] rounded-lg bg-[var(--bg-subtle)] text-[var(--text-muted)]",children:[a.jsx(sn,{className:"w-6 h-6 mr-2"}),a.jsx("span",{children:"Click or drag to upload files"})]})]})]})]}),a.jsxs("footer",{className:"p-4 bg-[var(--bg-subtle)] border-t border-[var(--border-subtle)] flex flex-col sm:flex-row justify-end items-center gap-4",children:[a.jsx("button",{type:"button",onClick:r,className:"w-full sm:w-auto py-2.5 px-6 bg-[var(--bg-card)] border border-[var(--border-subtle)] rounded-lg font-semibold shadow-sm hover:bg-[var(--bg-subtle)]",disabled:S,children:"Cancel"}),a.jsx("button",{type:"submit",className:"w-full sm:w-auto py-2.5 px-6 bg-[var(--accent)] text-[var(--accent-text)] font-bold rounded-lg shadow-md hover:bg-[var(--accent-light)] disabled:opacity-70 disabled:cursor-not-allowed",disabled:S,children:S?"Submitting...":"Submit Request"})]})]})})},so=({title:r,value:s,subtitle:i,icon:o})=>a.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-lg border border-gray-border group relative cursor-pointer transition-transform hover:-translate-y-1",children:[a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-semibold text-gray-dark uppercase",children:r}),a.jsx("p",{className:"font-playfair text-4xl font-bold text-charcoal mt-1",children:s}),a.jsx("p",{className:"text-sm text-text-muted mt-1",children:i})]}),a.jsx("div",{className:"bg-info/10 text-blue-600 p-3 rounded-full",children:o})]}),a.jsx("div",{className:"absolute bottom-2 right-2 px-2 py-1 bg-charcoal text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none",children:"Click to view members list filtered by this metric"})]}),JN=({members:r})=>a.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-border overflow-hidden",children:[a.jsx("h2",{className:"font-playfair text-xl font-bold text-charcoal p-6 border-b border-gray-border",children:"Members Needing Attention"}),a.jsx("div",{className:"overflow-x-auto hidden md:block",children:a.jsxs("table",{className:"min-w-full",children:[a.jsx("thead",{className:"bg-gray-light/50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4 text-left text-xs font-semibold text-gray-dark",children:"Business"}),a.jsx("th",{className:"py-3 px-4 text-left text-xs font-semibold text-gray-dark",children:"Issue"}),a.jsx("th",{className:"py-3 px-4 text-right text-xs font-semibold text-gray-dark",children:"Actions"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-border",children:r.map(s=>a.jsxs("tr",{className:"hover:bg-gray-light/50",children:[a.jsxs("td",{className:"p-4",children:[a.jsx("p",{className:"font-semibold text-charcoal",children:s.businessName}),a.jsxs("p",{className:"text-sm text-gray-dark",children:[s.tier,"  ",s.badgeRating]})]}),a.jsx("td",{className:"p-4",children:a.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-warning/20 text-yellow-800",children:s.issue})}),a.jsx("td",{className:"p-4 text-right",children:a.jsx("button",{className:"p-2 text-gray-dark hover:text-info rounded-full",children:a.jsx(or,{className:"w-5 h-5"})})})]},s.id))})]})}),a.jsx("div",{className:"md:hidden divide-y divide-gray-border",children:r.map(s=>a.jsxs("div",{className:"p-4",children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-charcoal",children:s.businessName}),a.jsxs("p",{className:"text-sm text-gray-dark",children:[s.tier,"  ",s.badgeRating]})]}),a.jsx("button",{className:"p-2 text-gray-dark",children:a.jsx(or,{className:"w-5 h-5"})})]}),a.jsx("div",{className:"mt-2",children:a.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-warning/20 text-yellow-800",children:s.issue})})]},s.id))})]}),XN=({requests:r})=>{const s={Open:"bg-gray-200 text-gray-800","In progress":"bg-info/20 text-blue-800"};return a.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-border overflow-hidden",children:[a.jsx("h2",{className:"font-playfair text-xl font-bold text-charcoal p-6 border-b border-gray-border",children:"Active Service Requests"}),a.jsx("div",{className:"overflow-x-auto hidden md:block",children:a.jsxs("table",{className:"min-w-full",children:[a.jsx("thead",{className:"bg-gray-light/50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4 text-left text-xs font-semibold text-gray-dark",children:"Request"}),a.jsx("th",{className:"py-3 px-4 text-left text-xs font-semibold text-gray-dark",children:"Assigned"}),a.jsx("th",{className:"py-3 px-4 text-left text-xs font-semibold text-gray-dark",children:"Status"}),a.jsx("th",{className:"py-3 px-4 text-right text-xs font-semibold text-gray-dark",children:"Actions"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-border",children:r.map(i=>a.jsxs("tr",{className:"hover:bg-gray-light/50",children:[a.jsxs("td",{className:"p-4",children:[a.jsx("p",{className:"font-semibold text-charcoal",children:i.businessName}),a.jsxs("p",{className:"text-sm text-gray-dark",children:[i.requestType,"  ",i.date]})]}),a.jsx("td",{className:"p-4 text-sm text-gray-dark",children:i.assignedTo}),a.jsx("td",{className:"p-4",children:a.jsx("span",{className:`px-2 py-1 text-xs font-bold rounded-full ${s[i.status]}`,children:i.status})}),a.jsx("td",{className:"p-4 text-right",children:a.jsx("button",{className:"p-2 text-gray-dark hover:text-info rounded-full",children:a.jsx(or,{className:"w-5 h-5"})})})]},i.id))})]})}),a.jsx("div",{className:"md:hidden divide-y divide-gray-border",children:r.map(i=>a.jsxs("div",{className:"p-4",children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-charcoal",children:i.businessName}),a.jsx("p",{className:"text-sm text-gray-dark",children:i.requestType})]}),a.jsx("span",{className:`px-2 py-1 text-xs font-bold rounded-full ${s[i.status]}`,children:i.status})]}),a.jsxs("div",{className:"flex justify-between items-center mt-3 text-sm text-gray-dark",children:[a.jsxs("span",{children:[i.date,"  Assigned: ",i.assignedTo]}),a.jsx("button",{className:"font-semibold text-info hover:underline",children:"View "})]})]},i.id))})]})},ex=()=>{const r=Ns.totalMembers-Ns.activeMembers,s=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0}).format(Ns.mrr);return a.jsxs("div",{className:"p-4 md:p-6 lg:p-8 animate-fade-in",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"font-playfair text-3xl md:text-4xl font-bold text-charcoal",children:"Overview"}),a.jsx("p",{className:"text-gray-dark mt-1 text-lg",children:"A high-level view of platform activity and health."})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-6",children:[a.jsx(so,{title:"Total Members",value:Ns.totalMembers.toString(),subtitle:`${Ns.activeMembers} active / ${r} inactive`,icon:a.jsx(ks,{className:"w-6 h-6"})}),a.jsx(so,{title:"Pending Verifications",value:Ns.pendingVerifications.toString(),subtitle:"Docs needing review",icon:a.jsx(_t,{className:"w-6 h-6"})}),a.jsx(so,{title:"Open Service Requests",value:Ns.openRequests.toString(),subtitle:"Content + support tickets",icon:a.jsx(ko,{className:"w-6 h-6"})}),a.jsx(so,{title:"Monthly Recurring Revenue",value:s,subtitle:`Churn: ${Ns.monthlyChurnRate}% this month`,icon:a.jsx(Rx,{className:"w-6 h-6"})})]}),a.jsxs("div",{className:"mt-8 grid grid-cols-1 lg:grid-cols-2 gap-8",children:[a.jsx(JN,{members:lN}),a.jsx(XN,{requests:oN})]})]})},WN=({member:r,onClose:s,onUpdate:i,showToast:o})=>{var y,C,M,T,z;const[c,u]=_.useState("Overview"),[h,p]=_.useState(!1),[m,g]=_.useState({tier:r.tier,rating:r.rating,status:r.status,renewalDate:r.renewalDate,badgeStatus:((y=r.badge)==null?void 0:y.status)??"NONE",badgeLabel:((C=r.badge)==null?void 0:C.badgeLabel)??"",badgeImageLightUrl:((M=r.badge)==null?void 0:M.imageLightUrl)??"",badgeImageDarkUrl:((T=r.badge)==null?void 0:T.imageDarkUrl)??"",badgeProfileUrl:((z=r.badge)==null?void 0:z.profileUrl)??""}),b=()=>{var U;i({...r,tier:m.tier,rating:m.rating,status:m.status,renewalDate:m.renewalDate,badge:{status:m.badgeStatus,badgeLabel:m.badgeLabel||`${m.tier}  ${m.rating}`,imageLightUrl:m.badgeImageLightUrl,imageDarkUrl:m.badgeImageDarkUrl||void 0,profileUrl:m.badgeProfileUrl||((U=r.badge)==null?void 0:U.profileUrl)||""}}),p(!1)},w=()=>{var U,X,B,se,ee;g({tier:r.tier,rating:r.rating,status:r.status,renewalDate:r.renewalDate,badgeStatus:((U=r.badge)==null?void 0:U.status)??"NONE",badgeLabel:((X=r.badge)==null?void 0:X.badgeLabel)??"",badgeImageLightUrl:((B=r.badge)==null?void 0:B.imageLightUrl)??"",badgeImageDarkUrl:((se=r.badge)==null?void 0:se.imageDarkUrl)??"",badgeProfileUrl:((ee=r.badge)==null?void 0:ee.profileUrl)??""}),p(!1)},N={Active:"bg-success/20 text-success",Suspended:"bg-error/20 text-error",Pending:"bg-info/20 text-info",Canceled:"bg-gray-200 text-gray-800"},S=({label:U})=>a.jsx("button",{onClick:()=>u(U),className:`px-4 py-2 text-sm font-semibold rounded-md transition-colors ${c===U?"bg-info/10 text-info":"text-gray-dark hover:bg-gray-light"}`,children:U}),v=({label:U,value:X})=>a.jsxs("div",{className:"flex justify-between items-center py-2",children:[a.jsx("span",{className:"text-sm font-medium text-gray-dark",children:U}),a.jsx("span",{className:"text-sm font-semibold text-charcoal text-right",children:X})]}),E=()=>{switch(c){case"Verification":return a.jsxs("div",{className:"space-y-3",children:[r.documents.map(U=>a.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-light/60 rounded-lg",children:[a.jsx("span",{className:"font-semibold",children:U.name}),a.jsx("span",{className:`px-2 py-0.5 text-xs font-bold rounded-full ${U.status==="Approved"?"bg-success/20 text-success":U.status==="Pending"?"bg-info/20 text-info":"bg-error/20 text-error"}`,children:U.status})]},U.name)),a.jsx("button",{className:"w-full mt-4 text-center py-2 bg-white border border-gray-border text-charcoal font-semibold rounded-lg hover:bg-gray-light",children:"Open in Verifications"})]});case"Billing":return a.jsxs("div",{className:"space-y-2",children:[a.jsx(v,{label:"Stripe Customer ID",value:a.jsx("code",{children:r.billingInfo.stripeId})}),a.jsx(v,{label:"Current Plan",value:r.billingInfo.plan}),a.jsx(v,{label:"MRR",value:`$${r.mrr}`}),a.jsx(v,{label:"Last Payment",value:r.billingInfo.lastPayment})]});case"Activity":return a.jsx("ul",{className:"space-y-3",children:r.activityLog.map((U,X)=>a.jsxs("li",{className:"flex items-start text-sm",children:[a.jsx("div",{className:"w-2 h-2 bg-info rounded-full mt-1.5 mr-3 shrink-0"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-charcoal",children:U.event}),a.jsx("p",{className:"text-gray-dark",children:U.date})]})]},X))});case"Overview":default:return a.jsxs("div",{className:"space-y-2",children:[a.jsx(v,{label:"Email",value:r.email}),a.jsx(v,{label:"Location",value:r.city}),a.jsx(v,{label:"Joined On",value:r.joinDate}),a.jsx(v,{label:"Profile Views",value:r.stats.profileViews.toLocaleString()}),a.jsx(v,{label:"Badge Clicks",value:r.stats.badgeClicks.toLocaleString()}),r.badge&&a.jsx(a.Fragment,{children:a.jsxs("div",{className:"pt-2 mt-2 border-t border-gray-border",children:[a.jsx(v,{label:"Badge Status",value:r.badge.status}),a.jsx(v,{label:"Badge Label",value:r.badge.badgeLabel})]})})]})}};return a.jsxs("div",{className:"fixed inset-0 z-40",children:[a.jsx("div",{className:"absolute inset-0 bg-black/50 animate-fade-in",onClick:s}),a.jsxs("div",{className:"absolute inset-y-0 right-0 w-full max-w-md md:max-w-sm lg:max-w-md bg-white shadow-2xl flex flex-col animate-slide-in-right",children:[a.jsx("div",{className:"p-4 border-b border-gray-border shrink-0",children:a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"font-playfair text-2xl font-bold text-charcoal",children:r.businessName}),a.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[a.jsx("span",{className:`px-2 py-0.5 text-xs font-bold rounded-full ${N[m.status]}`,children:m.status}),a.jsx("span",{className:"text-sm font-semibold text-gray-dark",children:m.tier}),a.jsx("span",{className:"text-sm font-semibold text-gray-dark",children:m.rating})]})]}),a.jsx("button",{onClick:s,className:"p-1 text-gray-dark hover:text-charcoal",children:a.jsx(wt,{className:"w-6 h-6"})})]})}),a.jsx("div",{className:"flex-grow p-4 overflow-y-auto",children:h?a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"p-4 bg-gray-light rounded-lg border border-gray-border space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-dark",children:"Tier"}),a.jsxs("select",{value:m.tier,onChange:U=>g({...m,tier:U.target.value}),className:"w-full mt-1 p-2 border rounded-md",children:[a.jsx("option",{children:"Bronze"}),a.jsx("option",{children:"Silver"}),a.jsx("option",{children:"Gold"}),a.jsx("option",{children:"Founding Member"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-dark",children:"Badge Rating"}),a.jsxs("select",{value:m.rating,onChange:U=>g({...m,rating:U.target.value}),className:"w-full mt-1 p-2 border rounded-md",children:[a.jsx("option",{children:"A+"}),a.jsx("option",{children:"A"}),a.jsx("option",{children:"B+"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-dark",children:"Status"}),a.jsxs("select",{value:m.status,onChange:U=>g({...m,status:U.target.value}),className:"w-full mt-1 p-2 border rounded-md",children:[a.jsx("option",{children:"Active"}),a.jsx("option",{children:"Pending"}),a.jsx("option",{children:"Suspended"}),a.jsx("option",{children:"Canceled"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-dark",children:"Renewal Date"}),a.jsx("input",{type:"date",value:m.renewalDate,onChange:U=>g({...m,renewalDate:U.target.value}),className:"w-full mt-1 p-2 border rounded-md"})]})]}),a.jsxs("div",{className:"p-4 bg-gray-light rounded-lg border border-gray-border space-y-4",children:[a.jsx("h3",{className:"font-bold text-charcoal -mb-2",children:"Badge Settings"}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-dark",children:"Badge Status"}),a.jsxs("select",{value:m.badgeStatus,onChange:U=>g({...m,badgeStatus:U.target.value}),className:"w-full mt-1 p-2 border rounded-md",children:[a.jsx("option",{children:"NONE"}),a.jsx("option",{children:"PENDING"}),a.jsx("option",{children:"ACTIVE"}),a.jsx("option",{children:"REVOKED"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-dark",children:"Badge Label"}),a.jsx("input",{type:"text",value:m.badgeLabel,onChange:U=>g({...m,badgeLabel:U.target.value}),placeholder:`${m.tier}  ${m.rating}`,className:"w-full mt-1 p-2 border rounded-md"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-dark",children:"Image URL (Light)"}),a.jsx("input",{type:"text",value:m.badgeImageLightUrl,onChange:U=>g({...m,badgeImageLightUrl:U.target.value}),placeholder:"https:///badge-light.svg",className:"w-full mt-1 p-2 border rounded-md"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-dark",children:"Image URL (Dark)"}),a.jsx("input",{type:"text",value:m.badgeImageDarkUrl,onChange:U=>g({...m,badgeImageDarkUrl:U.target.value}),placeholder:"https:///badge-dark.svg",className:"w-full mt-1 p-2 border rounded-md"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-dark",children:"Profile URL"}),a.jsx("input",{type:"text",value:m.badgeProfileUrl,onChange:U=>g({...m,badgeProfileUrl:U.target.value}),placeholder:`https://restorationexpertise.com/profile/${r.businessName.toLowerCase().replace(/ /g,"-")}`,className:"w-full mt-1 p-2 border rounded-md"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-dark",children:"Preview"}),a.jsx("div",{className:"mt-1 p-4 border border-dashed border-gray-border rounded-lg flex items-center justify-center min-h-[100px] bg-white",children:m.badgeImageLightUrl?a.jsx("img",{src:m.badgeImageLightUrl,alt:"Badge Preview",className:"max-w-full h-auto max-h-24"}):a.jsx("p",{className:"text-gray-dark text-sm",children:"No image URL set"})})]})]}),a.jsx("p",{className:"text-xs text-center text-gray-dark pt-2",children:"In production, these changes will sync to Stripe and the member portal."})]}):a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-center p-1 bg-gray-light rounded-lg mb-4",children:[a.jsx(S,{label:"Overview"}),a.jsx(S,{label:"Verification"}),a.jsx(S,{label:"Billing"}),a.jsx(S,{label:"Activity"})]}),a.jsx("div",{className:"p-2",children:E()})]})}),a.jsx("div",{className:"p-4 border-t border-gray-border shrink-0",children:h?a.jsxs("div",{className:"flex justify-end gap-3",children:[a.jsx("button",{onClick:w,className:"py-2 px-4 bg-white border border-gray-border rounded-lg font-semibold shadow-sm",children:"Cancel"}),a.jsx("button",{onClick:b,className:"py-2 px-4 bg-gold text-charcoal font-bold rounded-lg shadow-md",children:"Save Changes"})]}):a.jsxs("button",{onClick:()=>p(!0),className:"w-full py-2.5 bg-info/10 text-info font-bold rounded-lg flex items-center justify-center gap-2",children:[a.jsx(Ya,{className:"w-5 h-5"})," Edit Member"]})})]})]})},ZN=({isOpen:r,onClose:s,memberName:i})=>r?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4 animate-fade-in",onClick:s,children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md p-6 relative animate-slide-up",onClick:o=>o.stopPropagation(),children:[a.jsx("button",{onClick:s,className:"absolute top-4 right-4 text-gray-dark hover:text-charcoal",children:a.jsx(wt,{className:"w-6 h-6"})}),a.jsxs("div",{className:"text-center",children:[a.jsx("h2",{className:"font-playfair text-2xl font-bold text-charcoal",children:"Impersonate Member"}),a.jsxs("p",{className:"text-gray-dark mt-2",children:["You are about to impersonate ",a.jsx("strong",{className:"text-charcoal",children:i}),"."]}),a.jsx("p",{className:"text-sm bg-gray-light p-3 rounded-lg mt-4 text-left",children:"Impersonation will let admins view the Member Hub exactly as this business sees it. This is useful for troubleshooting issues with their account, benefits, or billing display."})]}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row justify-end gap-3",children:[a.jsx("button",{onClick:s,className:"py-2 px-5 bg-white border border-gray-border font-semibold rounded-lg shadow-sm order-2 sm:order-1",children:"Close"}),a.jsx("button",{disabled:!0,className:"py-2 px-5 bg-info text-white font-bold rounded-lg shadow-md disabled:opacity-50 disabled:cursor-not-allowed order-1 sm:order-2",children:"Start Impersonation (Disabled)"})]})]})}):null,e1=({showToast:r})=>{const[s,i]=_.useState(Ad),[o,c]=_.useState(""),[u,h]=_.useState({tier:"All",status:"All",rating:"All"}),[p,m]=_.useState({key:"joinDate",direction:"descending"}),[g,b]=_.useState(null),[w,N]=_.useState(!1),[S,v]=_.useState(""),E=B=>{const{name:se,value:ee}=B.target;h(te=>({...te,[se]:ee}))},y=B=>{let se="ascending";p.key===B&&p.direction==="ascending"&&(se="descending"),m({key:B,direction:se})},C=B=>{i(se=>se.map(ee=>ee.id===B.id?B:ee)),b(B),r("Member updated successfully.","success")},M=B=>{v(B.businessName),N(!0)},T=_.useMemo(()=>{let B=[...s];return B=B.filter(se=>{const ee=se.businessName.toLowerCase().includes(o.toLowerCase())||se.email.toLowerCase().includes(o.toLowerCase()),te=u.tier==="All"||se.tier===u.tier,ce=u.status==="All"||se.status===u.status,J=u.rating==="All"||se.rating===u.rating;return ee&&te&&ce&&J}),p.key&&B.sort((se,ee)=>{const te=se[p.key],ce=ee[p.key];return te<ce?p.direction==="ascending"?-1:1:te>ce?p.direction==="ascending"?1:-1:0}),B},[s,o,u,p]),z={Active:"bg-success/20 text-success",Suspended:"bg-error/20 text-error",Pending:"bg-info/20 text-info",Canceled:"bg-gray-200 text-gray-800"},U={Bronze:"bg-yellow-700/20 text-yellow-800",Silver:"bg-gray-300/60 text-gray-800",Gold:"bg-gold/20 text-gold-dark","Founding Member":"bg-charcoal/80 text-white",Platinum:"bg-blue-900/20 text-blue-900"},X=({sortKey:B,label:se})=>{const ee=p.key===B,te=p.direction==="ascending"?"":"";return a.jsxs("th",{onClick:()=>y(B),className:"px-4 py-3 text-left text-xs font-bold text-charcoal uppercase tracking-wider cursor-pointer",children:[se," ",ee&&a.jsx("span",{className:"text-info",children:te})]})};return a.jsxs(a.Fragment,{children:[g&&a.jsx(WN,{member:g,onClose:()=>b(null),onUpdate:C,showToast:r}),a.jsx(ZN,{isOpen:w,onClose:()=>N(!1),memberName:S}),a.jsxs("div",{className:"p-4 md:p-6 lg:p-8 animate-fade-in",children:[a.jsx("div",{className:"flex flex-col md:flex-row justify-between md:items-center gap-4 mb-6",children:a.jsxs("div",{children:[a.jsx("h1",{className:"font-playfair text-3xl font-bold text-charcoal",children:"Members"}),a.jsx("p",{className:"text-gray-dark mt-1",children:"Manage all member accounts, view details, and perform admin actions."})]})}),a.jsx("div",{className:"bg-white p-4 rounded-2xl shadow-lg border border-gray-border mb-6",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx(fr,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray"}),a.jsx("input",{type:"text",placeholder:"Search by name or email...",value:o,onChange:B=>c(B.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-border rounded-lg bg-gray-light/50 focus:ring-info focus:border-info"})]}),a.jsxs("select",{name:"tier",value:u.tier,onChange:E,className:"w-full p-2 border border-gray-border rounded-lg bg-gray-light/50 focus:ring-info focus:border-info",children:[a.jsx("option",{value:"All",children:"All Tiers"}),a.jsx("option",{children:"Bronze"}),a.jsx("option",{children:"Silver"}),a.jsx("option",{children:"Gold"}),a.jsx("option",{children:"Founding Member"})]}),a.jsxs("select",{name:"status",value:u.status,onChange:E,className:"w-full p-2 border border-gray-border rounded-lg bg-gray-light/50 focus:ring-info focus:border-info",children:[a.jsx("option",{value:"All",children:"All Statuses"}),a.jsx("option",{children:"Active"}),a.jsx("option",{children:"Pending"}),a.jsx("option",{children:"Suspended"}),a.jsx("option",{children:"Canceled"})]}),a.jsxs("select",{name:"rating",value:u.rating,onChange:E,className:"w-full p-2 border border-gray-border rounded-lg bg-gray-light/50 focus:ring-info focus:border-info",children:[a.jsx("option",{value:"All",children:"All Ratings"}),a.jsx("option",{children:"A+"}),a.jsx("option",{children:"A"}),a.jsx("option",{children:"B+"})]})]})}),a.jsx("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-border overflow-hidden hidden md:block",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-border",children:[a.jsx("thead",{className:"bg-gray-light/50",children:a.jsxs("tr",{children:[a.jsx(X,{sortKey:"businessName",label:"Business"}),a.jsx(X,{sortKey:"tier",label:"Tier"}),a.jsx(X,{sortKey:"rating",label:"Rating"}),a.jsx(X,{sortKey:"status",label:"Status"}),a.jsx(X,{sortKey:"mrr",label:"MRR"}),a.jsx(X,{sortKey:"renewalDate",label:"Renewal"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold text-charcoal uppercase tracking-wider",children:"Pending"}),a.jsx("th",{className:"px-4 py-3 text-right text-xs font-bold text-charcoal uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-border",children:T.map(B=>a.jsxs("tr",{className:"hover:bg-gray-light/50",children:[a.jsxs("td",{className:"p-4 whitespace-nowrap",children:[a.jsx("p",{className:"font-semibold text-charcoal",children:B.businessName}),a.jsx("p",{className:"text-sm text-gray-dark",children:B.city})]}),a.jsx("td",{className:"p-4 whitespace-nowrap",children:a.jsx("span",{className:`px-2 py-1 text-xs font-bold rounded-full ${U[B.tier]}`,children:B.tier})}),a.jsx("td",{className:"p-4 whitespace-nowrap font-semibold",children:B.rating}),a.jsx("td",{className:"p-4 whitespace-nowrap",children:a.jsx("span",{className:`px-2 py-1 text-xs font-bold rounded-full ${z[B.status]}`,children:B.status})}),a.jsxs("td",{className:"p-4 whitespace-nowrap",children:["$",B.mrr.toLocaleString()]}),a.jsx("td",{className:"p-4 whitespace-nowrap text-sm",children:B.renewalDate}),a.jsx("td",{className:"p-4 whitespace-nowrap text-sm",children:B.pendingDocs>0||B.openRequests>0?`${B.pendingDocs} D / ${B.openRequests} R`:""}),a.jsx("td",{className:"p-4 whitespace-nowrap text-right text-sm font-medium",children:a.jsxs("div",{className:"flex justify-end gap-1",children:[a.jsx("button",{onClick:()=>b(B),className:"p-2 text-gray-dark hover:text-info rounded-full",title:"View",children:a.jsx(or,{className:"w-5 h-5"})}),a.jsx("button",{onClick:()=>b(B),className:"p-2 text-gray-dark hover:text-info rounded-full",title:"Edit",children:a.jsx(Ya,{className:"w-5 h-5"})}),a.jsx("button",{onClick:()=>M(B),className:"p-2 text-gray-dark hover:text-info rounded-full",title:"Impersonate",children:a.jsx(uo,{className:"w-5 h-5"})})]})})]},B.id))})]})})}),a.jsx("div",{className:"md:hidden space-y-4",children:T.map(B=>a.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-border p-4",children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-bold text-charcoal",children:B.businessName}),a.jsx("p",{className:"text-sm text-gray-dark",children:B.email}),a.jsx("p",{className:"text-sm text-gray-dark",children:B.city})]}),a.jsxs("div",{className:"flex flex-col items-end gap-1",children:[a.jsx("span",{className:`px-2 py-1 text-xs font-bold rounded-full ${U[B.tier]}`,children:B.tier}),a.jsx("span",{className:`px-2 py-1 text-xs font-bold rounded-full ${z[B.status]}`,children:B.status})]})]}),a.jsxs("div",{className:"mt-4 pt-3 border-t border-gray-border flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsxs("p",{className:"text-sm text-gray-dark",children:["MRR: ",a.jsxs("span",{className:"font-semibold text-charcoal",children:["$",B.mrr.toLocaleString()]})]}),a.jsxs("p",{className:"text-sm text-gray-dark",children:["Renews: ",a.jsx("span",{className:"font-semibold text-charcoal",children:B.renewalDate})]})]}),a.jsx("button",{onClick:()=>b(B),className:"py-2 px-4 bg-info/10 text-info font-bold rounded-lg",children:"View"})]})]},B.id))}),T.length===0&&a.jsxs("div",{className:"text-center py-16 bg-white rounded-2xl shadow-lg border border-gray-border",children:[a.jsx("h3",{className:"text-xl font-bold text-charcoal",children:"No members found"}),a.jsx("p",{className:"text-gray-dark mt-1",children:"Try adjusting your search or filters."})]})]})]})},tx=({user:r,onClose:s,onSave:i,title:o,subtext:c})=>{const[u,h]=_.useState({name:(r==null?void 0:r.name)||"",email:(r==null?void 0:r.email)||"",role:(r==null?void 0:r.role)||"Support"}),p=u.name.trim()&&u.email.trim()&&u.email.includes("@"),m=g=>{g.preventDefault(),p&&i(r?{...r,name:u.name,role:u.role}:u)};return a.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4 animate-fade-in",onClick:s,children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md p-6 relative animate-slide-up",onClick:g=>g.stopPropagation(),children:[a.jsx("button",{onClick:s,className:"absolute top-4 right-4 text-gray-dark hover:text-charcoal",children:a.jsx(wt,{className:"w-6 h-6"})}),a.jsx("h2",{className:"font-playfair text-2xl font-bold text-charcoal mb-2",children:o}),c&&a.jsx("p",{className:"text-sm text-gray-dark mb-4",children:c}),a.jsxs("form",{onSubmit:m,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-dark",children:"Full Name"}),a.jsx("input",{type:"text",value:u.name,onChange:g=>h({...u,name:g.target.value}),className:"mt-1 block w-full p-2 border border-gray-border rounded-lg",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-dark",children:"Email"}),a.jsx("input",{type:"email",value:u.email,onChange:g=>h({...u,email:g.target.value}),className:"mt-1 block w-full p-2 border border-gray-border rounded-lg",required:!0,disabled:!!r})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-dark",children:"Role"}),a.jsxs("select",{value:u.role,onChange:g=>h({...u,role:g.target.value}),className:"mt-1 block w-full p-2 border border-gray-border rounded-lg",children:[a.jsx("option",{children:"Superadmin"}),a.jsx("option",{children:"Operations"}),a.jsx("option",{children:"Support"}),a.jsx("option",{children:"Content"}),a.jsx("option",{children:"ReadOnly"})]})]}),a.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[a.jsx("button",{type:"button",onClick:s,className:"py-2 px-4 bg-gray-light border border-gray-border rounded-lg font-semibold",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:!p,className:"py-2 px-4 bg-gold text-charcoal font-bold rounded-lg disabled:opacity-50",children:"Save"})]})]})]})})},t1=({users:r,onInvite:s,onEdit:i,onToggleStatus:o,showToast:c})=>{const u={Active:"bg-success/20 text-success",Suspended:"bg-gray-200 text-gray-800"};return a.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-border",children:[a.jsxs("div",{className:"p-4 md:p-6 flex justify-between items-center border-b border-gray-border",children:[a.jsx("h2",{className:"font-playfair text-xl font-bold text-charcoal",children:"Admin Users"}),a.jsx("button",{onClick:s,className:"py-2 px-4 bg-gold text-charcoal font-bold rounded-lg shadow-sm text-sm",children:"Invite Admin"})]}),a.jsx("div",{className:"overflow-x-auto hidden md:block",children:a.jsxs("table",{className:"min-w-full",children:[a.jsx("thead",{className:"bg-gray-light/50",children:a.jsx("tr",{children:["Name","Role","Status","Last Login","Actions"].map(h=>a.jsx("th",{className:"p-4 text-left text-xs font-bold text-charcoal uppercase",children:h},h))})}),a.jsx("tbody",{className:"divide-y divide-gray-border",children:r.map(h=>a.jsxs("tr",{children:[a.jsxs("td",{className:"p-4",children:[a.jsx("p",{className:"font-semibold text-charcoal",children:h.name}),a.jsx("p",{className:"text-sm text-gray-dark",children:h.email})]}),a.jsx("td",{className:"p-4 text-sm",children:h.role}),a.jsx("td",{className:"p-4",children:a.jsx("span",{className:`px-2 py-1 text-xs font-bold rounded-full ${u[h.status]}`,children:h.status})}),a.jsx("td",{className:"p-4 text-sm",children:h.lastLogin}),a.jsx("td",{className:"p-4",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>i(h),className:"p-2 text-gray-dark hover:text-info rounded-full",children:a.jsx(Ya,{className:"w-5 h-5"})}),a.jsx("button",{onClick:()=>o(h),className:"text-sm font-semibold text-gray-dark hover:underline",children:h.status==="Active"?"Suspend":"Activate"}),a.jsx("button",{onClick:()=>c("Login reset email would be sent in production.","success"),className:"p-2 text-gray-dark hover:text-info rounded-full",children:a.jsx(Ox,{className:"w-5 h-5"})})]})})]},h.id))})]})}),a.jsx("div",{className:"md:hidden divide-y divide-gray-border",children:r.map(h=>a.jsxs("div",{className:"p-4 space-y-3",children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsx("p",{className:"font-bold text-charcoal",children:h.name}),a.jsx("span",{className:`px-2 py-1 text-xs font-bold rounded-full ${u[h.status]}`,children:h.status})]}),a.jsxs("div",{className:"text-sm",children:[a.jsx("p",{className:"text-gray-dark",children:h.email}),a.jsx("p",{className:"font-semibold",children:h.role})]}),a.jsxs("div",{className:"flex justify-between items-center text-sm",children:[a.jsxs("p",{className:"text-gray-dark",children:["Last login: ",h.lastLogin]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>i(h),className:"py-1 px-3 bg-info/10 text-info font-bold rounded-md",children:"Edit"}),a.jsx("button",{onClick:()=>o(h),className:"py-1 px-3 bg-gray-200 font-semibold rounded-md",children:h.status==="Active"?"Suspend":"Activate"})]})]})]},h.id))})]})},a1=()=>{const r={"View Members":{Superadmin:!0,Operations:!0,Support:!0,Content:!0,ReadOnly:!0},"Edit Members":{Superadmin:!0,Operations:!0,Support:!0,Content:!1,ReadOnly:!1},"Manage Verifications":{Superadmin:!0,Operations:!0,Support:!0,Content:!1,ReadOnly:!0},"Manage Service Requests":{Superadmin:!0,Operations:!0,Support:!0,Content:!0,ReadOnly:!0},"Manage Billing":{Superadmin:!0,Operations:!0,Support:!1,Content:!1,ReadOnly:!0},"Manage Admin Users":{Superadmin:!0,Operations:!1,Support:!1,Content:!1,ReadOnly:!1}},s=["Superadmin","Operations","Support","Content","ReadOnly"];return a.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-border",children:[a.jsx("div",{className:"p-4 md:p-6 border-b border-gray-border",children:a.jsx("h2",{className:"font-playfair text-xl font-bold text-charcoal",children:"Roles & Permissions"})}),a.jsxs("div",{className:"p-4 md:p-6",children:[a.jsx("div",{className:"hidden md:block overflow-x-auto",children:a.jsxs("table",{className:"min-w-full",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-3 text-left text-xs font-bold text-charcoal uppercase",children:"Capability"}),s.map(i=>a.jsx("th",{className:"p-3 text-center text-xs font-bold text-charcoal uppercase",children:i},i))]})}),a.jsx("tbody",{className:"divide-y divide-gray-border",children:Object.entries(r).map(([i,o])=>a.jsxs("tr",{children:[a.jsx("td",{className:"p-3 font-semibold text-charcoal",children:i}),s.map(c=>a.jsx("td",{className:"p-3 text-center",children:o[c]&&a.jsx(vi,{className:"w-5 h-5 text-success mx-auto"})},c))]},i))})]})}),a.jsx("div",{className:"md:hidden space-y-6",children:s.map(i=>a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-lg text-charcoal border-b border-gray-border pb-1 mb-2",children:i}),a.jsx("ul",{className:"space-y-1",children:Object.entries(r).map(([o,c])=>a.jsxs("li",{className:"flex items-center gap-2 text-sm",children:[c[i]?a.jsx(vi,{className:"w-4 h-4 text-success"}):a.jsx(wt,{className:"w-4 h-4 text-error"}),a.jsx("span",{children:o})]},o))})]},i))})]}),a.jsx("div",{className:"p-4 bg-gray-light/50 text-sm text-gray-dark rounded-b-2xl",children:"Permissions are static in this demo. In production, this matrix will drive access control for admin users."})]})},s1=({showToast:r})=>{const[s,i]=_.useState(dN),[o,c]=_.useState(!1),[u,h]=_.useState(!1),[p,m]=_.useState(null),g=S=>{const v={...S,id:`admin_${Date.now()}`,status:"Active",lastLogin:"-"};i(E=>[v,...E]),r("Admin invited (demo).","success"),c(!1)},b=S=>{i(v=>v.map(E=>E.id===S.id?S:E)),r("Admin user updated.","success"),h(!1),m(null)},w=S=>{const v=S.status==="Active"?"Suspended":"Active",E={...S,status:v};i(y=>y.map(C=>C.id===E.id?E:C)),r(`User ${v.toLowerCase()}.`,"success")},N=S=>{m(S),h(!0)};return a.jsxs(a.Fragment,{children:[o&&a.jsx(tx,{onClose:()=>c(!1),onSave:g,title:"Invite Admin",subtext:"Invite will send an email in the live version. For now we just add them to the list."}),u&&p&&a.jsx(tx,{user:p,onClose:()=>{h(!1),m(null)},onSave:b,title:"Edit Admin User"}),a.jsx("div",{className:"p-4 md:p-6 lg:p-8 animate-fade-in",children:a.jsxs("div",{className:"max-w-4xl mx-auto",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"font-playfair text-3xl font-bold text-charcoal",children:"Admin Settings"}),a.jsx("p",{className:"text-gray-dark mt-1",children:"Manage admin users, roles, and access to the Restoration Expertise admin tools."})]}),a.jsxs("div",{className:"space-y-8",children:[a.jsx(t1,{users:s,onInvite:()=>c(!0),onEdit:N,onToggleStatus:w,showToast:r}),a.jsx(a1,{})]})]})})]})},ax=r=>{if(!r)return"";const s=new Date(r);return Number.isNaN(s.getTime())?r:new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric"}).format(s)},n1=r=>{if(!r)return"";const s=new Date(r);return Number.isNaN(s.getTime())?r:new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"numeric"}).format(s)},r1=r=>{const s=(r==null?void 0:r.toLowerCase())??"";return s.includes("progress")?"in_progress":s.includes("complete")?"completed":s.includes("cancel")?"canceled":"open"},i1=r=>{const s=(r==null?void 0:r.toLowerCase())??"";return s.includes("high")?"high":s.includes("low")?"low":"medium"},l1=r=>({id:String(r.id),profileId:r.profile_id??"",requestType:r.request_type??"Service Request",title:r.title??"Untitled Request",description:r.description??null,priority:i1(r.priority),status:r1(r.status),adminNotes:r.admin_notes??null,assignedAdminId:r.assigned_admin_id!==null&&r.assigned_admin_id!==void 0?String(r.assigned_admin_id):null,createdAt:r.created_at??new Date().toISOString(),updatedAt:r.updated_at??null}),sx=r=>({id:String(r.id),serviceRequestId:String(r.service_request_id??""),actorUserId:r.actor_user_id??null,action:r.action??null,description:r.description??null,createdAt:r.created_at??new Date().toISOString(),actorName:r.actor_name??null}),no={open:"Open",in_progress:"In Progress",completed:"Completed",canceled:"Canceled"},o1={open:"bg-gray-200 text-gray-800",in_progress:"bg-blue-100 text-blue-800",completed:"bg-green-100 text-green-800",canceled:"bg-gray-200 text-gray-500"},dd={low:"Low",medium:"Medium",high:"High"},c1=({showToast:r})=>{const{session:s}=nt(),[i,o]=_.useState([]),[c,u]=_.useState({}),[h,p]=_.useState([]),[m,g]=_.useState(!1),[b,w]=_.useState(null),[N,S]=_.useState({}),[v,E]=_.useState(null),y=["open","in_progress","completed","canceled"],C=["low","medium","high"],M=_.useCallback(async()=>{const{data:J,error:I}=await be.from("admin_profiles").select("id, user_id, display_name, email").order("display_name",{ascending:!0});return I?(console.error("Failed to load admin profiles",I),[]):J??[]},[]),T=_.useCallback(async()=>{g(!0);try{const[J,I]=await Promise.all([be.from("service_requests").select("id, profile_id, request_type, title, description, priority, status, admin_notes, assigned_admin_id, created_at, updated_at").in("status",["open","in_progress"]).order("created_at",{ascending:!1}),M()]),{data:k,error:F}=J;if(F)throw F;const R=k??[],Y=new Map(I.map(H=>[String(H.id),H.display_name??H.email??String(H.id)])),ne=new Map(I.filter(H=>!!H.user_id).map(H=>[H.user_id,H.display_name??H.email??H.user_id??"Admin"])),re=R.map(H=>{const G=l1(H);return{...G,assignedAdminName:G.assignedAdminId?Y.get(G.assignedAdminId)??null:null}});o(re),p(I);const xe=Array.from(new Set(R.map(H=>H.profile_id).filter(Boolean)));if(xe.length>0){const{data:H,error:G}=await be.from("profiles").select("id, business_name, contact_email").in("id",xe);if(G)console.error("Failed to load profile details",G);else{const K=H??[],ae=new Map(K.map(ie=>[ie.id,ie]));o(ie=>ie.map(ue=>{const Ae=ae.get(ue.profileId);return{...ue,profileName:(Ae==null?void 0:Ae.business_name)??null,profileEmail:(Ae==null?void 0:Ae.contact_email)??null}}))}}const O=R.map(H=>H.id).filter(H=>H!=null);if(O.length>0){const{data:H,error:G}=await be.from("service_request_activity").select("*").in("service_request_id",O).order("created_at",{ascending:!1});if(G)console.error("Failed to load service request activities",G),u({});else{const K=H??[],ae={};K.forEach(ie=>{const ue=sx(ie);if(ue.serviceRequestId){if(!ue.actorName&&ue.actorUserId){const Ae=ne.get(ue.actorUserId);Ae&&(ue.actorName=Ae)}ae[ue.serviceRequestId]||(ae[ue.serviceRequestId]=[]),ae[ue.serviceRequestId].push(ue)}}),u(ae)}}else u({});w(null)}catch(J){console.error("Failed to load service requests",J),w("Unable to load service requests. Please try again."),o([]),u({})}finally{g(!1)}},[M]);_.useEffect(()=>{T()},[T]);const z=_.useMemo(()=>[{id:"",label:"Unassigned"},...h.map(J=>({id:String(J.id),label:J.display_name??J.email??String(J.id)}))],[h]),U=J=>c[J]??[],X=(J,I)=>{u(k=>{const F=k[J]??[];return{...k,[J]:[I,...F]}})},B=async(J,I,k)=>{var F;if(!((F=s==null?void 0:s.user)!=null&&F.id)){r("You must be logged in as an admin to update requests.","error");return}E(J);try{const R={};Object.prototype.hasOwnProperty.call(I,"status")&&(R.status=I.status),Object.prototype.hasOwnProperty.call(I,"priority")&&(R.priority=I.priority),Object.prototype.hasOwnProperty.call(I,"adminNotes")&&(R.admin_notes=I.adminNotes??null),Object.prototype.hasOwnProperty.call(I,"assignedAdminId")&&(R.assigned_admin_id=I.assignedAdminId??null);const{error:Y}=await be.from("service_requests").update(R).eq("id",J);if(Y)throw Y;let ne=null;const re=h.find(G=>G.user_id===s.user.id);if(re)ne=re.display_name??re.email??null;else{const{data:G,error:K}=await be.from("admin_profiles").select("display_name, email").eq("user_id",s.user.id).maybeSingle();if(K)console.error("Failed to resolve admin display name for activity log",K);else{const ae=G??null;ae&&(ne=ae.display_name??ae.email??null)}}const{data:xe,error:O}=await be.from("service_request_activity").insert({service_request_id:J,actor_user_id:s.user.id,action:k.action,description:k.description,actor_name:ne}).select("*").single();if(O)throw O;const H=sx(xe);!H.actorName&&H.actorUserId&&ne&&(H.actorName=ne),X(J,H),o(G=>G.map(K=>K.id===J?{...K,...I}:K)),r("Request updated successfully.","success")}catch(R){console.error("Failed to update request",R),r("Failed to update the request. Please try again.","error")}finally{E(null)}},se=(J,I)=>{J.status!==I&&B(J.id,{status:I},{action:"status_change",description:`Status updated to ${no[I]}`})},ee=(J,I)=>{J.priority!==I&&B(J.id,{priority:I},{action:"priority_change",description:`Priority updated to ${dd[I]}`})},te=(J,I)=>{if((J.assignedAdminId??"")===I)return;const k=z.find(F=>F.id===I);B(J.id,{assignedAdminId:I||null},{action:"assignment_change",description:I?`Assigned to ${(k==null?void 0:k.label)??"admin"}`:"Request unassigned"}),o(F=>F.map(R=>R.id===J.id?{...R,assignedAdminId:I||null,assignedAdminName:(k==null?void 0:k.label)??null}:R))},ce=J=>{S(I=>({...I,[J]:!I[J]}))};return a.jsxs("div",{className:"p-4 md:p-6 lg:p-8 animate-fade-in space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"font-playfair text-3xl font-bold text-charcoal",children:"Service Requests"}),a.jsx("p",{className:"text-gray-dark mt-1",children:"Manage member submissions and keep track of the latest updates."})]}),a.jsx("button",{onClick:()=>void T(),className:"inline-flex items-center justify-center px-4 py-2 bg-white border border-gray-border rounded-lg text-sm font-semibold text-charcoal shadow-sm hover:bg-gray-50",disabled:m,children:m?"Refreshing":"Refresh"})]}),b&&a.jsx("div",{className:"rounded-lg border border-error/40 bg-error/10 px-4 py-3 text-sm text-error",children:b}),a.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-border overflow-hidden",children:[a.jsx("div",{className:"overflow-x-auto hidden md:block",children:a.jsxs("table",{className:"min-w-full",children:[a.jsx("thead",{className:"bg-gray-light/50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-4 text-left text-xs font-bold text-gray-dark uppercase",children:"Member"}),a.jsx("th",{className:"p-4 text-left text-xs font-bold text-gray-dark uppercase",children:"Request"}),a.jsx("th",{className:"p-4 text-left text-xs font-bold text-gray-dark uppercase",children:"Status"}),a.jsx("th",{className:"p-4 text-left text-xs font-bold text-gray-dark uppercase",children:"Priority"}),a.jsx("th",{className:"p-4 text-left text-xs font-bold text-gray-dark uppercase",children:"Assigned Admin"}),a.jsx("th",{className:"p-4 text-left text-xs font-bold text-gray-dark uppercase",children:"Created"}),a.jsx("th",{className:"p-4 text-right text-xs font-bold text-gray-dark uppercase",children:"Activity"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-border",children:i.map(J=>a.jsxs("tr",{className:"hover:bg-gray-light/50",children:[a.jsxs("td",{className:"p-4 align-top",children:[a.jsx("p",{className:"font-semibold text-charcoal",children:J.profileName??"Unknown Member"}),a.jsx("p",{className:"text-sm text-gray-dark",children:J.profileEmail??J.profileId})]}),a.jsxs("td",{className:"p-4 align-top",children:[a.jsx("p",{className:"font-semibold text-charcoal",children:J.title}),a.jsx("p",{className:"text-sm text-gray-dark mt-1",children:J.requestType}),a.jsx("p",{className:"text-xs text-gray-dark mt-2 line-clamp-2",children:J.description??"No description provided."})]}),a.jsx("td",{className:"p-4 align-top",children:a.jsx("select",{value:J.status,onChange:I=>se(J,I.target.value),className:"w-full px-2 py-1 border border-gray-border rounded-lg text-sm",disabled:v===J.id,children:y.map(I=>a.jsx("option",{value:I,children:no[I]},I))})}),a.jsx("td",{className:"p-4 align-top",children:a.jsx("select",{value:J.priority,onChange:I=>ee(J,I.target.value),className:"w-full px-2 py-1 border border-gray-border rounded-lg text-sm",disabled:v===J.id,children:C.map(I=>a.jsx("option",{value:I,children:dd[I]},I))})}),a.jsx("td",{className:"p-4 align-top",children:a.jsx("select",{value:J.assignedAdminId??"",onChange:I=>te(J,I.target.value),className:"w-full px-2 py-1 border border-gray-border rounded-lg text-sm",disabled:v===J.id,children:z.map(I=>a.jsx("option",{value:I.id,children:I.label},I.id))})}),a.jsx("td",{className:"p-4 align-top text-sm text-gray-dark",children:ax(J.createdAt)}),a.jsx("td",{className:"p-4 align-top text-right",children:a.jsxs("button",{onClick:()=>ce(J.id),className:"inline-flex items-center gap-2 text-sm font-semibold text-info",children:["View activity",a.jsx(rn,{className:`w-4 h-4 transition-transform ${N[J.id]?"rotate-180":""}`})]})})]},J.id))})]})}),a.jsx("div",{className:"md:hidden divide-y divide-gray-border",children:i.map(J=>a.jsxs("div",{className:"p-4 space-y-3",children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-charcoal",children:J.profileName??"Unknown Member"}),a.jsx("p",{className:"text-sm text-gray-dark",children:J.profileEmail??J.profileId})]}),a.jsx("span",{className:`px-3 py-1 text-xs font-bold rounded-full ${o1[J.status]}`,children:no[J.status]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-charcoal",children:J.title}),a.jsx("p",{className:"text-sm text-gray-dark",children:J.requestType}),a.jsx("p",{className:"text-sm text-gray-dark mt-2 line-clamp-3",children:J.description??"No description provided."})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[a.jsx("select",{value:J.status,onChange:I=>se(J,I.target.value),className:"px-2 py-1 border border-gray-border rounded-lg text-sm",disabled:v===J.id,children:y.map(I=>a.jsx("option",{value:I,children:no[I]},I))}),a.jsx("select",{value:J.priority,onChange:I=>ee(J,I.target.value),className:"px-2 py-1 border border-gray-border rounded-lg text-sm",disabled:v===J.id,children:C.map(I=>a.jsx("option",{value:I,children:dd[I]},I))}),a.jsx("select",{value:J.assignedAdminId??"",onChange:I=>te(J,I.target.value),className:"px-2 py-1 border border-gray-border rounded-lg text-sm",disabled:v===J.id,children:z.map(I=>a.jsx("option",{value:I.id,children:I.label},I.id))})]}),a.jsxs("p",{className:"text-sm text-gray-dark",children:["Created ",ax(J.createdAt)]}),a.jsxs("button",{onClick:()=>ce(J.id),className:"inline-flex items-center gap-2 text-sm font-semibold text-info",children:["View activity",a.jsx(rn,{className:`w-4 h-4 transition-transform ${N[J.id]?"rotate-180":""}`})]})]},J.id))})]}),i.length===0&&!m&&a.jsxs("div",{className:"text-center py-16 bg-white rounded-2xl shadow-lg border border-gray-border",children:[a.jsx(Sa,{className:"w-12 h-12 mx-auto text-gray-300"}),a.jsx("h3",{className:"mt-4 text-xl font-bold text-charcoal",children:"No open requests"}),a.jsx("p",{className:"text-gray-dark mt-1",children:"All caught up! New submissions will appear here automatically."})]}),Object.entries(N).filter(([,J])=>J).map(([J])=>{const I=i.find(F=>F.id===J);if(!I)return null;const k=U(J);return a.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-border p-6 space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("h2",{className:"font-playfair text-2xl font-bold text-charcoal",children:["Activity for ",I.title]}),a.jsx("button",{onClick:()=>ce(J),className:"text-sm font-semibold text-info",children:"Collapse"})]}),k.length===0?a.jsx("p",{className:"text-sm text-gray-dark",children:"No activity has been recorded for this request yet."}):a.jsx("ul",{className:"divide-y divide-gray-border",children:k.map(F=>a.jsx("li",{className:"py-3 text-sm",children:a.jsxs("div",{className:"flex justify-between items-start gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-charcoal",children:F.description??F.action??"Activity recorded"}),(F.actorName||F.actorUserId)&&a.jsxs("p",{className:"text-xs text-gray-dark mt-1",children:["by ",F.actorName??F.actorUserId]})]}),a.jsx("span",{className:"text-xs text-gray-dark",children:n1(F.createdAt)})]})},F.id))})]},J)})]})},nx=r=>{if(!r)return"";const s=new Date(r);return Number.isNaN(s.getTime())?r:new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"numeric"}).format(s)},u1=r=>(r==null?void 0:r.toLowerCase())??"pending",d1=r=>({id:String(r.id),profileId:r.profile_id??"",name:r.document_name??"Document",type:r.doc_type??null,status:u1(r.status),adminNote:r.admin_note??null,uploadedAt:r.uploaded_at??r.created_at??null}),h1=["pending","submitted","under_review"],f1=({showToast:r})=>{const{session:s}=nt(),[i,o]=_.useState([]),[c,u]=_.useState({}),[h,p]=_.useState(!1),[m,g]=_.useState(null),[b,w]=_.useState(null),N=_.useCallback(async()=>{p(!0);try{const{data:y,error:C}=await be.from("member_documents").select("id, profile_id, document_name, doc_type, status, admin_note, uploaded_at, created_at, updated_at").in("status",h1).order("created_at",{ascending:!1});if(C)throw C;const T=(y??[]).map(d1);o(T),u(()=>{const z={};return T.forEach(U=>{U.adminNote&&(z[U.id]=U.adminNote)}),z}),g(null)}catch(y){console.error("Failed to load documents",y),g("Unable to load pending documents. Please try again."),o([])}finally{p(!1)}},[]);_.useEffect(()=>{N()},[N]);const S=(y,C)=>{u(M=>({...M,[y]:C}))},v=async(y,C)=>{var M;if(!((M=s==null?void 0:s.user)!=null&&M.id)){r("You must be logged in as an admin to update documents.","error");return}w(y.id);try{const{error:T}=await be.from("member_documents").update({status:C,admin_note:c[y.id]??null}).eq("id",y.id);if(T)throw T;r(`Document ${C==="approved"?"approved":"rejected"} successfully.`,"success"),o(z=>z.filter(U=>U.id!==y.id))}catch(T){console.error("Failed to update document",T),r("Failed to update the document. Please try again.","error")}finally{w(null)}},E=_.useMemo(()=>i.length,[i]);return a.jsxs("div",{className:"p-4 md:p-6 lg:p-8 animate-fade-in space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"font-playfair text-3xl font-bold text-charcoal",children:"Documents Awaiting Review"}),a.jsx("p",{className:"text-gray-dark mt-1",children:"Approve or reject the latest verification uploads from members."})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("span",{className:"inline-flex items-center gap-2 px-3 py-1 rounded-full bg-info/10 text-info text-sm font-semibold",children:["Pending: ",E]}),a.jsx("button",{onClick:()=>void N(),className:"px-4 py-2 bg-white border border-gray-border rounded-lg text-sm font-semibold text-charcoal shadow-sm hover:bg-gray-50",disabled:h,children:h?"Refreshing":"Refresh"})]})]}),m&&a.jsx("div",{className:"rounded-lg border border-error/40 bg-error/10 px-4 py-3 text-sm text-error",children:m}),a.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-border overflow-hidden",children:[a.jsx("div",{className:"overflow-x-auto hidden md:block",children:a.jsxs("table",{className:"min-w-full",children:[a.jsx("thead",{className:"bg-gray-light/50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-4 text-left text-xs font-bold text-gray-dark uppercase",children:"Member"}),a.jsx("th",{className:"p-4 text-left text-xs font-bold text-gray-dark uppercase",children:"Document"}),a.jsx("th",{className:"p-4 text-left text-xs font-bold text-gray-dark uppercase",children:"Uploaded"}),a.jsx("th",{className:"p-4 text-left text-xs font-bold text-gray-dark uppercase",children:"Notes"}),a.jsx("th",{className:"p-4 text-right text-xs font-bold text-gray-dark uppercase",children:"Actions"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-border",children:i.map(y=>a.jsxs("tr",{className:"align-top",children:[a.jsxs("td",{className:"p-4",children:[a.jsx("p",{className:"font-semibold text-charcoal",children:y.profileId}),a.jsx("p",{className:"text-sm text-gray-dark uppercase tracking-wide",children:y.status})]}),a.jsxs("td",{className:"p-4",children:[a.jsx("p",{className:"font-semibold text-charcoal",children:y.name}),a.jsx("p",{className:"text-sm text-gray-dark",children:y.type??""})]}),a.jsx("td",{className:"p-4 text-sm text-gray-dark",children:nx(y.uploadedAt)}),a.jsx("td",{className:"p-4",children:a.jsx("textarea",{value:c[y.id]??"",onChange:C=>S(y.id,C.target.value),rows:3,className:"w-full border border-gray-border rounded-lg text-sm p-2 focus:outline-none focus:ring-2 focus:ring-info",placeholder:"Add an internal note"})}),a.jsx("td",{className:"p-4",children:a.jsxs("div",{className:"flex items-center justify-end gap-3",children:[a.jsxs("button",{type:"button",onClick:()=>v(y,"approved"),className:"inline-flex items-center gap-2 px-3 py-2 rounded-lg bg-success/90 text-white text-sm font-semibold shadow-sm hover:bg-success",disabled:b===y.id,children:[a.jsx(Gt,{className:"w-4 h-4"})," Approve"]}),a.jsxs("button",{type:"button",onClick:()=>v(y,"rejected"),className:"inline-flex items-center gap-2 px-3 py-2 rounded-lg bg-error/90 text-white text-sm font-semibold shadow-sm hover:bg-error",disabled:b===y.id,children:[a.jsx(wt,{className:"w-4 h-4"})," Reject"]})]})})]},y.id))})]})}),a.jsx("div",{className:"md:hidden divide-y divide-gray-border",children:i.map(y=>a.jsxs("div",{className:"p-4 space-y-3",children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-charcoal",children:y.name}),a.jsx("p",{className:"text-sm text-gray-dark",children:y.type??""})]}),a.jsx("span",{className:"px-3 py-1 text-xs font-bold rounded-full bg-gray-light text-gray-dark uppercase",children:y.status})]}),a.jsxs("p",{className:"text-sm text-gray-dark",children:["Profile: ",y.profileId]}),a.jsxs("p",{className:"text-sm text-gray-dark",children:["Uploaded ",nx(y.uploadedAt)]}),a.jsx("textarea",{value:c[y.id]??"",onChange:C=>S(y.id,C.target.value),rows:3,className:"w-full border border-gray-border rounded-lg text-sm p-2 focus:outline-none focus:ring-2 focus:ring-info",placeholder:"Add an internal note"}),a.jsxs("div",{className:"flex items-center justify-end gap-2",children:[a.jsxs("button",{type:"button",onClick:()=>v(y,"approved"),className:"inline-flex items-center gap-2 px-3 py-2 rounded-lg bg-success/90 text-white text-sm font-semibold shadow-sm hover:bg-success",disabled:b===y.id,children:[a.jsx(Gt,{className:"w-4 h-4"})," Approve"]}),a.jsxs("button",{type:"button",onClick:()=>v(y,"rejected"),className:"inline-flex items-center gap-2 px-3 py-2 rounded-lg bg-error/90 text-white text-sm font-semibold shadow-sm hover:bg-error",disabled:b===y.id,children:[a.jsx(wt,{className:"w-4 h-4"})," Reject"]})]})]},y.id))})]}),i.length===0&&!h&&a.jsxs("div",{className:"text-center py-16 bg-white rounded-2xl shadow-lg border border-gray-border",children:[a.jsx(Sa,{className:"w-12 h-12 mx-auto text-gray-300"}),a.jsx("h3",{className:"mt-4 text-xl font-bold text-charcoal",children:"No pending documents"}),a.jsx("p",{className:"text-gray-dark mt-1",children:"All member uploads have been reviewed."})]})]})},m1=r=>r==null?null:typeof r=="string"?r:new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0}).format(r),rx=r=>{if(!r)return null;const s=new Date(r);return Number.isNaN(s.getTime())?r:new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric"}).format(s)},g1=r=>{var c,u,h,p,m;const s=r.unit_amount_cents?m1(r.unit_amount_cents/100):null,i=((c=r.profiles)==null?void 0:c.full_name)||((u=r.profiles)==null?void 0:u.company_name)||`Member ${((h=r.profile_id)==null?void 0:h.slice(0,8))||"Unknown"}`,o=((p=r.profiles)==null?void 0:p.email)||`member${((m=r.profile_id)==null?void 0:m.slice(0,8))||"unknown"}@example.com`;return{id:String(r.id),memberName:i,memberEmail:o,planTier:r.tier??"Unknown",status:r.status??"unknown",price:s,renewalDate:rx(r.current_period_end??null),createdAt:rx(r.created_at??null)}},p1=({showToast:r})=>{const[s,i]=_.useState([]),[o,c]=_.useState(!1),[u,h]=_.useState(null),p=_.useCallback(async()=>{c(!0);try{const{data:g,error:b}=await be.from("subscriptions").select(`
                  id,
                  profile_id,
                  tier,
                  status,
                  unit_amount_cents,
                  billing_cycle,
                  current_period_end,
                  created_at,
                  profiles!inner(
                    id,
                    email,
                    full_name,
                    company_name,
                    membership_tier
                  )
                `).eq("status","active").order("created_at",{ascending:!1});if(b)throw b;i((g??[]).map(g1)),h(null)}catch(g){console.error("Failed to load subscriptions",g),h("Unable to load active memberships. Please try again."),i([])}finally{c(!1)}},[]);_.useEffect(()=>{p()},[p]);const m=_.useMemo(()=>s.length,[s]);return a.jsxs("div",{className:"p-4 md:p-6 lg:p-8 animate-fade-in space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"font-playfair text-3xl font-bold text-charcoal",children:"Active Memberships"}),a.jsx("p",{className:"text-gray-dark mt-1",children:"A read-only list of members with current, active subscriptions."})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("span",{className:"inline-flex items-center gap-2 px-3 py-1 rounded-full bg-info/10 text-info text-sm font-semibold",children:["Active: ",m]}),a.jsx("button",{onClick:()=>void p(),className:"px-4 py-2 bg-white border border-gray-border rounded-lg text-sm font-semibold text-charcoal shadow-sm hover:bg-gray-50",disabled:o,children:o?"Refreshing":"Refresh"})]})]}),u&&a.jsx("div",{className:"rounded-lg border border-error/40 bg-error/10 px-4 py-3 text-sm text-error",children:u}),a.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-border overflow-hidden",children:[a.jsx("div",{className:"overflow-x-auto hidden md:block",children:a.jsxs("table",{className:"min-w-full",children:[a.jsx("thead",{className:"bg-gray-light/50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-4 text-left text-xs font-bold text-gray-dark uppercase",children:"Member"}),a.jsx("th",{className:"p-4 text-left text-xs font-bold text-gray-dark uppercase",children:"Plan"}),a.jsx("th",{className:"p-4 text-left text-xs font-bold text-gray-dark uppercase",children:"Price"}),a.jsx("th",{className:"p-4 text-left text-xs font-bold text-gray-dark uppercase",children:"Renewal Date"}),a.jsx("th",{className:"p-4 text-left text-xs font-bold text-gray-dark uppercase",children:"Joined"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-border",children:s.map(g=>a.jsxs("tr",{className:"hover:bg-gray-light/50",children:[a.jsxs("td",{className:"p-4",children:[a.jsx("p",{className:"font-semibold text-charcoal",children:g.memberName}),a.jsx("p",{className:"text-sm text-gray-dark",children:g.memberEmail})]}),a.jsxs("td",{className:"p-4",children:[a.jsx("p",{className:"font-semibold text-charcoal",children:g.planTier}),a.jsx("p",{className:"text-sm text-gray-dark",children:g.status})]}),a.jsx("td",{className:"p-4 text-sm text-gray-dark",children:g.price??""}),a.jsx("td",{className:"p-4 text-sm text-gray-dark",children:g.renewalDate??""}),a.jsx("td",{className:"p-4 text-sm text-gray-dark",children:g.createdAt??""})]},g.id))})]})}),a.jsx("div",{className:"md:hidden divide-y divide-gray-border",children:s.map(g=>a.jsxs("div",{className:"p-4 space-y-3",children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-charcoal",children:g.memberName}),a.jsx("p",{className:"text-sm text-gray-dark",children:g.memberEmail})]}),a.jsx("span",{className:"text-sm font-semibold text-gray-dark",children:g.price??""})]}),a.jsxs("p",{className:"text-sm text-gray-dark",children:["Plan: ",g.planTier," (",g.status,")"]}),a.jsxs("p",{className:"text-sm text-gray-dark",children:["Renewal ",g.renewalDate??""]}),a.jsxs("p",{className:"text-sm text-gray-dark",children:["Joined ",g.createdAt??""]})]},g.id))})]}),s.length===0&&!o&&a.jsxs("div",{className:"text-center py-16 bg-white rounded-2xl shadow-lg border border-gray-border",children:[a.jsx(Sa,{className:"w-12 h-12 mx-auto text-gray-300"}),a.jsx("h3",{className:"mt-4 text-xl font-bold text-charcoal",children:"No active memberships"}),a.jsx("p",{className:"text-gray-dark mt-1",children:"Once members activate their subscription it will appear here."})]})]})},tr=({icon:r,label:s,isActive:i,onClick:o})=>a.jsxs("button",{onClick:o,className:`flex items-center w-full px-4 py-3 rounded-lg text-left transition-colors duration-200 relative ${i?"bg-info/10 text-blue-700 font-bold":"text-[var(--text-muted)] hover:bg-[var(--bg-subtle)] hover:text-[var(--text-main)]"}`,children:[i&&a.jsx("div",{className:"absolute left-0 top-0 h-full w-1 bg-info rounded-r-full"}),a.jsx("div",{className:`ml-2 ${i?"text-info":""}`,children:r}),a.jsx("span",{className:"ml-3",children:s})]}),x1=()=>{const{currentUser:r,logout:s}=nt(),[i,o]=_.useState("overview"),[c,u]=_.useState(!1),[h,p]=_.useState(!1),m=_.useRef(null),[g,b]=_.useState(null);_.useEffect(()=>{if(g){const E=setTimeout(()=>b(null),3e3);return()=>clearTimeout(E)}},[g]);const w=(E,y)=>{b({message:E,type:y})};_.useEffect(()=>{const E=y=>{m.current&&!m.current.contains(y.target)&&p(!1)};return document.addEventListener("mousedown",E),()=>document.removeEventListener("mousedown",E)},[]);const N=E=>{o(E),u(!1)},S=()=>{switch(i){case"overview":return a.jsx(ex,{});case"members":return a.jsx(e1,{showToast:w});case"serviceRequests":return a.jsx(c1,{showToast:w});case"documents":return a.jsx(f1,{showToast:w});case"subscriptions":return a.jsx(p1,{showToast:w});case"settings":return a.jsx(s1,{showToast:w});default:return a.jsx(ex,{})}},v=a.jsxs(a.Fragment,{children:[a.jsx(tr,{icon:a.jsx(Cx,{className:"w-6 h-6"}),label:"Overview",isActive:i==="overview",onClick:()=>N("overview")}),a.jsx(tr,{icon:a.jsx(ks,{className:"w-6 h-6"}),label:"Members",isActive:i==="members",onClick:()=>N("members")}),a.jsx(tr,{icon:a.jsx(ko,{className:"w-6 h-6"}),label:"Service Requests",isActive:i==="serviceRequests",onClick:()=>N("serviceRequests")}),a.jsx(tr,{icon:a.jsx(_t,{className:"w-6 h-6"}),label:"Documents",isActive:i==="documents",onClick:()=>N("documents")}),a.jsx(tr,{icon:a.jsx(Rx,{className:"w-6 h-6"}),label:"Subscriptions",isActive:i==="subscriptions",onClick:()=>N("subscriptions")}),a.jsx(tr,{icon:a.jsx(Tx,{className:"w-6 h-6"}),label:"Settings",isActive:i==="settings",onClick:()=>N("settings")})]});return a.jsxs("div",{className:"flex h-screen bg-[var(--bg-main)] text-[var(--text-main)]",children:[g&&a.jsx("div",{className:`fixed top-20 right-8 z-[100] py-3 px-5 rounded-lg shadow-lg text-white animate-slide-in-right ${g.type==="success"?"bg-success":"bg-error"}`,children:g.message}),a.jsx("div",{className:`fixed inset-0 z-40 md:hidden transition-opacity ${c?"bg-black/50":"bg-transparent pointer-events-none"}`,onClick:()=>u(!1)}),a.jsxs("aside",{className:`fixed top-0 left-0 h-full z-50 w-64 bg-[var(--bg-card)] border-r border-[var(--border-subtle)] flex flex-col transition-transform duration-300 md:relative md:translate-x-0 ${c?"translate-x-0":"-translate-x-full"}`,children:[a.jsxs("div",{className:"px-6 py-4 flex items-center border-b border-[var(--border-subtle)] h-16 shrink-0",children:[a.jsx("img",{src:"https://restorationexpertise.com/wp-content/uploads/2025/11/Restorationexpertise_ig_profilepic_2_small.webp",alt:"Logo",className:"w-8 h-8 mr-2"}),a.jsx("h1",{className:"font-playfair text-xl font-bold text-[var(--text-main)]",children:"Admin"})]}),a.jsx("nav",{className:"flex-grow p-4 space-y-2",children:v}),a.jsxs("div",{className:"p-4 border-t border-[var(--border-subtle)] space-y-4",children:[a.jsx(yo,{variant:"row"}),a.jsxs("button",{onClick:()=>void s(),className:"flex items-center w-full px-4 py-3 rounded-lg text-left text-[var(--text-muted)] hover:bg-red-500/10 hover:text-error transition-colors",children:[a.jsx(Ax,{className:"w-6 h-6"}),a.jsx("span",{className:"ml-3 font-semibold",children:"Logout"})]})]})]}),a.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[a.jsxs("header",{className:"sticky top-0 z-30 bg-[var(--bg-card)] shadow-sm h-16 flex items-center justify-between px-4 md:px-6 shrink-0 border-b border-[var(--border-subtle)]",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("button",{onClick:()=>u(!0),className:"text-[var(--text-main)] md:hidden mr-4",children:a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})})}),a.jsxs("div",{className:"hidden md:flex items-center gap-3",children:[a.jsx("h1",{className:"font-playfair text-xl md:text-2xl font-bold text-[var(--text-main)]",children:"Admin Panel"}),a.jsx("span",{className:"bg-info/10 text-blue-700 text-xs font-bold px-2 py-0.5 rounded-md",children:"ADMIN"})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(yo,{variant:"icon"}),a.jsxs("div",{className:"relative",ref:m,children:[a.jsxs("button",{onClick:()=>p(!h),className:"flex items-center space-x-2 p-1 rounded-lg hover:bg-[var(--bg-subtle)]",children:[a.jsx("div",{className:"w-9 h-9 bg-info/10 rounded-full flex items-center justify-center",children:a.jsx(uo,{className:"w-6 h-6 text-blue-600"})}),a.jsxs("div",{className:"hidden sm:block text-left",children:[a.jsx("p",{className:"font-semibold text-sm text-[var(--text-main)]",children:r==null?void 0:r.name}),a.jsx("p",{className:"text-xs text-[var(--text-muted)]",children:r==null?void 0:r.email})]}),a.jsx(rn,{className:"w-4 h-4 text-[var(--text-muted)]"})]}),h&&a.jsxs("div",{className:"absolute right-0 mt-2 w-56 bg-[var(--bg-card)] rounded-lg shadow-xl border border-[var(--border-subtle)] z-50 animate-fade-in",children:[a.jsx("a",{href:"#",className:"block px-4 py-2 text-sm text-[var(--text-main)] hover:bg-[var(--bg-subtle)]",children:"My profile"}),a.jsx("a",{href:"#",className:"block px-4 py-2 text-sm text-[var(--text-main)] hover:bg-[var(--bg-subtle)]",children:"Switch to Member View"}),a.jsx("div",{className:"border-t border-[var(--border-subtle)] my-1"}),a.jsx("button",{onClick:()=>void s(),className:"w-full text-left px-4 py-2 text-sm text-error hover:bg-error/5",children:"Logout"})]})]})]})]}),a.jsx("main",{className:"flex-1 overflow-x-hidden overflow-y-auto",children:S()})]})]})},b1="restorationexpertise:last-plan",ix="restorationexpertise:last-email",v1=()=>{const{login:r,isLoading:s}=nt(),i=Rs(),o=Qa(),[c,u]=_.useState(""),[h,p]=_.useState("form"),[m,g]=_.useState(null);_.useEffect(()=>{if(typeof window>"u")return;const N=window.localStorage.getItem(ix);N&&u(N)},[]),_.useEffect(()=>{const S=new URLSearchParams(o.search).get("checkout");if(S==="success"){const E=((typeof window<"u"?window.localStorage.getItem(b1):null)??"founding-member").toLowerCase().replace(/\s+/g,"-");i(`/success/${E}`,{replace:!0})}else S==="cancelled"&&g("Checkout was cancelled. You can try again when you are ready.")},[o.search,i]);const b=async N=>{if(N.preventDefault(),!c||h!=="form")return;const S=c.trim();g(null),p("confirming");try{typeof window<"u"&&window.localStorage.setItem(ix,S),await r(S),p("confirmed")}catch(v){console.error("Failed to initiate login flow",v);const E=v instanceof Error?v.message:"Something went wrong. Please try again.";g(E),p("form")}},w=!c||h!=="form";return a.jsxs("div",{className:"login-page-container font-inter",children:[a.jsxs("div",{className:"login-animation-bg",children:[a.jsx("div",{className:"aurora-layer layer-1"}),a.jsx("div",{className:"aurora-layer layer-2"}),a.jsx("div",{className:"login-particle-container",children:Array.from({length:15}).map((N,S)=>a.jsx("div",{className:"login-particle"},S))}),a.jsx("div",{className:"light-streak"})]}),a.jsxs("div",{className:"w-full max-w-lg mx-auto relative z-10",children:[a.jsxs("div",{className:"text-center mb-8 animate-fade-in",children:[a.jsx("img",{src:"https://restorationexpertise.com/wp-content/uploads/2025/11/restorationexpertisecom2_logo3D.webp",alt:"Restoration Expertise Logo",className:"w-40 h-40 md:w-52 md:h-52 mx-auto mb-4 animate-float-logo"}),a.jsx("h1",{className:"font-playfair text-xl md:text-2xl font-bold text-white",children:"Restoration Expertise"}),a.jsx("p",{className:"text-lg text-gray-300 mt-2",children:"The Restoration Network Homeowners Trust."})]}),a.jsxs("div",{className:"login-glass-card p-8 rounded-2xl transition-all duration-500",children:[h==="form"&&a.jsxs("div",{className:"animate-fade-in space-y-6",children:[a.jsxs("form",{onSubmit:b,className:"space-y-6",children:[a.jsxs("div",{className:"text-center mb-6",children:[a.jsx("p",{className:"text-gray-300",children:"Enter your email to receive a secure magic link."}),a.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Members only. Use the email you joined with."})]}),s&&a.jsx("p",{className:"rounded-lg border border-white/10 bg-black/20 p-3 text-sm text-gray-300",children:"Connecting to Supabase"}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"email",className:"sr-only",children:"Email address"}),a.jsx("input",{id:"email",type:"email",value:c,onChange:N=>u(N.target.value),placeholder:"your@email.com",required:!0,className:"mt-1 block w-full px-4 py-3 border border-white/20 rounded-lg shadow-sm focus:ring-2 focus:ring-[var(--accent)] focus:border-[var(--accent)] bg-white/10 text-white placeholder:text-gray-400"})]}),a.jsx("button",{type:"submit",disabled:w,className:"magic-link-button w-full py-3 px-4 bg-[var(--accent)] text-[var(--accent-text)] font-bold text-lg rounded-lg shadow-lg hover:bg-[var(--accent-dark)] transition-all transform hover:scale-105 focus:outline-none focus:ring-4 focus:ring-[var(--accent)]/50 disabled:opacity-50",children:"Send Magic Link"})]}),m&&a.jsx("p",{className:"rounded-lg border border-error/40 bg-error/10 p-3 text-sm text-error",children:m}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-0 flex items-center","aria-hidden":"true",children:a.jsx("div",{className:"w-full border-t border-white/20"})}),a.jsx("div",{className:"relative flex justify-center",children:a.jsx("span",{className:"bg-[rgba(28,28,28,0.2)] px-2 text-sm text-gray-400",children:"Or"})})]}),a.jsx("button",{type:"button",onClick:()=>i("/assessment"),className:"w-full py-3 px-4 bg-white/10 text-white font-bold rounded-lg shadow-md border border-white/20 hover:bg-white/20 transition-all transform hover:scale-105",children:"Take Free Credibility Assessment"})]}),h==="confirming"&&a.jsxs("div",{className:"text-center animate-fade-in space-y-4",children:[a.jsx("div",{className:"mx-auto mb-4 h-16 w-16 animate-spin rounded-full border-4 border-[var(--accent)] border-t-transparent"}),a.jsx("h2",{className:"font-playfair text-3xl font-bold text-white",children:"Sending magic link"}),a.jsxs("p",{className:"text-gray-300",children:["We're sending a secure link to ",c,". Follow the instructions in your inbox to continue."]})]}),h==="confirmed"&&a.jsxs("div",{className:"text-center animate-fade-in space-y-4",children:[a.jsx(Gt,{className:"mx-auto h-16 w-16 text-success"}),a.jsx("h2",{className:"font-playfair text-3xl font-bold text-white",children:"Magic link sent!"}),a.jsx("p",{className:"text-gray-300",children:"Check your inbox for your secure login link."}),a.jsx("div",{className:"h-2.5 w-full rounded-full bg-white/10",children:a.jsx("div",{className:"h-2.5 animate-pulse rounded-full bg-[var(--accent)]"})})]})]})]}),a.jsxs("footer",{className:"absolute bottom-4 text-center text-gray-400 z-10",children:[a.jsxs("p",{children:[" ",new Date().getFullYear()," RestorationExpertise. All Rights Reserved."]}),a.jsx("button",{onClick:()=>i("/admin/login"),className:"mt-2 text-xs text-gray-500 hover:text-gray-300 transition-colors underline",children:"Admin Login"})]})]})},y1=()=>{const[r,s]=_.useState(""),[i,o]=_.useState(""),[c,u]=_.useState(""),[h,p]=_.useState(!1),{adminLogin:m}=nt(),g=Rs(),b=async N=>{N.preventDefault(),p(!0),u("");try{const S=await m(r,i);S.success?g("/admin"):u(S.error||"Login failed. Please try again.")}catch(S){console.error("Login error:",S),u("An unexpected error occurred. Please try again.")}finally{p(!1)}},w=()=>{g("/login")};return a.jsxs("div",{className:"login-page-container",children:[a.jsxs("div",{className:"login-animation-bg",children:[a.jsx("div",{className:"aurora-layer layer-1"}),a.jsx("div",{className:"aurora-layer layer-2"}),a.jsx("div",{className:"login-particle-container",children:Array.from({length:15}).map((N,S)=>a.jsx("div",{className:"login-particle"},S))}),a.jsx("div",{className:"light-streak"})]}),a.jsxs("div",{className:"login-glass-card rounded-3xl p-8 w-full max-w-md relative z-10",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("img",{src:"https://restorationexpertise.com/wp-content/uploads/2025/11/Restorationexpertise_ig_profilepic_2_small.webp",alt:"RestorationExpertise Logo",className:"w-16 h-16 mx-auto mb-4 rounded-full"}),a.jsx("h1",{className:"text-3xl font-bold font-playfair text-white mb-2",children:"Admin Login"}),a.jsx("p",{className:"text-gray-300",children:"Enter your credentials to access the admin dashboard"})]}),a.jsxs("form",{onSubmit:b,className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-200 mb-2",children:"Email Address"}),a.jsx("input",{id:"email",type:"email",value:r,onChange:N=>s(N.target.value),required:!0,className:`w-full px-4 py-3 rounded-xl border bg-white/10 backdrop-blur-sm text-white placeholder-gray-400 focus:outline-none focus:ring-2 transition-all ${c?"border-red-400 focus:ring-red-400":"border-white/20 focus:ring-gold focus:border-gold"}`,placeholder:"admin@company.com",disabled:h})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-200 mb-2",children:"Password"}),a.jsx("input",{id:"password",type:"password",value:i,onChange:N=>o(N.target.value),required:!0,className:`w-full px-4 py-3 rounded-xl border bg-white/10 backdrop-blur-sm text-white placeholder-gray-400 focus:outline-none focus:ring-2 transition-all ${c?"border-red-400 focus:ring-red-400":"border-white/20 focus:ring-gold focus:border-gold"}`,placeholder:"",disabled:h})]}),c&&a.jsx("div",{className:"text-red-400 text-sm text-center bg-red-400/10 backdrop-blur-sm rounded-lg p-3 border border-red-400/20",children:c}),a.jsx("button",{type:"submit",disabled:h,className:`w-full py-3 px-4 rounded-xl font-semibold text-charcoal transition-all transform ${h?"bg-gray-400 cursor-not-allowed":"bg-gold hover:bg-gold-light hover:scale-105 active:scale-95"} shadow-lg`,children:h?"Signing In...":"Sign In"})]}),a.jsx("div",{className:"mt-6 text-center",children:a.jsx("button",{onClick:w,className:"text-gray-300 hover:text-white text-sm transition-colors",children:" Back to Member Login"})})]})]})},Ga=["Business Basics","Operational & Professional Standards","Licensing & Compliance","Customer Feedback & Online Authority","Industry Certifications & Training","Digital & Brand Maturity"],w1=["Alabama","Alaska","Arizona","Arkansas","California","Colorado","Connecticut","Delaware","Florida","Georgia","Hawaii","Idaho","Illinois","Indiana","Iowa","Kansas","Kentucky","Louisiana","Maine","Maryland","Massachusetts","Michigan","Minnesota","Mississippi","Missouri","Montana","Nebraska","Nevada","New Hampshire","New Jersey","New Mexico","New York","North Carolina","North Dakota","Ohio","Oklahoma","Oregon","Pennsylvania","Rhode Island","South Carolina","South Dakota","Tennessee","Texas","Utah","Vermont","Virginia","Washington","West Virginia","Wisconsin","Wyoming"],j1={businessName:"",city:"",yearsInBusiness:1,employees:1,services:{water:!1,fire:!1,mold:!1,storm:!1},businessDescription:"",hasLicense:!1,hasLiabilityInsurance:!1,hasWorkersComp:!1,yearsLicensed:0,googleRating:0,googleReviews:0,otherPlatforms:{yelp:!1,bbb:!1,facebook:!1},certifications:{water:!1,fire:!1,mold:!1,other:!1},hasWebsite:!1,activeSocialMedia:!1,brandedVehicles:!1,emergencyLine:!1,hasProEmail:!1},oo=12,Ws=r=>`/.netlify/functions/${r}`,No={CHECKOUT:Ws("create-checkout-session"),STRIPE_WEBHOOK:Ws("stripe-webhook"),EMAIL_ELIGIBILITY:Ws("check-email-eligibility"),CHECKOUT_HEALTH:Ws("checkout-health"),STRIPE_SESSION:Ws("get-stripe-session"),SAVE_ASSESSMENT:Ws("save-assessment"),SUCCESS_SUMMARY:Ws("get-success-summary")},fi={operational:20,licensing:10,feedback:30,certifications:20,digital:17};function N1(r){return r>=90?"A+":r>=80?"A":r>=65?"B+":"Needs Work"}function _1(r,s){const i=[];return r.hasLicense||i.push("No active contractor license on file."),r.hasLiabilityInsurance||i.push("No general liability insurance listed."),s.operational<10&&i.push("Operational standards are below our minimum."),s.licensing<4&&i.push("Too few years licensed for certification."),s.feedback<5&&i.push("Customer feedback and reviews are too low."),s.digital<5&&i.push("Digital & brand presence needs improvement."),s.total<70&&i.push("Overall score is below the minimum threshold."),{isEligible:i.length===0,eligibilityReasons:i}}const S1=r=>{const i=[{id:"hasLicense",label:"Get an active contractor license",description:"This is a fundamental requirement for certification and a major trust signal for homeowners.",category:"Operational",impact:"High",type:"Deep work",condition:u=>!u.hasLicense},{id:"hasLiabilityInsurance",label:"Secure general liability insurance",description:"Liability insurance is a non-negotiable for professional contractors and essential for certification.",category:"Operational",impact:"High",type:"Deep work",condition:u=>!u.hasLiabilityInsurance},{id:"yearsLicensed",label:"Increase years of licensed experience",description:"More years of licensed operation build significant credibility. While this takes time, it's a key factor for top-tier status.",category:"Licensing",impact:"High",type:"Deep work",condition:u=>u.yearsLicensed<3},{id:"googleReviewsLow",label:"Boost your Google review count",description:"Reviews are a powerful form of social proof. Aim for at least 20+ high-quality reviews to build authority.",category:"Feedback",impact:"High",type:"Deep work",condition:u=>u.googleReviews<5},{id:"hasWebsite",label:"Create a professional website",description:"A website is your digital storefront. It's a critical asset for establishing credibility and attracting leads.",category:"Digital",impact:"High",type:"Deep work",condition:u=>!u.hasWebsite},{id:"hasWorkersComp",label:"Add workers' comp insurance",description:"This is a core credibility and compliance signal, especially for businesses with employees. Many adjusters and commercial clients expect it.",category:"Operational",impact:"Medium",type:"Deep work",condition:u=>!u.hasWorkersComp},{id:"googleReviewsMedium",label:"Gather more Google reviews",description:"You have a good start, but pushing from 5-10 reviews to 20-40 can significantly increase your local authority and lead flow.",category:"Feedback",impact:"Medium",type:"Quick win",condition:u=>u.googleReviews>=5&&u.googleReviews<20},{id:"googleRating",label:"Improve your Google rating",description:"A rating below 4.5 stars can deter potential customers. Focus on delivering excellent service and encouraging happy clients to leave reviews.",category:"Feedback",impact:"Medium",type:"Deep work",condition:u=>u.googleRating>0&&u.googleRating<4.5},{id:"hasProEmail",label:"Set up a professional email address",description:"Using an email like 'info@yourcompany.com' instead of a generic Gmail or Yahoo address is a quick way to look more professional.",category:"Digital",impact:"Medium",type:"Quick win",condition:u=>!u.hasProEmail},{id:"certifications",label:"Earn more IICRC certifications",description:"Certifications demonstrate a commitment to industry standards and expertise, justifying higher prices and building trust.",category:"Certifications",impact:"Medium",type:"Deep work",condition:u=>(u.certifications.water?1:0)+(u.certifications.fire?1:0)+(u.certifications.mold?1:0)+(u.certifications.other?1:0)<2},{id:"emergencyLine",label:"Establish a 24/7 emergency line",description:"For restoration, being available 24/7 is critical. Clearly advertising this on your site can significantly increase emergency calls.",category:"Digital",impact:"Medium",type:"Quick win",condition:u=>!u.emergencyLine}].filter(u=>u.condition(r)),o={High:1,Medium:2},c={"Quick win":1,"Deep work":2};return i.sort((u,h)=>o[u.impact]!==o[h.impact]?o[u.impact]-o[h.impact]:c[u.type]-c[h.type]),i.slice(0,3).map(({condition:u,...h})=>h)},E1=r=>{const s={operational:0,licensing:0,feedback:0,certifications:0,digital:0};r.hasLicense&&(s.operational+=10),r.hasLiabilityInsurance&&(s.operational+=5),r.hasWorkersComp&&(s.operational+=5),s.operational=Math.min(fi.operational,s.operational);const i=Math.max(0,Math.min(r.yearsLicensed,fi.licensing));if(i===0?s.licensing=0:i<=2?s.licensing=4:i<=5?s.licensing=7:s.licensing=10,r.googleRating<=0&&r.googleReviews<=0)s.feedback=0;else{const N=5+(Math.max(4,r.googleRating)-4)*10;let S=0;r.googleReviews>=40?S=15:r.googleReviews>=20?S=10:r.googleReviews>=5?S=6:r.googleReviews>0&&(S=4),s.feedback=Math.min(fi.feedback,N+S)}let o=0;r.certifications.water&&o++,r.certifications.fire&&o++,r.certifications.mold&&o++,r.certifications.other&&o++,s.certifications=o*5,s.certifications=Math.min(fi.certifications,s.certifications),r.hasWebsite&&(s.digital+=7),r.hasProEmail&&(s.digital+=5),r.emergencyLine&&(s.digital+=3),r.activeSocialMedia&&(s.digital+=1),r.brandedVehicles&&(s.digital+=1),s.digital=Math.min(fi.digital,s.digital);const c=s.operational+s.licensing+s.feedback+s.certifications+s.digital,u=Math.min(100,Math.max(0,Math.round(c))),h=N1(u),p={...s,total:u},{isEligible:m,eligibilityReasons:g}=_1(r,p),b=S1(r);return{operational:s.operational,licensing:s.licensing,feedback:s.feedback,certifications:s.certifications,digital:s.digital,total:u,grade:h,isEligibleForCertification:m,eligibilityReasons:g,opportunities:b}},Rb=({score:r,breakdown:s,isPopup:i})=>{const[o,c]=_.useState(r),u=_.useRef(r);xi.useEffect(()=>{const m=u.current;if(m===r)return;let g;const b=500,w=performance.now(),N=S=>{const v=S-w,E=Math.min(v/b,1),y=1-Math.pow(1-E,3),C=Math.round(m+(r-m)*y);c(C),E<1&&(g=requestAnimationFrame(N))};return g=requestAnimationFrame(N),()=>{cancelAnimationFrame(g)}},[r]),xi.useEffect(()=>{u.current=r},[r]);const h=m=>m<45?"bg-error":m<60?"bg-warning":m<75?"bg-brand-accent":"bg-success",p=[{label:"Operational",value:s.operational,max:20},{label:"Licensing",value:s.licensing,max:10},{label:"Feedback",value:s.feedback,max:30},{label:"Certifications",value:s.certifications,max:20},{label:"Digital",value:s.digital,max:17}];return a.jsxs("div",{className:`p-4 bg-white rounded-xl shadow-lg border border-gray-border ${i?"":"sticky top-0 md:top-8 md:w-64 md:ml-8 lg:ml-16 z-10"}`,children:[a.jsx("h3",{className:"font-sora text-charcoal text-lg font-bold text-center mb-2",children:"Your Score"}),a.jsxs("div",{className:"flex justify-center items-baseline gap-1 mb-4",children:[a.jsx("span",{className:"font-sora text-6xl font-bold text-charcoal",children:o}),a.jsx("span",{className:"font-sora text-2xl font-semibold text-gray-400",children:"/100"})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-4",children:a.jsx("div",{className:`h-4 rounded-full transition-all duration-500 ${h(r)}`,style:{width:`${r}%`}})}),a.jsx("p",{className:"text-center text-sm text-gray mt-2",children:i?"Based on your current inputs.":"Updating in real-time..."}),i&&a.jsxs("div",{className:"mt-6 pt-4 border-t border-gray-border space-y-2",children:[a.jsx("h4",{className:"font-bold text-center mb-2",children:"Breakdown"}),p.map(m=>a.jsxs("div",{className:"text-sm",children:[a.jsxs("div",{className:"flex justify-between font-medium",children:[a.jsx("span",{children:m.label}),a.jsxs("span",{children:[m.value," / ",m.max]})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1.5 mt-1",children:a.jsx("div",{className:"bg-brand-accent h-1.5 rounded-full",style:{width:`${m.value/m.max*100}%`}})})]},m.label))]})]})},sa=({label:r,points:s,checked:i,onChange:o,description:c,feedbackMessage:u})=>{const[h,p]=_.useState(!1),m=g=>{g&&(p(!0),setTimeout(()=>p(!1),700)),o(g)};return a.jsxs("div",{children:[a.jsxs("label",{className:"flex flex-col sm:flex-row sm:items-center justify-between w-full p-5 border border-gray-border rounded-xl cursor-pointer hover:border-brand-accent-dark transition-colors duration-200 min-h-36 gap-3 sm:gap-0",children:[a.jsxs("div",{className:"flex-1 mr-0 sm:mr-4",children:[a.jsx("span",{className:"font-semibold text-charcoal text-base md:text-lg leading-tight",children:r}),c&&a.jsx("p",{className:"text-sm text-gray-500 mt-1",children:c})]}),a.jsxs("div",{className:"flex items-center justify-between sm:justify-start w-full sm:w-auto space-x-4 flex-shrink-0 relative",children:[a.jsxs("span",{className:"font-sora font-bold text-brand-accent text-lg",children:["+",s," pts"]}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"checkbox",checked:i,onChange:g=>m(g.target.checked),className:"sr-only"}),a.jsx("div",{className:`w-12 h-6 rounded-full transition-colors duration-200 ${i?"bg-brand-accent":"bg-gray-200"}`,children:a.jsx("div",{className:`w-5 h-5 bg-white rounded-full shadow-md transform transition-transform duration-200 ${i?"translate-x-6":"translate-x-1"}`,style:{top:"2px",position:"relative"}})})]}),h&&a.jsxs("div",{className:"absolute -top-8 -right-2 font-bold text-xl text-brand-accent animate-point-flash pointer-events-none",children:["+",s," "]})]})]}),i&&u&&a.jsxs("div",{className:"pl-4 mt-2 text-sm text-green-700 flex items-center gap-2 animate-fade-in",children:[a.jsx(Gt,{className:"w-5 h-5"}),a.jsx("span",{children:u})]})]})},k1=({score:r})=>{const[s,i]=_.useState(r),o=_.useRef(r);xi.useEffect(()=>{const u=o.current;if(u===r)return;let h;const p=400,m=performance.now(),g=b=>{const w=b-m,N=Math.min(w/p,1),S=1-Math.pow(1-N,3),v=Math.round(u+(r-u)*S);i(v),N<1&&(h=requestAnimationFrame(g))};return h=requestAnimationFrame(g),()=>{cancelAnimationFrame(h)}},[r]),xi.useEffect(()=>{o.current=r},[r]);const c=u=>u<45?"bg-error":u<60?"bg-warning":u<75?"bg-brand-accent":"bg-success";return a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("div",{className:"flex items-baseline w-14 justify-end",children:[a.jsx("span",{className:"font-sora font-bold text-sm text-charcoal",children:s}),a.jsx("span",{className:"font-sora text-xs text-gray-500",children:"/100"})]}),a.jsx("div",{className:"w-20 bg-gray-200 rounded-full h-2 relative",children:a.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${c(r)}`,style:{width:`${r}%`}})})]})},C1=({step:r,score:s,onScoreClick:i,onBack:o,onNext:c,canProceed:u})=>{const h=(r+1)/Ga.length*100;return a.jsxs("div",{className:"fixed bottom-0 left-0 right-0 bg-white/80 backdrop-blur-sm border-t border-gray-border z-20 md:hidden",children:[a.jsxs("div",{onClick:i,className:"px-4 pt-2 pb-1.5 cursor-pointer",children:[a.jsxs("div",{className:"flex justify-between items-center text-xs mb-1",children:[a.jsxs("span",{className:"font-bold text-gray-dark",children:["Step ",r+1," of ",Ga.length]}),a.jsx(k1,{score:s})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:"bg-brand-accent h-2 rounded-full transition-all duration-300",style:{width:`${h}%`}})}),a.jsx("p",{className:"text-center text-xs font-bold text-gray-dark mt-1.5",children:Ga[r]})]}),a.jsxs("div",{className:"p-4 flex justify-between items-center gap-4 bg-white/50",children:[a.jsx("button",{onClick:o,className:"py-3 px-6 bg-white text-charcoal font-semibold rounded-lg shadow-md border border-gray-border hover:bg-gray-100",children:"Back"}),a.jsx("button",{onClick:c,disabled:!u,className:`flex-grow py-3 px-8 font-bold text-lg rounded-lg shadow-lg ${u?"bg-brand-accent text-charcoal hover:bg-brand-accent-dark":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:r===Ga.length-1?"Finish":"Continue"})]})]})},A1=({isOpen:r,onClose:s,score:i,breakdown:o})=>r?a.jsxs("div",{className:"fixed inset-0 z-40",onClick:s,children:[a.jsx("div",{className:"absolute inset-0 bg-black/50 animate-fade-in"}),a.jsx("div",{className:"absolute bottom-0 left-0 right-0 animate-slide-up-drawer p-4",onClick:c=>c.stopPropagation(),children:a.jsx(Rb,{score:i,breakdown:o,isPopup:!0})})]}):null,T1=({onComplete:r})=>{const s=Rs(),[i,o]=_.useState(0),[c,u]=_.useState(j1),[h,p]=_.useState({full_name_entered:"",email_entered:"",state:"",city:""}),[m,g]=_.useState(!1),[b,w]=_.useState("animate-fade-in"),[N,S]=_.useState(0),[v,E]=_.useState({checking:!1,eligible:null,reason:null,message:null,showingMagicLinkForm:!1,magicLinkSent:!1,magicLinkError:null}),y=async I=>{if(B(I)){E(k=>({...k,checking:!0,eligible:null,reason:null,message:null}));try{const k=await fetch(No.EMAIL_ELIGIBILITY,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:I.trim().toLowerCase()})}),F=await k.json();k.ok?(E(R=>({...R,checking:!1,eligible:F.eligible,reason:F.reason||null,message:F.message||null})),!F.eligible&&F.reason==="member"&&E(R=>({...R,showingMagicLinkForm:!0}))):(console.error("Email eligibility check failed:",F),E(R=>({...R,checking:!1,eligible:!0,reason:null,message:null})))}catch(k){console.error("Error checking email eligibility:",k),E(F=>({...F,checking:!1,eligible:!0,reason:null,message:null}))}}},C=async()=>{const I=h.email_entered.trim().toLowerCase();E(k=>({...k,magicLinkError:null}));try{const k=await fetch("/api/auth/magic-link",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:I,redirectTo:`${window.location.origin}/dashboard`})}),F=await k.json();k.ok?E(R=>({...R,magicLinkSent:!0})):E(R=>({...R,magicLinkError:F.error||"Failed to send magic link"}))}catch{E(F=>({...F,magicLinkError:"Network error. Please try again."}))}},M=_.useMemo(()=>E1(c),[c]),T=()=>{if(se())if(i<Ga.length-1)w("animate-slide-out-left"),setTimeout(()=>{o(I=>I+1),S(I=>I+1),w("animate-slide-in-from-right")},300);else{const I={...M,answers:c,emailEntered:h.email_entered,fullNameEntered:h.full_name_entered,state:h.state,cityEntered:h.city};te(I),r(I)}},z=()=>{i>0?(w("animate-slide-out-right"),setTimeout(()=>{o(I=>I-1),S(I=>I+1),w("animate-slide-in-from-left")},300)):s("/")},U=(I,k)=>{u(F=>({...F,[I]:k}))},X=(I,k)=>{p(F=>({...F,[I]:k}))},B=I=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(I),se=()=>{if(i===0){const I=h.full_name_entered.trim()!==""&&h.email_entered.trim()!==""&&B(h.email_entered.trim())&&h.state!==""&&h.city.trim()!=="",k=v.eligible!==!1;return I&&k&&!v.checking}return!0},ee=I=>{if(typeof I=="number")return isNaN(I)?0:Math.round(I);if(typeof I=="string"){const k=parseFloat(I);return isNaN(k)?0:Math.round(k)}return 0},te=async I=>{try{const k={assessmentInputs:{full_name_entered:h.full_name_entered.trim(),email_entered:h.email_entered.trim().toLowerCase(),state:h.state,city:h.city.trim()},answers:I.answers,scores:{operational:ee(I.operational),licensing:ee(I.licensing),feedback:ee(I.feedback),certifications:ee(I.certifications),digital:ee(I.digital),total:ee(I.total),grade:I.grade,isEligibleForCertification:I.isEligibleForCertification,eligibilityReasons:I.eligibilityReasons||[],opportunities:I.opportunities||[]},planSlug:"founding-member"};console.log("[AssessmentTool] Saving assessment via server function:",{email:k.assessmentInputs.email_entered,scores:k.scores});const F=await fetch(No.SAVE_ASSESSMENT,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(k)}),R=await F.json();return F.ok?(console.log("[AssessmentTool] Assessment saved successfully:",R),R):(console.error("Assessment save failed:",R),console.log("Assessment save failed due to server error. Continuing without persistence."),null)}catch(k){return console.error("Failed to save assessment:",k),console.log("Assessment save failed. Continuing without persistence."),null}},ce=(I,k,F)=>{u(R=>({...R,[I]:{...R[I],[k]:F}}))},J=()=>{const I="Nice  this is one of the core signals top-tier restoration firms have in place.";switch(i){case 0:return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray",children:["Full Name ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",value:h.full_name_entered,onChange:k=>X("full_name_entered",k.target.value),className:"mt-1 block w-full p-3 border border-gray-border rounded-lg shadow-sm focus:ring-brand-accent focus:border-brand-accent bg-[var(--bg-input)] text-[var(--text-main)]",placeholder:"Enter your full name",required:!0})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray",children:["Business Email ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"email",value:h.email_entered,onChange:k=>{const F=k.target.value;X("email_entered",F),E(R=>({...R,eligible:null,reason:null,message:null,showingMagicLinkForm:!1,magicLinkSent:!1,magicLinkError:null}))},onBlur:()=>{h.email_entered.trim()&&y(h.email_entered.trim())},className:`mt-1 block w-full p-3 border rounded-lg shadow-sm focus:ring-brand-accent focus:border-brand-accent bg-[var(--bg-input)] text-[var(--text-main)] ${h.email_entered&&!B(h.email_entered)||v.eligible===!1?"border-red-500":v.eligible===!0?"border-green-500":"border-gray-border"}`,placeholder:"Enter your business email",required:!0}),h.email_entered&&!B(h.email_entered)&&a.jsx("p",{className:"mt-1 text-sm text-red-500",children:"Please enter a valid email address"}),v.checking&&a.jsxs("div",{className:"mt-2 flex items-center text-sm text-gray-600",children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-brand-accent mr-2"}),"Checking email eligibility..."]}),v.eligible===!1&&v.reason==="member"&&a.jsxs("div",{className:"mt-2 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[a.jsx("p",{className:"text-sm text-blue-800 font-medium mb-2",children:v.message||"This email is already a member."}),v.showingMagicLinkForm?v.magicLinkSent?a.jsx("div",{className:"text-sm text-green-700",children:" Magic link sent! Check your inbox and click the link to access your Member Hub."}):a.jsxs("div",{className:"space-y-2",children:[a.jsx("p",{className:"text-sm text-blue-700",children:"We'll send you a magic link to access your Member Hub."}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{type:"button",onClick:C,className:"text-sm bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Send Magic Link"}),a.jsx("button",{type:"button",onClick:()=>E(k=>({...k,showingMagicLinkForm:!1})),className:"text-sm bg-gray-200 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-300 transition-colors",children:"Cancel"})]}),v.magicLinkError&&a.jsx("p",{className:"text-sm text-red-600",children:v.magicLinkError})]}):a.jsx("button",{type:"button",onClick:()=>E(k=>({...k,showingMagicLinkForm:!0})),className:"text-sm bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Send Magic Link to Access Your Account"})]}),v.eligible===!1&&v.reason==="recent-assessment"&&a.jsx("div",{className:"mt-2 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:a.jsx("p",{className:"text-sm text-yellow-800",children:v.message||"You've recently completed an assessment. Please check your inbox or contact support."})}),v.eligible===!0&&a.jsxs("div",{className:"mt-2 flex items-center text-sm text-green-600",children:[a.jsx(Gt,{className:"w-4 h-4 mr-2"}),"Email is eligible for assessment"]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray",children:["State ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("select",{value:h.state,onChange:k=>X("state",k.target.value),className:"mt-1 block w-full p-3 border border-gray-border rounded-lg shadow-sm focus:ring-brand-accent focus:border-brand-accent bg-[var(--bg-input)] text-[var(--text-main)]",required:!0,children:[a.jsx("option",{value:"",children:"Select State"}),w1.map(k=>a.jsx("option",{value:k,children:k},k))]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray",children:["City ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",value:h.city,onChange:k=>X("city",k.target.value),className:"mt-1 block w-full p-3 border border-gray-border rounded-lg shadow-sm focus:ring-brand-accent focus:border-brand-accent bg-[var(--bg-input)] text-[var(--text-main)]",placeholder:"Enter your city",required:!0})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray",children:"Business Name"}),a.jsx("input",{type:"text",value:c.businessName,onChange:k=>U("businessName",k.target.value),className:"mt-1 block w-full p-3 border border-gray-border rounded-lg shadow-sm focus:ring-brand-accent focus:border-brand-accent bg-[var(--bg-input)] text-[var(--text-main)]"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray",children:"What city do you primarily serve?"}),a.jsx("input",{type:"text",value:c.city,onChange:k=>U("city",k.target.value),className:"mt-1 block w-full p-3 border border-gray-border rounded-lg shadow-sm focus:ring-brand-accent focus:border-brand-accent bg-[var(--bg-input)] text-[var(--text-main)]"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray",children:"How long have you been in business?"}),a.jsx("select",{value:c.yearsInBusiness,onChange:k=>U("yearsInBusiness",parseInt(k.target.value)),className:"mt-1 block w-full p-3 border border-gray-border rounded-lg shadow-sm focus:ring-brand-accent focus:border-brand-accent bg-[var(--bg-input)] text-[var(--text-main)]",children:[1,2,3,4,5,10,15,20].map(k=>a.jsxs("option",{value:k,children:[k,k===20?"+":""," years"]},k))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray",children:"Briefly describe your business (optional)"}),a.jsx("textarea",{value:c.businessDescription,onChange:k=>U("businessDescription",k.target.value),rows:3,className:"mt-1 block w-full p-3 border border-gray-border rounded-lg shadow-sm focus:ring-brand-accent focus:border-brand-accent bg-[var(--bg-input)] text-[var(--text-main)]",placeholder:"E.g., We are a family-owned restoration company specializing in 24/7 water and fire damage cleanup..."})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray",children:"What services do you offer?"}),a.jsx("div",{className:"mt-2 grid grid-cols-2 gap-4",children:Object.keys(c.services).map(k=>a.jsxs("label",{className:"flex items-center space-x-2 p-2 rounded-md hover:bg-gray-50",children:[a.jsx("input",{type:"checkbox",checked:c.services[k],onChange:F=>ce("services",k,F.target.checked),className:"h-5 w-5 rounded border-gray-300 text-brand-accent focus:ring-brand-accent"}),a.jsx("span",{className:"capitalize",children:k})]},k))})]})]});case 1:return a.jsxs("div",{className:"space-y-4",children:[a.jsx(sa,{label:"Active contractor license?",points:10,checked:c.hasLicense,onChange:k=>U("hasLicense",k),description:"Adjusters, carriers, and commercial clients often require this before sending work.",feedbackMessage:I}),a.jsx(sa,{label:"General liability insurance $1M+?",points:5,checked:c.hasLiabilityInsurance,onChange:k=>U("hasLiabilityInsurance",k),description:"Protects you and your clients if something goes wrong on a job.",feedbackMessage:I}),a.jsx(sa,{label:"Workers' comp insurance?",points:5,checked:c.hasWorkersComp,onChange:k=>U("hasWorkersComp",k),description:"Shows youre taking care of your team and operating legitimately."})]});case 2:return a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray mb-2",children:"How many years have you been licensed?"}),a.jsx("input",{type:"range",min:"0",max:"20",value:c.yearsLicensed,onChange:k=>U("yearsLicensed",parseInt(k.target.value)),className:"w-full custom-slider",style:{"--value-percent":`${c.yearsLicensed/20*100}%`}}),a.jsxs("div",{className:"text-center font-sora font-bold text-2xl text-charcoal mt-2",children:[c.yearsLicensed," years"]}),a.jsx("p",{className:"text-center text-sm text-gray mt-2",children:"12 years = 4 pts  35 years = 7 pts  6+ years = 10 pts"})]});case 3:return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray",children:"What's your Google Business Profile rating?"}),a.jsxs("select",{value:c.googleRating,onChange:k=>U("googleRating",parseFloat(k.target.value)),className:"mt-1 block w-full p-3 border border-gray-border rounded-lg shadow-sm focus:ring-brand-accent focus:border-brand-accent bg-[var(--bg-input)] text-[var(--text-main)]",children:[a.jsx("option",{value:0,children:"No rating yet"}),Array.from({length:11},(k,F)=>4+F*.1).map(k=>a.jsxs("option",{value:k.toFixed(1),children:[k.toFixed(1)," stars"]},k))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray",children:"How many Google reviews do you have?"}),a.jsx("input",{type:"number",value:c.googleReviews,onChange:k=>U("googleReviews",parseInt(k.target.value)||0),className:"mt-1 block w-full p-3 border border-gray-border rounded-lg shadow-sm focus:ring-brand-accent focus:border-brand-accent bg-[var(--bg-input)] text-[var(--text-main)]"})]})]});case 4:return a.jsxs("div",{className:"space-y-4",children:[a.jsx(sa,{label:"IICRC: Water Damage Restoration",points:5,checked:c.certifications.water,onChange:k=>ce("certifications","water",k)}),a.jsx(sa,{label:"IICRC: Fire & Smoke Restoration",points:5,checked:c.certifications.fire,onChange:k=>ce("certifications","fire",k)}),a.jsx(sa,{label:"IICRC: Mold Remediation",points:5,checked:c.certifications.mold,onChange:k=>ce("certifications","mold",k)}),a.jsx(sa,{label:"Other industry certifications",points:5,checked:c.certifications.other,onChange:k=>ce("certifications","other",k)})]});case 5:return a.jsxs("div",{className:"space-y-4",children:[a.jsx(sa,{label:"Professional website with your own domain?",points:7,checked:c.hasWebsite,onChange:k=>U("hasWebsite",k),description:"Most homeowners will judge your professionalism in the first 10 seconds on your site.",feedbackMessage:I}),a.jsx(sa,{label:"Professional email with your own domain?",points:5,checked:c.hasProEmail,onChange:k=>U("hasProEmail",k),description:"For example: info@yourcompany.com. Shows you're an established business, not a temporary operation."}),a.jsx(sa,{label:"24/7 emergency phone line?",points:3,checked:c.emergencyLine,onChange:k=>U("emergencyLine",k),description:"Water and fire losses dont wait for business hours. Dont send panicked homeowners to voicemail."}),a.jsx(sa,{label:"Active on social media?",points:1,checked:c.activeSocialMedia,onChange:k=>U("activeSocialMedia",k),description:"A simple way to show recent work and connect with your community."}),a.jsx(sa,{label:"Branded vehicles/uniforms?",points:1,checked:c.brandedVehicles,onChange:k=>U("brandedVehicles",k),description:"Turns your work trucks into mobile billboards, building brand recognition."})]});default:return null}};return a.jsx("div",{className:"font-inter bg-gray-light min-h-screen p-4 md:p-8 pb-40 md:pb-8",children:a.jsxs("div",{className:"max-w-6xl mx-auto",children:[a.jsxs("div",{className:"mb-8 text-center animate-fade-in",style:{animationDuration:"0.6s"},children:[a.jsx("img",{src:"https://restorationexpertise.com/wp-content/uploads/2025/11/restorationexpertise_logo_s.webp",alt:"Restoration Expertise Logo",className:"mx-auto mb-4 w-full max-w-[140px] md:max-w-[180px]"}),a.jsx("h1",{className:"font-sora text-3xl md:text-4xl font-bold text-charcoal",children:"Credibility Assessment"})]}),a.jsxs("div",{className:"mb-8 hidden md:block",children:[a.jsx("div",{className:"flex justify-between mb-2",children:Ga.map((I,k)=>a.jsx("div",{className:"text-center w-1/6",children:a.jsx("div",{className:`text-xs md:text-sm font-semibold ${i>=k?"text-brand-accent-dark":"text-gray-400"}`,children:I})},I))}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:a.jsx("div",{className:"bg-brand-accent h-2.5 rounded-full transition-all duration-300",style:{width:`${(i+1)/Ga.length*100}%`}})})]}),a.jsxs("div",{className:"flex flex-col md:flex-row md:mt-0",children:[a.jsxs("div",{className:"w-full md:flex-1 bg-white p-6 sm:p-8 rounded-2xl shadow-lg border border-gray-border overflow-hidden",children:[a.jsx("div",{className:"flex justify-between items-start mb-6",children:a.jsxs("div",{children:[a.jsxs("h2",{className:"font-sora text-2xl font-bold text-charcoal mb-1",children:["Step ",i+1,": ",Ga[i]]}),a.jsx("p",{className:"text-gray",children:"Complete this section to see your score update."})]})}),a.jsx("div",{className:`mt-8 ${b}`,children:J()},N)]}),a.jsx("div",{className:"hidden md:block mt-6 md:mt-0 md:w-64",children:a.jsx(Rb,{score:M.total,breakdown:M})})]}),a.jsxs("div",{className:"mt-8 hidden md:flex justify-between items-center",children:[a.jsx("button",{onClick:z,className:"py-3 px-6 bg-white text-charcoal font-semibold rounded-lg shadow-md border border-gray-border hover:bg-gray-100 transition-colors",children:"Back"}),a.jsx("button",{onClick:T,disabled:!se(),className:`py-3 px-8 font-bold text-lg rounded-lg shadow-lg transition-transform transform ${se()?"bg-brand-accent text-charcoal hover:bg-brand-accent-dark hover:scale-105":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:i===Ga.length-1?"Finish & See Results":"Continue"})]}),a.jsxs("div",{className:"md:hidden",children:[a.jsx(C1,{step:i,score:M.total,onScoreClick:()=>g(!0),onBack:z,onNext:T,canProceed:se()}),a.jsx(A1,{isOpen:m,onClose:()=>g(!1),score:M.total,breakdown:M})]})]})})},_s=({tier:r,price:s,pricePeriod:i,features:o,popular:c,onSelect:u,spotsRemaining:h,buttonLabel:p,disabled:m,disabledText:g})=>{const b=r==="Founding Member",w=`
    w-full p-6 border rounded-2xl flex flex-col transition-all duration-300
    ${b?"bg-gradient-to-br from-gold-dark to-founding-gold text-white border-founding-gold shadow-2xl scale-105":"bg-white text-charcoal border-gray-border shadow-lg"}
    ${!b&&!m&&"transform hover:-translate-y-2"}
    ${c&&!b?"border-gold border-2":""}
  `,N=p||(b?"Claim Spot":"Select");return a.jsxs("div",{className:w,children:[c&&!b&&a.jsx("div",{className:"absolute -top-4 left-1/2 -translate-x-1/2 bg-gold text-charcoal px-4 py-1 rounded-full text-sm font-bold",children:" POPULAR"}),b&&a.jsx("div",{className:"absolute -top-4 left-1/2 -translate-x-1/2 bg-white text-charcoal px-4 py-1 rounded-full text-sm font-bold",children:" LIMITED"}),a.jsx("h3",{className:`font-sora text-2xl font-bold text-center mb-2 ${b?"text-white":"text-charcoal"}`,children:r}),a.jsxs("div",{className:"text-center mb-6",children:[a.jsx("span",{className:`font-sora text-5xl font-bold ${b?"text-white":"text-charcoal"}`,children:s}),a.jsx("span",{className:`text-lg ml-1 ${b?"text-gold-light":"text-gray"}`,children:i})]}),a.jsx("ul",{className:"space-y-3 mb-8 flex-grow",children:o.map((S,v)=>a.jsxs("li",{className:"flex items-start",children:[a.jsx("svg",{className:`w-5 h-5 mr-2 flex-shrink-0 mt-0.5 ${b?"text-gold-light":"text-success"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),a.jsx("span",{className:b?"text-gray-200":"text-charcoal",children:S})]},v))}),b&&h!==void 0&&a.jsxs("div",{className:"text-center mb-4 font-bold text-white bg-white/20 rounded-md py-1",children:[" ",h,"/",25," remaining"]}),a.jsxs("button",{onClick:u,disabled:m,className:`w-full py-3 px-6 font-bold text-lg rounded-lg transition-transform
          ${b?"bg-white text-charcoal hover:bg-gray-200":"bg-gold text-charcoal hover:bg-gold-light"}
          ${m?"opacity-60 cursor-not-allowed":"transform hover:scale-105"}
        `,children:[N," ",!m&&""]}),m&&g&&a.jsx("p",{className:"text-center text-xs mt-3 text-gray",children:g})]})},R1=({isOpen:r,onClose:s,onClaim:i})=>r?a.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4 animate-fade-in",onClick:s,children:[a.jsx("style",{children:`
                @keyframes fade-in { from { opacity: 0; } to { opacity: 1; } }
                @keyframes slide-up { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
                .animate-fade-in { animation: fade-in 0.3s ease-out; }
                .animate-slide-up { animation: slide-up 0.4s ease-out; }
            `}),a.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto p-8 relative animate-slide-up",onClick:o=>o.stopPropagation(),children:[a.jsx("button",{onClick:s,className:"absolute top-4 right-4 text-gray hover:text-charcoal",children:a.jsx(wt,{className:"w-8 h-8"})}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-3xl mb-2",children:""}),a.jsx("h2",{className:"font-sora text-3xl font-bold text-charcoal mb-2",children:"FOUNDING MEMBER INVITATION"}),a.jsx("p",{className:"text-gray text-lg mb-6",children:"You're among the first to qualify. Claim your legacy position now."})]}),a.jsx("hr",{className:"border-gray-border my-6"}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-sora text-xl font-bold text-charcoal mb-4",children:"Exclusive Founding Member Benefits:"}),a.jsx("ul",{className:"space-y-3 text-charcoal",children:["Founding Member Seal (exclusive design, never offered again)","Enhanced profile (logo, gallery, detailed services, CTA buttons)","Verified listing on RestorationExpertise.com with SEO backlink","Lifetime pricing lock at $229 per month (offer disappears after launch)","Private community access (Facebook group + resources)","Direct line to team (priority support, early access to new features)","Priority SEO backlink placement","Yearly SEO blog post","99 Steps Restoration Success Blueprint + updates (included)","Annual re-verification included"].map(o=>a.jsxs("li",{className:"flex items-start",children:[a.jsx("svg",{className:"w-5 h-5 mr-3 text-success flex-shrink-0 mt-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),a.jsx("span",{children:o})]},o))})]}),a.jsxs("div",{className:"mt-8 bg-gray-light p-6 rounded-xl border border-gray-border text-center",children:[a.jsx("p",{className:"font-sora text-3xl font-bold text-charcoal mt-1",children:"Founding Member Rate: $229/month"}),a.jsx("p",{className:"text-gray mt-1",children:"This lifetime rate is locked in and will never increase."})]}),a.jsxs("p",{className:"text-center text-warning font-bold mt-6",children:[" ",oo," spots remaining | Offer ends 12/31/2025"]}),a.jsxs("div",{className:"mt-8 flex flex-col items-center space-y-4",children:[a.jsx("button",{onClick:i,className:"w-full max-w-md py-4 px-8 bg-gold text-charcoal font-bold text-xl rounded-lg shadow-lg hover:bg-gold-light transition-transform transform hover:scale-105",children:"Secure My Founding Member Spot "}),a.jsx("button",{onClick:s,className:"text-gray font-semibold hover:underline",children:"No thanks, show me regular pricing"})]})]})]}):null,O1=No.CHECKOUT,D1=async(r,s="Founding Member")=>{const i={intendedTier:s};typeof r<"u"&&r!==null&&(i.assessmentId=r);const o=await fetch(O1,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)});if(!o.ok){const u=await o.text();throw new Error(`Failed to initiate checkout. Status: ${o.status}. Message: ${u}`)}const c=await o.json();if(!c.url)throw new Error("Checkout session did not return a redirect URL.");window.location.href=c.url},lx="restorationexpertise:last-plan",ox=({score:r})=>{const[s,i]=_.useState(0);_.useEffect(()=>{let h;const m=performance.now(),g=b=>{const w=b-m,N=Math.min(w/1500,1);i(Math.round(N*r)),N<1&&(h=requestAnimationFrame(g))};return h=requestAnimationFrame(g),()=>{cancelAnimationFrame(h)}},[r]);const o=h=>h<45?"text-error":h<60?"text-warning":h>=70?"text-success":"text-gold",c=2*Math.PI*55,u=c-s/100*c;return a.jsxs("div",{className:"relative w-40 h-40",children:[a.jsxs("svg",{className:"w-full h-full",viewBox:"0 0 120 120",children:[a.jsx("circle",{className:"text-gray-200",strokeWidth:"10",stroke:"currentColor",fill:"transparent",r:"55",cx:"60",cy:"60"}),a.jsx("circle",{className:o(r),strokeWidth:"10",strokeDasharray:c,strokeDashoffset:u,strokeLinecap:"round",stroke:"currentColor",fill:"transparent",r:"55",cx:"60",cy:"60",style:{transform:"rotate(-90deg)",transformOrigin:"50% 50%",transition:"stroke-dashoffset 1.5s ease-out"}})]}),a.jsxs("div",{className:`absolute inset-0 flex flex-col items-center justify-center font-sora font-bold ${o(r)}`,children:[a.jsx("span",{className:"text-5xl",children:s}),a.jsx("span",{className:"text-lg -mt-1",children:"/ 100"})]})]})},cx=({opportunities:r})=>{if(r.length===0)return a.jsx("div",{className:"max-w-5xl mx-auto mt-12 animate-slide-up",style:{animationDelay:"600ms"},children:a.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-xl border border-gray-border",children:[a.jsx("h2",{className:"font-sora text-3xl font-bold text-charcoal mb-4 text-center",children:"Top Opportunities"}),a.jsxs("div",{className:"flex items-center justify-center gap-3 bg-success/10 p-4 rounded-lg",children:[a.jsx(Gt,{className:"w-8 h-8 text-success shrink-0"}),a.jsx("p",{className:"text-lg font-semibold text-green-800",children:"Youve checked off every major credibility signal in our model. Strong work!"})]})]})});const s={Operational:"bg-blue-100 text-blue-800",Licensing:"bg-indigo-100 text-indigo-800",Feedback:"bg-green-100 text-green-800",Digital:"bg-purple-100 text-purple-800",Certifications:"bg-yellow-100 text-yellow-800"},i={"Quick win":"border-success text-success","Deep work":"border-gray-400 text-gray-600"};return a.jsx("div",{className:"max-w-5xl mx-auto mt-12 animate-slide-up",style:{animationDelay:"600ms"},children:a.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-xl border border-gray-border",children:[a.jsx("h2",{className:"font-sora text-3xl font-bold text-charcoal mb-6 text-center",children:"Your Top 3 Opportunities"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:r.map(o=>a.jsxs("div",{className:"bg-gray-light/50 p-6 rounded-xl border border-gray-border flex flex-col",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[a.jsx("span",{className:`px-2 py-0.5 text-xs font-bold rounded-full ${s[o.category]}`,children:o.category}),a.jsx("span",{className:`px-2 py-0.5 text-xs font-bold rounded-full border ${i[o.type]}`,children:o.type})]}),a.jsx("h3",{className:"font-bold text-lg text-charcoal leading-tight flex-grow",children:o.label}),a.jsx("p",{className:"text-sm text-gray-dark mt-2",children:o.description})]},o.id))})]})})},M1=({tier:r,onClose:s})=>r?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4 animate-fade-in",onClick:s,children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md max-h-[90vh] overflow-y-auto p-8 relative animate-slide-up",onClick:i=>i.stopPropagation(),children:[a.jsx("button",{onClick:s,className:"absolute top-4 right-4 text-gray hover:text-charcoal",children:a.jsx(wt,{className:"w-8 h-8"})}),a.jsx("div",{className:"text-center",children:a.jsxs("h2",{className:"font-sora text-3xl font-bold text-charcoal mb-4",children:[r.name," Benefits"]})}),a.jsx("ul",{className:"space-y-3 text-charcoal",children:r.features.map((i,o)=>a.jsxs("li",{className:"flex items-start",children:[a.jsx("svg",{className:"w-5 h-5 mr-3 text-success flex-shrink-0 mt-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),a.jsx("span",{children:i})]},o))}),a.jsx("div",{className:"mt-8 text-center",children:a.jsx("button",{onClick:s,className:"py-2 px-8 bg-gold text-charcoal font-bold rounded-lg shadow-md hover:bg-gold-light",children:"Close"})})]})}):null,U1=({result:r,onRetake:s,onJoin:i})=>{const{total:o,grade:c,isEligibleForCertification:u,eligibilityReasons:h,opportunities:p}=r,[m,g]=_.useState(!1),[b,w]=_.useState(null);_.useEffect(()=>{if(u){const v=setTimeout(()=>{g(!0)},3e3);return()=>clearTimeout(v)}},[u]);const N=async()=>{try{typeof window<"u"&&window.localStorage.setItem(lx,"Founding Member"),await D1(r.id,"Founding Member")}catch(v){typeof window<"u"&&window.localStorage.removeItem(lx),console.error("Failed to start Stripe Checkout",v),alert("We were unable to start checkout. Please try again or contact support.")}},S=()=>{g(!1),N().catch(()=>{})};if(u){const v=o>=80?"Premier Restoration Professional":"Certified Restoration Professional",E=`${c} ${v}`;return a.jsxs("div",{className:"min-h-screen bg-gray-light font-inter p-4 md:p-8",children:[a.jsx(R1,{isOpen:m,onClose:()=>g(!1),onClaim:S}),a.jsxs("div",{className:"bg-gradient-to-br from-success to-green-700 text-white text-center py-12 px-4 rounded-t-2xl animate-slide-up",children:[a.jsx("div",{className:"text-5xl mb-4",children:""}),a.jsx("h1",{className:"font-sora text-4xl font-bold",children:"Congratulations! You're Eligible for Certification"}),a.jsxs("p",{className:"text-lg mt-2",children:["Your Professional Credibility Index Score Qualifies You as a ",a.jsx("span",{className:"font-bold",children:E})]})]}),a.jsx("div",{className:"max-w-5xl mx-auto -mt-8 animate-slide-up",style:{animationDelay:"200ms"},children:a.jsxs("div",{className:"bg-white p-6 md:p-10 rounded-2xl shadow-xl border border-gray-border flex flex-col items-center",children:[a.jsx(ox,{score:o}),a.jsx("h2",{className:"font-sora text-2xl font-bold text-charcoal mt-6",children:"Your Score Breakdown"}),a.jsx("div",{className:"w-full max-w-md mt-4 text-center",children:a.jsx("p",{className:"text-gray",children:"This score reflects your commitment to professional standards, customer satisfaction, and industry excellence."})})]})}),a.jsx(cx,{opportunities:p}),a.jsxs("div",{className:"relative max-w-5xl mx-auto mt-24 mb-12",children:[a.jsx("div",{className:"absolute -top-20 md:-top-32 inset-x-0 flex justify-center pointer-events-none",children:a.jsx("img",{src:"https://restorationexpertise.com/wp-content/uploads/2025/11/restorationexpertise_badge_3d_layingtra_shadow.webp",alt:"Restoration Expertise Founding Member Badge",className:"w-60 h-auto md:w-96 drop-shadow-badge animate-float-badge hover:animate-paused pointer-events-auto"})}),a.jsx("div",{className:"p-8 pt-40 md:pt-64 bg-gradient-to-r from-gold-dark to-founding-gold rounded-2xl text-white shadow-2xl border-2 border-founding-gold",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h2",{className:"font-sora text-3xl font-bold mb-2",children:" FOUNDING MEMBER OPPORTUNITY"}),a.jsx("p",{className:"text-lg text-gold-light mb-4",children:"25 LIFETIME SPOTS ONLY"}),a.jsx("p",{className:"mb-6",children:"Lock in a lifetime rate of $229/mo. Get an exclusive Founding Member seal, priority placement, and all Gold-tier features."}),a.jsxs("div",{className:"flex items-center justify-center space-x-4 mb-6 text-xl font-bold",children:[a.jsx("span",{children:" Offer Expires: December 31, 2025"}),a.jsx("span",{className:"w-px h-6 bg-white/50"}),a.jsxs("span",{children:[" Only ",oo," spots remaining"]})]}),a.jsx("button",{onClick:S,className:"bg-white text-charcoal font-bold text-lg py-3 px-10 rounded-lg shadow-lg hover:bg-gray-200 transition-transform transform hover:scale-105",children:"CLAIM YOUR FOUNDING MEMBER SPOT "})]})})]}),a.jsx("h2",{className:"font-sora text-3xl font-bold text-charcoal text-center mb-8",children:"Choose Your Membership Tier"}),a.jsxs("div",{className:"max-w-7xl mx-auto grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 items-start",children:[a.jsx(_s,{tier:"Bronze",price:"$159",pricePeriod:"/mo",features:["Verified Badge (A+, A, or B+)","Profile page with SEO backlink","Basic directory listing","Community access","Annual re-verification included"],onSelect:()=>{},disabled:!0,buttonLabel:"Coming Soon",disabledText:"Bronze launches soon."}),a.jsx(_s,{tier:"Silver",price:"$297",pricePeriod:"/mo",features:["Everything in Bronze, plus:","Featured placement in directory","Enhanced profile (logo, gallery, CTA)","Yearly SEO blog post","Quarterly compliance check"],popular:!0,onSelect:()=>{},disabled:!0,buttonLabel:"Coming Soon",disabledText:"Silver launches soon."}),a.jsx(_s,{tier:"Gold",price:"$497",pricePeriod:"/mo",features:["Everything in Silver, plus:",'Featured in "Top Verified Experts"',"Priority SEO backlink placement","Bi-annual spotlight article","Social media spotlight (2x/year)","99-Steps Blueprint included"],onSelect:()=>{},disabled:!0,buttonLabel:"Coming Soon",disabledText:"Gold launches soon."}),a.jsx(_s,{tier:"Founding Member",price:"$229",pricePeriod:"/mo",features:["Exclusive Founding Member Seal","Lifetime price lock at $229/mo","Enhanced Profile & Priority SEO","Yearly SEO blog post","99 Steps Blueprint included","Direct line for priority support"],onSelect:S,spotsRemaining:oo})]}),a.jsx("div",{className:"text-center mt-12",children:a.jsx("button",{onClick:s,className:"text-gray font-semibold hover:underline",children:"Or, retake the assessment"})})]})}else{const v=["Verified Badge (A+, A, or B+)","Profile page with SEO backlink","Basic directory listing","Community access","Annual re-verification included"],E=["Everything in Bronze, plus:","Featured placement in directory","Enhanced profile (logo, gallery, CTA)","Yearly SEO blog post","Quarterly compliance check"],y=["Everything in Silver, plus:",'Featured in "Top Verified Experts"',"Priority SEO backlink placement","Bi-annual spotlight article","Social media spotlight (2x/year)","99-Steps Blueprint included"],C=["Exclusive Founding Member Seal","Lifetime price lock at $229/mo","Enhanced Profile & Priority SEO","Yearly SEO blog post","99 Steps Blueprint included","Direct line for priority support"];return a.jsxs("div",{className:"min-h-screen bg-gray-light font-inter p-4 md:p-8",children:[a.jsx(M1,{tier:b,onClose:()=>w(null)}),a.jsxs("div",{className:"bg-gradient-to-br from-gray-700 to-charcoal-dark text-white text-center py-12 px-4 rounded-t-2xl animate-slide-up",children:[a.jsx("h1",{className:"font-sora text-4xl font-bold",children:"Youre On Your Way!"}),a.jsxs("p",{className:"text-lg mt-2 max-w-3xl mx-auto",children:["Your current score is ",a.jsxs("span",{className:"font-bold",children:[o,"/100 (",c,")"]}),". You're not yet eligible for certification, but heres exactly what you need to improve."]})]}),a.jsxs("div",{className:"max-w-5xl mx-auto -mt-8 bg-white p-6 md:p-8 rounded-2xl shadow-xl border border-gray-border animate-slide-up",style:{animationDelay:"200ms"},children:[a.jsx("div",{className:"flex flex-col items-center",children:a.jsx(ox,{score:o})}),a.jsxs("div",{className:"mt-8",children:[a.jsx("h2",{className:"font-sora text-2xl font-bold text-charcoal text-center mb-4",children:"What You Need To Qualify"}),a.jsx("div",{className:"max-w-2xl mx-auto bg-yellow-50 border-l-4 border-warning p-6 rounded-r-lg",children:a.jsx("ul",{className:"space-y-3",children:h.map((M,T)=>a.jsxs("li",{className:"flex items-start",children:[a.jsx(_a,{className:"w-5 h-5 text-warning mr-3 mt-0.5 shrink-0"}),a.jsx("span",{className:"text-yellow-900 font-medium",children:M})]},T))})})]})]}),a.jsx(cx,{opportunities:p}),a.jsx("div",{className:"max-w-5xl mx-auto mt-24 animate-slide-up",style:{animationDelay:"400ms"},children:a.jsxs("div",{className:"bg-gradient-to-b from-white to-[#f6e9cc] rounded-xl shadow-xl border-2 border-gold text-center pt-8",children:[a.jsx("img",{src:"https://restorationexpertise.com/wp-content/uploads/2025/11/99successblueprint_3dmockup_2tr_s.webp",alt:"99-Step Restoration Success Blueprint Mockup",className:"w-4/5 md:w-3/5 mx-auto -mt-28 mb-4 drop-shadow-xl transition-all duration-300 ease-in-out transform hover:-translate-y-1 hover:drop-shadow-2xl"}),a.jsxs("div",{className:"px-8 pb-8",children:[a.jsx("h2",{className:"font-sora text-3xl font-bold text-charcoal mb-4",children:"The 99-Step Restoration Success Blueprint"}),a.jsx("p",{className:"text-gray-dark text-lg mb-6",children:"Youre missing a few key credibility signals. Our 99-Step Restoration Success Blueprint gives you a step-by-step roadmap and a live dashboard to track your progress until you qualify for certification."}),a.jsx("ul",{className:"space-y-3 mb-8 text-left inline-block",children:["Clear checklist to fix licensing, operations, and digital presence","Quick-win tasks you can tackle this week","Built-in progress tracking as you improve your score"].map(M=>a.jsxs("li",{className:"flex items-start",children:[a.jsx(Gt,{className:"w-6 h-6 text-success mr-3 shrink-0"}),a.jsx("span",{className:"text-charcoal text-lg",children:M})]},M))}),a.jsx("a",{href:"https://restorationexpertise.com/99-steps",target:"_blank",rel:"noopener noreferrer",className:"block w-full text-center py-4 px-8 bg-gold text-charcoal font-bold text-xl rounded-lg shadow-lg hover:bg-gold-light transition-transform transform hover:scale-105",children:"Get the 99-Step Blueprint & Dashboard"})]})]})}),a.jsx("p",{className:"max-w-4xl mx-auto text-center text-gray-dark mt-8 px-4",children:"Step 1: Use the Blueprint to fix your gaps. Step 2: Unlock these member benefits once you qualify."}),a.jsxs("div",{className:"text-center mt-8",children:[a.jsx("h2",{className:"font-sora text-3xl font-bold text-charcoal mb-2",children:"What Youll Unlock Once You Qualify"}),a.jsx("p",{className:"text-gray-dark mb-8",children:"Preview the benefits youll access after you meet the certification requirements."})]}),a.jsxs("div",{className:"max-w-7xl mx-auto grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 items-start",children:[a.jsx(_s,{tier:"Bronze",price:"$159",pricePeriod:"/mo",features:v,onSelect:()=>w({name:"Bronze",features:v}),buttonLabel:"Preview benefits"}),a.jsx(_s,{tier:"Silver",price:"$297",pricePeriod:"/mo",features:E,popular:!0,onSelect:()=>w({name:"Silver",features:E}),buttonLabel:"Preview benefits"}),a.jsx(_s,{tier:"Gold",price:"$497",pricePeriod:"/mo",features:y,onSelect:()=>w({name:"Gold",features:y}),buttonLabel:"Preview benefits"}),a.jsx(_s,{tier:"Founding Member",price:"$229",pricePeriod:"/mo",features:C,onSelect:()=>{},spotsRemaining:oo,buttonLabel:"Claim Spot",disabled:!0,disabledText:"Available once your business qualifies for certification."})]}),a.jsxs("div",{className:"text-center mt-16",children:[a.jsx("button",{onClick:s,className:"py-3 px-8 bg-gold text-charcoal font-bold text-lg rounded-lg shadow-lg hover:bg-gold-light transition-transform transform hover:scale-105",children:"Ive improved my business  retake the assessment"}),a.jsx("p",{className:"text-sm text-gray-dark mt-4",children:"Most contractors reach eligibility within a few weeks once they follow the Blueprint."})]})]})}},hd="restorationexpertise:last-plan",fd="restorationexpertise:last-email",ux=r=>{switch(r==null?void 0:r.toLowerCase()){case"bronze":return"bronze";case"silver":return"silver";case"gold":return"gold";case"founding-member":return"founding-member";default:return"founding-member"}},L1={bronze:{badgeText:"Bronze Member",badgeClass:"bg-yellow-900/50 text-[#CD7F32] border border-[#CD7F32]/50",ratingText:"B+ Restoration Professional",benefits:[{icon:sn,title:"Upload Your Documents",description:"Submit required documents for account verification and badge approval."},{icon:ks,title:"Join the Community",description:"Access our private community for networking and support."},{icon:_t,title:"Claim Your Badge",description:"Download your verified badge once your account is approved."},{icon:Dx,title:"Explore Resources",description:"Check out the member resources to get started."}]},silver:{badgeText:"Silver Member",badgeClass:"bg-gray-500/50 text-[#C0C0C0] border border-[#C0C0C0]/50",ratingText:"A- Restoration Specialist",benefits:[{icon:sn,title:"Upload Your Documents",description:"Submit required documents for account verification and badge approval."},{icon:ks,title:"Join the Community",description:"Access our private community for networking and support."},{icon:_t,title:"Claim Your Enhanced Badge",description:"Download your verified badge once your account is approved."},{icon:Co,title:"Explore Premium Resources",description:"Access the resource library and request your first SEO post."}]},gold:{badgeText:"Gold Member",badgeClass:"bg-gold/30 text-gold-light border border-gold/50",ratingText:"A Elite Restoration Expert",benefits:[{icon:sn,title:"Upload Your Documents",description:"Submit required documents for account verification and badge approval."},{icon:ks,title:"Join the Member's Circle",description:"Get access to our exclusive circle for Gold members."},{icon:_t,title:"Claim Your Premium Badge",description:"Download your verified badge once your account is approved."},{icon:Vd,title:"Access the 99-Steps Blueprint",description:"Start your journey to mastery with our exclusive blueprint dashboard."}]},"founding-member":{badgeText:" Founding Member",badgeClass:"fm-metallic-shine !text-transparent !bg-clip-text",ratingText:"A+ Founding Elite - Restoration Pioneer",benefits:[{icon:sn,title:"Upload Your Documents",description:"Submit required documents for account verification and badge approval."},{icon:ks,title:"Join the Founder's Circle",description:"Access our private community for direct communication and networking."},{icon:_t,title:"Claim Your Exclusive Badge",description:"Download your verified badge once your account is approved."},{icon:Eo,title:"Explore Premium Resources",description:"Access lifetime tools, exclusive content, and early feature releases."}]}},B1=()=>a.jsx("div",{className:"success-particles",children:Array.from({length:30}).map((r,s)=>a.jsx("div",{className:"success-particle",style:{left:`${Math.random()*100}%`,width:`${Math.random()*3+1}px`,height:`${Math.random()*3+1}px`,animationDelay:`${Math.random()*20}s`,animationDuration:`${Math.random()*15+10}s`}},s))}),z1=()=>{var H;const{plan:r}=M0(),s=Rs(),i=r??"founding-member",o=typeof window<"u"?window.location.search:"",u=new URLSearchParams(o||"").get("session_id");let h=null,p=null;try{const G=nt();h=G.currentUser,p=G.login}catch(G){console.warn("Auth context not available:",G)}const[m,g]=_.useState(u),[b,w]=_.useState(!1),[N,S]=_.useState(!1),[v,E]=_.useState(""),[y,C]=_.useState("idle"),[M,T]=_.useState(""),[z,U]=_.useState(""),[X,B]=_.useState(0),[se,ee]=_.useState(!1),[te,ce]=_.useState(null),J=_.useMemo(()=>{try{return ux(i)}catch(G){return console.error("Error normalizing plan:",G),"founding-member"}},[i]),I=L1[J],k=J==="founding-member",F=_.useMemo(()=>{if(console.log("[SuccessPage] Computing displayBusinessName - successData:",te),te){const K=te.business;return console.log("[SuccessPage] API returned business:",K),K||""}if(m&&b)return console.log("[SuccessPage] Still loading, showing loading state"),"";const G=(h==null?void 0:h.name)||"";return console.log("[SuccessPage] Using fallback business name:",G),G},[te,m,b,h==null?void 0:h.name]),R=_.useMemo(()=>{var K;if(console.log("[SuccessPage] Computing displayContactName - successData:",te),te){const ae=te.name;return console.log("[SuccessPage] API returned name:",ae),ae||""}if(m&&b)return console.log("[SuccessPage] Still loading, showing loading state"),"";const G=((K=h==null?void 0:h.account)==null?void 0:K.ownerName)||(h==null?void 0:h.name)||"";return console.log("[SuccessPage] Using fallback contact name:",G),G},[te,m,b,(H=h==null?void 0:h.account)==null?void 0:H.ownerName,h==null?void 0:h.name]),Y=_.useMemo(()=>m?(te==null?void 0:te.email)||null:(h==null?void 0:h.email)||z,[m,te==null?void 0:te.email,h==null?void 0:h.email,z]);_.useEffect(()=>{if(typeof window>"u")return;const G=window.localStorage.getItem(hd);if(!r&&G){const K=ux(G);s(`/success/${K}`,{replace:!0});return}window.localStorage.removeItem(hd)},[s,r]),_.useEffect(()=>{if(!(typeof window>"u"))try{const K=new URLSearchParams(window.location.search).get("session_id");if(g(K),console.log("[SuccessPage] session_id from URL:",K),K)console.log("[SuccessPage] session_id present - clearing localStorage"),window.localStorage.removeItem(fd),window.localStorage.removeItem(hd),U("");else{const ae=window.localStorage.getItem(fd);ae&&U(ae)}}catch(G){console.error("[SuccessPage] Error initializing session:",G),C("error"),T("Unable to initialize session properly")}},[]),_.useEffect(()=>{(async()=>{if(!(!m||te))try{w(!0),console.log(`[SuccessPage] Fetching success summary: ${m}`);const K=await fetch(`${No.SUCCESS_SUMMARY}?session_id=${m}`);if(K.ok){const ae=await K.json();console.log("success-summary",ae),console.log("[SuccessPage] ===== API RESPONSE ====="),console.log("[SuccessPage] Raw response:",ae),console.log("[SuccessPage] data.success:",ae.success),console.log("[SuccessPage] data.email:",ae.email),console.log("[SuccessPage] data.business:",ae.business),console.log("[SuccessPage] data.name:",ae.name),console.log("[SuccessPage] data.plan:",ae.plan),console.log("[SuccessPage] ======================="),ce(ae),console.log("[SuccessPage]  Success! Data loaded:",ae)}else console.error("[SuccessPage]  Failed to fetch success summary:",K.status,K.statusText),ce({success:!1,email:null,business:null,name:null,plan:"Founding Member"})}catch(K){console.error("[SuccessPage]  Error fetching success summary:",K),ce({success:!1,email:null,business:null,name:null,plan:"Founding Member"})}finally{w(!1)}})()},[m,te]);const ne=async(G,K=!1)=>{if(se&&!K){console.log("[SuccessPage] Magic link already sent on this page load, skipping automatic send");return}let ae=G;if(m){if(ae=(te==null?void 0:te.email)||null,!ae&&!b){C("error"),T("We're still loading your account information. Please wait a moment.");return}}else ae=G||(h==null?void 0:h.email)||z;if(!ae){C("error"),T("Please provide an email address to resend your login link.");return}if(X>0){C("error"),T(`Please wait ${X} seconds before resending.`);return}try{if(C("sending"),T("Sending a fresh magic link"),!be||!be.auth)throw new Error("Supabase client not available");const{error:ie}=await be.auth.signInWithOtp({email:ae,options:{emailRedirectTo:`${window.location.origin}/auth/callback`}});if(ie){ie.message.includes("redirect_to not allowed")?(C("error"),T(" Dev Configuration: Please add this domain to Supabase Auth  URL Configuration  Redirect URLs"),console.error("Supabase Auth redirect URL not configured:",`${window.location.origin}/auth/callback`)):ie.message.includes("rate")||ie.message.includes("429")?(C("error"),T("Too many requests, please wait a minute"),B(60)):(C("error"),T(ie.message)),console.error("Magic link error:",ie);return}C("sent"),T(`Magic link sent to ${ae}. Check your inbox and Spam/Promotions folder if you don't see it.`),B(60),ee(!0),typeof window<"u"&&!m&&(window.localStorage.setItem(fd,ae),U(ae))}catch(ie){C("error");const ue=ie instanceof Error?ie.message:"Unable to send a magic link right now. Please try again later.";T(ue),console.error("Magic link error:",ie)}};_.useEffect(()=>{try{if(m)te!=null&&te.email&&y==="idle"&&ne();else{const ae=new URLSearchParams(window.location.search).get("email")||z||Y;ae&&y==="idle"&&ne(ae)}}catch(G){console.error("Error in magic link auto-trigger:",G)}},[m,te==null?void 0:te.email,z,Y,y]),_.useEffect(()=>{if(!(typeof document>"u"))return document.body.dataset.plan=J,()=>{delete document.body.dataset.plan}},[J]),_.useEffect(()=>{if(X>0){const G=setInterval(()=>{B(K=>K-1)},1e3);return()=>clearInterval(G)}},[X]);const re=async()=>{if(!v){C("error"),T("Enter the new email address you would like to use.");return}await ne(v.trim()),S(!1),E("")},xe="Welcome to the Biggest Restoration Community Homeowners Trust",O=G=>a.jsx("div",{className:"success-page-container",children:a.jsxs("main",{className:"relative z-10 w-full max-w-4xl mx-auto",children:[a.jsxs("div",{className:"mb-8 text-center",children:[a.jsx("div",{className:"text-6xl mb-4",children:""}),a.jsx("h1",{className:"font-bold text-2xl md:text-3xl max-w-2xl mx-auto text-white",children:"Welcome to the Biggest Restoration Community Homeowners Trust"}),a.jsx("p",{className:"mt-4 text-lg md:text-xl text-gray-300",children:"Your payment was successful. You're officially a member!"})]}),a.jsx("div",{className:"mb-8",children:a.jsxs("div",{className:"w-full max-w-xl mx-auto p-6 rounded-2xl shadow-xl bg-black/20 border border-white/20",children:[a.jsx("h2",{className:"font-bold text-xl text-white mb-3",children:"Check Your Email to Log In"}),a.jsx("p",{className:"text-gray-300 mb-4",children:"We've sent a magic login link to your email. Please check your inbox and click the link to access your account."}),a.jsx("div",{className:"text-center",children:a.jsx("a",{href:"/login",className:"inline-block px-6 py-2 rounded-lg bg-blue-600 hover:bg-blue-700 text-white font-semibold",children:"Go to Login Page"})})]})}),a.jsxs("div",{className:"text-center text-gray-300",children:[a.jsxs("p",{children:["Need help? ",a.jsx("a",{className:"text-blue-400 hover:underline",href:"mailto:support@restorationexpertise.com",children:"Contact support"})]}),G&&a.jsxs("div",{className:"mt-4 p-3 bg-red-900/50 text-red-200 text-sm rounded border border-red-500/50",children:["Debug: ",G]})]})]})});try{return a.jsxs("div",{className:"success-page-container",children:[a.jsx(B1,{}),k&&a.jsx("div",{className:"fm-light-ray"}),a.jsxs("main",{className:"relative z-10 w-full max-w-4xl mx-auto animate-fade-in-up",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx(Cw,{className:"text-gold"}),k?a.jsx("h1",{className:"font-playfair text-2xl md:text-3xl font-bold max-w-2xl mx-auto fm-h1",children:xe.split("").map((G,K)=>a.jsx("span",{className:"fm-metallic-shine",style:{animationDelay:`${.5+K*.02}s`,transform:"translateY(20px)"},children:G===" "?"":G},K))}):a.jsx("h1",{className:"font-playfair text-2xl md:text-3xl font-bold max-w-2xl mx-auto text-white",children:xe}),a.jsx("p",{className:"mt-4 text-lg md:text-xl text-gray-300",children:"Your payment was successful. You're officially a member!"})]}),a.jsx("div",{className:"mb-8 animate-fade-in-up",style:{animationDelay:"1.2s"},children:a.jsxs("div",{className:"w-full max-w-xl mx-auto p-6 rounded-2xl shadow-xl fm-glass-card border border-gold/20",children:[a.jsx("h2",{className:"font-bold text-lg text-white mb-4",children:" Your Plan Summary"}),a.jsxs("div",{className:"space-y-2 text-left text-sm",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-400",children:"Plan:"})," ",a.jsx("span",{className:`font-semibold ${k?"fm-metallic-shine !text-transparent !bg-clip-text":"text-white"}`,children:I.badgeText})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-400",children:"Rating:"})," ",a.jsx("span",{className:"font-semibold text-white",children:I.ratingText})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-400",children:"Business:"})," ",a.jsx("span",{className:"font-semibold text-white",children:F})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-400",children:"Contact:"})," ",a.jsx("span",{className:"font-semibold text-white",children:R})]})]})]})}),a.jsx("div",{className:"mb-16 animate-fade-in-up",style:{animationDelay:"1.4s"},children:a.jsxs("div",{className:"w-full max-w-xl mx-auto p-6 md:p-8 rounded-2xl shadow-xl fm-glass-card border border-gold/20",children:[a.jsx("h2",{className:"font-bold text-xl text-white mb-3",children:"Check Your Email to Log In"}),a.jsx("p",{className:"text-gray-300",children:"We've sent a magic login link to your personal dashboard. Please check your inbox and click the link to access your account."}),a.jsxs("div",{className:"mt-4 bg-black/20 p-3 rounded-lg text-center text-white",children:[" Sent to: ",a.jsx("strong",{children:m?Y||(b?"checking...":(te==null?void 0:te.success)===!1?"We couldn't load your data yet. Please contact support.":"We're preparing your access email..."):m===null?a.jsx("span",{className:"text-yellow-400",children:"Missing session id"}):Y||"checking..."})]}),N?a.jsxs("div",{className:"mt-4 space-y-2 animate-fade-in",children:[a.jsx("input",{type:"email",value:v,onChange:G=>E(G.target.value),placeholder:"Enter new email address",className:"w-full p-2 rounded bg-white/10 text-white border border-gray-500 focus:ring-gold focus:border-gold"}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx("button",{onClick:()=>S(!1),className:"py-1 px-3 text-xs rounded bg-gray-600 hover:bg-gray-500 text-white",children:"Cancel"}),a.jsx("button",{onClick:re,className:"py-1 px-3 text-xs rounded bg-gold text-charcoal font-semibold hover:bg-gold-light",children:"Update Email"})]})]}):a.jsxs("div",{className:"mt-4 text-center text-sm space-x-4",children:[a.jsx("button",{onClick:()=>S(!0),className:"font-semibold text-gray-400 hover:text-white hover:underline",children:"Wrong email? Update it here"}),a.jsx("button",{onClick:()=>ne(void 0,!0),disabled:X>0,className:`font-semibold ${X>0?"text-gray-600 cursor-not-allowed":"text-gray-400 hover:text-white hover:underline"}`,children:X>0?`Resend in ${X}s`:"Resend login link"})]}),y!=="idle"&&a.jsx("div",{className:`mt-4 rounded-lg border px-3 py-2 text-sm ${y==="sent"?"border-success/40 bg-success/10 text-success":y==="error"?"border-error/40 bg-error/10 text-error":"border-white/30 bg-white/10 text-white"}`,children:M})]})}),a.jsxs("div",{className:"mt-16",children:[a.jsx("h2",{className:"font-playfair text-3xl font-bold mb-8 text-white",children:"What's Next?"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 stagger-in",children:I.benefits.map((G,K)=>{const ae=G.icon;return a.jsxs("div",{className:"p-6 rounded-2xl shadow-lg transition-transform transform hover:-translate-y-1 fm-glass-card",style:{animationDelay:`${1.6+K*.15}s`},children:[a.jsx("div",{className:"inline-block p-3 rounded-full mb-4 bg-white/10 text-gold",children:a.jsx(ae,{className:"w-6 h-6"})}),a.jsx("h3",{className:"font-bold text-lg mb-2 text-white",children:G.title}),a.jsx("p",{className:"text-sm text-gray-300",children:G.description})]},G.title)})})]}),a.jsx("div",{className:"mt-16 text-center text-gray-300",children:a.jsxs("div",{className:"w-full max-w-md mx-auto p-6 rounded-2xl shadow-xl fm-glass-card border border-gold/20",children:[a.jsx("h3",{className:"font-bold text-lg text-white mb-3",children:"Need Help?"}),a.jsx("p",{className:"text-sm text-gray-300 mb-4",children:"Our support team is here to help you get started with your new membership."}),a.jsx("a",{href:"mailto:hi@restorationexpertise.com",className:"inline-block px-6 py-3 rounded-lg bg-gold text-charcoal font-semibold hover:bg-gold-light transition-colors",children:"Contact Support"})]})})]})]})}catch(G){return console.error("Critical error in SuccessPage:",G),O(G instanceof Error?G.message:"Unknown rendering error")}},q1=()=>{const r=Rs();return _.useEffect(()=>{(()=>{be.auth.onAuthStateChange((i,o)=>{console.log("Auth state change:",i,o),i==="SIGNED_IN"?(console.log("User signed in successfully, redirecting to dashboard"),r("/dashboard",{replace:!0})):i==="SIGNED_OUT"?(console.log("User signed out"),r("/",{replace:!0})):(console.log("Other auth event:",i),setTimeout(()=>{r("/",{replace:!0})},3e3))})})()},[r]),a.jsx("div",{className:"min-h-screen bg-gray-light flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-brand-accent mx-auto mb-4"}),a.jsx("h2",{className:"text-xl font-semibold text-charcoal mb-2",children:"Completing Sign In..."}),a.jsx("p",{className:"text-gray",children:"Please wait while we log you in to your account."})]})})},sh=()=>a.jsx("div",{className:"flex min-h-screen items-center justify-center bg-[var(--bg-main)] text-[var(--text-muted)]",children:a.jsx("span",{className:"animate-pulse text-lg",children:"Connecting to Supabase..."})}),dx=()=>{const{session:r,isAdmin:s,loading:i}=nt();return i?a.jsx(sh,{}):r?a.jsx(ir,{to:s?"/admin":"/member/dashboard",replace:!0}):a.jsx(v1,{})},P1=()=>{const{session:r,loading:s}=nt();return s?a.jsx(sh,{}):r?a.jsx(KN,{}):a.jsx(ir,{to:"/login",replace:!0})},I1=()=>{const{session:r,isAdmin:s,loading:i}=nt();return i?a.jsx(sh,{}):r?s?a.jsx(x1,{}):a.jsx(ir,{to:"/admin/login",replace:!0}):a.jsx(ir,{to:"/admin/login",replace:!0})},$1=()=>{const r=Rs(),{session:s,currentUser:i}=nt(),[o,c]=_.useState(null),[u,h]=_.useState(!1),p=(v,E)=>{if(E)return"Founding Member";switch(v){case"A+":case"A":return"Gold";case"B+":return"Silver";default:return"Bronze"}},m=async v=>{const{data:E,error:y}=await be.from("profiles").select("id, last_assessment_id, last_pci_score").eq("id",v).maybeSingle();if(y)throw y;if(E)return E;const{data:C,error:M}=await be.from("profiles").insert({id:v}).select("id, last_assessment_id, last_pci_score").single();if(M)throw M;return C},g=async(v,E,y)=>{const{error:C}=await be.from("profiles").update({last_assessment_id:E,last_pci_score:y}).eq("id",v);if(C)throw C},b=async(v,E,y)=>{const{error:C}=await be.from("memberships").insert({profile_id:v,tier:E,status:"pending",verification_status:"pending",badge_rating:null,assessment_id:y});if(C)throw C},w=async v=>{var X,B,se,ee,te,ce,J,I;if(u)return;const E=v.isEligibleForCertification?"eligible":"not_eligible",y=p(v.grade,v.isEligibleForCertification),C=(X=v.emailEntered)==null?void 0:X.trim(),T=(C&&C.length>0?C:void 0)??((B=s==null?void 0:s.user)==null?void 0:B.email)??(i==null?void 0:i.email)??null;if(!T){console.error("No email available from assessment or session - this should not happen");return}h(!0);let z=null;if((se=s==null?void 0:s.user)!=null&&se.id)try{z=await m(s.user.id)}catch(k){console.error("Failed to load or create profile",k),alert("We will continue with your assessment, but updating your profile may not be complete.")}const U=k=>{if(typeof k=="number")return isNaN(k)?0:Math.round(k);if(typeof k=="string"){const F=parseFloat(k);return isNaN(F)?0:Math.round(F)}return 0};try{const k={user_id:((ee=s==null?void 0:s.user)==null?void 0:ee.id)??null,profile_id:(z==null?void 0:z.id)??null,email_entered:T,full_name_entered:((te=v.fullNameEntered)==null?void 0:te.trim())||null,state:((ce=v.state)==null?void 0:ce.trim())||null,city:((J=v.cityEntered)==null?void 0:J.trim())||null,answers:v.answers,total_score:U(v.total),operational_score:U(v.operational),licensing_score:U(v.licensing),feedback_score:U(v.feedback),certifications_score:U(v.certifications),digital_score:U(v.digital),scenario:E,pci_rating:v.grade,intended_membership_tier:y};console.log("Saving assessment (App.tsx) with normalized payload:",{keys:Object.keys(k),types:Object.entries(k).reduce((re,[xe,O])=>(re[xe]=typeof O,re),{})});const{data:F,error:R}=await be.from("assessments").insert(k).select().single();if(R)throw console.error("Assessment insert failed:",R),console.error("Failed payload details:",{payload:k,payloadKeys:Object.keys(k),payloadTypes:Object.entries(k).reduce((re,[xe,O])=>(re[xe]=typeof O,re),{})}),R;const Y=F;if(z!=null&&z.id&&Y.id!=null){try{await g(z.id,Y.id,v.total)}catch(re){console.error("Failed to update profile with assessment",re),alert("We saved your assessment but could not update your profile.")}if(v.isEligibleForCertification&&y)try{await b(z.id,y,Y.id)}catch(re){console.error("Failed to create pending membership",re),alert("We saved your assessment but could not update your membership status.")}}const ne={...v,answers:Y.answers??v.answers,operational:Y.operational_score??v.operational,licensing:Y.licensing_score??v.licensing,feedback:Y.feedback_score??v.feedback,certifications:Y.certifications_score??v.certifications,digital:Y.digital_score??v.digital,total:Y.total_score??v.total,grade:Y.pci_rating??v.grade,isEligibleForCertification:Y.scenario?Y.scenario==="eligible":v.isEligibleForCertification,scenario:Y.scenario??E,pciRating:Y.pci_rating??v.grade,intendedMembershipTier:Y.intended_membership_tier??y,id:Y.id,createdAt:Y.created_at,userId:Y.user_id??((I=s==null?void 0:s.user)==null?void 0:I.id)??null,emailEntered:Y.email_entered??T,fullNameEntered:Y.full_name_entered??v.fullNameEntered,state:Y.state??v.state,cityEntered:Y.city??v.cityEntered};c(ne),r("/results")}catch(k){console.error("Failed to save assessment result",k),alert("We had trouble saving your assessment. Please try again.")}finally{h(!1)}},N=()=>{c(null),r("/assessment")},S=()=>{r("/")};return a.jsxs(Q0,{children:[a.jsx(oa,{path:"/",element:a.jsx(dx,{})}),a.jsx(oa,{path:"/login",element:a.jsx(dx,{})}),a.jsx(oa,{path:"/admin/login",element:a.jsx(y1,{})}),a.jsx(oa,{path:"/assessment",element:a.jsx(T1,{onComplete:w})}),a.jsx(oa,{path:"/results",element:o?a.jsx(U1,{result:o,onRetake:N,onJoin:S}):a.jsx(ir,{to:"/assessment",replace:!0})}),a.jsx(oa,{path:"/success/:plan",element:a.jsx(z1,{})}),a.jsx(oa,{path:"/auth/callback",element:a.jsx(q1,{})}),a.jsx(oa,{path:"/member/dashboard",element:a.jsx(P1,{})}),a.jsx(oa,{path:"/admin/*",element:a.jsx(I1,{})}),a.jsx(oa,{path:"*",element:a.jsx(ir,{to:"/",replace:!0})})]})},H1=()=>a.jsx(xN,{children:a.jsx($1,{})}),Ob=document.getElementById("root");if(!Ob)throw new Error("Could not find root element to mount to");const V1=n0.createRoot(Ob);V1.render(a.jsx(xi.StrictMode,{children:a.jsx(bw,{children:a.jsx(iN,{children:a.jsx(H1,{})})})}));
//# sourceMappingURL=index-BLgIUliq.js.map
